<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE bs_bugs SYSTEM "http://developer.berlios.de/export/bs_bugs_0.1.dtd">
<bugs>
    <bug id='18741'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='62911' name='klaxian'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1348931838</date>
        <summary>Sigma 50mm f/1.4 Not Detected Correctly</summary>
        <details>The  Sigma 50mm f/1.4 lens is detected as a Sigma 18-50mm instead.</details>
        <close_date>1352319566</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45380'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='81967'>
            <field_name>details</field_name>
            <old_value>Ok, I tried exiv2 and it confirms that the bug is inside exiv2.

$ exiv2 5D3M8497.JPG -pt |grep Lens
Exif.CanonCs.LensType                        Short       1  Sigma 18-50mm f/2.8 Macro
Exif.CanonCs.Lens                            Short       3  50.0 mm
Exif.Canon.LensModel                         Ascii      74  50mm70mm f/2.8L USM&amp;#65533;&amp;#65533;&amp;#65533;
Exif.Photo.LensSpecification                 Rational    4  50/1 50/1 0/1 0/1
Exif.Photo.LensModel                         Ascii       5  50mm
Exif.Photo.LensSerialNumber                  Ascii      11  0000000000
</old_value>
            <mod_by>36447</mod_by>
            <date>1349465914</date>
        </history>
        <history id='81968'>
            <field_name>details</field_name>
            <old_value>So what is the next step?  Do we need to open a third bug report with Exiv2?</old_value>
            <mod_by>62911</mod_by>
            <date>1349527989</date>
        </history>
        <history id='81969'>
            <field_name>details</field_name>
            <old_value>Yes, since the bug is in Exiv2 it should be reported there. Make sure to test with the latest version of Exiv2 before you report it to make sure it is not fixed already.</old_value>
            <mod_by>61570</mod_by>
            <date>1349581417</date>
        </history>
        <history id='81970'>
            <field_name>details</field_name>
            <old_value>Issue created for exiv2:
http://dev.exiv2.org/issues/854</old_value>
            <mod_by>62911</mod_by>
            <date>1349584115</date>
        </history>
        <history id='81950'>
            <field_name>details</field_name>
            <old_value>I am using Darktable (daily PPA from git) with lensfun 0.2.5.  I already tried to report this problem to the Darktable developers and they directed me to report it here instead.

It appears there is some error in the EXIF reading because the Sigma 18-50mm is what's shown but that is not accurate.  Manually switching to the Sigma 50mm f/1.4 does seem to apply the right corrections, but that lens isn't detected properly from the EXIF data.

Other applications also seem to have trouble detecting this lens for some reason.  Eye of Mate (aka. eog) reports &quot;Sigma 15-30mm f/3.5-4.5 EX DG Aspherical&quot; and Aftershot Pro gets it wrong as well.  No two are the same though.

Exiftool output from a JPG straight from the camera is here:
http://pastebin.com/p0AXtsNP

Note the &quot;Lens ID&quot; tag is correct in the JPG so it must be a problem reading the EXIF data.

Let me know if you need more information.</old_value>
            <mod_by>62911</mod_by>
            <date>1349408067</date>
        </history>
        <history id='82114'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1352319566</date>
        </history>
        <history id='82115'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1352319566</date>
        </history>
        <history id='82116'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1352319566</date>
        </history>
        <history id='82117'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1352319566</date>
        </history>
        <history id='81951'>
            <field_name>details</field_name>
            <old_value>I see... thanks for your further informations.

Lensfun itself is not doing any exif reading and decoding. So in my opinion the problem is in the decoding of the lens ID inside the different applications. Even exiftool is not able to show the correct lens.

So I'm sorry I can not help and have to give this back to the darktable developers or to the developers of the underlying exif library (I assume this is Exiv2). Maybe leave a link to the other bug reports or mailing list threads from there, so this gets connected.</old_value>
            <mod_by>36447</mod_by>
            <date>1349417470</date>
        </history>
        <history id='81952'>
            <field_name>details</field_name>
            <old_value>Actually, exiftool did see the correct lens.  Make sure you are looking at the &quot;Lens ID&quot; field, not &quot;Lens Type&quot;.  Since the exif appears to be read correctly (at least by exiftool), do you still think this should go back to the Darktable folks?

Yes, they use Exiv2.</old_value>
            <mod_by>62911</mod_by>
            <date>1349418517</date>
        </history>
        <history id='81956'>
            <field_name>details</field_name>
            <old_value>exiftool and exiv2 are totally different applications. The bug seems to be in exiv2 library. Please provide a JPG file so that I can look at the output of exiv2 from that image, not exiftool.</old_value>
            <mod_by>12372</mod_by>
            <date>1349424719</date>
        </history>
        <history id='81936'>
            <field_name>details</field_name>
            <old_value>Which application do you use?  And is the lens correctly labeled and shown and only mapped to the wrong database entry or is there already an error in the exif reading?</old_value>
            <mod_by>36447</mod_by>
            <date>1349283219</date>
        </history>
        <history id='81965'>
            <field_name>details</field_name>
            <old_value>Here is a link to a test image:
https://picasaweb.google.com/lh/photo/E66PIjnxab1OJZN2J8bzxD83_X64hUS1sRXX-bXMozM?feat=directlink

You can download the original version from Google as well.  It seems whatever EXIF parser that Picasa is using gets the lens right as well.  Let me know if you need anything else.  Thanks.</old_value>
            <mod_by>62911</mod_by>
            <date>1349455043</date>
        </history>
        <task_dependency id='45203'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18910'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1362001247</date>
        <summary>Vignetting interpolation may fail very close to data points</summary>
        <details>Interpolation may fail if you try it very close to (but not exactly on) the data points in the XML file.  This happens seldomly but it happens.

See http://developer.berlios.de/patch/index.php?func=detailpatch&amp;patch_id=3425&amp;group_id=9034 for the patch.
</details>
        <close_date>1362913321</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45769'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82951'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1362913321</date>
        </history>
        <history id='82952'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362913321</date>
        </history>
        <history id='82953'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362913321</date>
        </history>
        <history id='82954'>
            <field_name>details</field_name>
            <old_value>Thanks, your patch is applied!</old_value>
            <mod_by>36447</mod_by>
            <date>1362913321</date>
        </history>
        <history id='82955'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1362913321</date>
        </history>
        <task_dependency id='45592'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19240'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>1</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1388227482</date>
        <summary>Geometry transform only works for aspect ratio 3:2</summary>
        <details>For aspect ratios other then 3:2, you cannot convert properly from fisheye to rectilinear, for example.</details>
        <close_date>1388227843</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46485'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84212'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1388227843</date>
        </history>
        <history id='84213'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1388227843</date>
        </history>
        <history id='84214'>
            <field_name>details</field_name>
            <old_value>Fixed in SVN 416.</old_value>
            <mod_by>2378</mod_by>
            <date>1388227843</date>
        </history>
        <history id='84215'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1388227843</date>
        </history>
        <task_dependency id='46308'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19250'>
        <group_id>9034</group_id>
        <status_id>1</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61037' name='tmodes'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1389546917</date>
        <summary>Runtime installed on wrong place</summary>
        <details>All runtime files are now installed in the wrong position.
All DLL (lensfun.dll, auxfun.dll, glib-2.dll) are now installed in INSTALLPATH/share/lensfun/bin instead of INSTALLPATH/bin. This is against all conventions where all runtime files (exe, dll) are installed directly in bin (and not deep nested under share).</details>
        <close_date>0</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46618'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84305'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1389559174</date>
        </history>
        <history id='84306'>
            <field_name>details</field_name>
            <old_value>We changed the path to install example programs not in a system wide path on linux. But seems like BINDIR in cmake is used also for the dlls on windows. 

What is the convention for dlls on windows systems. Should they be installed in INSTALLPATH/bin or INSTALLPATH/lib? On Linux libraries usually go to a lib subfolder and not to the bin folder.</old_value>
            <mod_by>36447</mod_by>
            <date>1389559174</date>
        </history>
        <history id='84329'>
            <field_name>details</field_name>
            <old_value>On Windows the DLL and EXE normally go into INSTALLPATH/bin.

CMakes INSTALL takes normally care of the different platform dependent places:
INSTALL(TARGETS lensfun 
        RUNTIME DESTINATION ${BINDIR}
        LIBRARY DESTINATION ${LIBDIR}
        ARCHIVE DESTINATION ${LIBDIR})

but when you distort ${BINDIR} this logic does not work anymore.</old_value>
            <mod_by>61037</mod_by>
            <date>1389634497</date>
        </history>
        <history id='84466'>
            <field_name>details</field_name>
            <old_value>Should be fixed in current SVN revision. Please check and report back.</old_value>
            <mod_by>36447</mod_by>
            <date>1392563317</date>
        </history>
        <task_dependency id='46441'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='14049'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='46458' name='romancos'/>
        <assigned_to id='100' name='none'/>
        <date>1213779714</date>
        <summary>lensfun crashed ufraw when &lt;tca tag defined</summary>
        <details>ufraw crashed with segfault when &lt;tca tag defined in the database</details>
        <close_date>1262612271</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='40038'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='71856'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1262612271</date>
        </history>
        <history id='71857'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1262612271</date>
        </history>
        <history id='71858'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1262612271</date>
        </history>
        <task_dependency id='39865'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18871'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='63482' name='elj4176'/>
        <assigned_to id='100' name='none'/>
        <date>1358811783</date>
        <summary>Olympus 12mm/f2 not being corrected</summary>
        <details>Problem repeated and verified by Darktabele Dev Pascal  de Bruijn. 

The lens has a profile and should apply some correction but it doesn't do anything. I can provide an Olympus raw file and camera corrected jpeg to show the problem.
OS - Ubuntu 12.10 64 bit
Darktable 1.1.2
lensfun0 (from ubuntu repos)
Camera Olympus OM-D E-M5</details>
        <close_date>1359824890</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45682'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82753'>
            <field_name>details</field_name>
            <old_value>Please make sure you have the Olympus 12mm profile installed (it is not included in lensfun 0.2.5 from Ubuntu 12.10). You can do that using these commands:

grep 12mm /usr/share/lensfun/*
grep 12mm /usr/local/share/lensfun/*

This will give output that includes &quot;Olympus M.12mm&quot; if the profile is installed on your system.</old_value>
            <mod_by>61570</mod_by>
            <date>1358828787</date>
        </history>
        <history id='82754'>
            <field_name>details</field_name>
            <old_value>I do have the profile under /usr/share/lensfun but I do not have a /usr/local/share/lensfun directory.

I may be using lensfun from the darktable plus ppa. 

From within darktable I can select the 12mm lens for correction so the profile seems to be there. 

How can I find the version of lensfun that I am using? </old_value>
            <mod_by>63482</mod_by>
            <date>1358857860</date>
        </history>
        <history id='82755'>
            <field_name>details</field_name>
            <old_value>Package: liblensfun0                     
State: installed
Automatically installed: yes
Version: 0.2.5-2pmjdebruijn11~quantal
Priority: extra
Section: libs
Maintainer: Pascal de Bruijn &lt;pmjdebruijn@pcode.nl&gt;
Architecture: i386
Uncompressed Size: 164 k
Depends: libc6 (&gt;= 2.4), libgcc1 (&gt;= 1:4.1.1), libglib2.0-0 (&gt;= 2.31.8),
         libstdc++6 (&gt;= 4.1.1), liblensfun-data
</old_value>
            <mod_by>63482</mod_by>
            <date>1358858672</date>
        </history>
        <history id='82756'>
            <field_name>details</field_name>
            <old_value>Please send a raw file to me using www.yousendit.com or a similar service. I will look into the problem. My mail address is nkbj(at)users.sourceforge.net
</old_value>
            <mod_by>61570</mod_by>
            <date>1358913151</date>
        </history>
        <history id='82757'>
            <field_name>details</field_name>
            <old_value>Correction works with UFRaw and the current svn version of lensfun (205). This suggests that the bug is either fixed in lensfun or is in Darktable.
</old_value>
            <mod_by>61570</mod_by>
            <date>1358998123</date>
        </history>
        <history id='82784'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1359824870</date>
        </history>
        <history id='82785'>
            <field_name>details</field_name>
            <old_value>Bug closed as the problem seems to be fixed in the current version or is related to another application.</old_value>
            <mod_by>36447</mod_by>
            <date>1359824870</date>
        </history>
        <history id='82786'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359824890</date>
        </history>
        <history id='82787'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359824890</date>
        </history>
        <task_dependency id='45505'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18690'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1343753629</date>
        <summary>Inconsistent distortion corrections wrt Hugin</summary>
        <details>See http://www.darktable.org/redmine/issues/8845

I tried to correct a fisheye with Hugin Lens Calibration GUI.  In this GUI as well as in Hugin, these parameters (ptlens model with a, b, c) work nicely, as the screenshots show.  However, lensfun-based software like darktable produce a completely different result.</details>
        <close_date>1359824898</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45683'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='81793'>
            <field_name>details</field_name>
            <old_value>I tried with lensfun 0.2.6 and I see the same problem.</old_value>
            <mod_by>62689</mod_by>
            <date>1345147563</date>
        </history>
        <history id='81794'>
            <field_name>details</field_name>
            <old_value>I tried using &quot;convert&quot; from the imagemagick suite:

http://www.imagemagick.org/Usage/lens/

This seems to work (using the same parameters I provided in my custom lensfun.xml)

Sadly it doesn't read the new sony ARW format..   A step in a direction!</old_value>
            <mod_by>62689</mod_by>
            <date>1345149512</date>
        </history>
        <history id='81795'>
            <field_name>details</field_name>
            <old_value>Ok last comment for sure...

Using the &quot;tmod&quot; program that is built with lensfun, to operate on a PNG file...

tmod  -d DSC00439.PNG

I again get reasonable distortion correction.

This makes me think lensfun is correct, but its various clients are all calling it in some broken way.
</old_value>
            <mod_by>62689</mod_by>
            <date>1345151720</date>
        </history>
        <history id='81828'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1345753579</date>
        </history>
        <history id='81829'>
            <field_name>details</field_name>
            <old_value>Mhm... this really looks strange. But I also noticed some very strange behaviour for example in Digikam with some lens profiles that work fine with other tools.</old_value>
            <mod_by>36447</mod_by>
            <date>1345753579</date>
        </history>
        <history id='82420'>
            <field_name>details</field_name>
            <old_value>This is a bug in LensFun which is fixed by patch http://developer.berlios.de/patch/index.php?func=detailpatch&amp;patch_id=3388&amp;group_id=9034</old_value>
            <mod_by>2378</mod_by>
            <date>1354582310</date>
        </history>
        <history id='82783'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1359824741</date>
        </history>
        <history id='82788'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359824898</date>
        </history>
        <history id='82789'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359824898</date>
        </history>
        <history id='81792'>
            <field_name>details</field_name>
            <old_value>I see this as well, I think your parameters are correct, and the problem is with rounding.

From the hugin lens generation tool, I removed the least significant digit(s) from my &quot;working&quot; parameters until I got a result that looks like what I get out of gimp-lensfun, rawstudio, and darktable.

Either hugin is doing bad things with those extra digits when generating the parameters or, lensfun is not using all the digits it should when applying corrections via library calls.

I'll hop over to the darktable page to add a note there as well
(darktable 1.0.5, lensfun 0.2.5, hugin 2012 beta (debian experimental)


</old_value>
            <mod_by>62689</mod_by>
            <date>1345145121</date>
        </history>
        <task_dependency id='45506'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18884'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='63546' name='jpaulbiss'/>
        <assigned_to id='100' name='none'/>
        <date>1359549450</date>
        <summary>missing lens info for Pentax</summary>
        <details>I have 9 lenses for a Pentax *istDL, Prime and zooms, 8 lack lens correction  info in Darktable.  How do I submit this?

Thanks

Paul</details>
        <close_date>1359824914</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45684'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82781'>
            <field_name>details</field_name>
            <old_value>Hi Paul.

Choose &quot;Patches&quot; in the menu above and submit them as a patch (or just copied into a text-file).

Regards,
Niels Kristian
</old_value>
            <mod_by>61570</mod_by>
            <date>1359553887</date>
        </history>
        <history id='82790'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359824914</date>
        </history>
        <history id='82791'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359824914</date>
        </history>
        <task_dependency id='45507'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18777'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='63066' name='itarozzi'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1352116342</date>
        <summary>Tamron 17-50 Pentax mount not recognized</summary>
        <details>I have a problem using lensfun inside darktable, with my Tamron 17-50 (and pentax K-7).

In Exif is identified as:
Tamron AF 17-50mm F2.8 XR Di-II LD (Model A16)

But in lensfun database I found entry for :
Tamron 17-50mm f/2.8 XR Di II LD

So, &quot;AF&quot; and &quot;(Model A16)&quot; is different 

Does I need to duplicate entry for this len? There is a way to define alias for lens?


Thanks!

Ivan Tarozzi</details>
        <close_date>1359824951</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45685'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82357'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1354355776</date>
        </history>
        <history id='82358'>
            <field_name>details</field_name>
            <old_value>Usually the fuzzy search should be able to match lens names even if they are not completely identical. Could you please upload a test image somewhere, so I could check why it does not work?</old_value>
            <mod_by>36447</mod_by>
            <date>1354355776</date>
        </history>
        <history id='82106'>
            <field_name>details</field_name>
            <old_value>Mmmh ... probably it should be allowed to have multiple &lt;model&gt; fields as well.  Would you please add a feature request?

Until then, just add a copy of the &lt;lens&gt; entry with a different &lt;model&gt;.  Again: You must be sure that the optical properties are the same.  I don't know whether this is always the case if the mount is different.  I simply have no experience with that.

For your lens, the different mounts seem to be the same for EOS, F and A mounts, see

http://www.photozone.de/canon-eos/289-tamron-af-17-50mm-f28-sp-xr-di-ii-ld-aspherical-if-canon-test-report--review?start=1
http://www.photozone.de/nikon--nikkor-aps-c-lens-tests/637-tamron175028d7000?start=1
http://www.photozone.de/sony-alpha-aps-c-lens-tests/386-tamron_1750_28_sony?start=1

The vibration controlled are different, though:

http://www.photozone.de/canon-eos/482-tamron_1750_28vc_canon?start=1
http://www.photozone.de/nikon--nikkor-aps-c-lens-tests/642-tamron175028vcdx?start=1
</old_value>
            <mod_by>2378</mod_by>
            <date>1352221618</date>
        </history>
        <history id='82105'>
            <field_name>details</field_name>
            <old_value>Ok, I investigate a little bit now and I think current lensfun DB could be &quot;problematic&quot;.

In slr-tamron.xml I found:
 &lt;lens&gt;
         &lt;maker&gt;Tamron&lt;/maker&gt;
         &lt;model&gt;Tamron 17-50mm f/2.8 XR Di II LD&lt;/model&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
         .....

In lensfun manual [1] I can read:
&quot;&lt;model&gt;string&lt;/model&gt;
    Lens model. This must be specified exactly as it is returned by EXIF reading libraries to allow for automatic recognition of the lens&quot;


Now, the problem is that exiftool translate codes for these lens in different strings, for the different brands [2]:

For example:

pentax mount:
'7 230'	= Tamron AF 17-50mm F2.8 XR Di-II LD (Model A16)
'4 230'	= Tamron SP AF 17-50mm F2.8 XR Di II

canon mount
161.3	= Tamron AF 17-50mm f/2.8 Di-II LD Aspherical

nikon mount:
'00 53 2B 50 24 24 00 06'	= Tamron SP AF 17-50mm f/2.8 XR Di II LD Aspherical (IF) (A16)
'00 54 2B 50 24 24 00 06'	= Tamron SP AF 17-50mm f/2.8 XR Di II LD Aspherical (IF) (A16NII)
'FB 54 2B 50 24 24 84 06'	= Tamron SP AF 17-50mm f/2.8 XR Di II LD Aspherical (IF) (A16NII)

Sony Mount:
255.1	= Tamron SP AF 17-50mm F2.8 XR Di II LD Aspherical


So I fear the DB entry in lensfun is not applicable in that way.
Imo the better solution could be create several records, one for each brand, and there assign the right string.

Do you agree? 

[1] http://lensfun.berlios.de/manual/el_lens.html
[2] http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/index.html</old_value>
            <mod_by>63066</mod_by>
            <date>1352217676</date>
        </history>
        <history id='82361'>
            <field_name>details</field_name>
            <old_value>Here an image from my pentax and tamron lens:

https://www.dropbox.com/sh/rqbjwmvcsnhzy2a/zsXCMA8cfd

If you have problem downloading, please contact me :)

Thank you

PS
is there a simple way (console utility) to test if a lens is matched?
Actually I use lensfun throught darktable only so I'm not really sure where the problem is.
In that case I can try and eventually see if there are problems in darktable code. Thanks
</old_value>
            <mod_by>63066</mod_by>
            <date>1354370140</date>
        </history>
        <history id='82412'>
            <field_name>details</field_name>
            <old_value>It seems that darktable uses the strict search mode instead of the fuzzy search. 

Anyway, I have modified the tfun.cpp example to allow a simple database search for a lens name. http://svn.berlios.de/wsvn/lensfun/trunk/tests/tfun/tfun.cpp (so now there's a console utility to do checks)

It looks like the strict search is irritated by the &quot;AF&quot; in the lens string as the lens name  in the database is without it.  This problem needs some further investigation how the lens names can differ between different exif libraries and what amount of fuzziness should be allowed by default. Unfortunately the search algorithm is not an easy part to understand. It will take some time to debug this....</old_value>
            <mod_by>36447</mod_by>
            <date>1354460850</date>
        </history>
        <history id='82413'>
            <field_name>details</field_name>
            <old_value>Double checked this... The &quot;Model A16&quot; part also causes trouble. Maybe Darktable should use the fuzzy search mode. Can you propose this to the darktable developers and create a bug report there?</old_value>
            <mod_by>36447</mod_by>
            <date>1354461107</date>
        </history>
        <history id='82792'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359824951</date>
        </history>
        <history id='82793'>
            <field_name>details</field_name>
            <old_value>Closed, as problem is in darktables handling of the database search</old_value>
            <mod_by>36447</mod_by>
            <date>1359824951</date>
        </history>
        <history id='82794'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359824951</date>
        </history>
        <history id='83011'>
            <field_name>details</field_name>
            <old_value>I kindly ask the LensFun maintainers to accept alias names for lenses.

As discussed on the Darktable mailing list at &lt;http://thread.gmane.org/gmane.comp.graphics.darktable.user/901/focus=946&gt;, the fuzzy search may yield very wrong lenses which creates a problem for Darktable (and probably other programs, too).

The number of aliases is very limited (I'd say 2 at maximum per lens) but it is essential to have them.

Eventually, LensFun should be able to accept multiple &lt;model&gt; elements in one &lt;lens&gt; element, but for the time being, the whole &lt;lens&gt; element must be duplicated for aliases, possibly in a file called aliases.xml.</old_value>
            <mod_by>2378</mod_by>
            <date>1363344172</date>
        </history>
        <history id='82104'>
            <field_name>details</field_name>
            <old_value>I you are sure that the optical properties are the same, make a duplicate entry.  There is no way to define an alias, as far as I can see.</old_value>
            <mod_by>2378</mod_by>
            <date>1352191315</date>
        </history>
        <task_dependency id='45508'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='13224'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='28668' name='n8gray'/>
        <assigned_to id='100' name='none'/>
        <date>1204180592</date>
        <summary>LensFun doesn't build on OS X</summary>
        <details>I was looking forward to playing with LensFun but it looks like it won't build on OS X.  I've got a patch for some of the trivial build problems (different header files and such) but I'm unfamiliar with LensFun's build system.  It tries to use the -soname flag which is not supported by the OS X linker.  Is it homebrew or a project of its own?

</details>
        <close_date>1262612241</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='40037'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='68244'>
            <field_name>details</field_name>
            <old_value>Why does no one address this issue??

It's over a year later, now, and I still have this same issue attempting to compile lensfun on Mac OS X.

Basically, ./configure finishes fine, but 'make install' yields:

LINK.GCC.SHARED out/mac.x86/release/liblensfun.dylib
ld warning: option -s is obsolete and being ignored
ld: unknown option: -soname=liblensfun.dylib.0
collect2: ld returned 1 exit status
make: *** [out/mac.x86/release/liblensfun.dylib] Error 1

The file that calls this particular function with the option '-soname' is:

(for the latest SVN version of lensfun):

trunk/build/mak/compiler/gcc.mak

I read on some forum somewhere that this might have something to do with using gcc vs. g++ for linking... but I have no idea... I'm a linux novice &amp; not a developer.

Dev of liblensfun-- please help us out??

Thanks,
Rishi</old_value>
            <mod_by>52048</mod_by>
            <date>1245138515</date>
        </history>
        <history id='71854'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1262612241</date>
        </history>
        <history id='71855'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1262612241</date>
        </history>
        <history id='71852'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1262612226</date>
        </history>
        <history id='71853'>
            <field_name>details</field_name>
            <old_value>I have no means neither to develop or test this.</old_value>
            <mod_by>12372</mod_by>
            <date>1262612226</date>
        </history>
        <task_dependency id='39864'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='14959'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='49458' name='ccraig'/>
        <assigned_to id='100' name='none'/>
        <date>1230053328</date>
        <summary>tamron lenses all have misspelled nikon mount</summary>
        <details>every lens in the tamron database has the mount &quot;Nikon F FA&quot; which doesn't exist.  It should be &quot;Nikon F AF&quot;</details>
        <close_date>1262612308</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='40039'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='71859'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1262612308</date>
        </history>
        <history id='71860'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1262612308</date>
        </history>
        <history id='71861'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1262612308</date>
        </history>
        <task_dependency id='39866'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='16420'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='53889' name='delub'/>
        <assigned_to id='100' name='none'/>
        <date>1257508991</date>
        <summary>wrong mounts in slr-canon.xml</summary>
        <details>The mount of the Canon 450D and 500D should be EF-S instead of EF as is stated now in slr-canon.xml.</details>
        <close_date>1262612402</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='40043'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='71871'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1262612402</date>
        </history>
        <history id='71872'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1262612402</date>
        </history>
        <history id='71873'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1262612402</date>
        </history>
        <task_dependency id='39870'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='15217'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='50219' name='paurullan'/>
        <assigned_to id='100' name='none'/>
        <date>1234017194</date>
        <summary>Some Nikon cameras</summary>
        <details>Please add in the srl-nikon.xml file this piece of code in order to have support for some more Nikon DSRL cameras.


&lt;lensdatabase&gt;                                                                                          
                                                                                                        
    &lt;camera&gt;                                                                                            
        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;                                                                
        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;                                                                  
        &lt;model&gt;NIKON D40&lt;/model&gt;                                                                        
        &lt;model lang=&quot;en&quot;&gt;D40&lt;/model&gt;                                                                    
        &lt;mount&gt;NIKON F AF&lt;/mount&gt;                                                                       
        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;                                                                    
    &lt;/camera&gt;                                                                                           
                                                                                                        
    &lt;camera&gt;                                                                                            
        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;                                                                
        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;                                                                  
        &lt;model&gt;NIKON D40x&lt;/model&gt;                                                                       
        &lt;model lang=&quot;en&quot;&gt;D40x&lt;/model&gt;                                                                   
        &lt;mount&gt;NIKON F AF&lt;/mount&gt;                                                                       
        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;                                                                    
    &lt;/camera&gt;                                                                                           
                                                                                                        
    &lt;camera&gt;                                                                                            
        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;                                                                
        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;                                                                  
        &lt;model&gt;NIKON D60&lt;/model&gt;                                                                        
        &lt;model lang=&quot;en&quot;&gt;D60&lt;/model&gt;                                                                    
        &lt;mount&gt;NIKON F AF&lt;/mount&gt;                                                                       
        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;                                                                    
    &lt;/camera&gt;                                                                                           
                                                                                                        
    &lt;camera&gt;                                                                                            
        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;                                                                
        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;                                                                  
        &lt;model&gt;NIKON D80&lt;/model&gt;                                                                        
        &lt;model lang=&quot;en&quot;&gt;D80&lt;/model&gt;                                                                    
        &lt;mount&gt;NIKON F AF&lt;/mount&gt;                                                                       
        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;                                                                    
    &lt;/camera&gt;                                                                                           
                                                                                                        
    &lt;camera&gt;                                                                                            
        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;                                                                
        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;                                                                  
        &lt;model&gt;NIKON D90&lt;/model&gt;                                                                        
        &lt;model lang=&quot;en&quot;&gt;D90&lt;/model&gt;                                                                    
        &lt;mount&gt;NIKON F AF&lt;/mount&gt;                                                                       
        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;                                                                    
    &lt;/camera&gt;                                                                                           
                                                                                                        
    &lt;camera&gt;                                                                                            
        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;                                                                
        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;                                                                  
        &lt;model&gt;NIKON D700&lt;/model&gt;                                                                       
        &lt;model lang=&quot;en&quot;&gt;D700&lt;/model&gt;                                                                   
        &lt;mount&gt;Nikon F AF&lt;/mount&gt;                                                                       
        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;                                                                    
    &lt;/camera&gt;                                                                                           
                                                                                                        
    &lt;camera&gt;                                                                                            
        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;                                                                
        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;                                                                  
        &lt;model&gt;NIKON D3&lt;/model&gt;                                                                         
        &lt;model lang=&quot;en&quot;&gt;D3&lt;/model&gt;                                                                     
        &lt;mount&gt;Nikon F AF&lt;/mount&gt;                                                                       
        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;                                                                    
    &lt;/camera&gt;                                                                                           

&lt;/lensdatabase&gt;

</details>
        <close_date>1262612322</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='40040'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='71862'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1262612322</date>
        </history>
        <history id='71863'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1262612322</date>
        </history>
        <history id='71864'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1262612322</date>
        </history>
        <task_dependency id='39867'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='16320'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='46699' name='tony2001'/>
        <assigned_to id='100' name='none'/>
        <date>1254775801</date>
        <summary>makedep fails to build with newer GCC</summary>
        <details>COMPILE.GCC.CXX tools/makedep/cppsetup.cpp      
tools/makedep/cppsetup.cpp: In function long int my_eval_variable(IfParser*, const char*, int):
tools/makedep/cppsetup.cpp:198: error: invalid conversion from const char* to char*          
make: *** [out/posix/release/tools/makedep/cppsetup.o] Error 1


Simple patch like the one below fixes the issue.
Index: tools/makedep/cppsetup.cpp
===================================================================
--- tools/makedep/cppsetup.cpp  (revision 65)
+++ tools/makedep/cppsetup.cpp  (working copy)
@@ -195,7 +195,7 @@
     }
     while (s);

-    eol = strchr (var, 0);
+    eol = (char *)strchr (var, 0);

     // Skip parentheses which Microsoft likes so much
     if (*var == '(')
</details>
        <close_date>1262612333</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='40041'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='71865'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1262612333</date>
        </history>
        <history id='71866'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1262612333</date>
        </history>
        <history id='71867'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1262612333</date>
        </history>
        <task_dependency id='39868'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='16359'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='19427' name='maekke'/>
        <assigned_to id='100' name='none'/>
        <date>1256113665</date>
        <summary>[PATCH] building with glibc-2.10 and --as-needed</summary>
        <details>hello

could you please have a look at the following two patches, they have been used in gentoo linux for quite a while w/o any issues:

http://sources.gentoo.org/viewcvs.py/gentoo-x86/media-libs/lensfun/files/lensfun-0.2.3-glibc-2.10.patch?view=markup
http://sources.gentoo.org/viewcvs.py/gentoo-x86/media-libs/lensfun/files/lensfun-0.2.3-as-needed.patch?view=markup

the first one is for building with glibc-2.10, the second one for building with --as-needed in LDFLAGS.

thanks!</details>
        <close_date>1262612371</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='40042'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='71868'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1262612371</date>
        </history>
        <history id='71869'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1262612371</date>
        </history>
        <history id='71870'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1262612371</date>
        </history>
        <task_dependency id='39869'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='16444'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='53971' name='pposiew'/>
        <assigned_to id='100' name='none'/>
        <date>1258020340</date>
        <summary>Nikkor 18-135mm f/3.5-5.6G IF-ED AF-S DX entry</summary>
        <details>&lt;lens&gt;
       &lt;maker&gt;Nikon&lt;/maker&gt;
       &lt;model&gt;Nikkor 18-135mm f/3.5-5.6G IF-ED AF-S DX&lt;/model&gt;
       &lt;mount&gt;Nikon F AF&lt;/mount&gt;
       &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
       &lt;calibration&gt;
        &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.010516&quot; b=&quot;-0.033415&quot; c=&quot;0.000000&quot; /&gt;
        &lt;distortion model=&quot;ptlens&quot; focal=&quot;20&quot; a=&quot;0.013430&quot; b=&quot;-0.028560&quot; c=&quot;0.000000&quot; /&gt;
        &lt;distortion model=&quot;ptlens&quot; focal=&quot;28&quot; a=&quot;0.010740&quot; b=&quot;-0.007090&quot; c=&quot;0.000000&quot; /&gt;
        &lt;distortion model=&quot;ptlens&quot; focal=&quot;32&quot; a=&quot;0.000000&quot; b=&quot;0.013840&quot; c=&quot;0.002600&quot; /&gt;
        &lt;distortion model=&quot;ptlens&quot; focal=&quot;40&quot; a=&quot;0.000000&quot; b=&quot;0.022370&quot; c=&quot;-0.026420&quot; /&gt;
        &lt;distortion model=&quot;ptlens&quot; focal=&quot;48&quot; a=&quot;0.000000&quot; b=&quot;-0.006420&quot; c=&quot;0.019040&quot; /&gt;
        &lt;distortion model=&quot;ptlens&quot; focal=&quot;58&quot; a=&quot;0.000000&quot; b=&quot;0.023710&quot; c=&quot;-0.031210&quot; /&gt;
        &lt;distortion model=&quot;ptlens&quot; focal=&quot;85&quot; a=&quot;0.000000&quot; b=&quot;0.010900&quot; c=&quot;-0.007660&quot; /&gt;
        &lt;distortion model=&quot;ptlens&quot; focal=&quot;105&quot; a=&quot;0.000000&quot; b=&quot;-0.000450&quot; c=&quot;0.013550&quot; /&gt;
        &lt;distortion model=&quot;ptlens&quot; focal=&quot;135&quot; a=&quot;0.000000&quot; b=&quot;0.027500&quot; c=&quot;-0.043800&quot; /&gt;
       &lt;/calibration&gt;
 &lt;/lens&gt;
</details>
        <close_date>1262612423</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='40044'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='71850'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1262612191</date>
        </history>
        <history id='71851'>
            <field_name>details</field_name>
            <old_value>Done - submitted</old_value>
            <mod_by>12372</mod_by>
            <date>1262612192</date>
        </history>
        <history id='71874'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1262612423</date>
        </history>
        <history id='71875'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1262612423</date>
        </history>
        <task_dependency id='39871'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='16557'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='54330' name='spoilerhead'/>
        <assigned_to id='100' name='none'/>
        <date>1260899222</date>
        <summary>Canon EOS 1000D - wrong entry</summary>
        <details>the entry lists it as &quot;Canon EOS 1000D DIGITAL&quot; the digital part is wrong (as confirmed with exiftool)
also, i think the us name version should be added, too. it writes it US name into the image file. (not sure about japanese version.

if theres an easier way to do than creating 2 entries, please tell me, otherwise, this is my proposed change to the slr-canon.xml

    &lt;camera&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Canon EOS 1000D&lt;/model&gt;
        &lt;model lang=&quot;en&quot;&gt;EOS 1000D&lt;/model&gt;
        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
    &lt;/camera&gt;
     &lt;camera&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Canon EOS DIGITAL REBEL XS&lt;/model&gt;
        &lt;model lang=&quot;en&quot;&gt;EOS DIGITAL REBEL XS&lt;/model&gt;
        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
    &lt;/camera&gt;   
</details>
        <close_date>1262612498</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='40045'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='71876'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1262612498</date>
        </history>
        <history id='71877'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1262612498</date>
        </history>
        <history id='71878'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1262612498</date>
        </history>
        <task_dependency id='39872'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18872'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='63485' name='davep'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1358847030</date>
        <summary>Login new user not working?</summary>
        <details>http://lensfun.berlios.de/users.php?mode=new

Which is the link from 'new user'  Is 404?

</details>
        <close_date>1367752679</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45916'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='83218'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1367752679</date>
        </history>
        <history id='83219'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1367752679</date>
        </history>
        <history id='83220'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1367752679</date>
        </history>
        <history id='83221'>
            <field_name>details</field_name>
            <old_value>Sorry, the current content manage system of the website is broken. Anyway, there is no need to create a new user login there. All comments, bug reports and patches should be posted here at Berlios.</old_value>
            <mod_by>36447</mod_by>
            <date>1367752679</date>
        </history>
        <history id='83222'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1367752679</date>
        </history>
        <task_dependency id='45739'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19150'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61037' name='tmodes'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1381573817</date>
        <summary>Wrong data for new lens</summary>
        <details>There was a new lens added (revision 272):

&lt;maker&gt;Leica&lt;/maker&gt;
&lt;model&gt;Leica DG Summilux 25/f1.4&lt;/model&gt;
&lt;mount&gt;4/3 System&lt;/mount&gt;
&lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
&lt;calibration&gt;
&lt;!-- Taken with Olympus OMD E-M5 --&gt;


From name and when taken with OMD E-M5 the mount is Micro 4/3 Systems and not 4/3 Systems.
The maker of this lens is Panasonic and not Leica.

So this entry should be moved to mil-panasonic.xml and corrected.</details>
        <close_date>1383310170</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46288'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='83871'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1383310170</date>
        </history>
        <history id='83872'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1383310170</date>
        </history>
        <history id='83873'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1383310170</date>
        </history>
        <history id='83874'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1383310170</date>
        </history>
        <task_dependency id='46111'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='17414'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='57140' name='jesh'/>
        <assigned_to id='100' name='none'/>
        <date>1280864964</date>
        <summary>tokina lenses have invalid nikon mount</summary>
        <details>Every Tokina lens in database has invalid mount specified. They're all marked as &quot;Nikon AF&quot;, while term used by rest of the database is &quot;Nikon F AF&quot;.

FWIW, crop factor should be at least 1.5 for them, too (the Nikon aps-c).</details>
        <close_date>1330673954</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='44771'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='81053'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1330673953</date>
        </history>
        <history id='81054'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1330673954</date>
        </history>
        <history id='81055'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1330673954</date>
        </history>
        <task_dependency id='44594'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19335'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='65376' name='greensnake'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1395147477</date>
        <summary>Samyang 8mm missing</summary>
        <details>Hi

I compiled 0.2.8 and I see the Samyang 8mm listed on your web page, but when I try to defish my raw, I see a whole bunch of lenses but the 8mm is missing.
I'm using lensfun via digiKam (showFoto).</details>
        <close_date>1395251805</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46698'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84579'>
            <field_name>details</field_name>
            <old_value>The XML file says its only for 4/3 system cameras. Would be good if you mentioned this on your website, i wouldn't have wasted time compiling it :P</old_value>
            <mod_by>65376</mod_by>
            <date>1395148721</date>
        </history>
        <history id='84580'>
            <field_name>details</field_name>
            <old_value>Lensfun contains data of the Samyang 7.5mm (4/3), 8mm/2.8 and 8mm/3.5.  The latter two are available for *many* cameras.  Possibly, you lens database is too old.  You could try to replace the contsnt of /usr/share/lensfun with the content of http://lensfun.berlios.de/db/version_0.tar.bz2</old_value>
            <mod_by>2378</mod_by>
            <date>1395183883</date>
        </history>
        <history id='84581'>
            <field_name>details</field_name>
            <old_value>That fixed my issue. Strange, one would assume updating libraw would have updated that database. Package maintainer bug?</old_value>
            <mod_by>65376</mod_by>
            <date>1395223399</date>
        </history>
        <history id='84582'>
            <field_name>details</field_name>
            <old_value>The profile is just too new.  It will be included in Lensfun 0.2.9.</old_value>
            <mod_by>2378</mod_by>
            <date>1395251787</date>
        </history>
        <history id='84583'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1395251805</date>
        </history>
        <history id='84584'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1395251805</date>
        </history>
        <history id='84585'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1395251805</date>
        </history>
        <history id='84586'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1395251805</date>
        </history>
        <history id='84587'>
            <field_name>details</field_name>
            <old_value>Ah ok, then no need to file bug reports downstream. Thank you!</old_value>
            <mod_by>65376</mod_by>
            <date>1395257047</date>
        </history>
        <task_dependency id='46521'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='17514'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='43917' name='wwp'/>
        <assigned_to id='100' name='none'/>
        <date>1284929517</date>
        <summary>0.17: Changelog file missing from sources archive</summary>
        <details>The Changelog file is missing from 0.17. Is this intended? I know that history lines are found in README, but 0.16 archive was containing the Changelog anyway.</details>
        <close_date>1329413435</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='44745'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='81000'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329413435</date>
        </history>
        <history id='81001'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1329413435</date>
        </history>
        <history id='81002'>
            <field_name>details</field_name>
            <old_value>This is not relevant anymore I think...</old_value>
            <mod_by>36447</mod_by>
            <date>1329413435</date>
        </history>
        <history id='81003'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329413435</date>
        </history>
        <task_dependency id='44568'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='17377'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='56997' name='haunma'/>
        <assigned_to id='100' name='none'/>
        <date>1279684332</date>
        <summary>Patch:  lens data for OLYMPUS M.14-42mm F3.5-5.6 L</summary>
        <details>Hi Andrew,

Here is a new lens database file for the Micro Four Thirds system, with one lens so far--the kit lens on the Olympus PEN series.  I called it &quot;slr-micro43.xml&quot; but of course these cameras are not SLRs.  Everyone struggles with what to call them, so you can be the judge.

There is still a mistake in this file that I cannot find.  When used with the only lensfun-enabled application I have (darktable), I see the error

** (darktable:13596): WARNING **: /usr/share/lensfun/slr-micro43.xml:38:106: Bad attribute value `model=poly3' for element &lt;tca&gt;!

But this format is copied perfectly from your tutorial, so I don't know what the issue is.

Regards,

Mark
</details>
        <close_date>1329413629</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='44746'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='75435'>
            <field_name>details</field_name>
            <old_value>&lt;lensdatabase&gt;

    &lt;mount&gt;
        &lt;name&gt;Micro 4/3 System&lt;/name&gt;
        &lt;compat&gt;Generic&lt;/compat&gt;
    &lt;/mount&gt;

    &lt;camera&gt;
        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
        &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
        &lt;model&gt;E-P1&lt;/model&gt;
        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
    &lt;/camera&gt;

    &lt;camera&gt;
        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
        &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
        &lt;model&gt;E-P2&lt;/model&gt;
        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
    &lt;/camera&gt;

    &lt;camera&gt;
        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
        &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
        &lt;model&gt;E-PL1&lt;/model&gt;
        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
    &lt;/camera&gt;

    &lt;lens&gt;
        &lt;maker&gt;Olympus&lt;/maker&gt;
        &lt;model&gt;OLYMPUS M.14-42mm F3.5-5.6 L&lt;/model&gt;
        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;14&quot; br=&quot;0.0000600&quot; vr=&quot;1.0001242&quot; bb=&quot;-0.0002995&quot; vb=&quot;1.0007041&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0001267&quot; vr=&quot;1.0000281&quot; bb=&quot;-0.0001852&quot; vb=&quot;1.0007117&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;25&quot; br=&quot;-0.0000200&quot; vr=&quot;1.0001315&quot; bb=&quot;0.0001459&quot; vb=&quot;1.0002999&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.0001014&quot; vr=&quot;1.0002742&quot; bb=&quot;0.0000318&quot; vb=&quot;1.0002395&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;42&quot; br=&quot;-0.0001526&quot; vr=&quot;1.0004259&quot; bb=&quot;0.0001596&quot; vb=&quot;1.0000256&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;13.56&quot; a=&quot;0.10558&quot; b=&quot;-0.3175&quot; c=&quot;0.19816&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;16.49&quot; a=&quot;0.0738&quot; b=&quot;-0.25191&quot; c=&quot;0.21409&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24.40&quot; a=&quot;-0.01895&quot; b=&quot;0.05672&quot; c=&quot;-0.05355&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;34.28&quot; a=&quot;0.00451&quot; b=&quot;-0.00716&quot; c=&quot;0.02727&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;41.01&quot; a=&quot;-0.00173&quot; b=&quot;0.01774&quot; c=&quot;0.00339&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;

&lt;/lensdatabase&gt;
</old_value>
            <mod_by>56997</mod_by>
            <date>1279684413</date>
        </history>
        <history id='81004'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329413629</date>
        </history>
        <history id='81005'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1329413629</date>
        </history>
        <history id='81006'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329413629</date>
        </history>
        <task_dependency id='44569'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18306'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='60453' name='geos_one'/>
        <assigned_to id='100' name='none'/>
        <date>1313261849</date>
        <summary>Change Build System</summary>
        <details>Plz change the buildsystem to a more common system

it is a challange to cross compile 

it always detects a 64bit system even on a 32bit system ....</details>
        <close_date>1329405872</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='44741'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='80023'>
            <field_name>details</field_name>
            <old_value>some of the problems are docimentet in the following gentoo bug
https://bugs.gentoo.org/show_bug.cgi?id=374547</old_value>
            <mod_by>60453</mod_by>
            <date>1313264035</date>
        </history>
        <history id='80986'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329405871</date>
        </history>
        <history id='80987'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1329405871</date>
        </history>
        <history id='80988'>
            <field_name>details</field_name>
            <old_value>Cmake build system has been added</old_value>
            <mod_by>36447</mod_by>
            <date>1329405871</date>
        </history>
        <history id='80989'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329405872</date>
        </history>
        <task_dependency id='44564'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18121'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='26810' name='xevilstar'/>
        <assigned_to id='100' name='none'/>
        <date>1306054127</date>
        <summary>lensfun-0.2.5 fails to build with libpng-1.5</summary>
        <details>https://bugs.gentoo.org/show_bug.cgi?id=368315


make all V=1 
mkdir -p out/posix.x86_64/release
mkdir -p out/posix.x86_64/release/docs
mkdir -p out/posix.x86_64/release/include/lensfun
mkdir -p out/posix.x86_64/release/libs/auxfun
mkdir -p out/posix.x86_64/release/libs/lensfun
mkdir -p out/posix.x86_64/release/tests/example
mkdir -p out/posix.x86_64/release/tests/tfun
mkdir -p out/posix.x86_64/release/tests/tmod
mkdir -p out/posix.x86_64/release/tests/trwxml
mkdir -p out/posix.x86_64/release/tools/makedep
g++ -c -o out/posix.x86_64/release/libs/auxfun/image.o -pipe -Wall -Iinclude
-Iinclude/auxfun -Iinclude/lensfun -O2 -pipe -march=native -O2 -pipe
-march=native -fvisibility=hidden -Wno-non-virtual-dtor -I/usr/include/libpng15
libs/auxfun/image.cpp
libs/auxfun/image.cpp: In member function 'bool Image::LoadPNG()':
libs/auxfun/image.cpp:97: error: invalid use of incomplete type 'struct
png_struct_def'
/usr/include/libpng15/png.h:811: error: forward declaration of 'struct
png_struct_def'
libs/auxfun/image.cpp:160: error: invalid use of incomplete type 'struct
png_struct_def'
/usr/include/libpng15/png.h:811: error: forward declaration of 'struct
png_struct_def'
libs/auxfun/image.cpp: In member function 'bool Image::SavePNG(const char*)':
libs/auxfun/image.cpp:217: error: invalid use of incomplete type 'struct
png_struct_def'
/usr/include/libpng15/png.h:811: error: forward declaration of 'struct
png_struct_def'
libs/auxfun/image.cpp:277: error: invalid use of incomplete type 'struct
png_info_def'
/usr/include/libpng15/png.h:678: error: forward declaration of 'struct
png_info_def'
libs/auxfun/image.cpp:278: error: invalid use of incomplete type 'struct
png_info_def'
/usr/include/libpng15/png.h:678: error: forward declaration of 'struct
png_info_def'
make: *** [out/posix.x86_64/release/libs/auxfun/image.o] Error 1
emake failed
 * ERROR: media-libs/lensfun-0.2.5-r1 failed (compile phase):

</details>
        <close_date>1330673970</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='44772'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='81056'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1330673970</date>
        </history>
        <history id='81057'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1330673970</date>
        </history>
        <history id='81058'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1330673970</date>
        </history>
        <task_dependency id='44595'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18708'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1345581175</date>
        <summary>Samsung NX camera updates</summary>
        <details>Some newer Samsung NX camera's are missing, like the NX1000 and the NX210.</details>
        <close_date>1345753446</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45222'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='81824'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1345753446</date>
        </history>
        <history id='81825'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1345753446</date>
        </history>
        <history id='81826'>
            <field_name>details</field_name>
            <old_value>Thanks! I will apply the patch in the next days.</old_value>
            <mod_by>36447</mod_by>
            <date>1345753446</date>
        </history>
        <history id='81827'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1345753446</date>
        </history>
        <history id='81806'>
            <field_name>details</field_name>
            <old_value>Oops, I just submitted a patch. Please close.</old_value>
            <mod_by>61929</mod_by>
            <date>1345581265</date>
        </history>
        <task_dependency id='45045'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18349'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='60658' name='chaghi'/>
        <assigned_to id='100' name='none'/>
        <date>1315598602</date>
        <summary>[PATCH] Canon G12 not in lensfun database</summary>
        <details>lensfun lacks any information about the Canon PowerShot G12 camera.

I've done some tests with sample shots and Hugin to get the tca calibration values, and converted the distortion information from the model used by Adobe to the one used by lensfun.

My calibration data is not intensively tested, and this is the first time I do any calibration work, but it seems to be working just fine.

I plan to improve the tca calibration information in the future with more/better sample shots, and a couple more focal lengths, but for now this is better than nothing.

I don't plan to calibrate for vigneting, as it seems to be too much work (and the camera doesn't seem to suffer much of vigneting defects, so it is not worth the time...)

AFAIK the Canon G11 uses the very same sensor and lens, so this information might work for that model too (but I can't test it). The Canon G10 also uses the same lens, but I think the sensor is not exactly the same, so I don't know if it would apply to that case too (and I can test it neither)

Here's the information for the Canon G12, in case you want to include it in a future lensfun release:

&lt;lensdatabase&gt;

    &lt;mount&gt;
        &lt;name&gt;canonG12&lt;/name&gt;
        &lt;compat&gt;Generic&lt;/compat&gt;
    &lt;/mount&gt;

    &lt;camera&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Canon PowerShot G12&lt;/model&gt;
        &lt;model lang=&quot;en&quot;&gt;PowerShot G12&lt;/model&gt;
        &lt;mount&gt;canonG12&lt;/mount&gt;
        &lt;cropfactor&gt;4.63&lt;/cropfactor&gt;
    &lt;/camera&gt;

    &lt;lens&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Standard&lt;/model&gt;
        &lt;mount&gt;canonG12&lt;/mount&gt;
        &lt;cropfactor&gt;4.63&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;distortion model=&quot;poly5&quot; focal=&quot;6.1&quot; k1=&quot;-0.030571633&quot; k2=&quot;0.004658548&quot; /&gt;
            &lt;distortion model=&quot;poly5&quot; focal=&quot;8.108&quot; k1=&quot;-0.015375784&quot; k2=&quot;0.001669650&quot; /&gt;
            &lt;distortion model=&quot;poly5&quot; focal=&quot;12.074&quot; k1=&quot;-0.010041248&quot; k2=&quot;-0.001118356&quot; /&gt;
            &lt;distortion model=&quot;poly5&quot; focal=&quot;18.098&quot; k1=&quot;-0.002054377&quot; k2=&quot;0.000011075&quot; /&gt;
            &lt;distortion model=&quot;poly5&quot; focal=&quot;30.5&quot; k1=&quot;-0.000323237&quot; k2=&quot;-0.000346917&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;6.1&quot; br=&quot;-0.0002616&quot; vr=&quot;1.0007448&quot; bb=&quot;-0.0000455&quot; vb=&quot;1.0003314&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;10.8&quot; br=&quot;-0.0000003&quot; vr=&quot;1.0004612&quot; bb=&quot;0.0000253&quot; vb=&quot;1.0001464&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;30.5&quot; br=&quot;0.0000326&quot; vr=&quot;0.9996400&quot; bb=&quot;-0.0003242&quot; vb=&quot;1.0008367&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;

&lt;/lensdatabase&gt;

</details>
        <close_date>1329413141</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='44742'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='80990'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329413141</date>
        </history>
        <history id='80991'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1329413141</date>
        </history>
        <history id='80992'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329413141</date>
        </history>
        <task_dependency id='44565'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18410'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61099' name='dendeezen'/>
        <assigned_to id='100' name='none'/>
        <date>1320871268</date>
        <summary>Incorrect lens name Sigma 50-500</summary>
        <details>There is a fault in the original PTLens DB:

There is no &quot;Sigma 50-300mm f/4-6.3 EX DG/HSM&quot; lens.
In the calibration section you can see:
&lt;distortion model=&quot;ptlens&quot; focal=&quot;500&quot; a=&quot;0&quot; b=&quot;0.004857&quot; c=&quot;0&quot; /&gt;

The correct lens name is:
Sigma 50-500mm f/4-6.3 EX DG HSM</details>
        <close_date>1329405842</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='44740'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='80944'>
            <field_name>details</field_name>
            <old_value>Fixed in r144</old_value>
            <mod_by>36447</mod_by>
            <date>1328988981</date>
        </history>
        <history id='80983'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329405842</date>
        </history>
        <history id='80984'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1329405842</date>
        </history>
        <history id='80985'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329405842</date>
        </history>
        <task_dependency id='44563'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18450'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61316' name='bmbroom'/>
        <assigned_to id='100' name='none'/>
        <date>1324148075</date>
        <summary>More Pentax mount lenses </summary>
        <details>
Here is a first pass at information on some additional Pentax K mount lenses:


*** /usr/share/lensfun/slr-pentax.xml	2011-10-23 16:26:07.000000000 -0500
--- .local/share/lensfun/slr-pentax.xml	2011-12-06 23:08:58.000000000 -0600
***************
*** 272,275 ****
--- 272,435 ----
          &lt;/calibration&gt;
      &lt;/lens&gt;
  
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC PENTAX DA 40mm F/2.8 Limited&lt;/model&gt;
+         &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;40&quot; k1=&quot;-0.00384&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;40&quot; br=&quot;-0.0000230&quot; vr=&quot;1.0001421&quot; bb=&quot;0.0000150&quot; vb=&quot;0.9999150&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;40&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.17248&quot; k2=&quot;0.21247&quot; k3=&quot;-0.13119&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC PENTAX K 30mm F/2.8&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;30&quot; k1=&quot;-0.00537&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;30&quot; br=&quot;0.0000083&quot; vr=&quot;1.0002&quot; bb=&quot;0.00008&quot; vb=&quot;0.99976&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;30&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.36804&quot; k2=&quot;0.318&quot; k3=&quot;-0.18433&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;Takumar 135mm F/2.5 Bayonet&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;135&quot; k1=&quot;0.00185&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;135&quot; br=&quot;0.0000400&quot; vr=&quot;0.999887&quot; bb=&quot;-0.00012&quot; vb=&quot;1.0002&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.40098&quot; k2=&quot;0.46402&quot; k3=&quot;-0.26756&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC PENTAX M 50mm F/2&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;50&quot; k1=&quot;-0.00239&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;0.0000100&quot; vr=&quot;1.00005&quot; bb=&quot;-0.0000100&quot; vb=&quot;0.99974&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.30738&quot; k2=&quot;0.29474&quot; k3=&quot;-0.16389&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC PENTAX M 150mm F/3.5&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;150&quot; k1=&quot;0.00133&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;150&quot; br=&quot;-0.00001&quot; vr=&quot;0.9999&quot; bb=&quot;-0.00005&quot; vb=&quot;1.00007&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;150&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.45436&quot; k2=&quot;0.68491&quot; k3=&quot;-0.48506&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC Pentax DA L 18-55mm f/3.5-5.6&lt;/model&gt;
+         &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.00117&quot; b=&quot;-0.01707&quot; c=&quot;-0.00529&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0&quot; b=&quot;-0.0071&quot; c=&quot;0&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0&quot; b=&quot;0.0002&quot; c=&quot;0&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;42.5&quot; a=&quot;0.00291&quot; b=&quot;-0.00765&quot; c=&quot;0.00808&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;55&quot; a=&quot;0&quot; b=&quot;0.00333&quot; c=&quot;0&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.26538&quot; k2=&quot;0.5437&quot; k3=&quot;-0.51036&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.08271&quot; k2=&quot;0.02282&quot; k3=&quot;-0.04481&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.05666&quot; k2=&quot;0.02789&quot; k3=&quot;-0.01283&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;42.5&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.03675&quot; k2=&quot;0.01041&quot; k3=&quot;-0.00479&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.07077&quot; k2=&quot;0.07738&quot; k3=&quot;-0.04494&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0000246&quot; vr=&quot;1.0008065&quot; bb=&quot;0.00025&quot; vb=&quot;0.9998&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;24&quot; br=&quot;0.00004&quot; vr=&quot;1.00056&quot; bb=&quot;0.00024&quot; vb=&quot;0.9999&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;0.00001&quot; vr=&quot;1.000127&quot; bb=&quot;0.000022&quot; vb=&quot;1.0001&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;42.5&quot; br=&quot;0.000084&quot; vr=&quot;1.0000218&quot; bb=&quot;-0.0000375&quot; vb=&quot;1.0000794&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;55&quot; br=&quot;0.0000165&quot; vr=&quot;0.99999&quot; bb=&quot;-0.0000538&quot; vb=&quot;1.0000742&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC PENTAX DA 18-135mm F/3.5-5.6 ED AL [IF] DC WR&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;18&quot; k1=&quot;-0.02615&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0001&quot; vr=&quot;1.00017&quot; bb=&quot;0.00005&quot; vb=&quot;1.00048&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.0932&quot; k2=&quot;0.02721&quot; k3=&quot;-0.0432&quot; /&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;24&quot; k1=&quot;-0.00343&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;24&quot; br=&quot;0.000&quot; vr=&quot;1.00013&quot; bb=&quot;0.0001&quot; vb=&quot;1.000223&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.12861&quot; k2=&quot;0.09689&quot; k3=&quot;-0.05551&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;36&quot; a=&quot;0.01095&quot; b=&quot;-0.01774&quot; c=&quot;0.01645&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;36&quot; br=&quot;-0.000019&quot; vr=&quot;1.00003&quot; bb=&quot;-0.00005&quot; vb=&quot;1.00023&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;36&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.14874&quot; k2=&quot;0.19321&quot; k3=&quot;-0.12757&quot; /&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;53&quot; k1=&quot;0.00971&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;53&quot; br=&quot;0.0000&quot; vr=&quot;0.9999&quot; bb=&quot;-0.00005&quot; vb=&quot;1.0001&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;53&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.05186&quot; k2=&quot;-0.06742&quot; k3=&quot;0.05663&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;68&quot; a=&quot;-0.00032&quot; b=&quot;0.00979&quot; c=&quot;-0.00265&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;68&quot; br=&quot;0.000&quot; vr=&quot;0.9998&quot; bb=&quot;-0.00005&quot; vb=&quot;1.0000&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;68&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.11324&quot; k2=&quot;0.21297&quot; k3=&quot;-0.19382&quot; /&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;100&quot; k1=&quot;0.00771&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;100&quot; br=&quot;-0.00015&quot; vr=&quot;0.99955&quot; bb=&quot;-0.00005&quot; vb=&quot;0.99996&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.10339&quot; k2=&quot;0.24899&quot; k3=&quot;-0.28571&quot; /&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;135&quot; k1=&quot;0.00701&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;135&quot; br=&quot;-0.0004&quot; vr=&quot;0.9994&quot; bb=&quot;-0.00007&quot; vb=&quot;0.99991&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.16882&quot; k2=&quot;0.35516&quot; k3=&quot;-0.28791&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Tamron&lt;/maker&gt;
+         &lt;model&gt;Tamron 35-70mm F/3.5 CF MACRO&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;35&quot; k1=&quot;-0.00768&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.00004&quot; vr=&quot;1.00018&quot; bb=&quot;0.00007&quot; vb=&quot;0.999835&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.07601&quot; k2=&quot;0.00922&quot; k3=&quot;-0.04755&quot; /&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;40&quot; a=&quot;0.0012&quot; b=&quot;-0.00676&quot; c=&quot;0.00204&quot; /&gt;
+ 	    &lt;tca model=&quot;poly3&quot; focal=&quot;40&quot; br=&quot;-0.00003&quot; vr=&quot;1.00011&quot; bb=&quot;0.000021&quot; vb=&quot;0.999909&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;40&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.11121&quot; k2=&quot;0.08366&quot; k3=&quot;-0.10313&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;-0.00143&quot; b=&quot;0.00459&quot; c=&quot;-0.00465&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;-0.0000088&quot; vr=&quot;1.0000432&quot; bb=&quot;0.0000117&quot; vb=&quot;0.9999312&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.21197&quot; k2=&quot;-0.08795&quot; k3=&quot;0.07518&quot; /&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;70&quot; k1=&quot;0.00233&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;70&quot; br=&quot;-0.0000079&quot; vr=&quot;1.0000614&quot; bb=&quot;-0.0000911&quot; vb=&quot;1.000192&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.25218&quot; k2=&quot;0.278&quot; k3=&quot;-0.15618&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Tamron&lt;/maker&gt;
+         &lt;model&gt;Tamron AF70-300mm F/4-5.6 LD MACRO&lt;/model&gt;
+         &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;70&quot; a=&quot;0.00168&quot; b=&quot;-0.00649&quot; c=&quot;0.0021&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.05486&quot; k2=&quot;0.04427&quot; k3=&quot;-0.01908&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;70&quot; br=&quot;-0.0000487&quot; vr=&quot;1.0002053&quot; bb=&quot;0.0000352&quot; vb=&quot;0.9998612&quot; /&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;100&quot; a=&quot;-0.00287&quot; b=&quot;0.01075&quot; c=&quot;-0.00716&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.07719&quot; k2=&quot;0.13209&quot; k3=&quot;-0.09579&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;100&quot; br=&quot;-0.0000402&quot; vr=&quot;1.0000889&quot; bb=&quot;0.0000026&quot; vb=&quot;0.9998133&quot; /&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;133&quot; a=&quot;0.00404&quot; b=&quot;-0.0061&quot; c=&quot;0.00845&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;133&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.05807&quot; k2=&quot;0.07773&quot; k3=&quot;-0.05601&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;133&quot; br=&quot;-0.0000210&quot; vr=&quot;0.9999776&quot; bb=&quot;0.0000067&quot; vb=&quot;0.9998469&quot; /&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;180&quot; a=&quot;0.0&quot; b=&quot;0.00388&quot; c=&quot;0.0&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;180&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.03723&quot; k2=&quot;0.02431&quot; k3=&quot;-0.02236&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;180&quot; br=&quot;-0.0000139&quot; vr=&quot;0.9998566&quot; bb=&quot;0.0000295&quot; vb=&quot;0.999785&quot; /&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;300&quot; a=&quot;0.0&quot; b=&quot;0.00442&quot; c=&quot;0.0&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.03866&quot; k2=&quot;0.05966&quot; k3=&quot;-0.04464&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;300&quot; br=&quot;-0.000011&quot; vr=&quot;0.9996417&quot; bb=&quot;0.000022&quot; vb=&quot;0.9998125&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+ 
  &lt;/lensdatabase&gt;</details>
        <close_date>1329405833</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='44739'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='80945'>
            <field_name>details</field_name>
            <old_value>Patch is applied to r145</old_value>
            <mod_by>36447</mod_by>
            <date>1328990262</date>
        </history>
        <history id='80980'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329405833</date>
        </history>
        <history id='80981'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1329405833</date>
        </history>
        <history id='80982'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329405833</date>
        </history>
        <task_dependency id='44562'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='17822'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='58514' name='andrewcoles'/>
        <assigned_to id='100' name='none'/>
        <date>1293542462</date>
        <summary>Crash when adding lens data to ~/.local</summary>
        <details>Lensfun version: 0.2.5 (as shipped with Ubuntu Maverick)

When adding lens data to ~/.local/share/lensfun/my-lens.xml , the lensfun library causes a segfault (tested with digikam).  Adding the lens data to one of the files in /usr/share/lensfun fixes the problem - it's only a problem with ~/.local .

I don't have debugging symbols for the library, but the limited backtrace I have is:

#7  0xb3f1893a in ?? () from /usr/lib/liblensfun.so.0
#8  0xb3f80f2f in ?? () from /lib/libglib-2.0.so.0
#9  0xb3f82908 in g_markup_parse_context_parse () from /lib/libglib-2.0.so.0
#10 0xb3f180ae in lfDatabase::Load(char const*, char const*, unsigned int) ()
from /usr/lib/liblensfun.so.0
#11 0xb3f18250 in lfDatabase::Load(char const*) () from
/usr/lib/liblensfun.so.0
#12 0xb3f184cc in lfDatabase::Load() () from /usr/lib/liblensfun.so.0
#13 0xb698d390 in Digikam::LensFunIface::LensFunIface (this=0xcc4af10) at
/build/buildd/digikam-1.7.0/libs/dimg/filters/lens/lensfuniface.cpp:61
</details>
        <close_date>1329413226</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='44743'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='77909'>
            <field_name>details</field_name>
            <old_value>Have fixed the bug myself by improving the error handling for malformed input.  Will email patch (cannot see the means to attach it here).</old_value>
            <mod_by>58514</mod_by>
            <date>1294270312</date>
        </history>
        <history id='80993'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329413226</date>
        </history>
        <history id='80994'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1329413226</date>
        </history>
        <history id='80995'>
            <field_name>details</field_name>
            <old_value>Should be fixed by Andrew Coles' Patch since r130</old_value>
            <mod_by>36447</mod_by>
            <date>1329413226</date>
        </history>
        <history id='80996'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329413226</date>
        </history>
        <task_dependency id='44566'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18771'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='100' name='none'/>
        <date>1351347760</date>
        <summary>Vignetting interpolation doesn't work</summary>
        <details>If you have to vignetting poins, e.g. at 10m and 100m, LensFun doesn't properly interpolate inbetween.  I think the cause of this is that it doesn't add the first of the two points to the spline.  Thus, the spline consists only of one point and no interpolation takes place.

I think the lines


    if (i==j)
        continue;

in lens.cpp must be removed, but please check this thoroughly.  In particular, this is not enough.  Maybe the calculation of &quot;rating&quot; is flawed or &quot;__insert_spline()&quot; doesn't work properly.</details>
        <close_date>1354461190</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45509'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82359'>
            <field_name>details</field_name>
            <old_value>Can this be closed? I think the problem has been resolved by your patch, isn't it?</old_value>
            <mod_by>36447</mod_by>
            <date>1354355838</date>
        </history>
        <history id='82360'>
            <field_name>details</field_name>
            <old_value>Yes, this is fixed.  Thank you!</old_value>
            <mod_by>2378</mod_by>
            <date>1354357228</date>
        </history>
        <history id='82103'>
            <field_name>details</field_name>
            <old_value>I came to the conclusion that the vignetting interpolation is broken beyond repair.  I found a couple of bugs in it, fixed them, but it still wouldnt work.  I understood the algorithm, and it is my opinion that it doesn'tdeliver proper results too often.

I uploaded a patch which implements the IDW algorithm for interpolation of the vignetting.  Consider it a provisional solution.  A better one might be piecewise linear interpolation in simplices but this is more complicated.

However, IDW is pretty good, and at least working.</old_value>
            <mod_by>2378</mod_by>
            <date>1352191184</date>
        </history>
        <history id='82414'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1354461190</date>
        </history>
        <history id='82415'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1354461190</date>
        </history>
        <history id='82416'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1354461190</date>
        </history>
        <task_dependency id='45332'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18679'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='13099' name='nph'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1343212567</date>
        <summary>Fix lensfun.pc so lensfun.h is found</summary>
        <details>Recently (with 0.2.6), lensfun.h seems to have moved from $includedir to $includedir/lensfun. The pkgconfig file was not amended however, so programs including lensfun.h in the way lensfun source does it don't build anymore. I'll attach a small patch fixing the issue which I have added to the Fedora package.</details>
        <close_date>1349426980</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45300'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='81830'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1345753619</date>
        </history>
        <history id='81831'>
            <field_name>details</field_name>
            <old_value>Thanks! I will apply and check as soon as I find some time.</old_value>
            <mod_by>36447</mod_by>
            <date>1345753619</date>
        </history>
        <history id='81670'>
            <field_name>details</field_name>
            <old_value>Seems I can't attach files here, so here's the patch inline:

commit 73cf8256a5063b21313c808f9545561c7d095317
Author:     Nils Philippsen &lt;nils@redhat.com&gt;
AuthorDate: Wed Jul 25 10:42:06 2012 +0200
Commit:     Nils Philippsen &lt;nils@redhat.com&gt;
CommitDate: Wed Jul 25 10:42:06 2012 +0200

    pkgconfig: fix cflags so lensfun.h is found

diff --git a/libs/lensfun/lensfun.pc.cmake b/libs/lensfun/lensfun.pc.cmake
index 9f04426..6d14b12 100644
--- a/libs/lensfun/lensfun.pc.cmake
+++ b/libs/lensfun/lensfun.pc.cmake
@@ -10,4 +10,4 @@ Description: A photographic lens database and access library
 Version: @VERSION_MAJOR@.@VERSION_MINOR@.@VERSION_MICRO@.@VERSION_BUGFIX@
 Requires.private: glib-2.0
 Libs: -L${libdir} -llensfun
-Cflags: -I${includedir}
+Cflags: -I${includedir} -I${includedir}/lensfun</old_value>
            <mod_by>13099</mod_by>
            <date>1343212636</date>
        </history>
        <history id='81961'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1349426980</date>
        </history>
        <history id='81962'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1349426980</date>
        </history>
        <history id='81963'>
            <field_name>details</field_name>
            <old_value>Patch looks reasonable, applied, thanks.</old_value>
            <mod_by>12372</mod_by>
            <date>1349426980</date>
        </history>
        <history id='81964'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1349426980</date>
        </history>
        <task_dependency id='45123'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18685'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61075' name='bugmenot2'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1343615960</date>
        <summary>Incorrect revision for Canon EF-S 18-55 lens </summary>
        <details>The correct model is below:

EF-S
18-55mm f/3.5-5.6 IS II 

This will cause issues if/when they release a third revision.</details>
        <close_date>1345753420</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45221'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='81820'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1345753420</date>
        </history>
        <history id='81821'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1345753420</date>
        </history>
        <history id='81822'>
            <field_name>details</field_name>
            <old_value>Ok.. closing this now.</old_value>
            <mod_by>36447</mod_by>
            <date>1345753420</date>
        </history>
        <history id='81823'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1345753420</date>
        </history>
        <history id='81712'>
            <field_name>details</field_name>
            <old_value>I'm not sure what you mean. The following two Canon 18-55 lenses currently have correction models:

 - Canon EF-S 18-55mm f/3.5-5.6
 - Canon EF-S 18-55mm f/3.5-5.6 III

The Canon EF-S 18-55mm f3.5-5.6 IS II simply isn't in the database. So to add that you'll need to do your own calibration as illustrated here:

http://lensfun.berlios.de/lens-calibration/
http://libregraphicsworld.org/blog/entry/creating-lens-distorsion-models-with-hugin-lens-calibrator
</old_value>
            <mod_by>61929</mod_by>
            <date>1344172470</date>
        </history>
        <history id='81787'>
            <field_name>details</field_name>
            <old_value>You are correct. I didn't notice that those lenses are the non image stabilised version. Please mark as invalid. I'll submit the lens data for this lens in the near future.</old_value>
            <mod_by>61075</mod_by>
            <date>1344921726</date>
        </history>
        <task_dependency id='45044'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='17466'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='57356' name='epierre'/>
        <assigned_to id='100' name='none'/>
        <date>1282914265</date>
        <summary>Evol: lens database extension </summary>
        <details>Would it be possible to enhance the lens database by let's says mergins with PTLens like databases ? That would propel up the quantity of available information for both lensfun and UFRaw ?</details>
        <close_date>1349424364</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45297'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='81711'>
            <field_name>details</field_name>
            <old_value>As far as I'm aware Lensfun's database originated out of PTLens (when the database was still open).

Since then the PTLens database has become proprietary as far as I know. So those databases legally can't be merged, as we'd be violating PTLens' copyright.

Or are you aware of any changes on PTLens' side on this matter?</old_value>
            <mod_by>61929</mod_by>
            <date>1344172280</date>
        </history>
        <history id='81953'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1349424345</date>
        </history>
        <history id='81954'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1349424364</date>
        </history>
        <history id='81955'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1349424364</date>
        </history>
        <history id='82329'>
            <field_name>details</field_name>
            <old_value>Hello,

  it seems the author has opened its database to 3 other tools, why not ask him for this one too ? </old_value>
            <mod_by>57356</mod_by>
            <date>1354010266</date>
        </history>
        <task_dependency id='45120'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18787'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='62884' name='bentgm'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1352578732</date>
        <summary>Wrong Model in lens diskription for &quot;Sony AF DT 16-105&quot;</summary>
        <details>In the lens description for &quot;Sony AF DT 16-105&quot; should be an Error.
The worng line from slr-sony.xml:
&lt;model&gt;Sony AF DT 16-105 mm F3.5-5.6 |Sony AF DT 55-200mm&lt;/model&gt;

The corrected Version should bee:
&lt;model&gt;Sony AF DT 16-105 mm F3.5-5.6&lt;/model&gt;
</details>
        <close_date>1354355655</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45484'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82355'>
            <field_name>details</field_name>
            <old_value>Oh, yes. Fixed it! ;)</old_value>
            <mod_by>36447</mod_by>
            <date>1354355655</date>
        </history>
        <history id='82356'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1354355655</date>
        </history>
        <history id='82352'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1354355655</date>
        </history>
        <history id='82353'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1354355655</date>
        </history>
        <history id='82354'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1354355655</date>
        </history>
        <task_dependency id='45307'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18776'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='63058' name='dodver'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1351948589</date>
        <summary>ADD: Canon EF-S 18-55mm f/3.5-5.6 IS</summary>
        <details>Hi!

My Canon 450D ha a  EF-S 18-55mm f/3.5-5.6 IS lens. Your slr-cannon.xml contains only the version that doesn't have IS. I would request to add my IS version to yout XML with the same parameters that the non-Is version has.</details>
        <close_date>1359824996</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45688'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82111'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1352319378</date>
        </history>
        <history id='82112'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1352319378</date>
        </history>
        <history id='82113'>
            <field_name>details</field_name>
            <old_value>Ok, until it is not clear that the IS version is optically the same as the non IS version I would prefer to not copy paste the entries. Do you have some more information about the two lenses and their optical design?</old_value>
            <mod_by>36447</mod_by>
            <date>1352319378</date>
        </history>
        <history id='82801'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359824996</date>
        </history>
        <history id='82802'>
            <field_name>resolution_id</field_name>
            <old_value>4</old_value>
            <mod_by>36447</mod_by>
            <date>1359824996</date>
        </history>
        <history id='82803'>
            <field_name>details</field_name>
            <old_value>No more feedback from reporter, will be closed now.</old_value>
            <mod_by>36447</mod_by>
            <date>1359824996</date>
        </history>
        <history id='82804'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359824996</date>
        </history>
        <history id='82100'>
            <field_name>details</field_name>
            <old_value>But doesn't IS add futher glass to the lens?  This may change the optical properties.  Granted, I'm not sure, but can one be sure about the opposite?</old_value>
            <mod_by>2378</mod_by>
            <date>1352031047</date>
        </history>
        <history id='82101'>
            <field_name>details</field_name>
            <old_value>I don't know. What I experience is that I get sharper, more detail-rich results applying this lens correction in Digikam.</old_value>
            <mod_by>63058</mod_by>
            <date>1352031507</date>
        </history>
        <task_dependency id='45511'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19254'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61037' name='tmodes'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1389722124</date>
        <summary>Revision 430 breaks compiling on Windows</summary>
        <details>The changes in rev. 430 concerning the mutex does not compile anymore on Windows (with glib 2.28).

To get rid of warnings! it compiles not any more. Nice testing!</details>
        <close_date>1391363491</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46577'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84344'>
            <field_name>details</field_name>
            <old_value>Mhm... just saw that it is heavily used in auxfun.cpp :/</old_value>
            <mod_by>36447</mod_by>
            <date>1389944026</date>
        </history>
        <history id='84346'>
            <field_name>details</field_name>
            <old_value>I think we must expect to support library releases up to five years old because this is the time frame for Ubuntu LTS (Long Time Support) releases. Ubuntu 10.04 includes glib 2.24 and is still supported for another year on server platforms.</old_value>
            <mod_by>61570</mod_by>
            <date>1389966457</date>
        </history>
        <history id='84413'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1391363491</date>
        </history>
        <history id='84414'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1391363491</date>
        </history>
        <history id='84415'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1391363491</date>
        </history>
        <history id='84416'>
            <field_name>details</field_name>
            <old_value>Ok, closed.</old_value>
            <mod_by>36447</mod_by>
            <date>1391363491</date>
        </history>
        <history id='84417'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1391363491</date>
        </history>
        <history id='84340'>
            <field_name>details</field_name>
            <old_value>The warnings warn about a deprecated feature.  Thus, the change may be postponed, but cannot be avoided.  Why isn't it feasible to update glib?</old_value>
            <mod_by>2378</mod_by>
            <date>1389802400</date>
        </history>
        <history id='84341'>
            <field_name>details</field_name>
            <old_value>Please check patch #003544 and tell us if it fixes the problem.</old_value>
            <mod_by>61570</mod_by>
            <date>1389804639</date>
        </history>
        <history id='84343'>
            <field_name>details</field_name>
            <old_value>BTW: Can't we easily remove the glib dependency? Is there any reason to use the glib alloc/free stuff instead of internal c/c++ functions?

Apart from that it is used for some string manipulations and file i/o. But nothing that cannot be replaced at first glance.</old_value>
            <mod_by>36447</mod_by>
            <date>1389943951</date>
        </history>
        <history id='84345'>
            <field_name>details</field_name>
            <old_value>Lensfun uses GLib for parsing XML files, and for sorting arrays of pointers.  Those two things are non-trivial, the first could feasibly only replaced with another XML library like Expat.

I still wonder whether an update is possible.  glib 2.32 is almost 2 years old and shipped even with Debian stable.  That said, I do not object to nkbj's patch.</old_value>
            <mod_by>2378</mod_by>
            <date>1389963687</date>
        </history>
        <history id='84347'>
            <field_name>details</field_name>
            <old_value>The patch #3544 works for me.</old_value>
            <mod_by>61037</mod_by>
            <date>1389977508</date>
        </history>
        <task_dependency id='46400'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='17065'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='8801' name='facero'/>
        <assigned_to id='100' name='none'/>
        <date>1270661569</date>
        <summary> Segmentation fault error compiling with ufraw 0.17</summary>
        <details>After sent a bug to Ufraw team, they ask me to notify the same bug to lensfun team, because they think that can be a problem of lensfun, probably with the new vectorization code. 

https://sourceforge.net/projects/ufraw/forums/forum/434060/topic/3662036

After compile Ufraw 0.17 with lensfun 0.2.5 support under Mandriva 2010 (fully updated), I get a Segmentation fault error when I select a raw file to open. 

If I try to use lensfun 0.2.5 with Ufraw 0.16 it works fine, the same occurs if I remove lensfun libraries and compile Ufraw 0.17, I don't get any &quot; Segmentation fault&quot; error and It works fine. But Ufraw 0.16 does not use lensfun to the same extent as Ufraw 0.17. 

Ufraw-0.17 use lens distortion corrections using lenfun. This feature is now fully implemented and enabled by default in this release. 

This is the backtrace after try to open an image from CANON EOS 50D

Program received signal SIGSEGV, Segmentation fault.
0xb75390a0 in ?? () from /usr/lib/liblensfun.so.0

(gdb) bt                                                                  
#0  0xb75390a0 in ?? () from /usr/lib/liblensfun.so.0                     
#1  0xb7545f4d in lfModifier::AddCoordCallbackDistortion ()               
   from /usr/lib/liblensfun.so.0                                          
#2  0xb7546c6f in lfModifier::Initialize () from /usr/lib/liblensfun.so.0 
#3  0x0807148c in ufraw_convert_prepare_transform (uf=0x87a1208,          
    width=2376, height=1584, reverse=1, scale=1) at ufraw_lensfun.cc:676  
#4  0x08056fc8 in ufraw_convert_prepare_transform_buffer (uf=0x87a1208,
    img=0xbfebfbff, width=201909149, height=1584) at ufraw_ufraw.c:1360
#5  0x080587e2 in ufraw_convert_prepare_buffers (uf=0x87a1208,
    phase=ufraw_transform_phase) at ufraw_ufraw.c:1471
#6  0x08058eee in ufraw_get_image_dimensions (uf=0x87a1208)
    at ufraw_ufraw.c:1534
#7  0x08059a4b in ufraw_config (uf=0x87a1208, rc=0xbfa01204,
    conf=0xbf9eba0c, cmd=0xbf9f6608) at ufraw_ufraw.c:573
#8  0x080a4137 in ufraw_chooser (rc=0xbfa01204, conf=0xbf9eba0c,
    cmd=0xbf9f6608, defPath=0x0) at ufraw_chooser.c:156
#9  0x080528ca in main (argc=1, argv=0xbfa0bec4) at ufraw.c:93

Let me to know if you need more information about that. 

Best regards.</details>
        <close_date>1359824963</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45686'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='76199'>
            <field_name>details</field_name>
            <old_value>Reproduced here, same backtrace, Fedora 11 x86.

I installed lensfun 2.5.0 using a `rpmbuild --rebuild` upon the src.rpm available on the website, and built ufraw 0.17 from the sources. I get the crash when lensfun gets into action (at startup if --lensfun=none is not set or when clicking the appropriate button 
from ufraw interface).

Here's the BT w/ symbols:
[snip: gnome breakpad handler stuff]
#6  &lt;signal handler called&gt;
#7  0x00863ed2 in ?? () from /usr/lib/liblensfun.so.0
#8  0x008713cd in lfModifier::AddCoordCallbackDistortion(lfLensCalibDistortion&amp;, bool) () from /usr/lib/liblensfun.so.0
#9  0x00872fff in lfModifier::Initialize(lfLens const*, lfPixelFormat, float, float, float, float, lfLensType, int, bool) ()
   from /usr/lib/liblensfun.so.0
#10 0x080717ec in UFRaw::ufraw_convert_prepare_transform (uf=0x89613f0, width=4320, height=2868, reverse=1, scale=1)
    at ufraw_lensfun.cc:676
#11 0x08057078 in ufraw_convert_prepare_transform_buffer (uf=0x89613f0, img=0xbfebfbff, width=582653, height=2868) at ufraw_ufraw.c:1360
#12 0x08058f32 in ufraw_convert_prepare_buffers (uf=0x89613f0, phase=ufraw_transform_phase) at ufraw_ufraw.c:1471
#13 0x0805964e in ufraw_get_image (uf=&lt;value optimized out&gt;, phase=&lt;value optimized out&gt;, bufferok=&lt;value optimized out&gt;)
    at ufraw_ufraw.c:1534
#14 ufraw_get_image_dimensions (uf=&lt;value optimized out&gt;, phase=&lt;value optimized out&gt;, bufferok=&lt;value optimized out&gt;) at ufraw_ufraw.c:356
#15 0x0805a1ab in ufraw_config (uf=0x89613f0, rc=0xbfb48a94, conf=0xbfb3329c, cmd=0xbfb3de98) at ufraw_ufraw.c:573
#16 0x080a45e7 in ufraw_chooser (rc=0xbfb48a94, conf=0xbfb3329c, cmd=0xbfb3de98, defPath=0x0) at ufraw_chooser.c:156
#17 0x08052bfa in main (argc=1, argv=0xbfb53754) at ufraw.c:93
</old_value>
            <mod_by>43917</mod_by>
            <date>1284928186</date>
        </history>
        <history id='82795'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359824963</date>
        </history>
        <history id='82796'>
            <field_name>details</field_name>
            <old_value>Outdated</old_value>
            <mod_by>36447</mod_by>
            <date>1359824963</date>
        </history>
        <history id='82797'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359824963</date>
        </history>
        <task_dependency id='45509'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18847'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='63348' name='jpv'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1356635024</date>
        <summary>New lens &quot;Tamron SP 24-70mm F/2.8 Di VC USD&quot;</summary>
        <details>I prepared a description of the new lens &quot;Tamron SP 24-70mm F/2.8 Di VC USD&quot;.
For now this lens is not recognized by exiv2. In the EXIF 99data, the number is 254.

Here is the xml code for this lens :

&lt;lens&gt;
    &lt;maker&gt;Tamron&lt;/maker&gt;
    &lt;model&gt;Tamron SP 24-70mm F/2.8 Di VC USD&lt;/model&gt;
    &lt;mount&gt;Nikon F AF&lt;/mount&gt;
    &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
    &lt;calibration&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.03519&quot; b=&quot;-0.10395&quot; c=&quot;0.06092&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0.01436&quot; b=&quot;-0.0404&quot; c=&quot;0.03983&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;0.01112&quot; b=&quot;-0.02223&quot; c=&quot;0.02177&quot; /&gt;     
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;70&quot; a=&quot;0.00625&quot; b=&quot;-0.00862&quot; c=&quot;0.00987&quot; /&gt;      
      &lt;tca model=&quot;poly3&quot; focal=&quot;24&quot; br=&quot;-0.0000913&quot; vr=&quot;1.0008446&quot; bb=&quot;0.0000181&quot; vb=&quot;0.9998653&quot; /&gt;
      &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;0.0000457&quot; vr=&quot;1.0004519&quot; bb=&quot;-0.0000735&quot; vb=&quot;0.9998598&quot; /&gt;
      &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;0.0000118&quot; vr=&quot;1.0000938&quot; bb=&quot;-0.0000862&quot; vb=&quot;0.9998401&quot; /&gt;
      &lt;tca model=&quot;poly3&quot; focal=&quot;70&quot; br=&quot;-0.0000161&quot; vr=&quot;0.9997567&quot; bb=&quot;-0.0000354&quot; vb=&quot;0.9997991&quot; /&gt;
     &lt;/calibration&gt; 
&lt;/lens&gt;

</details>
        <close_date>1357493511</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45614'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82550'>
            <field_name>details</field_name>
            <old_value>Please open a bug report with exiv2 also to have the lens recognized.
</old_value>
            <mod_by>61570</mod_by>
            <date>1356922047</date>
        </history>
        <history id='82597'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1357492944</date>
        </history>
        <history id='82598'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1357492944</date>
        </history>
        <history id='82599'>
            <field_name>details</field_name>
            <old_value>Thanks! The lens is now in the database.</old_value>
            <mod_by>36447</mod_by>
            <date>1357492944</date>
        </history>
        <history id='82600'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1357493511</date>
        </history>
        <history id='82601'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1357493511</date>
        </history>
        <history id='82561'>
            <field_name>details</field_name>
            <old_value>It's over</old_value>
            <mod_by>63348</mod_by>
            <date>1357069575</date>
        </history>
        <task_dependency id='45437'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='17053'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='55835' name='mikkelbc'/>
        <assigned_to id='100' name='none'/>
        <date>1270471937</date>
        <summary>Segmentation fault when built with -msse vectorization</summary>
        <details>When using lensfun-0.2.5 from digikam (newest digikam SVN), lensfun segfaults in cpuid.cpp, line73

            if (ax)
            {
                /* Request for standard features */
                cpuid (0x00000001);

                if (dx &amp; 0x00800000)
---&gt;                cpuflags |= LF_CPU_FLAG_MMX;


If I just compile with SSE2 (not SSE), I get no segfault. If I compile without vectorization configured, no segfault.

Let me know if you need more information or testing.

Here is my configure output:
------------------------------------------------
mbc: ~/sources/lensfun/lensfun-0.2.5$ ./configure --mode=debug --prefix=/usr/local
 
Compiling on host posix.x86 for target posix.x86 (tune for i686)
Checking if compiler supports -fvisibility=hidden                ... Yes
Checking if compiler supports -Wno-non-virtual-dtor              ... Yes
Checking if compiler supports -mtune=i686                        ... Yes
Checking for GNU Make &gt;= 3.81                                    ... 3.81, OK
Checking for makedep &gt;= 0.1.0                                    ... FAILED
Checking for Doxygen &gt;= 1.5.0                                    ... 1.6.1, OK
Checking for library glib-2.0 &gt;= 2.0                             ... 2.22.3, OK
Checking for header file glib.h                                  ... OK
Checking for library libpng &gt;= 1.0                               ... 1.2.37, OK
Checking for library zlib                                        ... OK
Checking for header file regex.h                                 ... OK
Checking if compiler supports -msse                              ... Yes
Checking if compiler supports -msse2                             ... Yes
Updating file: include/config.h
Updating file: config.mak
Not changed: build/PKGBUILD
Not changed: build/lensfun.spec
--------------------------------------------------------------------
Default build mode:                 debug
Build doxygen documentation:        yes
Use the pre-installed makedep:      no
Target directory for binaries:      /usr/local/bin
Target directory for data files:    /usr/local/share/lensfun
Target directory for libraries:     /usr/local/lib
Target directory for include files: /usr/local/include
Target directory for documentation: /usr/local/share/doc/lensfun-0.2.5
--------------------------------------------------------------------

Here you can see the flags:

mbc@core2duo-e6750:~/sources/lensfun/lensfun-0.2.5$ grep VECTORIZATION_SSE *config.mak:VECTORIZATION_SSE=-msse
config.mak:VECTORIZATION_SSE2=-msse2
</details>
        <close_date>1359824973</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45687'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82798'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359824973</date>
        </history>
        <history id='82799'>
            <field_name>details</field_name>
            <old_value>Outdated</old_value>
            <mod_by>36447</mod_by>
            <date>1359824973</date>
        </history>
        <history id='82800'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359824973</date>
        </history>
        <task_dependency id='45510'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19255'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61037' name='tmodes'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1389722576</date>
        <summary>Unconditional use of CONF_DATADIR</summary>
        <details>database.cpp, line 70 is using CONF_DATADIR. Only *nix systems are using a const coded data path.
On Windows there is no const coded path.
See the lines above: they are using
#ifdef CONF_DATADIR
#else
#endif
So the check in line 70 have to change to take this into account.</details>
        <close_date>1389801807</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46538'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84335'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1389801807</date>
        </history>
        <history id='84336'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1389801807</date>
        </history>
        <history id='84337'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1389801807</date>
        </history>
        <history id='84338'>
            <field_name>details</field_name>
            <old_value>Fixed in SVN revision #469.</old_value>
            <mod_by>2378</mod_by>
            <date>1389801807</date>
        </history>
        <history id='84339'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1389801807</date>
        </history>
        <task_dependency id='46361'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19026'>
        <group_id>9034</group_id>
        <status_id>1</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='100' name='none'/>
        <date>1371411385</date>
        <summary>Auto-scale is not always working</summary>
        <details>I haven't yet figured out the details but at least in one case the auto-scale that LF reports is wrong:  If you want to remap a fisheye image to equirectangular.  It still leaves dark corners.</details>
        <close_date>0</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46509'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84250'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1388651783</date>
        </history>
        <history id='84268'>
            <field_name>assigned_to</field_name>
            <old_value>2378</old_value>
            <mod_by>2378</mod_by>
            <date>1388738131</date>
        </history>
        <history id='84269'>
            <field_name>details</field_name>
            <old_value>I don't have time for working on this but I can explain the problem.

Currently, Lensfun scans only the positions of the corders and the edge centres in order to find the proper scaling.  This is too few points.  I must scan at least 10 points or so per edge.

Alternatively, it scans 5 points per edge, finds the point for which the biggest scaling is necessary, takes the neighbour with the second biggest scaling, and uses a real maximisation algorithm between them to find the optimal scaling.

By the way, the routine should also take into account subpixel distortion.  Otherwise, only the autoscaling for the green channel is found.  However, the red or blue channel may be smaller.</old_value>
            <mod_by>2378</mod_by>
            <date>1388738131</date>
        </history>
        <task_dependency id='46332'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18897'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='63610' name='pers'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1360663826</date>
        <summary>Installation directories cannot be overriden using CMake</summary>
        <details>In root CMakeLists.txt, the following commands are used to specify output directories:

SET(BINDIR bin)
SET(LIBDIR lib${LIB_SUFFIX})
SET(INCLUDEDIR include)
SET(DATADIR share/lensfun)
SET(DOCDIR share/doc/lensfun-${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_MICRO}.${VERSION_BUGFIX})

Unfortunately, this disallows overriding them from the command line. Thus CACHE keyword should be used; in this case the value in SET() will be treated as &quot;set to the given value unless set already&quot;. The proposed patch (hope it won't be mangled):

--- CMakeLists.txt.orig Tue Feb 12 13:52:21 2013
+++ CMakeLists.txt      Tue Feb 12 13:55:05 2013
@@ -73,11 +73,14 @@ IF(BUILD_STATIC)
 ENDIF()
  
 # define destination dirs (relative to prefix)
-SET(BINDIR bin)
-SET(LIBDIR lib${LIB_SUFFIX})
-SET(INCLUDEDIR include)
-SET(DATADIR share/lensfun)
-SET(DOCDIR share/doc/lensfun-${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_MICRO}.${VERSION_BUGFIX})
+SET(BINDIR bin CACHE PATH &quot;Directory for library example programs&quot;)
+SET(LIBDIR lib${LIB_SUFFIX} CACHE PATH &quot;Directory for library itself&quot;)
+SET(INCLUDEDIR include CACHE PATH &quot;Directory for library header files&quot;)
+SET(DATADIR share/lensfun CACHE PATH &quot;Directory for library data files&quot;)
+
+IF(BUILD_DOC)
+  SET(DOCDIR share/doc/lensfun-${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_MICRO}.${VERSION_BUGFIX} CACHE PATH &quot;Directory to put library documentation in&quot;)
+ENDIF(BUILD_DOC)
 
 IF(WIN32)
   # install into place in build-dir  
</details>
        <close_date>1362913899</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45772'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82961'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1362913899</date>
        </history>
        <history id='82962'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362913899</date>
        </history>
        <history id='82963'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362913899</date>
        </history>
        <history id='82964'>
            <field_name>details</field_name>
            <old_value>It's applied to SVN. Thanks for your help!</old_value>
            <mod_by>36447</mod_by>
            <date>1362913899</date>
        </history>
        <history id='82965'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1362913899</date>
        </history>
        <history id='82845'>
            <field_name>details</field_name>
            <old_value>Oops, just seen there is a separate &quot;Patches&quot; page, this should be probably closed. Sorry.</old_value>
            <mod_by>63610</mod_by>
            <date>1360663888</date>
        </history>
        <task_dependency id='45595'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18903'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1361280147</date>
        <summary>&lt;aperture&gt; and &lt;focal&gt; wrongly used?</summary>
        <details>In http://svn.berlios.de/wsvn/lensfun/trunk/data/db/slr-nikon.xml the aperture tag is used like this:

&lt;aperture&gt;3.5-22&lt;/aperture&gt;

(Such a construct occurs at least twice in the database; but one can grep for it.)

However, http://lensfun.berlios.de/manual/el_lens.html says it must be

&lt;aperture min=&quot;3.5&quot; max=&quot;22&quot;/&gt;

The same for &lt;focal&gt;.

I haven't checked the source for what is correct.</details>
        <close_date>1363638133</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45800'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82943'>
            <field_name>details</field_name>
            <old_value>The bug was in slr-nikon.xml. Patch uploaded.</old_value>
            <mod_by>61570</mod_by>
            <date>1362844163</date>
        </history>
        <history id='83014'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1363638133</date>
        </history>
        <history id='83015'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1363638133</date>
        </history>
        <history id='83016'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1363638133</date>
        </history>
        <history id='83017'>
            <field_name>details</field_name>
            <old_value>Fixed by patch from patch tracker</old_value>
            <mod_by>36447</mod_by>
            <date>1363638133</date>
        </history>
        <history id='83018'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1363638133</date>
        </history>
        <task_dependency id='45623'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18916'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='63713' name='bugreporter'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1362286827</date>
        <summary>[0.2.7] Auxiliary library does not build (gcc 4.7.2)</summary>
        <details>After &quot;./configure --prefix=/usr&quot; and &quot;make all&quot;, I get this build error (gcc version 4.7.2):

mkdir -p out/posix.x86/release/
mkdir -p out/posix.x86/release/docs/
mkdir -p out/posix.x86/release/include/lensfun/
mkdir -p out/posix.x86/release/libs/auxfun/
mkdir -p out/posix.x86/release/libs/lensfun/
mkdir -p out/posix.x86/release/tests/example/
mkdir -p out/posix.x86/release/tests/tfun/
mkdir -p out/posix.x86/release/tests/tmod/
mkdir -p out/posix.x86/release/tests/trwxml/
mkdir -p out/posix.x86/release/tools/makedep/
COMPILE.GCC.CXX.SHARED libs/lensfun/mount.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/mod-coord.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/mod-coord-sse.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/mod-color.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/lens.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/mod-color-sse2.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/cpuid.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/database.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/mod-subpix.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/modifier.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/auxfun.cpp
COMPILE.GCC.CXX.SHARED libs/lensfun/camera.cpp
LINK.GCC.SHARED out/posix.x86/release/liblensfun.so
COMPILE.GCC.CXX libs/auxfun/image.cpp
libs/auxfun/image.cpp: In member function 'bool Image::SavePNG(const char*)':
libs/auxfun/image.cpp:258:42: error: 'memset' was not declared in this scope
make: *** [out/posix.x86/release/libs/auxfun/image.o] Error 1
</details>
        <close_date>1363638160</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45801'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82923'>
            <field_name>details</field_name>
            <old_value>It turns out that the culprit is the PNG library. With libpng 1.6.0 I get the build error described above. After downgrading to libpng 1.5.14 the build process runs to completion.

For the record: 32-bit Linux on i686 PC, kernel 3.4.33, glibc 2.17, gcc 4.7.2, binutils 2.23.1. Concerning CMake: the procedure from lensfun's README file resulted in an empty &quot;cmake_build&quot; directory while libpng 1.6.0 was installed. I trust, but did not try, that it would work if libpng 1.5.14 was installed instead.
</old_value>
            <mod_by>63713</mod_by>
            <date>1362416346</date>
        </history>
        <history id='82933'>
            <field_name>details</field_name>
            <old_value>Adding the line

#include &lt;string.h&gt;

after the line

#include &lt;stddef.h&gt;

at the top of libs/auxfun/image.cpp should fix the problem. Libpng 1.6.x relies on the ISO standard headers being included by the user AFAIK.
</old_value>
            <mod_by>61570</mod_by>
            <date>1362807257</date>
        </history>
        <history id='82934'>
            <field_name>details</field_name>
            <old_value>Patch uploaded.</old_value>
            <mod_by>61570</mod_by>
            <date>1362811782</date>
        </history>
        <history id='82966'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362914069</date>
        </history>
        <history id='82967'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362914069</date>
        </history>
        <history id='82968'>
            <field_name>details</field_name>
            <old_value>Should be fixed in SVN. Can the reporter confirm this?</old_value>
            <mod_by>36447</mod_by>
            <date>1362914069</date>
        </history>
        <history id='82980'>
            <field_name>details</field_name>
            <old_value>I downloaded the patch and applied it to the released lensfun 0.2.7 source code. Now it builds flawlessly. Thank you!
</old_value>
            <mod_by>63713</mod_by>
            <date>1362964737</date>
        </history>
        <history id='83019'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1363638160</date>
        </history>
        <history id='83020'>
            <field_name>details</field_name>
            <old_value>Alright, let's close this.</old_value>
            <mod_by>36447</mod_by>
            <date>1363638160</date>
        </history>
        <history id='83021'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1363638160</date>
        </history>
        <history id='82920'>
            <field_name>details</field_name>
            <old_value>What operating system do you use?

Can you please try the CMake based build system?</old_value>
            <mod_by>36447</mod_by>
            <date>1362308960</date>
        </history>
        <task_dependency id='45624'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18912'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='48490' name='gdt'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1362148978</date>
        <summary>double passed to abs()</summary>
        <details>Building 0.2.7 on NetBSD, I see

{{{
COMPILE.GCC.CXX.SHARED libs/lensfun/lens.cpp
libs/lensfun/lens.cpp: In member function 'bool lfLens::InterpolateVignetting(float, float, float, lfLensCali
bVignetting&amp;) const':
libs/lensfun/lens.cpp:958: warning: passing 'double' for argument 1 to 'int abs(int)'
}}}
</details>
        <close_date>1363638189</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45802'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82909'>
            <field_name>details</field_name>
            <old_value>Apparently this is a C vs C++ issue:

Since it's lens.cpp seems to be valid:
www.cplusplus.com/reference/cmath/abs/

&quot;These overloads of abs are only available in C++.
In C, only the cstdlib version of exists (see cstdlib abs) - fabs can be used instead.&quot;</old_value>
            <mod_by>61929</mod_by>
            <date>1362161084</date>
        </history>
        <history id='82944'>
            <field_name>details</field_name>
            <old_value>I think this should be fixed by the patch for bug no. 018910 (patch no. 003425).</old_value>
            <mod_by>61570</mod_by>
            <date>1362844264</date>
        </history>
        <history id='82958'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362913852</date>
        </history>
        <history id='82959'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362913852</date>
        </history>
        <history id='82960'>
            <field_name>details</field_name>
            <old_value>Seems to be fixed in SVN. 

gdt: can you confirm this?</old_value>
            <mod_by>36447</mod_by>
            <date>1362913852</date>
        </history>
        <history id='83009'>
            <field_name>details</field_name>
            <old_value>I think this is a duplicate of http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=18910&amp;group_id=9034</old_value>
            <mod_by>2378</mod_by>
            <date>1363331098</date>
        </history>
        <history id='83022'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1363638189</date>
        </history>
        <history id='83023'>
            <field_name>resolution_id</field_name>
            <old_value>6</old_value>
            <mod_by>36447</mod_by>
            <date>1363638189</date>
        </history>
        <history id='83024'>
            <field_name>details</field_name>
            <old_value>Ok, closing this.</old_value>
            <mod_by>36447</mod_by>
            <date>1363638189</date>
        </history>
        <history id='83025'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1363638189</date>
        </history>
        <history id='82921'>
            <field_name>details</field_name>
            <old_value>But lens.cpp includes math.h, not cmath, so it is getting the C definitions.</old_value>
            <mod_by>48490</mod_by>
            <date>1362360708</date>
        </history>
        <task_dependency id='45625'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18938'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1363766925</date>
        <summary>Ordering of TCA and geometry wrong</summary>
        <details>If you apply TCA and geometry at the same time by using lf_modifier_apply_subpixel_geometry_distortion, subpixel callbacks must be called *after* geometry callbacks (i.e. closer to the RAW).

You can reproduce the bug clearly by taking a picture with very heavy distortion correction.  Then, TCA is removed only if distortion correction is switched off.

The patch at https://developer.berlios.de/patch/?func=detailpatch&amp;patch_id=3444&amp;group_id=9034 rectifies this.

Attention: This is only true for the forward correction, not for the reverse one!  Actually, for reverse correction, lf_modifier_apply_subpixel_geometry_distortion must not be used at all.</details>
        <close_date>1367752404</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45914'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='83211'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1367752404</date>
        </history>
        <history id='83212'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1367752404</date>
        </history>
        <history id='83213'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1367752404</date>
        </history>
        <history id='83214'>
            <field_name>details</field_name>
            <old_value>Thanks for the patch! I finally applied it to SVN.</old_value>
            <mod_by>36447</mod_by>
            <date>1367752404</date>
        </history>
        <history id='83215'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1367752404</date>
        </history>
        <task_dependency id='45737'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19067'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1374617693</date>
        <summary>Typo in compact-canon.xml</summary>
        <details>In compact-canon.xml, line 917, the mount should be lowercase.  While it needn't be, it would be consistent.  For example, the Python script generating the lenses list is fooled by this.</details>
        <close_date>1377435454</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46123'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='83556'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1377435454</date>
        </history>
        <history id='83557'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1377435454</date>
        </history>
        <history id='83558'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1377435454</date>
        </history>
        <history id='83559'>
            <field_name>details</field_name>
            <old_value>Fixed in sources.</old_value>
            <mod_by>2378</mod_by>
            <date>1377435454</date>
        </history>
        <history id='83560'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1377435454</date>
        </history>
        <task_dependency id='45946'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18901'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1361113624</date>
        <summary>Only a liblensfun.so is installed</summary>
        <details>It seems Lensfun 0.2.7 only installs a liblensfun.so, while I would expect:

/usr/lib/liblensfun.so.0.2.7
/usr/lib/liblensfun.so.0
/usr/lib/liblensfun.so

This is particular a problem for upgrading existing Lensfun 0.2.5 installs which are linked againast the liblensfun.so.0 file.

I'm aware these are just symlinks, though it's a bit of a nuisance to deal with in the packaging.

I'd appreciate it if you could point me to the commit that changed this behavior, so I can patch it back in.
</details>
        <close_date>1367752418</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='45915'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82880'>
            <field_name>details</field_name>
            <old_value>I can't remember that there were some changes in this area... seems like an accidential change... I will take a look.

Do you use the new CMake or the old tibs based build system?

</old_value>
            <mod_by>36447</mod_by>
            <date>1361305873</date>
        </history>
        <history id='82882'>
            <field_name>details</field_name>
            <old_value>Maybe the liblensfun.so is a remnant from another install and the new files were installed to /usr/local/lib instead of /usr/lib. At least for me and CMake that's the case.</old_value>
            <mod_by>36447</mod_by>
            <date>1361306535</date>
        </history>
        <history id='82883'>
            <field_name>details</field_name>
            <old_value>I was still using tibs... moving to CMake fixes the issue at hand. So maybe removing the old tibs build system to prevent confusion would be an idea?

Thanks for your time.</old_value>
            <mod_by>61929</mod_by>
            <date>1361485509</date>
        </history>
        <history id='82898'>
            <field_name>details</field_name>
            <old_value>Andrew, the original developer, always preferred to keep the tibs build system default. But as this is not working as expected maybe you are right and it's time to switch to CMake. </old_value>
            <mod_by>36447</mod_by>
            <date>1361557205</date>
        </history>
        <history id='82935'>
            <field_name>details</field_name>
            <old_value>The culprit is the fourth (bugfix) part of the version number. Patch uploaded.</old_value>
            <mod_by>61570</mod_by>
            <date>1362824416</date>
        </history>
        <history id='82945'>
            <field_name>details</field_name>
            <old_value>BTW: Does cmake install liblensfun.so.0.2.7 or liblensfun.so.0.2.7.0? The patch for tibs installs liblensfun.so.0.2.7.0 but it seems that binutils does not like four-part version numbers on libraries. ldconfig creates the symlink liblensfun.so.0.2 which ldd uses when I build ufraw. Maybe we should restrict ourself to three-part version numbers?
</old_value>
            <mod_by>61570</mod_by>
            <date>1362844501</date>
        </history>
        <history id='82946'>
            <field_name>details</field_name>
            <old_value>My package built with CMake:

dpkg -L liblensfun0  | grep so
/usr/lib/liblensfun.so.0.2.7.0
/usr/lib/liblensfun.so.0
</old_value>
            <mod_by>61929</mod_by>
            <date>1362849965</date>
        </history>
        <history id='82948'>
            <field_name>details</field_name>
            <old_value>I got CMake working on my system Yesterday and I have found that the two build systems does not create identical output (probably different compiler and link flags). liblensfun.so.0.2.7.0 differs in size when built with vectorization on:
tibs: 135KiB
CMake: 165KiB

I also found that CMake builds libauxfun.so.0.2).7.0 (with a ')' in the file name) while tibs builds a static libauxfun.a library. ldconfig only creates the link liblensfun.so.0.2 with the library built by tibs.
</old_value>
            <mod_by>61570</mod_by>
            <date>1362892293</date>
        </history>
        <history id='82949'>
            <field_name>details</field_name>
            <old_value>I managed to fix the problem with ldconfig. Patch for tibs updated.

I have also uploaded a patch for the CMake libauxfun file name strangeness.
</old_value>
            <mod_by>61570</mod_by>
            <date>1362912043</date>
        </history>
        <history id='82950'>
            <field_name>details</field_name>
            <old_value>Thanks for the patches Niels Kristian! I have also removed the bugfix version from all lib filenames. Hope everythings correct now.</old_value>
            <mod_by>36447</mod_by>
            <date>1362912586</date>
        </history>
        <history id='82956'>
            <field_name>details</field_name>
            <old_value>Thanks for the patches Niels Kristian! I have also removed the bugfix version from all lib filenames. Hope everythings correct now.</old_value>
            <mod_by>36447</mod_by>
            <date>1362913411</date>
        </history>
        <history id='82957'>
            <field_name>details</field_name>
            <old_value>You are welcome. With the updated patch for tibs it is not necessary to remove the bugfix version number from library names.</old_value>
            <mod_by>61570</mod_by>
            <date>1362913563</date>
        </history>
        <history id='82969'>
            <field_name>details</field_name>
            <old_value>The size difference between libraries built with tibs and CMake is explained by tibs stripping the library file while CMake does not.</old_value>
            <mod_by>61570</mod_by>
            <date>1362919482</date>
        </history>
        <history id='82970'>
            <field_name>details</field_name>
            <old_value>I don't think any build system should strip the binaries by default... 

As this is typically done in the packaging, where the debug symbols are possible seperated into a -dbg/-debug package. 

If the build system strips this is no longer possible.</old_value>
            <mod_by>61929</mod_by>
            <date>1362920163</date>
        </history>
        <history id='82971'>
            <field_name>details</field_name>
            <old_value>@Pascal: Makes sense. I will update the tibs patch to leave the debug symbols in place.

I also think the bugfix version number should be added back to the library filenames made by CMake. If the bugfix version number is updated with each major svn commit it can be useful for debugging.
</old_value>
            <mod_by>61570</mod_by>
            <date>1362920989</date>
        </history>
        <history id='82972'>
            <field_name>details</field_name>
            <old_value>I'm not sure, having four &quot;numbers&quot; are the .so seems quite uncommon, so I wonder if that might trigger any issues anywhere else...</old_value>
            <mod_by>61929</mod_by>
            <date>1362921127</date>
        </history>
        <history id='82973'>
            <field_name>details</field_name>
            <old_value>I don't think it matters as long as the soname is correct.
</old_value>
            <mod_by>61570</mod_by>
            <date>1362922941</date>
        </history>
        <history id='83026'>
            <field_name>details</field_name>
            <old_value>Taking a look at my lib folder I could not find a library having 4 version numbers. And liek Pascal I even remember that having 4 number is bad and can cause trouble. So I think it would be save to keep it all standard until anyone knows more details.</old_value>
            <mod_by>36447</mod_by>
            <date>1363638432</date>
        </history>
        <history id='83032'>
            <field_name>details</field_name>
            <old_value>I have just uploaded a patch that makes tibs build shared libraries with 3-part version numbers.

This should close the problem.
</old_value>
            <mod_by>61570</mod_by>
            <date>1363698335</date>
        </history>
        <history id='83151'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1366536932</date>
        </history>
        <history id='83152'>
            <field_name>details</field_name>
            <old_value>All patches are now applied to SVN. The bug report is closed now.</old_value>
            <mod_by>36447</mod_by>
            <date>1366536932</date>
        </history>
        <history id='83216'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1367752418</date>
        </history>
        <history id='83217'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1367752418</date>
        </history>
        <history id='82881'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1361306369</date>
        </history>
        <history id='82908'>
            <field_name>details</field_name>
            <old_value>I see this too on NetBSD 5.  I have worked around it in the pkgsrc entry by moving liblensfun.so to .so.0.2.7 and making symlinks.</old_value>
            <mod_by>48490</mod_by>
            <date>1362149023</date>
        </history>
        <task_dependency id='45738'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19184'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61037' name='tmodes'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1383760748</date>
        <summary>No vignetting data when distance is 0</summary>
        <details>When storing vignetting data with distance=0 (e.g. for cameras which don't store the distance in the EXIF data) no vignetting data are returned.
Result is always nil
(When manually set the distance to 1 and then try to load the vignetting data works.)
Using a version before revision 191 works for this case. So the bug was introduced in this revision (http://svn.berlios.de/wsvn/lensfun?op=comp&amp;compare[]=/@190&amp;compare[]=/@191)</details>
        <close_date>1385672698</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46408'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='83909'>
            <field_name>details</field_name>
            <old_value>Not sure how to deal with this ... the old algorithm just took the vignettig data for the shortest distance in the database as far as I can see.  But I doubt that this is what the user expects.  After all, &quot;0&quot; means &quot;undefined&quot; rather than &quot;close focus&quot;.

I established &quot;1000m&quot; for &quot;infinity&quot; in the database.  Maybe we should substitute &quot;1000&quot; for &quot;0&quot; in the code?  On the other hand, I think that this should be done by the calling program.</old_value>
            <mod_by>2378</mod_by>
            <date>1383832432</date>
        </history>
        <history id='83910'>
            <field_name>details</field_name>
            <old_value>If you make such assumptions and expect that the calling program should check them, you should mention them in the documentation.
Otherwise it is difficult or impossible for the calling program to enforce such limits.</old_value>
            <mod_by>61037</mod_by>
            <date>1383841011</date>
        </history>
        <history id='83947'>
            <field_name>details</field_name>
            <old_value>See http://svn.berlios.de/wsvn/lensfun?op=comp&amp;compare[]=%2Ftrunk@311&amp;compare[]=%2Ftrunk@312

I updated the doc strings.  I hope I found all places; they are pretty scattered.  Sebastian, can you please re-generate the online manuals and close this report?</old_value>
            <mod_by>2378</mod_by>
            <date>1384022936</date>
        </history>
        <history id='83951'>
            <field_name>details</field_name>
            <old_value>Sorry, but I don't considers this as enough:
It states only: 
Focus distance in meters

No mention of how zero is treated, no mention what value is considers as infinity.
No mention of the valid range. (The whole point of the bug report!!)

I would expect something like:
Range: 0&lt;distance&lt;=1000
A value of 1000 is treated as infinity. If focus distance is unknown use also 1000.

Otherwise the problem persists that the caller has to wade through the source code and database to find the valid values.
</old_value>
            <mod_by>61037</mod_by>
            <date>1384086167</date>
        </history>
        <history id='83955'>
            <field_name>details</field_name>
            <old_value>To paraphrase the current public API (which is the constructor of lfModifier rather than lfLensCalibVignetting):

1. Pass the correct distance (read from EXIF, ask user ...)
2. If this is absolutely not possible, pass &quot;1000&quot;.

This is a complete description.  There simply are no special values, and no allowed (or forbidden) range.  &quot;1000&quot; is no special value either.  I just think that this is a typical value for subject distance.  &quot;20&quot; may be better, but who knows?

I see that you have a strong opinion about this, but there are no constrains necessary.  In particular, big values (&gt;&gt; 10m) end up at almost the same position on the reciprocal axis.  You may even pass float(&quot;inf&quot;).  In LensFun's database, some calibrations use &quot;100&quot; for infinity, some use &quot;1000&quot;.

The value zero is possible (as are negative values) but since they cannot happen in reality, you won't get a correction with them.  Hence, they are treated as all other values: As the actual subject distance, as documented.</old_value>
            <mod_by>2378</mod_by>
            <date>1384100407</date>
        </history>
        <history id='83957'>
            <field_name>details</field_name>
            <old_value>Thanks Torsten, the addition of units to the parameters is very important. But I agree with tmodes that the original bug is not fixed. We should really mention the complete range of valid parameters (focal length, aperture, distance) and how to handle the case when any of these is unknown.</old_value>
            <mod_by>36447</mod_by>
            <date>1384103653</date>
        </history>
        <history id='83915'>
            <field_name>details</field_name>
            <old_value>The LensFun documentation says &quot;The approximative distance-to-subject&quot;.  The database has never had occurences of &quot;0 metres&quot;.  And, the official calibration tutorial used the value &quot;100&quot;.

So &quot;0&quot; as a synonym for &quot;unknown&quot; was an undocumented implementation artifact rather than part of the API, and now it is gone.  I'm sorry that I did not anticipate this problem, and that some programs have to be changed.  However, given that the necessary changes are minor and the API is more consistent now, I am reluctant to implement the guessing on LensFun's side.
</old_value>
            <mod_by>2378</mod_by>
            <date>1383846757</date>
        </history>
        <history id='83916'>
            <field_name>details</field_name>
            <old_value>Even if a camera does not return the focal length in its EXIF data we should have vignetting data for several distances. The vignetting of the lens is still depending on the distance to subject no matter what the camera reports. So the database should always keep the distance information when possible.

Another story is what happens if you want to create a lfModifier and you don't have a distance to subject available. Then either the calling application should detect that there is no exif data and set a default distance (e.g. 1000) or set the distance to -1 which tells lensfun to set it's own default distance.

In my opinion a distance of zero just means &quot;very close&quot; and should not be used as an indicator of an undefined distance.
</old_value>
            <mod_by>36447</mod_by>
            <date>1383850639</date>
        </history>
        <history id='83917'>
            <field_name>details</field_name>
            <old_value>I even don't think LensFun should implement this &quot;-1&quot; thing.  Instead, the calling program should provide a proper distance.  Or ask its user; or take a user-provided default; or, as a last resort, guess.

LensFun could only guess.

By the way, &quot;0&quot; does not work anymore because LensFun uses the reciprocal distance for interpolation.  Even a non-zero but small value like &quot;1e-7&quot; would not work (unless there is a bug) because it would be too far away from all interpolation points.  This is as intended: vignetting behaviour is almost linear on the reciprocal distance axis, so interpolation is much more accurate this way.</old_value>
            <mod_by>2378</mod_by>
            <date>1383861493</date>
        </history>
        <history id='83929'>
            <field_name>details</field_name>
            <old_value>I have no problem with enforce the values from the calling program.
But the valid numbers should be stated in the documentation. Otherwise the caller has the burden to read the whole code and the whole database to check, which values are valid. This is not acceptable for using a library.

The API to InterpolateVignetting states:
Interpolate lens vignetting model parameters for given focal length, aperture and subject distance.

Parameters
    focal	The focal length for which we need vignetting parameters.
    aperture	The aperture value for which we need vignetting parameters.
    distance	The subject distance for which we need vignetting parameters.
    res	The resulting interpolated model. 

Here no ranges were given.

But the documentation for lfLensCalibVignetting Struct says:
float 	Focal
 	Focal length at which this calibration data was taken (0 - unspecified)
float 	Aperture
 	Aperture at which this calibration data was taken (0 - unspecified)
float 	Distance
 	Distance to subject (important only for vignetting) 

It states clearly that 0 is taken as unspecified for focal length and aperture.
So I assumed, that also for distance 0 is took as unspecified.

With the changes in the mentioned revision this is not valid anymore.
Distance 0 is not read, I assume also aperture 0 is no loaded anymore.
 
If you don't fix the code, so please update the documentation to match the current code. Only so the calling program writer has an easy access to check which values are treated as valid and which he has to allow.</old_value>
            <mod_by>61037</mod_by>
            <date>1383939625</date>
        </history>
        <history id='83946'>
            <field_name>details</field_name>
            <old_value>A further remark: please state also the units of the different variables. Is it mm, cm, m, inch, coffee beans or ...?</old_value>
            <mod_by>61037</mod_by>
            <date>1384012842</date>
        </history>
        <history id='83956'>
            <field_name>details</field_name>
            <old_value>&gt; The value zero is possible (as are negative values) but since they cannot happen in reality, you won't get a correction with them. 

When a value zero is possible, but you won't get a calibration back, then I consider this as bug. 
Now you state that this cannot  happen in reality. But what is when there is subject distance given/known? So a value ZERO I can also consider as undefined. And the documentation say nothing other.

The documentation doesn't say &quot;zero is invalid&quot;. So I expect to get a calibration back for this case. So the bug is not fixed!</old_value>
            <mod_by>61037</mod_by>
            <date>1384103021</date>
        </history>
        <history id='83958'>
            <field_name>details</field_name>
            <old_value>I have added the information about the distance at all occurences I thought it is necessary. Torsten: Can you please add the information about the aperture? I am not shure what can be assumed as a default value here.</old_value>
            <mod_by>36447</mod_by>
            <date>1384104409</date>
        </history>
        <history id='83971'>
            <field_name>details</field_name>
            <old_value>Now the documentation is wrong.  The distance can well be below 1m.  We have calibration data for 20cm in the database.

Thomas, Sebastian, please do not overdiscuss and overcorrect this.  If the docs say &quot;distance [must be] correct in order to ensure proper rectification&quot;, and you pass 0 and expect working rectification and do not get it, this is not a problem in LensFun.  The docs then clearly say: You used the API incorrectly.

Moreover, the docs point out a good recommended value (NOT a default value!) if you really cannot find out the correct distance.  So none of the questions mentioned here remains open.

Thomas, I can understand that you are irritated by the change of behaviour in LensFun.  I promise I will do better in the future: Possibly we have to change semantics in another place, too, and I will first look how LensFun-using programs use it before I change anything.
</old_value>
            <mod_by>2378</mod_by>
            <date>1384158507</date>
        </history>
        <history id='84058'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1385671167</date>
        </history>
        <history id='84059'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1385671167</date>
        </history>
        <history id='84060'>
            <field_name>details</field_name>
            <old_value>Think we can close this now...</old_value>
            <mod_by>36447</mod_by>
            <date>1385671167</date>
        </history>
        <history id='84064'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1385672698</date>
        </history>
        <history id='84065'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1385672698</date>
        </history>
        <task_dependency id='46231'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19189'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1383949111</date>
        <summary>Building of multi-language strings broken</summary>
        <details>The patch can be found here: http://developer.berlios.de/patch/?func=detailpatch&amp;patch_id=3517&amp;group_id=9034

Currently, adding more than one language to a multi-language string in LensFun fails.  If NULL characters are represented by underscores, a correct multi-language string with English and German translation should look like this in memory:

untranslated_en_translated_de_bersetzt__

However, without the patch it looks like this:

untranslated_ende_bersetzt__
</details>
        <close_date>1385672690</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46407'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='83944'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1383949147</date>
        </history>
        <history id='84061'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1385671180</date>
        </history>
        <history id='84062'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1385672690</date>
        </history>
        <history id='84063'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1385672690</date>
        </history>
        <task_dependency id='46230'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19208'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>2</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1385190519</date>
        <summary>Output of &lt;tca&gt; tags ignore poly3 model</summary>
        <details>If the database is dumped (e.g. by example.cpp), all poly3 entries for TCA are output with model=&quot;none&quot; and no parameters.</details>
        <close_date>1386626805</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46439'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84046'>
            <field_name>priority</field_name>
            <old_value>5</old_value>
            <mod_by>2378</mod_by>
            <date>1385190536</date>
        </history>
        <history id='84047'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1385190536</date>
        </history>
        <history id='84119'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1386626805</date>
        </history>
        <history id='84120'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1386626805</date>
        </history>
        <history id='84121'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1386626805</date>
        </history>
        <task_dependency id='46262'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19076'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='64433' name='andersbolager'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1375375224</date>
        <summary>My lens is wrongly identified</summary>
        <details>My Tamron SP 24-70mm f/2.8 Di USD VC shows up as Sigma 24-70mm IF EX DG HSM

If you need an example picture, I'll upload or send.</details>
        <close_date>1380046733</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46176'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='83512'>
            <field_name>details</field_name>
            <old_value>Hmm. Upon further research, exiftool reports 
Lens ID: Sigma 24-70mm f/2.8 IF EX DG HSM or Tamron SP 24-70mm f/2.8 Di VC USD
so maybe this is more complicated than I originally thought. But digikam identifies it as the Sigma, and I guess applies that lens' corrections.</old_value>
            <mod_by>64433</mod_by>
            <date>1375375986</date>
        </history>
        <history id='83515'>
            <field_name>details</field_name>
            <old_value>It depends on the specific application. I don't know Digikam but in UFRaw you can choose from a list of lens profiles.</old_value>
            <mod_by>61570</mod_by>
            <date>1375625016</date>
        </history>
        <history id='83513'>
            <field_name>details</field_name>
            <old_value>This is one of the cases where two (or more) lens manufacturers use the same lens ID number for different lenses. You have to choose the correct lens profile yourself in such cases.
</old_value>
            <mod_by>61570</mod_by>
            <date>1375505344</date>
        </history>
        <history id='83555'>
            <field_name>details</field_name>
            <old_value>Can we close this as it is a problem of external tools?</old_value>
            <mod_by>2378</mod_by>
            <date>1377435323</date>
        </history>
        <history id='83561'>
            <field_name>details</field_name>
            <old_value>Yes, please do.</old_value>
            <mod_by>64433</mod_by>
            <date>1377437697</date>
        </history>
        <history id='83514'>
            <field_name>details</field_name>
            <old_value>I see. Is there a documented &quot;'proper&quot; way to do this, or do I have to remove the Sigma from the lensfun configuration files?</old_value>
            <mod_by>64433</mod_by>
            <date>1375516622</date>
        </history>
        <history id='83635'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1380046733</date>
        </history>
        <history id='83636'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1380046733</date>
        </history>
        <history id='83637'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1380046733</date>
        </history>
        <history id='83638'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1380046733</date>
        </history>
        <task_dependency id='45999'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19193'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='64906' name='michael_lf'/>
        <assigned_to id='100' name='none'/>
        <date>1384335337</date>
        <summary>Sigma 50mm f/1.4 EX DG HSM for Pentax </summary>
        <details>Please add
&lt;mount&gt;Pentax KAF&lt;/mount&gt;
to the lens entry with crop 1.5

Here, is a link to show that the lens with this mount is existing :-)
http://geizhals.de/sigma-objektiv-af-50mm-1-4-ex-dg-hsm-fuer-pentax-310961-a324753.html</details>
        <close_date>1384344671</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46358'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='83991'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1384344671</date>
        </history>
        <history id='83992'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1384344671</date>
        </history>
        <history id='83993'>
            <field_name>details</field_name>
            <old_value>Fixed in SVN.  Thanks for the hint!</old_value>
            <mod_by>2378</mod_by>
            <date>1384344671</date>
        </history>
        <history id='83994'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1384344671</date>
        </history>
        <task_dependency id='46181'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19129'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='64683' name='marwell'/>
        <assigned_to id='100' name='none'/>
        <date>1379765555</date>
        <summary>slr-sigma.xml - Sigma 10-20mm F4-5.6 EX DC</summary>
        <details>Using lensfun in Digikam I found, that Sigma 10-20mm F4-5.6 EX DC lens is not supported automatically,  but I can choose it manually.

$ exiftool file.jpg | grep -i lens 
shows the lens name as in exif: Sigma 10-20mm F4-5.6 EX DC HSM

I edited the lens entry in the slr-sigma.xml config file to the proper name and everything works.

I am not 100% shure, but I have never heard of another lens called &quot;Sigma 10-20mm F4-5.6 EX DC&quot; only. As well as I dont think, that the Nikon D200 I use handles exif in another way than other brands.

Thank you very much for this great tool!</details>
        <close_date>1383825785</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46310'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='83905'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1383825785</date>
        </history>
        <history id='83906'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1383825785</date>
        </history>
        <history id='83907'>
            <field_name>details</field_name>
            <old_value>Please reopen if this is still an issue.</old_value>
            <mod_by>2378</mod_by>
            <date>1383825785</date>
        </history>
        <history id='83908'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1383825785</date>
        </history>
        <history id='83875'>
            <field_name>details</field_name>
            <old_value>But LensFun contains *both* lenses:

Sigma 10-20mm f/4-5.6 EX DC
Sigma 10-20mm f/4-5.6 EX DC HSM</old_value>
            <mod_by>2378</mod_by>
            <date>1383310920</date>
        </history>
        <history id='83876'>
            <field_name>details</field_name>
            <old_value>But LensFun contains *both* lenses:

Sigma 10-20mm f/4-5.6 EX DC
Sigma 10-20mm f/4-5.6 EX DC HSM</old_value>
            <mod_by>2378</mod_by>
            <date>1383310943</date>
        </history>
        <history id='83877'>
            <field_name>details</field_name>
            <old_value>But LensFun contains *both* lenses:

Sigma 10-20mm f/4-5.6 EX DC
Sigma 10-20mm f/4-5.6 EX DC HSM</old_value>
            <mod_by>2378</mod_by>
            <date>1383310957</date>
        </history>
        <task_dependency id='46133'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='17580'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='57696' name='tcli'/>
        <assigned_to id='100' name='none'/>
        <date>1286556985</date>
        <summary>Error in NormScale calculation</summary>
        <details>In modifier.cpp/lfExtModifer
Normscale =2.0/size and CenterY=height/size
In mod-coord.cpp/ApplyGeometryDistortion point coodinate are normalized by :
yu = yu * This-&gt;NormScale - This-&gt;CenterY;

Imagine a 5x5 image (very small size just for the example).
Normscale=2.0/5=0.4 and CenterY=1.0

point with coordinates (2,2) is at the  center of the image, so its normalized coord must be (0.0,0.0) but 
2*0.4-1=-0.2  !!!!!

In fact Normscale must be 2.0/(size-1) .
So in the example :  Normscale=2.0/(5-1)=0.5 and so 2*0.5-1=0.0

The error is small for bigger image but exist anyway </details>
        <close_date>1386105455</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46419'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84075'>
            <field_name>status_id</field_name>
            <old_value>3</old_value>
            <mod_by>2378</mod_by>
            <date>1385971188</date>
        </history>
        <history id='84076'>
            <field_name>resolution_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1385971188</date>
        </history>
        <history id='84077'>
            <field_name>details</field_name>
            <old_value>This was not fixed properly.  If you say &quot;size-1&quot;, &quot;size&quot; must refer to *pixel* size.  However, in the code, it is already scaled by the ratio of the crop factors at this point.

Patch #3531 fixes this.</old_value>
            <mod_by>2378</mod_by>
            <date>1385971188</date>
        </history>
        <history id='84082'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1386105455</date>
        </history>
        <history id='84083'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1386105455</date>
        </history>
        <history id='84084'>
            <field_name>details</field_name>
            <old_value>Fixed by applying the cited patch.</old_value>
            <mod_by>2378</mod_by>
            <date>1386105455</date>
        </history>
        <history id='84085'>
            <field_name>close_date</field_name>
            <old_value>1349426435</old_value>
            <mod_by>2378</mod_by>
            <date>1386105455</date>
        </history>
        <history id='81957'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1349426435</date>
        </history>
        <history id='81958'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>12372</mod_by>
            <date>1349426435</date>
        </history>
        <history id='81959'>
            <field_name>details</field_name>
            <old_value>Patch accepted, thanks.</old_value>
            <mod_by>12372</mod_by>
            <date>1349426435</date>
        </history>
        <history id='81960'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1349426435</date>
        </history>
        <task_dependency id='46242'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19200'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='64906' name='michael_lf'/>
        <assigned_to id='100' name='none'/>
        <date>1384464139</date>
        <summary>Please, add smc PENTAX-DA L 55-300mm F4-5.8 ED</summary>
        <details>The lens has the same optics as the already included smc Pentax-DA 55-300mm f/4-5.8 ED
The L version just has a cheap plastic mount, no lens hood and lacks quick shift (to focus manually while in AF mode).

I copied the name from todays Exiv2 trunk (pentaxmn.cpp lens { 0x07d8, &quot;smc PENTAX-DA L 55-300mm F4-5.8 ED&quot; })</details>
        <close_date>1384468730</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46368'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84004'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1384468730</date>
        </history>
        <history id='84005'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1384468730</date>
        </history>
        <history id='84006'>
            <field_name>details</field_name>
            <old_value>Thank you, I added an alias.</old_value>
            <mod_by>2378</mod_by>
            <date>1384468730</date>
        </history>
        <history id='84007'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1384468730</date>
        </history>
        <task_dependency id='46191'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19190'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>1</priority>
        <category_id>100</category_id>
        <submitted_by id='36447' name='da_seeb'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1384104748</date>
        <summary>What exactly does min/max aperture specify?</summary>
        <details>While thinking about the ranges of the focus distance I found a comment in the sources stating that the aperture tag should give the aperture at the minimum and maximum focal length. 
Previously we added the minimum and maximum aperture of the lens (e.g. 2.8-22) instead of (e.g. 2.8@18mm and 4.0@70mm) to the database.

What do you think is correct?</details>
        <close_date>1388934286</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46517'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='83973'>
            <field_name>details</field_name>
            <old_value>Where is this min/max aperture thing acutally used?

During the serach in the database with lfDatabase or during correction using lfModifier?</old_value>
            <mod_by>36447</mod_by>
            <date>1384199274</date>
        </history>
        <history id='83975'>
            <field_name>details</field_name>
            <old_value>@Thomas: Please don't mix up different parts of the code.  We are not talking about lfLensCalibVignetting but about lfLens here.  (In the &quot;distance=0&quot; bug report, you mixed up lfLensCalibVignetting with lfModifier.)  Read include/lensfun/lensfun.h.in line 661.

@Sebastian: In LensFun, min/max aperture is used for matching lenses (well, actually only min; source comment says, &quot;MaxAperture is usually not given in database...  so it's a guessed value, often incorrect&quot;).  Apart from that, it is simply offered in the lfLens data structure for the calling program.  And as I said, I see only Darktable using it by displaying it in a tooltip for info.</old_value>
            <mod_by>2378</mod_by>
            <date>1384209895</date>
        </history>
        <history id='83977'>
            <field_name>details</field_name>
            <old_value>@Torsten: You have mixed up things. I was never refering to lfModifier, I have never mentioned lfModifier.

All was refering to lfLens and its methods.
Follow proceeding: Ask lfDatabase for lens
db-&gt;FindLenses(..)

It returns a lfLens, which can contain the value 0 - undefined: &quot;Unknown fields are set to NULL or 0.&quot; I refer to your mentioned documentation.

But when the calling program is calling lfLens-&gt;InterpolateVignetting(..) it expects &quot;correct&quot; values. 

I consider this behavior very asymmetric.

Also storing a lfLens with vignetting data with aperture = 0 = undefined (according to lfLens documentation) works without problem (using lfLens-&gt;AddCalibVignetting()). 
But it is not possible to load back this data (lfLens-&gt;InterpolateVignetting).</old_value>
            <mod_by>61037</mod_by>
            <date>1384276374</date>
        </history>
        <history id='83995'>
            <field_name>details</field_name>
            <old_value>The best way would be when MinAperture and MaxAperture would return the aperture range used in the database. Then the calling program could check the input: MinAperture &lt;= given aperture &lt;= maxAperture. With this checked input it could call lfLens-&gt;InterpolateVignetting (the only place where aperture is used in the public API).

The problem are the border cases. Ideally the same semantic should also apply to the border cases:
1.) undefined aperture (e.g. no vignetting data in database for given lens)
2.) unknown aperture (assume 0, e.g. manual lens and look up in EXIF data for automatic processing).

In this cases the MinAperture/MaxAperture values are strongly depend on the lens/data/processing/..
There is no regular pattern to recognize.</old_value>
            <mod_by>61037</mod_by>
            <date>1384361609</date>
        </history>
        <history id='83970'>
            <field_name>details</field_name>
            <old_value>We have a problem here.  Andrew himself was not consistent (SVN version 1):

    &lt;lens&gt;
        &lt;maker&gt;KMZ&lt;/maker&gt;
        &lt;maker lang=&quot;ru&quot;&gt;&amp;#1050;&amp;#1052;&amp;#1047;&lt;/maker&gt;
        &lt;model&gt;MC Variozenitar-K 2.8-3.5/25-45&lt;/model&gt;
        &lt;aperture min=&quot;2.8&quot; max=&quot;3.5&quot; /&gt;
        &lt;focal min=&quot;25&quot; max=&quot;45&quot; /&gt;
    &lt;/lens&gt;

    &lt;lens&gt;
        &lt;maker&gt;BelOMO&lt;/maker&gt;
        &lt;maker lang=&quot;ru&quot;&gt;&amp;#1041;&amp;#1077;&amp;#1083;&amp;#1054;&amp;#1052;&amp;#1054;&lt;/maker&gt;
        &lt;model&gt;MC Peleng 3.5/8&lt;/model&gt;
        &lt;aperture min=&quot;3.5&quot; max=&quot;16&quot; /&gt;
        &lt;type&gt;fisheye&lt;/type&gt;
    &lt;/lens&gt;

Moreover, http://lensfun.berlios.de/manual/el_lens.html says &quot;This can be either a single value for a fixed-aperture lens, or a &quot;min-max&quot; range in the case of a normal lens&quot;.  Since it is not limited to zooms, this means full aperture range.  (BTW, there really are fixed-aperture lenses.)

However, call &quot;tfun&quot; and you see that automatically detected min-max ranges (and this is the vast majority) refer to *open* aperture only.  This is odd because the calling program cannot make use of it anyway because it doesn't have the aperture at the intermediate focal lengths.  *Full* min-max ranges are much more helpful.

Let's have a look at our &quot;customers&quot;:

- Darktable does not use it (except for a tooltip)
- Hugin does not use it
- Rawstudio does not use it but sets it for a &quot;neutral lens&quot;
  to 50(!)
- DigiKam does not use it

Didn't check the rest.  So I would change the semantics of MaxAperture to the full range.  Zero means &quot;unknown&quot; (as already said in lensfun.h.in).

Apart from documentation changes and database updates, we would have to disable the guessing of MaxAperture in the code.
</old_value>
            <mod_by>2378</mod_by>
            <date>1384156660</date>
        </history>
        <history id='83972'>
            <field_name>details</field_name>
            <old_value>&quot;Zero means &quot;unknown&quot; (as already said in lensfun.h.in). &quot;

Torsten, this is wrong. 
1. You removed the part in the documentation lately. So it is no there any more.
2. Try to load a lens with aperture 0. This does not work. This is the same as subject distance=0.
3. Hugin is using MinAperture to check a valid input. (But with the changes that aperture 0 does not work anymore, this check is currently broken.)</old_value>
            <mod_by>61037</mod_by>
            <date>1384188863</date>
        </history>
        <history id='83974'>
            <field_name>details</field_name>
            <old_value>Hugin is only using the database part (lfDatabase). The geometric / photometric corrections are done by Hugins own code.</old_value>
            <mod_by>61037</mod_by>
            <date>1384200329</date>
        </history>
        <history id='83976'>
            <field_name>details</field_name>
            <old_value>My last two sentences were mistakable: They referred only to MaxAperture, not min/max.</old_value>
            <mod_by>2378</mod_by>
            <date>1384210691</date>
        </history>
        <history id='83978'>
            <field_name>details</field_name>
            <old_value>You are correct that you didn't mean lfModifier but lfLens-&gt;InterpolateVignetting.  You referred, however, to lfLensCalibVignetting in both bug reports.  And its semantics are irrelevant for lfLens-&gt;MaxAperture (this report) as well as the parameters of lfLens-&gt;InterpolateVignetting (the other one).  This is what I mean with &quot;mixing up&quot;.

In some context a certain parameter is optional, while in some other context it is mandatory.  This is normal business in APIs.

In this report here, we are talking about the semantics of the attribute lfLens-&gt;MaxAperture.  What do you think about it?</old_value>
            <mod_by>2378</mod_by>
            <date>1384284724</date>
        </history>
        <history id='84028'>
            <field_name>details</field_name>
            <old_value>So I think we can agree that we do not want a MaxAperture field which gives the smallest f-number at the maximal focal length?  This would be an important statement, because it used to be different in LensFun so far.

I haven't yet invastigated thoroughly, but it seems to be that LensFun already computes a MaxAperture by taking the maximal aperture found in the &lt;vignetting&gt; tags.  (Which would be again inconsistent, alas.)  We could leave this code, and correct the existing &lt;aperture&gt; tags, update the documentation, and remove the code that calculated MaxAperture by parsing the lens model name.

Of couse, it may be that a Lens allows higher f-numbers than those given in the &lt;vignetting&gt; tags.  I vote for taking the highest f-number then for MaxAperture instead of the vignetting info.  After all, interpolation is probably still possible.  If the highest f-number in the vignetting calibration data is f/16, this should work for f/22, too.</old_value>
            <mod_by>2378</mod_by>
            <date>1384566663</date>
        </history>
        <history id='84095'>
            <field_name>details</field_name>
            <old_value>Should I prepare a patch based on the interpretation of MaxAperature that it is the maximal f-stop number possible with that lens?</old_value>
            <mod_by>2378</mod_by>
            <date>1386316317</date>
        </history>
        <history id='84122'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1386788771</date>
        </history>
        <history id='84224'>
            <field_name>details</field_name>
            <old_value>Please think about reversing the logic to be consistent with Exiv2 and ExifTool.

MaxAperture should be the maximum aperture opening (= lowest F-number) and MinAperture should be the minimal aperture opening (= highest F-number) at any given focal length.
</old_value>
            <mod_by>61570</mod_by>
            <date>1388481006</date>
        </history>
        <history id='84225'>
            <field_name>details</field_name>
            <old_value>Unfortunately, this is part of the public API, and at least MinAperture is actually used in the programs that use Lensfun.  I would not mind sending patches to Darktable, Hugin, UFRaw, rawstudio, photivo, digiKam, and Gimp-Lensfun, because all those patches would be trivial, but I doubt that we would gain much love from these projects by it.

Changing the meaning of MaxAperture only, by contrast, would not be critical. Nobody really uses this.</old_value>
            <mod_by>2378</mod_by>
            <date>1388495899</date>
        </history>
        <history id='84226'>
            <field_name>details</field_name>
            <old_value>Then I think it is better not to change any of the two and just document that MaxAperture/MinAperture refers to F-numbers and not aperture openings.</old_value>
            <mod_by>61570</mod_by>
            <date>1388503843</date>
        </history>
        <history id='84227'>
            <field_name>details</field_name>
            <old_value>Yes, we will clarify this.

But MaxAperture is currently not clearly defined.  Lensfun is inconsistent here.</old_value>
            <mod_by>2378</mod_by>
            <date>1388504067</date>
        </history>
        <history id='84243'>
            <field_name>details</field_name>
            <old_value>Ok, minAperture is clear. It is always the smallest f-number available. It's sad that this is not consistent to other libraries, but as Torsten said, we can't change this anymore. 

Torsten, can you prepare the patch for documenting the maxAperture value as you proposed it? And please also check if we make clear that aperture is the f-number and not the aperture opening.</old_value>
            <mod_by>36447</mod_by>
            <date>1388605611</date>
        </history>
        <history id='84262'>
            <field_name>details</field_name>
            <old_value>I uploaded a patch.  It also changes the code because it is almost trivial, but important as a basis for discussion.

It would work, and it would improve the situation for the calling program, but the naming &quot;Max/MinAperture&quot; is bad.  Formerly, it made sense, because &quot;Min/Max&quot; referred to the focal length.  I think Andrew originally intended it for lens matching only (but changed his mind later somewhat).

I see an alternative:

1. Apply the patch.
2. Rename &quot;aperture&quot; in &quot;f-stops&quot;.  Variable names and XML tags.
3. Re-add MinAperture and MaxAperture and set it to MinFStop and MaxFStop.  Mark it as deprecated.
4. Add MinDistance and MaxDistance, to have it complete.

In lens matching, only MinFocal, MaxFocal, and MinFStop are used.</old_value>
            <mod_by>2378</mod_by>
            <date>1388674588</date>
        </history>
        <history id='84272'>
            <field_name>details</field_name>
            <old_value>I think the alternative is the best long-term approach. It should be followed by a 1.0.0 release in maybe a years time to get a new version number for shared libraries. I that release MinAperture/MaxAperture can be removed.</old_value>
            <mod_by>61570</mod_by>
            <date>1388797032</date>
        </history>
        <history id='84278'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388845470</date>
        </history>
        <history id='84279'>
            <field_name>details</field_name>
            <old_value>I agree... for long term renaming to Max/MinFStop would be great. But first of all the most important thing was to clarify the maxAperture tag in the documentation.</old_value>
            <mod_by>36447</mod_by>
            <date>1388845470</date>
        </history>
        <history id='84284'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1388934286</date>
        </history>
        <history id='84285'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1388934286</date>
        </history>
        <task_dependency id='46340'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19153'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='51967' name='brad0'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1381695698</date>
        <summary>configure fails GNU make check with GNU make 4.0</summary>
        <details>The configure script has a check to ensure the GNU make release being used is version 3.81 or newer but it fails if the system has GNU make 4.0 installed.

Compiling on host posix.amd64 for target posix.amd64 (tune for amd64)
Checking if compiler supports -fvisibility=hidden                ...Yes
Checking if compiler supports -Wno-non-virtual-dtor              ...Yes
Checking if compiler supports -mtune=amd64                       ...No
Checking for GNU Make &gt;= 3.81                                    ...4.0 &lt; 3.81, FAILED</details>
        <close_date>1386968237</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46449'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84130'>
            <field_name>details</field_name>
            <old_value>Sorry, I cannot test with make 4.0.  Does it compile nicely wit higher make versions?

Does an upper limit for the version number make sense at all?</old_value>
            <mod_by>2378</mod_by>
            <date>1386927929</date>
        </history>
        <history id='84131'>
            <field_name>details</field_name>
            <old_value>Once the version check is sidestepped, as in if I take it out the it builds just fine. IMO you might as well just remove the version check. 3.80 is 11 years old. 3.81 has been out for 7 years.</old_value>
            <mod_by>51967</mod_by>
            <date>1386928319</date>
        </history>
        <history id='84133'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1386968237</date>
        </history>
        <history id='84134'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1386968237</date>
        </history>
        <history id='84135'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1386968237</date>
        </history>
        <history id='84136'>
            <field_name>details</field_name>
            <old_value>It was a mere programming error in the build system.  It is fixed now in the SVN.</old_value>
            <mod_by>2378</mod_by>
            <date>1386968237</date>
        </history>
        <history id='84137'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1386968237</date>
        </history>
        <task_dependency id='46272'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19092'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1377117379</date>
        <summary>Add aspect ratio to &lt;lens&gt;</summary>
        <details>If a lens is available for mounts with different aspect ratios, we run into trouble with distortion and TCA correction.  The reason is that for these two lens errors, the coordinate system is defined by the height of the picture.  Now, sensors with the same crop but different aspect ratios have different heights.  But for LensFun, the heights are the same, i.e. it does not scale the &lt;calibration&gt; data.

This actually happens: Sigma produces a lot of lenses for  4/3 or 4/3, and for 3:2 sensors at the same time.

The solution is to add an aspect_ratio to &lt;cropfactor&gt; within &lt;lens&gt;:

&lt;lens&gt;
  ...
  &lt;cropfactor aspect_ratio=&quot;4:3&quot;&gt;2.0&lt;/cropfactor&gt;
  ...
&lt;/lens&gt;

Default is 3:2.

As far as I can see, vignetting is not affected because it uses the diagonal as the basis for its coordinate system, which happens to be that same length that defines the cropfactor.

Note that the camera doesn't need the definition of the aspect ratio because LensFun can detect this by itself.  It would be bad, though, if there was a camera that can be set to a non-native aspect ratio and realises this by cropping in *both* directions.  But this would be merely stupid, wouldn't it?

So, this needs to be done:

1. Include the aspect ratios of the calibration data on the camera picture into the calculation of the coordinate scaling factor for distortion and TCA.

2. Add an aspect ratio of 4:3 to all &lt;lens&gt; entries that are obviously for the FourThirds system.

3. Add the correct aspect ratios to &lt;lens&gt; entries of compact cameras.  This is very important because otherwise, they won't work anymore!  The possibility to miss one is the greatest downside of this fix proposal.</details>
        <close_date>1386625854</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46438'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84038'>
            <field_name>details</field_name>
            <old_value>I started a discussion about this on the Hugin mailing list: https://groups.google.com/forum/#!topic/hugin-ptx/SkZ6QaX82uc</old_value>
            <mod_by>2378</mod_by>
            <date>1384763382</date>
        </history>
        <history id='84041'>
            <field_name>details</field_name>
            <old_value>This is fixed by http://developer.berlios.de/patch/?func=detailpatch&amp;patch_id=3528&amp;group_id=9034

Note that this changes the database format.  Old LensFun version will not be able to read it.

Moreover, I have to go ASAP through the database to tag all the non-3:2 calibrations.  Otherwise, they will not work anymore.

If you want to review the patch, use http://wilson.bronger.org/coordinates_test_code.diff which faciliates debugging significantly.  In particular, you can see that a non-matching aspect ratio affects only distortion and TCA but not vignetting -- as it should be.</old_value>
            <mod_by>2378</mod_by>
            <date>1384887335</date>
        </history>
        <history id='84042'>
            <field_name>details</field_name>
            <old_value>I have to apply and read the patch in detail later, just one question in advance.

Is it possible to correctly apply calibration data retrieved from a 4:3 aspect ratio image to a 3:2 aspect image? Means someone calibrated a lens with a 4/3 camera and now uses this lens on a camera with 3:2 ratio and vice versa.</old_value>
            <mod_by>36447</mod_by>
            <date>1384933269</date>
        </history>
        <history id='84043'>
            <field_name>details</field_name>
            <old_value>&gt; Is it possible to correctly apply calibration data
&gt; retrieved from a 4:3 aspect ratio image to a
&gt; 3:2 aspect image? Means someone calibrated
&gt; a lens with a 4/3 camera and now uses this
&gt; lens on a camera with 3:2 ratio and vice
&gt; versa.

This is exactly what the patch makes possible.

BTW, in case the patch is accepted, I would probably later modify the code so that for &quot;Standard&quot; lenses (i.e. fixed lenses on compact cameras), the aspect ratio is ignored (docs need to be updated, too).  It must match anyway.</old_value>
            <mod_by>2378</mod_by>
            <date>1384934059</date>
        </history>
        <history id='84044'>
            <field_name>details</field_name>
            <old_value>Please don't apply the patch at the moment.  It needs more testing.  Stange things are going on for vignetting (with and without this patch).</old_value>
            <mod_by>2378</mod_by>
            <date>1385022869</date>
        </history>
        <history id='84057'>
            <field_name>details</field_name>
            <old_value>Oh, I accidently commited the patch without reading your latest comment. Should I immediately remove the whole commit or is it only a small fix that is missing? For me the patch looked fine... I don't think it has potential to break anything.</old_value>
            <mod_by>36447</mod_by>
            <date>1385671133</date>
        </history>
        <history id='84066'>
            <field_name>details</field_name>
            <old_value>It's okay.  I will add further fixes simply on top of that.  The most important thing is that &quot;Standard&quot; lenses have to be excluded from the aspect ratio correction.  Otherwise, many compact cameras won't work anymore.  I will fix this ASAP.</old_value>
            <mod_by>2378</mod_by>
            <date>1385673546</date>
        </history>
        <history id='84094'>
            <field_name>details</field_name>
            <old_value>While in principle this is fixed now, please leave it open until all compact cameras have gotten their proper aspect ratio in the database.</old_value>
            <mod_by>2378</mod_by>
            <date>1386316253</date>
        </history>
        <history id='84115'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1386625854</date>
        </history>
        <history id='84116'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1386625854</date>
        </history>
        <history id='84117'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1386625854</date>
        </history>
        <history id='84118'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1386625854</date>
        </history>
        <task_dependency id='46261'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19231'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='64906' name='michael_lf'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1387229287</date>
        <summary>Tamron 28-75mm for Pentax not detected</summary>
        <details>When using darktable (git version) my Tamron 28-75mm is not correctly detected (lens corrections are not automatically applied). If I select the lens manually from the list, corrections are applied.

exiv2 has the following entry for this lens on a Pentax camera: { 0x0431, &quot;Tamron SP AF 28-75mm F2.8 XR Di (A09)&quot; }

The lensfun test tool gives:
tfun -L &quot;TAMRON SP AF 28-75mm F2.8 XR Di (A09)&quot;
&gt;&gt;&gt; Looking for lens 'TAMRON SP AF 28-75mm F2.8 XR Di (A09)' 0
        - failed

The fuzzy search does find it.
tfun -f -L &quot;TAMRON SP AF 28-75mm F2.8 XR Di (A09)&quot;
&gt;&gt;&gt; Looking for lens 'TAMRON SP AF 28-75mm F2.8 XR Di (A09)' 1
--- lens 1, score 65: ---
Lens: Tamron / Tamron 28-75mm f/2.8 XR Di
        Crop factor: 1
        Focal: 28-75
        Aperture: 2,8-2,8
        Center: 0,0
        CCI: 0/5/4
        Mount: Canon EF
        Mount: Nikon F AF
        Mount: Pentax KAF
        Mount: Sony Alpha


PS: exiv2 has the following entries for the lens with Canon / Nikon mount:
canonmn.cpp: {  28, &quot;Tamron SP AF 28-75mm f/2.8 XR Di LD Aspherical [IF] Macro&quot;  }
nikonmn.cpp: {0x33,0x54,0x3C,0x5E,0x24,0x24,0x62,0x02,0x00,0x00,0x02, &quot;Tamron&quot;, &quot;A09&quot;, &quot;SP AF 28-75mm F/2.8 XR Di LD Aspherical (IF) Macro&quot;},
{0xFA,0x54,0x3C,0x5E,0x24,0x24,0x84,0x06,0x01,0x00,0x02, &quot;Tamron&quot;, &quot;A09NII&quot;, &quot;SP AF 28-75mm F/2.8 XR Di LD Aspherical (IF) Macro&quot;},
{0xFA,0x54,0x3C,0x5E,0x24,0x24,0xDF,0x06,0x01,0x00,0x02, &quot;Tamron&quot;, &quot;A09NII&quot;, &quot;SP AF 28-75mm F/2.8 XR Di LD Aspherical (IF) Macro&quot;}</details>
        <close_date>1387349637</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46464'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84162'>
            <field_name>details</field_name>
            <old_value>How does Darktable call it?  How does exiv2 calls it if you say

exiv2 -pt myimage.RAW | grep -i lens</old_value>
            <mod_by>2378</mod_by>
            <date>1387267673</date>
        </history>
        <history id='84163'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1387269350</date>
        </history>
        <history id='84164'>
            <field_name>details</field_name>
            <old_value>exiv2 -pt IMGP3588.DNG | grep -i lens
Exif.PentaxDng.LensType                      Byte        4  TAMRON SP AF 28-75mm F2.8 XR Di (A09)
Exif.PentaxDng.LensInfo                      Undefined  91  1 132 0 0 49 50 0 0 0 0 0 0 0 40 220 36 133 119 2 13 98 101 106 89 44 0 3 49 98 35 255 255 255 49 3 119 2 13 0 0 153 9 68 3 10 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

Darktable shows the same string &quot;TAMRON SP AF 28-75mm F2.8 XR Di (A09)&quot; in the &quot;image information&quot; panel.

exiv2 -V
exiv2 0.23 001700 (64 bit build)

</old_value>
            <mod_by>64906</mod_by>
            <date>1387313631</date>
        </history>
        <history id='84165'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1387349637</date>
        </history>
        <history id='84166'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1387349637</date>
        </history>
        <history id='84167'>
            <field_name>details</field_name>
            <old_value>Okay, then I fixed it.</old_value>
            <mod_by>2378</mod_by>
            <date>1387349637</date>
        </history>
        <history id='84168'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1387349637</date>
        </history>
        <task_dependency id='46287'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19242'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1388323857</date>
        <summary>&lt;center&gt; tag not working for non-matching sensor sizes</summary>
        <details>A decentreing correction (i.e. the presence of a &lt;center&gt; tag) does not work if the sensor used for calibration has other size as the sensor used for the image to be corrected.</details>
        <close_date>1388324100</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46489'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84217'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1388324100</date>
        </history>
        <history id='84218'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1388324100</date>
        </history>
        <history id='84219'>
            <field_name>details</field_name>
            <old_value>Fixed in SVN revision 418.</old_value>
            <mod_by>2378</mod_by>
            <date>1388324100</date>
        </history>
        <history id='84220'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1388324100</date>
        </history>
        <task_dependency id='46312'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18908'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>9</priority>
        <category_id>100</category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1361486002</date>
        <summary>Lensfun 0.2.7 makes ufraw segfault when built against 0.2.5</summary>
        <details>I just updated Lensfun to 0.2.7 on my system (Ubuntu Precise), and my UFRaw 0.18 install, originally built against Lensfun 0.2.5 segfaults:

#1  0x00007ffff7065c12 in lfLens::operator=(lfLens const&amp;) () from /usr/lib/liblensfun.so.0

Do you have any thoughts on this? As this would suggest 0.2.7 is not fully binary compatible with 0.2.5...</details>
        <close_date>1388652849</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46501'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='82897'>
            <field_name>details</field_name>
            <old_value>No idea what's the problem here, but I can confirm the crash.
Seems like it needs some in deep debugging of ufraw together with lensfun.

Did you experience this problem also with other programs? An old version of GimpLensfun worked well with lensfun 0.2.7, at least for me...</old_value>
            <mod_by>36447</mod_by>
            <date>1361557103</date>
        </history>
        <history id='82903'>
            <field_name>details</field_name>
            <old_value>So I just built UFRaw 0.19 against Lensfun 0.2.5 and then upgraded Lensfun to 0.2.7 and UFRaw still worked.

So the issue has already been resolved on UFRaw's end.

However, distributions are still shipping 0.18...</old_value>
            <mod_by>61929</mod_by>
            <date>1361986039</date>
        </history>
        <history id='83223'>
            <field_name>details</field_name>
            <old_value>BTW: It works with the current Ubuntu 13.04 which is shipped with an up-to-date lensfun 0.2.7.  So it seems to be related to ufraw version 0.18 or a certain build config in some distributions.</old_value>
            <mod_by>36447</mod_by>
            <date>1367752940</date>
        </history>
        <history id='84129'>
            <field_name>details</field_name>
            <old_value>Can we close this?</old_value>
            <mod_by>2378</mod_by>
            <date>1386927814</date>
        </history>
        <history id='84244'>
            <field_name>details</field_name>
            <old_value>I think this was fixed with a patch closing a memory problem somewhere in the lens.cpp. But I can't find the patch or svn log message anymore... it was also related to a problem witrh ufraw...</old_value>
            <mod_by>36447</mod_by>
            <date>1388605953</date>
        </history>
        <history id='84249'>
            <field_name>details</field_name>
            <old_value>Probably svn r152: http://svn.berlios.de/wsvn/lensfun?op=comp&amp;compare[]=/trunk/libs/lensfun/lens.cpp@151&amp;compare[]=/trunk/libs/lensfun/lens.cpp@152</old_value>
            <mod_by>61570</mod_by>
            <date>1388634561</date>
        </history>
        <history id='84251'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388652849</date>
        </history>
        <history id='84252'>
            <field_name>details</field_name>
            <old_value>Maybe that was the patch. But as far as I remember there was also some discussion going on about a crash we could not fix for a long time. Then someone found a memory error introduced a long time ago. 

Well anyway, lets close this bug.  Ufraw 0.18 and lensfun 0.2.7 are history. </old_value>
            <mod_by>36447</mod_by>
            <date>1388652849</date>
        </history>
        <history id='84253'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1388652849</date>
        </history>
        <history id='82895'>
            <field_name>priority</field_name>
            <old_value>5</old_value>
            <mod_by>36447</mod_by>
            <date>1361557103</date>
        </history>
        <history id='82896'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1361557103</date>
        </history>
        <history id='82899'>
            <field_name>details</field_name>
            <old_value>I have Darktable built against 0.2.5, and it continued to operate just fine after upgrading to 0.2.7...</old_value>
            <mod_by>61929</mod_by>
            <date>1361558142</date>
        </history>
        <history id='82922'>
            <field_name>details</field_name>
            <old_value>Could this be the same -ffast-math compiler bug that causes bad aspect ratio computations in ufraw?</old_value>
            <mod_by>48490</mod_by>
            <date>1362360765</date>
        </history>
        <task_dependency id='46324'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19078'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='64473' name='beber29'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1376056732</date>
        <summary>lensfun-0.2.7 fail to build for ABI x32</summary>
        <details>From https://sites.google.com/site/x32abi/

X32 ABI is designed for environments where the current ia32 ABI is sufficient.  It can be viewed as ia32 with register extended to 64-bit plus 8 more registers as well as IP relative address.  Everything else is still 32-bit.

Building lensfun for x32 give the following error :

Building CXX object libs/lensfun/CMakeFiles/lensfun.dir/cpuid.cpp.o
[0mcd /var/tmp/portage/media-libs/lensfun-0.2.7/work/lensfun-0.2.7_build/libs/lensfun &amp;&amp; /usr/bin/x86_64-pc-linux-gnux32-g++  -Dlensfun_EXPORTS  -DNDEBUG -march=native -O2 -pipe -fomit-frame-pointer  -msse -msse2 -fPIC -I/var/tmp/portage/media-libs/lensfun-0.2.7/work/lensfun-0.2.7_build -I/var/tmp/portage/media-libs/lensfun-0.2.7/work/lensfun-0.2.7/include/lensfun -I/var/tmp/portage/media-libs/lensfun-0.2.7/work/lensfun-0.2.7/include/auxfun -I/usr/include/glib-2.0 -I/usr/libx32/glib-2.0/include    -DCONF_SYMBOL_VISIBILITY -o CMakeFiles/lensfun.dir/cpuid.cpp.o -c /var/tmp/portage/media-libs/lensfun-0.2.7/work/lensfun-0.2.7/libs/lensfun/cpuid.cpp
/var/tmp/portage/media-libs/lensfun-0.2.7/work/lensfun-0.2.7/libs/lensfun/cpuid.cpp: Assembler messages:
/var/tmp/portage/media-libs/lensfun-0.2.7/work/lensfun-0.2.7/libs/lensfun/cpuid.cpp:114: Error: operand type mismatch for `pop'
/var/tmp/portage/media-libs/lensfun-0.2.7/work/lensfun-0.2.7/libs/lensfun/cpuid.cpp:117: Error: operand type mismatch for `push'
/var/tmp/portage/media-libs/lensfun-0.2.7/work/lensfun-0.2.7/libs/lensfun/cpuid.cpp:120: Error: operand type mismatch for `pop'
make[2]: *** [libs/lensfun/CMakeFiles/lensfun.dir/cpuid.cpp.o] Error 1

You also can take a look to the bug reported on gentoo https://bugs.gentoo.org/show_bug.cgi?id=466220</details>
        <close_date>1388604357</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46495'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84132'>
            <field_name>details</field_name>
            <old_value>I suspect that rawstudio doesn't have this problem?  LensFun has stolen this code part from rawstudio but since then, the code has diverged.

I recommend to compare LensFun's cpuid.cpp with rawstudio's rs_detect_cpu_features() routine in 
http://rawstudio.org/svn/rawstudio/trunk/librawstudio/rs-utils.c

But I am not competent to do that.  Besides, I cannot test that on Windows.</old_value>
            <mod_by>2378</mod_by>
            <date>1386941201</date>
        </history>
        <history id='84145'>
            <field_name>details</field_name>
            <old_value>My best guess is that the use of __SIZE_TYPE__ is the problem. The X32 ABI probably sets it to 32 bits while it expects register operands to be 64 bits long.

I have added a patch (untested!) to the patch tracker. Please test it and report back.</old_value>
            <mod_by>61570</mod_by>
            <date>1387087651</date>
        </history>
        <history id='84211'>
            <field_name>details</field_name>
            <old_value>I can confirm that this patch apply and build finely on lensfun 0.2.8.

Thanks Torsten</old_value>
            <mod_by>64473</mod_by>
            <date>1388188482</date>
        </history>
        <history id='84233'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388604357</date>
        </history>
        <history id='84234'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388604357</date>
        </history>
        <history id='84235'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388604357</date>
        </history>
        <history id='84236'>
            <field_name>details</field_name>
            <old_value>Great, thanks for your investigations! Patch is applied to SVn now.</old_value>
            <mod_by>36447</mod_by>
            <date>1388604357</date>
        </history>
        <history id='84237'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1388604357</date>
        </history>
        <task_dependency id='46318'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19218'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1386270795</date>
        <summary>Vignetting correction doesn't work for non-matching sensors</summary>
        <details>If the calibration sensor and the image sensor have different crop factor and/or different aspect ratio, vignetting is not corrected properly.  Reason is that the crop factor ratio is canceled in &quot;x *= param [4]&quot; (mod-color.cpp, line 277).

One can reproduce it by taking a picture with vignetting, taking only the inner part, and correct it with a virtual camera with a bigger crop factor (as much bigger as the image is smaller).  This must work, but with current LensFun, it doesn't.

http://developer.berlios.de/patch/?func=detailpatch&amp;patch_id=3532&amp;group_id=9034 fixes this, and even takes non-matching aspect ratios into account.  Besides, it is better unterstandable (in my opinion).</details>
        <close_date>1388605375</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46496'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84238'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388605375</date>
        </history>
        <history id='84239'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388605375</date>
        </history>
        <history id='84240'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388605375</date>
        </history>
        <history id='84241'>
            <field_name>details</field_name>
            <old_value>Patch is applied to SVN, so we can close this now.</old_value>
            <mod_by>36447</mod_by>
            <date>1388605375</date>
        </history>
        <history id='84242'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1388605375</date>
        </history>
        <task_dependency id='46319'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19244'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='100' name='none'/>
        <date>1388589893</date>
        <summary>Error in svn r425 (Canon SX220HS)?</summary>
        <details>These lines are from svn r425 which adds the Canon PowerShot SX220HS to the database:

            &lt;tca model=&quot;poly3&quot; focal=&quot;27.2&quot; vr=&quot;1.0003&quot; vb=&quot;0.9996&quot; /&gt; 
            &lt;tca model=&quot;poly3&quot; focal=&quot;49.2&quot; vr=&quot;1.0000&quot; vb=&quot;0.9990&quot; /&gt; 
            &lt;tca model=&quot;poly3&quot; focal=&quot;27.2&quot; vr=&quot;1.0003&quot; vb=&quot;0.9996&quot; /&gt; 

Should the last line not be focal=&quot;70&quot;?
</details>
        <close_date>1388609500</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46499'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84245'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1388609500</date>
        </history>
        <history id='84246'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1388609500</date>
        </history>
        <history id='84247'>
            <field_name>details</field_name>
            <old_value>Yes, I fixed that.  Thank you for spotting this!</old_value>
            <mod_by>2378</mod_by>
            <date>1388609500</date>
        </history>
        <history id='84248'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1388609500</date>
        </history>
        <task_dependency id='46322'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19256'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='25696' name='fingerle'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1390260073</date>
        <summary>Old Olympus Camera Lenses don't match in darktable</summary>
        <details>Hi,

when I invoke exiftool on one of my old Olympus RAWs (E-520, E-600) it looks like this with all testes lenses (Olympus Zuiko Digital 25mm F2.8, Olympus Zuiko Digital ED 14-42mm F3.5-5.6, Olympus Zuiko Digital ED 40-150mm F4.0-5.6):

&gt; exiftool somename.ORF
[...]
Camera Type 2                   : E-520
[...]
Body Firmware Version           : 1.101
Lens Type                       : Olympus Zuiko Digital ED 14-42mm
F3.5-5.6
[...]
Lens Model                      : OLYMPUS 14-42mm Lens
Lens Firmware Version           : 1.305
[...]

=&gt; The Lens Type matches to maker+model in the lensfun database. 

I don't see this with my E-M5.

This leads to darktable not finding a match (I've sent this to their dev ML for discussion) - I'm not sure who should change here what, but together darktable+lensfun+theses cameras/lenses don't deliver the end user experience I'd expect.

</details>
        <close_date>1390373272</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46549'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84364'>
            <field_name>details</field_name>
            <old_value>To clarify, all FT lenses I own and no MFT that I own or lent are affected. But I do only own those three FT lenses, so I don't know if there may be counter-examples.</old_value>
            <mod_by>25696</mod_by>
            <date>1390344558</date>
        </history>
        <history id='84351'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1390319505</date>
        </history>
        <history id='84352'>
            <field_name>details</field_name>
            <old_value>The main questions are:

1. What das exiv2 say?

2. Which lenses are affected?  Maybe all Four-Thirds of Olympus?  Are there counter-examples?

3. Is the lens model name of a particular Zuiko lens in the EXIF data depending on the camera model?

In case of doubt, I would add &quot;Olympus&quot; to all Olympus Four-Third model names in Lensfun.</old_value>
            <mod_by>2378</mod_by>
            <date>1390319505</date>
        </history>
        <history id='84363'>
            <field_name>details</field_name>
            <old_value>&quot;exiv2 -pt rawfilename | grep -i lens&quot; for the lenses that don't work for me (FT). That's all the Olympus Four Thirds Lenses I own:

(1) 
Exif.OlympusEq.LensType                      Byte        6  Olympus Zuiko Digital 25mm F2.8
Exif.OlympusEq.LensSerialNumber              Ascii      32  292021062
Exif.OlympusEq.LensModel                     Ascii      32  OLYMPUS 25mm F2.8
Exif.OlympusEq.LensFirmwareVersion           Long        1  4353
Exif.OlympusEq.LensProperties                Short       1  16391

(2)
Exif.OlympusEq.LensType                      Byte        6  Olympus Zuiko Digital ED 14-42mm F3.5-5.6
Exif.OlympusEq.LensSerialNumber              Ascii      32  212686538
Exif.OlympusEq.LensModel                     Ascii      32  OLYMPUS 14-42mm Lens
Exif.OlympusEq.LensFirmwareVersion           Long        1  4869
Exif.OlympusEq.LensProperties                Short       1  49223

(3)
Exif.OlympusEq.LensType                      Byte        6  Olympus Zuiko Digital ED 40-150mm F4.0-5.6
Exif.OlympusEq.LensSerialNumber              Ascii      32  222450296
Exif.OlympusEq.LensModel                     Ascii      32  OLYMPUS 40-150mm Lens
Exif.OlympusEq.LensFirmwareVersion           Long        1  4869
Exif.OlympusEq.LensProperties                Short       1  49223


For comparison, one lens that *does work* (MFT, all my MFT lenses work for me):

Exif.OlympusEq.LensType                      Byte        6  Olympus M.Zuiko Digital ED 12-50mm F3.5-6.3 EZ
Exif.OlympusEq.LensSerialNumber              Ascii      32  ABP332575
Exif.OlympusEq.LensModel                     Ascii      32  OLYMPUS M.12-50mm F3.5-6.3
Exif.OlympusEq.LensFirmwareVersion           Long        1  4354
Exif.OlympusEq.LensProperties                Short       1  49472
Exif.OlympusEq.ConversionLens                Ascii      32  
Exif.Photo.LensSpecification                 Rational    4  12/1 50/1 35/10 63/10
Exif.Photo.LensModel                         Ascii      32  OLYMPUS M.12-50mm F3.5-6.3

The MFT it's the same data on both my E-520 and on my E-600. 
I don't own a FT-MFT converter to check FT lenses on my MFT camera.
</old_value>
            <mod_by>25696</mod_by>
            <date>1390344319</date>
        </history>
        <history id='84365'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1390373272</date>
        </history>
        <history id='84366'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1390373272</date>
        </history>
        <history id='84367'>
            <field_name>details</field_name>
            <old_value>Fixed in SVN.</old_value>
            <mod_by>2378</mod_by>
            <date>1390373272</date>
        </history>
        <history id='84368'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1390373272</date>
        </history>
        <task_dependency id='46372'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19246'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='65104' name='mestro2'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1388659561</date>
        <summary>libstd++-6.dll: Windowsinstaller incomplete</summary>
        <details>The windowsinstaller, your linking on your website is not usable: while starting gimp, there is an error message: missing &quot;libstd++-6.dll&quot;

this seemed to be a standard library for c++ (may the gcc version is requird)

is it possible to link the std library into the software? Thank you in advance.

Here the detailed error messages after starting gimp:

---------------------------
gimp-lensfun.exe - Systemfehler
---------------------------
Das Programm kann nicht gestartet werden, da libstdc++-6.dll auf dem Computer fehlt. Installieren Sie das Programm erneut, um das Problem zu beheben. 
---------------------------
OK   
---------------------------


if i'm uasing a stdlibc++-6.dll form outa space of the internet:

---------------------------
gimp-lensfun.exe - Anwendungsfehler
---------------------------
Die Anwendung konnte nicht korrekt gestartet werden (0xc000007b). Klicken Sie auf &quot;OK&quot;, um die Anwendung zu schlieen. 
---------------------------
OK   
---------------------------


But there is allready a stdlibc-6.dll in the gimp installation. I'm copy the file to stdlibc++-6.dll then this is reported after running gimp:

---------------------------
gimp-lensfun.exe - Systemfehler
---------------------------
Das Programm kann nicht gestartet werden, da libgcc_s_sjlj-1.dll auf dem Computer fehlt. Installieren Sie das Programm erneut, um das Problem zu beheben. 
---------------------------
OK   
---------------------------
</details>
        <close_date>1391363503</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46578'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84275'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388844751</date>
        </history>
        <history id='84276'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388844751</date>
        </history>
        <history id='84277'>
            <field_name>details</field_name>
            <old_value>I think you mixed up GimpLensfun with the lensfun library itself. GimpLensfun is a plugin which uses the lensfun library, but your problem is directly connected to the plugin and its compilation. 

Anyway, as I am also the programmer of GimpLensfun let's try to clarify this.
The compilation of plugins for GIMP on other operating systems than Linux is a mess. This is related to the fact that the GCC compiler used for compilation is usually not binary compatible between versions and with every new GIMP release the plugin needs to be recompiled. That's the reason why the GimpLensfun installer for Windows is marked as experimental. It may work if your GIMP version is compiled with the right GCC version, but fails with the problem you described if not.

Unfortunateley I don't have time to update and fix the GimpLensfun installer frequently. If there are any GIMP and windows experienced programmers out there I would be glad to offer or link your binaries on my website or if you could share your experience how to reliably distribute GIMP plugins for windos platform.</old_value>
            <mod_by>36447</mod_by>
            <date>1388844751</date>
        </history>
        <history id='84418'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1391363503</date>
        </history>
        <history id='84419'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1391363503</date>
        </history>
        <task_dependency id='46401'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19245'>
        <group_id>9034</group_id>
        <status_id>1</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='36447' name='da_seeb'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1388653227</date>
        <summary>Remove old build system</summary>
        <details>By this bug report I would like to start a discussion about removing the old tibs python based build system. 

In my opinion it is hard to maintain as it is completely proprietary and it's not platform independent. As we have a good working cmake based build system since some time I would propose to remove the old one to avoid confusion and for simplicity. 

Cmake is widely used,  actively developed and allows easy cross platform usage. I used it since it appeared in lensfun and did not have any problems since that. 
What is your opinion about that? </details>
        <close_date>0</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46579'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84263'>
            <field_name>details</field_name>
            <old_value>I like it.  Redundancy is a bad thing.  I've always used the old build system, and started using the cmake-based today.  It worked smoothly.  I have two comments:

1. Turn on SSE support by default.
2. Remove /usr/local/bin/example from the installation
</old_value>
            <mod_by>2378</mod_by>
            <date>1388698869</date>
        </history>
        <history id='84271'>
            <field_name>details</field_name>
            <old_value>I much prefer the old build system. It is easier to use and set up for cross-compiling.</old_value>
            <mod_by>61570</mod_by>
            <date>1388796880</date>
        </history>
        <history id='84273'>
            <field_name>details</field_name>
            <old_value>Can the cmake system be improved in this respect, or is this a fundamental problem?  cmake has a very good reputation after all.</old_value>
            <mod_by>2378</mod_by>
            <date>1388822343</date>
        </history>
        <history id='84274'>
            <field_name>details</field_name>
            <old_value>Indeed I am not sure how to set up cross compiling with cmake. But I have to say that I never succeeded in cross compiling with the old build system. Direct compilation for example on windows was impossible, too. At least compilation on different platforms is easy and working fine with cmake.</old_value>
            <mod_by>36447</mod_by>
            <date>1388844216</date>
        </history>
        <history id='84280'>
            <field_name>details</field_name>
            <old_value>An example of cross-compiling using the old build system is this script from mxe.cc: https://github.com/mxe/mxe/blob/master/src/lensfun.mk

I have not looked at cmake lately. It might have improved.</old_value>
            <mod_by>61570</mod_by>
            <date>1388904251</date>
        </history>
        <history id='84420'>
            <field_name>details</field_name>
            <old_value>Cmake is able to do cross compileing, but I don't know how to set it up properly. I started to work on this in http://svn.berlios.de/wsvn/lensfun/trunk/build/CMakeModules/toolchain_win32.cmake but never completed it nor succeeded in compiling.

But well this is not an urgent decision... Let's keep the old build system until we manage to cross compile with cmake.</old_value>
            <mod_by>36447</mod_by>
            <date>1391363630</date>
        </history>
        <task_dependency id='46402'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19306'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='64837' name='mazhe'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1393350856</date>
        <summary>Pentax K110D not detected</summary>
        <details>Strangely, the section in the slr-pentax.xml file name it &quot;K110&quot; without the D at the end, which seems to be a typo (I am not aware of alternative naming scheme regarding Pentax cameras).

Example of K110D model from exiftools (brought on the french market) :
% exiftool IMGP8603.PEF | grep Model   
Camera Model Name               : PENTAX K110D
Pentax Model Type               : 0
Pentax Model ID                 : K110D

Would it be possible to change the name to fix detection?</details>
        <close_date>1393407066</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46634'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84496'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1393407066</date>
        </history>
        <history id='84497'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1393407066</date>
        </history>
        <history id='84498'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1393407066</date>
        </history>
        <history id='84499'>
            <field_name>details</field_name>
            <old_value>This was already fixed in SVN lensfun in January.</old_value>
            <mod_by>2378</mod_by>
            <date>1393407066</date>
        </history>
        <history id='84500'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1393407066</date>
        </history>
        <task_dependency id='46457'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19281'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='65219' name='johnny99'/>
        <assigned_to id='2378' name='bronger'/>
        <date>1391879451</date>
        <summary>relocate header files to /usr/include/lensfun</summary>
        <details>Please move your .h files, like  image.h into /usr/include/lensfun ( a sub-directory for your project), rather than  /usr/include/.

By having a generic named header file, like image.h,  in the OS default path, like /usr/include/, causes other packages I build that search the OS default path for commonly named header files to accidentally use your header file and fail to build.

I see other programs create a sub-directory for their headers, and any package, outside the core OS, that has generic named header files, should probably use a sub-directory in /usr/include/.

Specifically, I was trying to build uboot-tools in buildroot on gentoo, and it fails because it searches the default include path (/usr/include) for header files which is needed, but lensfun's image.h is found, and the build fails.  The build needs the default OS path for other stuff, so hacking the Makefile for uboot-tools doesn't seem like a good idea.  This leads me to humbly submit this request for your headers.</details>
        <close_date>1393407115</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46635'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84440'>
            <field_name>details</field_name>
            <old_value>If I call &quot;sudo make install&quot;, only one header file is copied, namely lensfun.h.</old_value>
            <mod_by>2378</mod_by>
            <date>1391943738</date>
        </history>
        <history id='84472'>
            <field_name>details</field_name>
            <old_value>Please tell us how did you compile and install lensfun.</old_value>
            <mod_by>2378</mod_by>
            <date>1392701781</date>
        </history>
        <history id='84501'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1393407115</date>
        </history>
        <history id='84502'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1393407115</date>
        </history>
        <history id='84503'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1393407115</date>
        </history>
        <history id='84504'>
            <field_name>details</field_name>
            <old_value>Please reopen if the problem persists or you have more detailed information.</old_value>
            <mod_by>2378</mod_by>
            <date>1393407115</date>
        </history>
        <history id='84505'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1393407115</date>
        </history>
        <task_dependency id='46458'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='19267'>
        <group_id>9034</group_id>
        <status_id>1</status_id>
        <priority>9</priority>
        <category_id>100</category_id>
        <submitted_by id='36447' name='da_seeb'/>
        <assigned_to id='36447' name='da_seeb'/>
        <date>1391029663</date>
        <summary>BerliOS is shut down in April 2014</summary>
        <details>BerliOS Developer will be shut down at April 30th 2014. Therefore, we have to look for a new hosting platform.

There seems to be an easy prepared way for a migration procedure from BerliOS to Sourceforge which is officially promoted by BerliOS. But I would like to take the chance and think about other alternatives regarding both, the version control and hosting.

Sourceforge as a hoster is OK. It really developed regarding it's interface and usability in the last time,  but I there may be better sites. GoogleCode is also nice from the interface and capabilities, but I really don't like that the whole google universe is connected with the accounts.

So, when it comes to a hosting platform my favorite is GitHub. Very simple yet powerful interface and it is perfectly embedded into the git world. Everything is a repository there... even web space and wiki can be managed by git. Changes are then as simple as just commiting a change, pushing it to the server and it's immediately online.

Personally I also prefer git over svn as a version control system, so I would really encourage to take the step away from subversion and continue the work with a git repository. AFAIK it is simple to import an existing svn repository to git and keep most of the history and other stuff. This decision is independent from the hoster, as nearly everyone supports svn and git.

Well.. that's my opinion... what do you think?

</details>
        <close_date>0</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='46699'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='84406'>
            <field_name>details</field_name>
            <old_value>I've seen it coming (remember my &quot;do I have to be happy or shocked that we are the second most active project here?&quot;).  I must admit that I am not unhappy about it, even if there is some unpleasent work ahead.  I don't like Berlios.

While I'm not a huge git fan, it is by far the best choice in my opinion.  GitHub is best in hosting code.  On the other hand, it seems to neglect all other things.  I don't know whether we can host the database tarballs there (we need an address for them like http://website.com/db/version_0.tar.gz).  Can we?

Sourceforge has become more usable in recent years and it is complete.  It has everything.  It was negatively in the news last year, but I think there were only &quot;political&quot; problems, no technical.

I see two scenarios:

1. Sourceforge for everything.

2. GitHub for as much as possible, and GoogleGroups or Sourceforge for the things that are missing.

Personally, I'd like to use GitHub + GoogleGroups.  Of course, only if the issue tracker on GitHub and its hosting of static http content is sufficient for us.  I don't mind that this requires a Google account.
</old_value>
            <mod_by>2378</mod_by>
            <date>1391125216</date>
        </history>
        <history id='84412'>
            <field_name>details</field_name>
            <old_value>GitHub can do web hosting like you need it for the database tarballs. But this would be managed by a git repository. Everthing which is in a branch called gh-pages is available as at a certain URL. So we can push the whole web site to this branch and also release packages and database update files. Generally it is not advised to include binary files in a repository, but as it is a seperate branch and files are small I think we can try and see how it works out.

Another possibility would be to add branches database-v1, database-v2, ... where your automatic conversion script then regularly pushes its changes. These branches can then be automatically dowloaded as zip file at the URL https://github.com/PROJECTNAME/zipball/BRANCHNAME
As before it is independent from the main branch and can easily be deleted or modified without influencing the master branch.

The issue tracker is simple but can do everything necessary. We can create subgroups for patches, databas and bugs as we have here at BerliOS. One bad thing I just found out, though. You cannot attach files to the issues. At github patches are usually preferred to be &quot;pull requests&quot; from a fork repository. While this is no problem for developers, it may cause trouble to photographers who are not as experienced with version control. These have to paste their new calibration data into the text or put them on https://gist.github.com/ or pastebin.com

But no matter what we do, a mix of platforms should be avoided in my opinion. If github does not offer the solutions we need, we should go to Sourceforge.</old_value>
            <mod_by>36447</mod_by>
            <date>1391363353</date>
        </history>
        <history id='84421'>
            <field_name>details</field_name>
            <old_value>Then I suggest Sourceforge.  We also need a mailing list, after all.</old_value>
            <mod_by>2378</mod_by>
            <date>1391411638</date>
        </history>
        <history id='84571'>
            <field_name>details</field_name>
            <old_value>Isn't it time for changing lensfun.berlios.de to a &quot;please update your links&quot; page?</old_value>
            <mod_by>2378</mod_by>
            <date>1394562060</date>
        </history>
        <history id='84591'>
            <field_name>details</field_name>
            <old_value>I have already posted an issue at Sourceforge to migrate the project. Unfortunately no reaction from the support team so far.

http://sourceforge.net/p/forge/site-support/7088/</old_value>
            <mod_by>36447</mod_by>
            <date>1395429560</date>
        </history>
        <task_dependency id='46522'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
    <bug id='18191'>
        <group_id>9034</group_id>
        <status_id>3</status_id>
        <priority>5</priority>
        <category_id>100</category_id>
        <submitted_by id='60100' name='skibler'/>
        <assigned_to id='100' name='none'/>
        <date>1309362812</date>
        <summary>Incorrect lens mount for Panasonic 20mm lens</summary>
        <details>In file trunk/data/db/slr-panasonic.xml the LINUX G 20/F1.7 is listed on line 62 as &lt;mount&gt;4/3 System&lt;/mount&gt; when it should be &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;

I believe this also applies to the other two Panasonic lenses, but I do not personally have either.</details>
        <close_date>1329413322</close_date>
        <bug_group_id>100</bug_group_id>
        <resolution></resolution>
        <dependency id='44744'>
            <dep_id>100</dep_id>
        </dependency>
        <history id='80997'>
            <field_name>status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329413322</date>
        </history>
        <history id='80998'>
            <field_name>resolution_id</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1329413322</date>
        </history>
        <history id='80999'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329413322</date>
        </history>
        <task_dependency id='44567'>
            <dep_on_task_id>100</dep_on_task_id>
        </task_dependency>
    </bug>
</bugs>
