<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE bs_patches SYSTEM "http://developer.berlios.de/export/bs_patches_0.1.dtd">
<patches>
    <patch id='2528'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='47092' name='pgarland'/>
        <assigned_to id='100' name='none'/>
        <open_date>1216843499</open_date>
        <summary>Nikon D80 DB Entry</summary>
        <code>Index: data/db/slr-nikon.xml
===================================================================
--- data/db/slr-nikon.xml	(revision 43)
+++ data/db/slr-nikon.xml	(working copy)
@@ -75,6 +75,15 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D80&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D80&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON D100&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;D100&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
</code>
        <close_date>1262612053</close_date>
        <history id='9929'>
            <field_name>details</field_name>
            <old_value>Add an entry for the Nikon D80 DSLR to the NIkon database</old_value>
            <mod_by>47092</mod_by>
            <date>1216843980</date>
        </history>
        <history id='9930'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>47092</mod_by>
            <date>1216843980</date>
        </history>
        <history id='11449'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1262612053</date>
        </history>
        <history id='11450'>
            <field_name>details</field_name>
            <old_value>Done - thanks.</old_value>
            <mod_by>12372</mod_by>
            <date>1262612053</date>
        </history>
        <history id='11451'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1262612053</date>
        </history>
    </patch>
    <patch id='3335'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1347468358</open_date>
        <summary>New Samsung NX lens names to match future Exiv2 behavior</summary>
        <code># New Samsung lens names to match http://dev.exiv2.org/issues/843
diff -Nurpd lensfun-r175-orig/data/db/mil-samsung.xml lensfun-r175-samsung/data/db/mil-samsung.xml
--- lensfun-r175-orig/data/db/mil-samsung.xml	2012-09-12 18:37:32.600660053 +0200
+++ lensfun-r175-samsung/data/db/mil-samsung.xml	2012-09-12 18:39:43.721310279 +0200
@@ -75,7 +75,7 @@ http://en.wikipedia.org/wiki/Mirrorless_
 
     &lt;lens&gt;
         &lt;maker&gt;Samsung&lt;/maker&gt;
-        &lt;model&gt;Samsung 20-50mm F3.5-5.6 Compact Zoom&lt;/model&gt;
+        &lt;model&gt;Samsung NX 20-50mm F3.5-5.6 ED&lt;/model&gt;
         &lt;mount&gt;Samsung NX&lt;/mount&gt;
         &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
         &lt;calibration&gt;
@@ -90,7 +90,7 @@ http://en.wikipedia.org/wiki/Mirrorless_
 
     &lt;lens&gt;
         &lt;maker&gt;Samsung&lt;/maker&gt;
-        &lt;model&gt;Samsung 30mm F2 Pancake&lt;/model&gt;
+        &lt;model&gt;Samsung NX 30mm F2 Pancake&lt;/model&gt;
         &lt;mount&gt;Samsung NX&lt;/mount&gt;
         &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
         &lt;calibration&gt;
</code>
        <close_date>1349283069</close_date>
        <history id='13432'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1349283069</date>
        </history>
        <history id='13433'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1349283069</date>
        </history>
        <history id='13434'>
            <field_name>details</field_name>
            <old_value>Thanks!</old_value>
            <mod_by>36447</mod_by>
            <date>1349283069</date>
        </history>
        <history id='13435'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1349283069</date>
        </history>
    </patch>
    <patch id='3321'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='100' name='none'/>
        <open_date>1345581249</open_date>
        <summary>Canon EOS camera updates</summary>
        <code>diff -Nurpd lensfun-r173/data/db/mil-canon.xml lensfun-r173-canon/data/db/mil-canon.xml
--- lensfun-r173/data/db/mil-canon.xml	1970-01-01 01:00:00.000000000 +0100
+++ lensfun-r173-canon/data/db/mil-canon.xml	2012-08-21 22:14:45.750354658 +0200
@@ -0,0 +1,19 @@
+&lt;lensdatabase&gt;
+
+    &lt;mount&gt;
+        &lt;name&gt;Canon EF-M&lt;/name&gt;
+        &lt;compat&gt;Canon EF-S&lt;/compat&gt;
+        &lt;compat&gt;Canon EF&lt;/compat&gt;
+        &lt;compat&gt;M42&lt;/compat&gt;
+        &lt;compat&gt;Generic&lt;/compat&gt;
+    &lt;/mount&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS M&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS M&lt;/model&gt;
+        &lt;mount&gt;Canon EF-M&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+&lt;/lensdatabase&gt;
diff -Nurpd lensfun-r173/data/db/slr-canon.xml lensfun-r173-canon/data/db/slr-canon.xml
--- lensfun-r173/data/db/slr-canon.xml	2012-08-21 22:02:06.722590783 +0200
+++ lensfun-r173-canon/data/db/slr-canon.xml	2012-08-21 22:12:17.817620967 +0200
@@ -168,24 +168,40 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL XSi&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XSi&lt;/model&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL T2i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel T2i&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel&lt;/model&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL T3i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel T3i&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS REBEL T1i&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS REBEL T1i&lt;/model&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL T4i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel T4i&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL XSi&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XSi&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -265,6 +281,14 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS 650D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 650D&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS 1000D&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS 1000D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
@@ -286,6 +310,54 @@
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss Digital X&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital X&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss Digital X2&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital X2&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss Digital X3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital X3&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss Digital X4&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital X4&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss Digital X5&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital X5&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss Digital X6i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital X6i&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
</code>
        <close_date>1345887931</close_date>
        <history id='13370'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1345887931</date>
        </history>
        <history id='13371'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1345887931</date>
        </history>
    </patch>
    <patch id='3264'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='100' name='none'/>
        <open_date>1332788568</open_date>
        <summary>Lensfun slr-canon update</summary>
        <code>--- trunk-orig/data/db/slr-canon.xml	2012-03-26 20:30:59.367739957 +0200
+++ trunk-update/data/db/slr-canon.xml	2012-03-26 20:31:58.586409849 +0200
@@ -15,6 +15,14 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS 5D Mark III&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 5D Mark III&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS 5D Mark II&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS 5D Mark II&lt;/model&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
@@ -152,6 +160,14 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL T3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel T3&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS DIGITAL REBEL XSi&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XSi&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
@@ -233,6 +249,22 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS 550D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 550D&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS 600D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 600D&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS 1000D&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS 1000D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
@@ -241,6 +273,14 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS 1100D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 1100D&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS Kiss Digital N&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital N&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
@@ -249,6 +289,22 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss Digital F&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital F&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss Digital X50&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital X50&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS Kiss Digital&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
@@ -265,6 +321,14 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS 60D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 60D&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS 50D&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS 50D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
@@ -340,14 +404,6 @@
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
-    &lt;camera&gt;
-        &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS 550D&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS 550D&lt;/model&gt;
-        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
-        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
-    &lt;/camera&gt;
-
     &lt;lens&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EF-S 10-22mm f/3.5-4.5 USM&lt;/model&gt;
</code>
        <close_date>1333738417</close_date>
        <history id='13023'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1333738417</date>
        </history>
        <history id='13024'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1333738417</date>
        </history>
    </patch>
    <patch id='3172'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='59944' name='romainht'/>
        <assigned_to id='100' name='none'/>
        <open_date>1307798574</open_date>
        <summary>Lens data for Tamron 17-50mm f/2.8 XR Di II LD</summary>
        <code>--- slr_tamron_bak.xml	2011-06-11 15:20:12.354101343 +0200
+++ slr-tamron.xml	2011-06-11 15:06:34.298101343 +0200
@@ -160,5 +160,25 @@
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;300&quot; a=&quot;0&quot; b=&quot;0.006507&quot; c=&quot;0&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;
+	
+	&lt;lens&gt;
+        &lt;maker&gt;Tamron&lt;/maker&gt;
+        &lt;model&gt;Tamron 17-50mm f/2.8 XR Di II LD&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;mount&gt;Pentax KAF&lt;/mount&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;17&quot; a=&quot;0.02667&quot; b=&quot;-0.07161&quot; c=&quot;0.02012&quot; /&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.02791&quot; b=&quot;-0.08057&quot; c=&quot;0.07132&quot; /&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;-0.01098&quot; b=&quot;0.0448&quot; c=&quot;-0.04755&quot; /&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;-0.00372&quot; b=&quot;0.01796&quot; c=&quot;-0.01334&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;17&quot; br=&quot;0.0000205&quot; vr=&quot;1.0005975&quot; bb=&quot;-0.0001325&quot; vb=&quot;1.0008428&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;24&quot; br=&quot;-0.0000073&quot; vr=&quot;1.0004585&quot; bb=&quot;-0.0000382&quot; vb=&quot;1.0004269&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.0000351&quot; vr=&quot;1.0002419&quot; bb=&quot;-0.0000228&quot; vb=&quot;1.0001575&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;-0.0000294&quot; vr=&quot;1.0000100&quot; bb=&quot;-0.0000149&quot; vb=&quot;0.9999915&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
 
-&lt;/lensdatabase&gt; 
+&lt;/lensdatabase&gt;
</code>
        <close_date>1329413041</close_date>
        <history id='12943'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329413041</date>
        </history>
        <history id='12944'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329413041</date>
        </history>
    </patch>
    <patch id='3419'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='63585' name='mrchainsaw'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1360320791</open_date>
        <summary>Added new lens to mil-olympus.xml</summary>
        <code>&lt;lensdatabase&gt;

     &lt;mount&gt;
         &lt;name&gt;Micro 4/3 System&lt;/name&gt;
         &lt;compat&gt;M42&lt;/compat&gt;
         &lt;compat&gt;Generic&lt;/compat&gt;
         &lt;compat&gt;4/3 System&lt;/compat&gt;
     &lt;/mount&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-P1&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-P2&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-P3&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL1&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL1s&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL2&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL3&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL5&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PM1&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PM2&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-M5&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;

     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;OLYMPUS M.14-42mm F3.5-5.6&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;poly3&quot; focal=&quot;14&quot; k1=&quot;-0.079&quot; /&gt;
             &lt;distortion model=&quot;poly3&quot; focal=&quot;18&quot; k1=&quot;-0.036&quot; /&gt;
             &lt;distortion model=&quot;poly3&quot; focal=&quot;25&quot; k1=&quot;0.0004&quot; /&gt;
             &lt;distortion model=&quot;poly3&quot; focal=&quot;30&quot; k1=&quot;0.013&quot; /&gt;
             &lt;distortion model=&quot;poly3&quot; focal=&quot;35&quot; k1=&quot;0.014&quot; /&gt;
             &lt;distortion model=&quot;poly3&quot; focal=&quot;42&quot; k1=&quot;0.012&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;14&quot; br=&quot;0.0002632&quot; vr=&quot;1.0002908&quot; bb=&quot;-0.0003817&quot; vb=&quot;1.0&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;-0.0000326&quot; vr=&quot;1.0004544&quot; bb=&quot;-0.0003189&quot; vb=&quot;1.0007081&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;25&quot; br=&quot;-0.0001613&quot; vr=&quot;1.0005611&quot; bb=&quot;-0.0001126&quot; vb=&quot;1.0004058&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;30&quot; br=&quot;-0.0002418&quot; vr=&quot;1.0006295&quot; bb=&quot;-0.0000052&quot; vb=&quot;1.0002145&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.0002539&quot; vr=&quot;1.0006484&quot; bb=&quot;0.0000470&quot; vb=&quot;1.0000846&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;42&quot; br=&quot;-0.0002029&quot; vr=&quot;1.0006187&quot; bb=&quot;0.0001236&quot; vb=&quot;0.9999271&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;

     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;OLYMPUS M.14-42mm F3.5-5.6 L&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;14&quot; br=&quot;0.0000600&quot; vr=&quot;1.0001242&quot; bb=&quot;-0.0002995&quot; vb=&quot;1.0007041&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0001267&quot; vr=&quot;1.0000281&quot; bb=&quot;-0.0001852&quot; vb=&quot;1.0007117&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;25&quot; br=&quot;-0.0000200&quot; vr=&quot;1.0001315&quot; bb=&quot;0.0001459&quot; vb=&quot;1.0002999&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.0001014&quot; vr=&quot;1.0002742&quot; bb=&quot;0.0000318&quot; vb=&quot;1.0002395&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;42&quot; br=&quot;-0.0001526&quot; vr=&quot;1.0004259&quot; bb=&quot;0.0001596&quot; vb=&quot;1.0000256&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;13.56&quot; a=&quot;0.10558&quot; b=&quot;-0.3175&quot; c=&quot;0.19816&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;16.49&quot; a=&quot;0.0738&quot; b=&quot;-0.25191&quot; c=&quot;0.21409&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;24.40&quot; a=&quot;-0.01895&quot; b=&quot;0.05672&quot; c=&quot;-0.05355&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;34.28&quot; a=&quot;0.00451&quot; b=&quot;-0.00716&quot; c=&quot;0.02727&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;41.01&quot; a=&quot;-0.00173&quot; b=&quot;0.01774&quot; c=&quot;0.00339&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;

     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;OLYMPUS M.14-42mm F3.5-5.6 II&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;0.018&quot; b=&quot;-0.074&quot; c=&quot;0.014&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.011&quot; b=&quot;-0.048&quot; c=&quot;0.021&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;25&quot; a=&quot;0.0&quot; b=&quot;-0.012&quot; c=&quot;0.008&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.007&quot; b=&quot;-0.015&quot; c=&quot;0.003&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0.007&quot; b=&quot;-0.021&quot; c=&quot;0.018&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;42&quot; a=&quot;-0.001&quot; b=&quot;0.008&quot; c=&quot;-0.010&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;14&quot; br=&quot;0.0000882&quot; vr=&quot;1.0001828&quot; bb=&quot;0.0002104&quot; vb=&quot;1.0004280&quot;/&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0000087&quot; vr=&quot;1.0000985&quot; bb=&quot;-0.0001260&quot; vb=&quot;1.0002535&quot;/&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;25&quot; br=&quot;-0.0000210&quot; vr=&quot;1.0001388&quot; bb=&quot;-0.0001294&quot; vb=&quot;1.0005537&quot;/&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;30&quot; br=&quot;-0.0000429&quot; vr=&quot;1.0002040&quot; bb=&quot;0.0000872&quot; vb=&quot;1.0002187&quot;/&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.0001262&quot; vr=&quot;1.0003653&quot; bb=&quot;-0.0000270&quot; vb=&quot;1.0003605&quot;/&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;42&quot; br=&quot;-0.0000752&quot; vr=&quot;1.0003152&quot; bb=&quot;-0.0000213&quot; vb=&quot;1.0001196&quot;/&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;

     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;OLYMPUS M.14-42mm F3.5-5.6 II R&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;0.018&quot; b=&quot;-0.074&quot; c=&quot;0.014&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.011&quot; b=&quot;-0.048&quot; c=&quot;0.021&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;25&quot; a=&quot;0.0&quot; b=&quot;-0.012&quot; c=&quot;0.008&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.007&quot; b=&quot;-0.015&quot; c=&quot;0.003&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0.007&quot; b=&quot;-0.021&quot; c=&quot;0.018&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;42&quot; a=&quot;-0.001&quot; b=&quot;0.008&quot; c=&quot;-0.010&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;14&quot; br=&quot;0.0000882&quot; vr=&quot;1.0001828&quot; bb=&quot;0.0002104&quot; vb=&quot;1.0004280&quot;/&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0000087&quot; vr=&quot;1.0000985&quot; bb=&quot;-0.0001260&quot; vb=&quot;1.0002535&quot;/&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;25&quot; br=&quot;-0.0000210&quot; vr=&quot;1.0001388&quot; bb=&quot;-0.0001294&quot; vb=&quot;1.0005537&quot;/&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;30&quot; br=&quot;-0.0000429&quot; vr=&quot;1.0002040&quot; bb=&quot;0.0000872&quot; vb=&quot;1.0002187&quot;/&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.0001262&quot; vr=&quot;1.0003653&quot; bb=&quot;-0.0000270&quot; vb=&quot;1.0003605&quot;/&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;42&quot; br=&quot;-0.0000752&quot; vr=&quot;1.0003152&quot; bb=&quot;-0.0000213&quot; vb=&quot;1.0001196&quot;/&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;

     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;OLYMPUS M.12mm F2.0&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;focal value=&quot;12&quot; /&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;12&quot; a=&quot;-0.005&quot; b=&quot;-0.016&quot; c=&quot;-0.014&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;12&quot; br=&quot;0.0000749&quot; vr=&quot;1.0001239&quot; bb=&quot;0.0000350&quot; vb=&quot;1.0000181&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;

     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;OLYMPUS M.17mm F2.8&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
              &lt;distortion model=&quot;ptlens&quot; focal=&quot;17&quot; a=&quot;0.00835&quot; b=&quot;-0.04149&quot; c=&quot;-0.0022&quot; /&gt;
              &lt;tca model=&quot;poly3&quot; focal=&quot;17&quot; br=&quot;-0.0004492&quot; vr=&quot;1.0016410&quot; bb=&quot;0.0005749&quot; vb=&quot;0.9989794&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;

    &lt;lens&gt;
        &lt;maker&gt;Olympus&lt;/maker&gt;
        &lt;model&gt;OLYMPUS M.12-50mm F3.5-6.3&lt;/model&gt;
        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;12&quot; a=&quot;0.00331&quot; b=&quot;-0.03343&quot; c=&quot;-0.00683&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;15&quot; a=&quot;0.00521&quot; b=&quot;-0.02919&quot; c=&quot;0.00519&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;-0.00075&quot; b=&quot;-0.00029&quot; c=&quot;-0.01458&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;22&quot; a=&quot;0.0006&quot; b=&quot;-0.00075&quot; c=&quot;-0.00843&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;26&quot; a=&quot;-0.00059&quot; b=&quot;0.00449&quot; c=&quot;-0.01271&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.00128&quot; b=&quot;-0.00365&quot; c=&quot;0.0029&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0.00046&quot; b=&quot;0.00124&quot; c=&quot;-0.0013&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;40&quot; a=&quot;0.01662&quot; b=&quot;-0.0539&quot; c=&quot;0.06353&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;45&quot; a=&quot;0.00827&quot; b=&quot;-0.02519&quot; c=&quot;0.0347&quot; /&gt;
            &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;-0.0063&quot; b=&quot;0.02983&quot; c=&quot;-0.02886&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;12&quot; br=&quot;0.0002153&quot; vr=&quot;1.0006397&quot; bb=&quot;-0.0001625&quot; vb=&quot;1.0003859&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;12&quot; br=&quot;0.0002549&quot; vr=&quot;1.0005804&quot; bb=&quot;-0.0001694&quot; vb=&quot;1.0004041&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;12&quot; br=&quot;0.0002567&quot; vr=&quot;1.0005732&quot; bb=&quot;-0.0001771&quot; vb=&quot;1.0004148&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;15&quot; br=&quot;0.0000901&quot; vr=&quot;1.0004739&quot; bb=&quot;-0.0000734&quot; vb=&quot;1.0004506&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;15&quot; br=&quot;0.0001052&quot; vr=&quot;1.0004582&quot; bb=&quot;-0.0000700&quot; vb=&quot;1.0004424&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;15&quot; br=&quot;0.0001196&quot; vr=&quot;1.0004310&quot; bb=&quot;-0.0000908&quot; vb=&quot;1.0004670&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0001710&quot; vr=&quot;1.0002351&quot; bb=&quot;-0.0000676&quot; vb=&quot;1.0003208&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0001998&quot; vr=&quot;1.0001989&quot; bb=&quot;-0.0000551&quot; vb=&quot;1.0002972&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0002004&quot; vr=&quot;1.0001907&quot; bb=&quot;-0.0000672&quot; vb=&quot;1.0003084&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;22&quot; br=&quot;0.0002187&quot; vr=&quot;1.0001159&quot; bb=&quot;-0.0001002&quot; vb=&quot;1.0002496&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;22&quot; br=&quot;0.0002200&quot; vr=&quot;1.0001153&quot; bb=&quot;-0.0000944&quot; vb=&quot;1.0002600&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;22&quot; br=&quot;0.0002222&quot; vr=&quot;1.0001016&quot; bb=&quot;-0.0001145&quot; vb=&quot;1.0002688&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;26&quot; br=&quot;0.0002792&quot; vr=&quot;0.9999735&quot; bb=&quot;-0.0001156&quot; vb=&quot;1.0003080&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;26&quot; br=&quot;0.0002939&quot; vr=&quot;0.9999418&quot; bb=&quot;-0.0000956&quot; vb=&quot;1.0002767&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;26&quot; br=&quot;0.0002973&quot; vr=&quot;0.9999405&quot; bb=&quot;-0.0001146&quot; vb=&quot;1.0002992&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;30&quot; br=&quot;0.0002072&quot; vr=&quot;0.9998717&quot; bb=&quot;-0.0001749&quot; vb=&quot;1.0004954&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;30&quot; br=&quot;0.0002495&quot; vr=&quot;0.9998295&quot; bb=&quot;-0.0001372&quot; vb=&quot;1.0004401&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;30&quot; br=&quot;0.0002527&quot; vr=&quot;0.9998374&quot; bb=&quot;-0.0001661&quot; vb=&quot;1.0004878&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;0.0001735&quot; vr=&quot;0.9997893&quot; bb=&quot;-0.0002156&quot; vb=&quot;1.0006502&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;0.0001856&quot; vr=&quot;0.9997740&quot; bb=&quot;-0.0002036&quot; vb=&quot;1.0005955&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;0.0002013&quot; vr=&quot;0.9997600&quot; bb=&quot;-0.0002229&quot; vb=&quot;1.0006799&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;40&quot; br=&quot;0.0001250&quot; vr=&quot;0.9998265&quot; bb=&quot;-0.0002366&quot; vb=&quot;1.0006687&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;40&quot; br=&quot;0.0001359&quot; vr=&quot;0.9998189&quot; bb=&quot;-0.0002446&quot; vb=&quot;1.0006998&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;40&quot; br=&quot;0.0001907&quot; vr=&quot;0.9997482&quot; bb=&quot;-0.0002707&quot; vb=&quot;1.0007475&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;45&quot; br=&quot;0.0001734&quot; vr=&quot;0.9997963&quot; bb=&quot;-0.0002222&quot; vb=&quot;1.0006242&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;45&quot; br=&quot;0.0001800&quot; vr=&quot;0.9997888&quot; bb=&quot;-0.0002076&quot; vb=&quot;1.0005887&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;45&quot; br=&quot;0.0001942&quot; vr=&quot;0.9997736&quot; bb=&quot;-0.0002343&quot; vb=&quot;1.0006603&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;0.0001414&quot; vr=&quot;0.9998089&quot; bb=&quot;-0.0002393&quot; vb=&quot;1.0005384&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;0.0001516&quot; vr=&quot;0.9998080&quot; bb=&quot;-0.0002719&quot; vb=&quot;1.0005789&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;0.0001784&quot; vr=&quot;0.9997785&quot; bb=&quot;-0.0002152&quot; vb=&quot;1.0004737&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;


&lt;/lensdatabase&gt;
</code>
        <close_date>1360433100</close_date>
        <history id='13926'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1360433100</date>
        </history>
        <history id='13927'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1360433100</date>
        </history>
        <history id='13928'>
            <field_name>details</field_name>
            <old_value>Thx!</old_value>
            <mod_by>36447</mod_by>
            <date>1360433100</date>
        </history>
        <history id='13929'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1360433100</date>
        </history>
    </patch>
    <patch id='3330'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61075' name='bugmenot2'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1346839216</open_date>
        <summary>Canon EF-S 18-55mm f/3.5-5.6 IS II</summary>
        <code>--- slr-canon.xml	2012-01-31 22:50:35.000000000 +1100
+++ slr-canon.xml	2012-09-05 19:57:41.176748755 +1000
@@ -1101,4 +1101,20 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
+    &lt;lens&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EF-S 18-55mm f/3.5-5.6 IS II&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.57&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.02504&quot; b=&quot;-0.06883&quot; c=&quot;0.01502&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.0203&quot; b=&quot;-0.06514&quot; c=&quot;0.04768&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;29&quot; a=&quot;0.00854&quot; b=&quot;-0.01505&quot; c=&quot;-0.00639&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;-0.01582&quot; b=&quot;0.04918&quot; c=&quot;-0.05313&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;41&quot; a=&quot;-0.00694&quot; b=&quot;0.02694&quot; c=&quot;-0.03595&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;46&quot; a=&quot;-0.01908&quot; b=&quot;0.07131&quot; c=&quot;-0.08927&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;55&quot; a=&quot;-0.00098&quot; b=&quot;0.01803&quot; c=&quot;-0.04704&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
 &lt;/lensdatabase&gt;
</code>
        <close_date>1349283057</close_date>
        <history id='13396'>
            <field_name>details</field_name>
            <old_value>I think the crop factor should have been 1.6 (see the other Canon lenses).</old_value>
            <mod_by>61929</mod_by>
            <date>1347468385</date>
        </history>
        <history id='13409'>
            <field_name>details</field_name>
            <old_value>exiftool gives me the following data:
Focal Length: 55.0 mm (35 mm equivalent: 86.5 mm)

It's mostly a question of how precisely you want to specify the crop factor. 1.57 is correct, but 1.6 is also correct when rounded to 1 decimal place. Is there a suggested precision to be used? Feel free to modify the value to 1.6 to match the rest of the cameras/lenses.</old_value>
            <mod_by>61075</mod_by>
            <date>1348549783</date>
        </history>
        <history id='13428'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1349283057</date>
        </history>
        <history id='13429'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1349283057</date>
        </history>
        <history id='13430'>
            <field_name>details</field_name>
            <old_value>Thanks, I changed crop factor to 1.6.</old_value>
            <mod_by>36447</mod_by>
            <date>1349283057</date>
        </history>
        <history id='13431'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1349283057</date>
        </history>
    </patch>
    <patch id='3348'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1349577811</open_date>
        <summary>Clean-up of double entries and new cameras for database.</summary>
        <code>diff -ur lensfun.183/data/db/mil-olympus.xml lensfun/data/db/mil-olympus.xml
--- lensfun.183/data/db/mil-olympus.xml	2012-10-07 04:32:53.936098450 +0200
+++ lensfun/data/db/mil-olympus.xml	2012-10-07 04:34:25.290395406 +0200
@@ -66,10 +66,26 @@
     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;E-PL5&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PM1&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;E-PM2&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
diff -ur lensfun.183/data/db/mil-samsung.xml lensfun/data/db/mil-samsung.xml
--- lensfun.183/data/db/mil-samsung.xml	2012-10-07 04:32:53.932100452 +0200
+++ lensfun/data/db/mil-samsung.xml	2012-10-07 04:37:06.877556017 +0200
@@ -58,15 +58,6 @@
     &lt;camera&gt;
         &lt;maker&gt;SAMSUNG&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Samsung&lt;/maker&gt;
-        &lt;model&gt;NX20&lt;/model&gt;
-         &lt;model lang=&quot;en&quot;&gt;NX20&lt;/model&gt;
-        &lt;mount&gt;Samsung NX&lt;/mount&gt;
-        &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
-    &lt;/camera&gt;
-
-    &lt;camera&gt;
-        &lt;maker&gt;SAMSUNG&lt;/maker&gt;
-        &lt;maker lang=&quot;en&quot;&gt;Samsung&lt;/maker&gt;
         &lt;model&gt;NX200&lt;/model&gt;
          &lt;model lang=&quot;en&quot;&gt;NX200&lt;/model&gt;
         &lt;mount&gt;Samsung NX&lt;/mount&gt;
@@ -99,17 +90,22 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Samsung&lt;/maker&gt;
-        &lt;model&gt;Samsung NX 30mm F2 Pancake&lt;/model&gt;
+        &lt;model&gt;Samsung 20-50mm F3.5-5.6 Compact Zoom&lt;/model&gt;
         &lt;mount&gt;Samsung NX&lt;/mount&gt;
         &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
         &lt;calibration&gt;
-            &lt;distortion model=&quot;poly3&quot; focal=&quot;30&quot; k1=&quot;-0.00596&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;20&quot; a=&quot;0.01347&quot; b=&quot;-0.05952&quot; c=&quot;0.01561&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.00549&quot; b=&quot;-0.03312&quot; c=&quot;0.00984&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;28&quot; a=&quot;0.01064&quot; b=&quot;-0.04256&quot; c=&quot;0.03338&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;-0.001&quot; b=&quot;-0.00843&quot; c=&quot;0.02713&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;45&quot; a=&quot;0.00716&quot; b=&quot;-0.0379&quot; c=&quot;0.06902&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;-0.02119&quot; b=&quot;0.06813&quot; c=&quot;-0.06118&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
     &lt;lens&gt;
         &lt;maker&gt;Samsung&lt;/maker&gt;
-        &lt;model&gt;Samsung 30mm F2 Pancake&lt;/model&gt;
+        &lt;model&gt;Samsung NX 30mm F2 Pancake&lt;/model&gt;
         &lt;mount&gt;Samsung NX&lt;/mount&gt;
         &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
         &lt;calibration&gt;
@@ -127,19 +123,4 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
-    &lt;lens&gt;
-        &lt;maker&gt;Samsung&lt;/maker&gt;
-        &lt;model&gt;Samsung 20-50mm F3.5-5.6 Compact Zoom&lt;/model&gt;
-        &lt;mount&gt;Samsung NX&lt;/mount&gt;
-        &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
-        &lt;calibration&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;20&quot; a=&quot;0.01347&quot; b=&quot;-0.05952&quot; c=&quot;0.01561&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.00549&quot; b=&quot;-0.03312&quot; c=&quot;0.00984&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;28&quot; a=&quot;0.01064&quot; b=&quot;-0.04256&quot; c=&quot;0.03338&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;-0.001&quot; b=&quot;-0.00843&quot; c=&quot;0.02713&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;45&quot; a=&quot;0.00716&quot; b=&quot;-0.0379&quot; c=&quot;0.06902&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;-0.02119&quot; b=&quot;0.06813&quot; c=&quot;-0.06118&quot; /&gt;
-        &lt;/calibration&gt;
-    &lt;/lens&gt;
-
 &lt;/lensdatabase&gt;
diff -ur lensfun.183/data/db/slr-canon.xml lensfun/data/db/slr-canon.xml
--- lensfun.183/data/db/slr-canon.xml	2012-10-07 04:32:53.932100452 +0200
+++ lensfun/data/db/slr-canon.xml	2012-10-07 04:38:05.320318075 +0200
@@ -23,14 +23,6 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS 5D Mark III&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS 5D Mark III&lt;/model&gt;
-        &lt;mount&gt;Canon EF&lt;/mount&gt;
-        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
-    &lt;/camera&gt;
-
-    &lt;camera&gt;
-        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS 5D Mark II&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS 5D Mark II&lt;/model&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
diff -ur lensfun.183/data/db/slr-nikon.xml lensfun/data/db/slr-nikon.xml
--- lensfun.183/data/db/slr-nikon.xml	2012-10-07 04:32:53.936098450 +0200
+++ lensfun/data/db/slr-nikon.xml	2012-10-07 04:39:15.445235735 +0200
@@ -147,6 +147,15 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D600&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D600&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON D700&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;D700&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
</code>
        <close_date>1352319156</close_date>
        <history id='13453'>
            <field_name>details</field_name>
            <old_value>This patch removes some double entries in the database created by svn submit 182 and adds three new cameras to the database (NIKON D600, OLYMPUS E-PL5, and OLYMPUS E-PM2).
</old_value>
            <mod_by>61570</mod_by>
            <date>1349577925</date>
        </history>
        <history id='13454'>
            <field_name>details</field_name>
            <old_value>There are still double entries for lenses in mil-samsung.xml. You might want to remove the entries without &quot;NX&quot; in the lens name according to the new naming scheme in exiv2.</old_value>
            <mod_by>61570</mod_by>
            <date>1349579111</date>
        </history>
        <history id='13555'>
            <field_name>details</field_name>
            <old_value>Thanks! I also removed the entries without NX. Fuzzy search should not care about this detail I think...</old_value>
            <mod_by>36447</mod_by>
            <date>1352319135</date>
        </history>
        <history id='13556'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1352319156</date>
        </history>
        <history id='13557'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1352319156</date>
        </history>
        <history id='13558'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1352319156</date>
        </history>
    </patch>
    <patch id='3320'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1345581226</open_date>
        <summary>Samsung NX camera updates</summary>
        <code>diff -Nurpd lensfun-r173/data/db/mil-samsung.xml lensfun-r173-samsung/data/db/mil-samsung.xml
--- lensfun-r173/data/db/mil-samsung.xml	2012-08-21 22:02:06.722590783 +0200
+++ lensfun-r173-samsung/data/db/mil-samsung.xml	2012-08-21 22:17:00.347022018 +0200
@@ -40,6 +40,15 @@ http://en.wikipedia.org/wiki/Mirrorless_
     &lt;camera&gt;
         &lt;maker&gt;SAMSUNG&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Samsung&lt;/maker&gt;
+        &lt;model&gt;NX1000&lt;/model&gt;
+         &lt;model lang=&quot;en&quot;&gt;NX1000&lt;/model&gt;
+        &lt;mount&gt;Samsung NX&lt;/mount&gt;
+        &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SAMSUNG&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Samsung&lt;/maker&gt;
         &lt;model&gt;NX20&lt;/model&gt;
          &lt;model lang=&quot;en&quot;&gt;NX20&lt;/model&gt;
         &lt;mount&gt;Samsung NX&lt;/mount&gt;
@@ -54,6 +63,15 @@ http://en.wikipedia.org/wiki/Mirrorless_
         &lt;mount&gt;Samsung NX&lt;/mount&gt;
         &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
     &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SAMSUNG&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Samsung&lt;/maker&gt;
+        &lt;model&gt;NX210&lt;/model&gt;
+         &lt;model lang=&quot;en&quot;&gt;NX210&lt;/model&gt;
+        &lt;mount&gt;Samsung NX&lt;/mount&gt;
+        &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
+    &lt;/camera&gt;
 
     &lt;lens&gt;
         &lt;maker&gt;Samsung&lt;/maker&gt;
</code>
        <close_date>1345887916</close_date>
        <history id='13366'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1345887916</date>
        </history>
        <history id='13367'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1345887916</date>
        </history>
        <history id='13368'>
            <field_name>details</field_name>
            <old_value>Thanks!</old_value>
            <mod_by>36447</mod_by>
            <date>1345887916</date>
        </history>
        <history id='13369'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1345887916</date>
        </history>
    </patch>
    <patch id='3322'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1345653297</open_date>
        <summary>Canon EOS camera updates v2 (don't apply previous patch)</summary>
        <code>diff -Nurpd lensfun-r173/data/db/mil-canon.xml lensfun-r173-canon/data/db/mil-canon.xml
--- lensfun-r173/data/db/mil-canon.xml	1970-01-01 01:00:00.000000000 +0100
+++ lensfun-r173-canon/data/db/mil-canon.xml	2012-08-22 18:07:17.535855055 +0200
@@ -0,0 +1,19 @@
+&lt;lensdatabase&gt;
+
+    &lt;mount&gt;
+        &lt;name&gt;Canon EF-M&lt;/name&gt;
+        &lt;compat&gt;Canon EF-S&lt;/compat&gt;
+        &lt;compat&gt;Canon EF&lt;/compat&gt;
+        &lt;compat&gt;M42&lt;/compat&gt;
+        &lt;compat&gt;Generic&lt;/compat&gt;
+    &lt;/mount&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS M&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS M&lt;/model&gt;
+        &lt;mount&gt;Canon EF-M&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+&lt;/lensdatabase&gt;
diff -Nurpd lensfun-r173/data/db/slr-canon.xml lensfun-r173-canon/data/db/slr-canon.xml
--- lensfun-r173/data/db/slr-canon.xml	2012-08-22 18:05:02.931857844 +0200
+++ lensfun-r173-canon/data/db/slr-canon.xml	2012-08-22 18:29:40.427827230 +0200
@@ -112,121 +112,120 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL XT&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XT&lt;/model&gt;
+        &lt;model&gt;Canon EOS 1000D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 1000D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL XTi&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XTi&lt;/model&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL XS&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XS&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL XS&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XS&lt;/model&gt;
+        &lt;model&gt;Canon EOS Kiss Digital F&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital F&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL XSi&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XSi&lt;/model&gt;
+        &lt;model&gt;Canon EOS 1100D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 1100D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL XTi&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XTi&lt;/model&gt;
+        &lt;model&gt;Canon EOS REBEL T3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Rebel T3&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL XS&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XS&lt;/model&gt;
+        &lt;model&gt;Canon EOS Kiss X50&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss X50&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL T3&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel T3&lt;/model&gt;
+        &lt;model&gt;Canon EOS 300D DIGITAL&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 300D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL XSi&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XSi&lt;/model&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital REBEL&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel&lt;/model&gt;
+        &lt;model&gt;Canon EOS Kiss Digital&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS REBEL T1i&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS REBEL T1i&lt;/model&gt;
+        &lt;model&gt;Canon EOS 350D DIGITAL&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 350D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS REBEL T1i&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS REBEL T1i&lt;/model&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL XT&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XT&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS 350D DIGITAL&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS 350D&lt;/model&gt;
+        &lt;model&gt;Canon EOS Kiss Digital N&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital N&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS 350D&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS 350D&lt;/model&gt;
-        &lt;variant&gt;*&lt;/variant&gt;
+        &lt;model&gt;Canon EOS 400D DIGITAL&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 400D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS 300D DIGITAL&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS 300D&lt;/model&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL XTi&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XTi&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS 400D DIGITAL&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS 400D&lt;/model&gt;
+        &lt;model&gt;Canon EOS Kiss Digital X&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital X&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -241,6 +240,22 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS DIGITAL REBEL XSi&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XSi&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss Digital X2&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital X2&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS 500D&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS 500D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
@@ -249,6 +264,22 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS REBEL T1i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Rebel T1i&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss X3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss X3&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS 550D&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS 550D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
@@ -257,56 +288,64 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS 600D&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS 600D&lt;/model&gt;
+        &lt;model&gt;Canon EOS REBEL T2i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Rebel T2i&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS 1000D&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS 1000D&lt;/model&gt;
+        &lt;model&gt;Canon EOS Kiss X4&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss X4&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS 1100D&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS 1100D&lt;/model&gt;
+        &lt;model&gt;Canon EOS 600D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 600D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS Kiss Digital N&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital N&lt;/model&gt;
+        &lt;model&gt;Canon EOS REBEL T3i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Rebel T3i&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS Kiss Digital F&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital F&lt;/model&gt;
+        &lt;model&gt;Canon EOS Kiss X5&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss X5&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS Kiss Digital X50&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital X50&lt;/model&gt;
+        &lt;model&gt;Canon EOS 650D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 650D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS Kiss Digital&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Kiss Digital&lt;/model&gt;
+        &lt;model&gt;Canon EOS REBEL T4i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Rebel T4i&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss X6i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss X6i&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -1069,7 +1108,7 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EF 35mm f/2.0&lt;/model&gt;
+        &lt;model&gt;Canon EF 35mm f/2&lt;/model&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
</code>
        <close_date>1345887990</close_date>
        <history id='13372'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1345887990</date>
        </history>
        <history id='13373'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1345887990</date>
        </history>
        <history id='13374'>
            <field_name>details</field_name>
            <old_value>Thanks! It's committed to svn now.</old_value>
            <mod_by>36447</mod_by>
            <date>1345887990</date>
        </history>
        <history id='13375'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1345887990</date>
        </history>
    </patch>
    <patch id='3404'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1358045193</open_date>
        <summary>Camera and lens mount updates.</summary>
        <code>diff -ur lensfun.201/data/db/slr-sigma.xml lensfun/data/db/slr-sigma.xml
--- lensfun.201/data/db/slr-sigma.xml	2013-01-13 03:13:05.651966397 +0100
+++ lensfun/data/db/slr-sigma.xml	2013-01-13 03:39:37.792002725 +0100
@@ -1,16 +1,34 @@
 &lt;lensdatabase&gt;
 
     &lt;mount&gt;
-        &lt;name&gt;Sigma&lt;/name&gt;
+        &lt;name&gt;Sigma SA&lt;/name&gt;
         &lt;compat&gt;Generic&lt;/compat&gt;
     &lt;/mount&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;SIGMA&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
+        &lt;model&gt;SIGMA SD1&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;SD1&lt;/model&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SIGMA&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
+        &lt;model&gt;SIGMA SD1 Merrill&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;SD1 Merrill&lt;/model&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SIGMA&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;SIGMA SD9&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;SD9&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;cropfactor&gt;1.7&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
@@ -19,7 +37,7 @@
         &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;SIGMA SD10&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;SD10&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;cropfactor&gt;1.7&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
@@ -28,7 +46,7 @@
         &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;SIGMA SD14&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;SD14&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;cropfactor&gt;1.7&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
@@ -37,14 +55,14 @@
         &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;SIGMA SD15&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;SD15&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;cropfactor&gt;1.7&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 10-20mm f/4-5.6 EX DC&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -61,7 +79,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 12-24mm f/4.5-5.6 EX DG&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -79,7 +97,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 15-30mm f/3.5-4.5 EX DG&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -100,7 +118,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 17-35mm f/2.8-4 EX DG&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -117,7 +135,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 17-70mm f/2.8-4.5 DC Macro&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -137,7 +155,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 18-50mm f/2.8 EX DC&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -154,7 +172,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 18-50mm f/2.8 EX DC&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -173,7 +191,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 18-50mm f/3.5-5.6 DC&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -194,7 +212,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 18-125mm f/3.5-5.6 (3.3-5.6) DC&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -215,7 +233,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 18-125mm f/3.5-5.6 (3.3-5.6) DC&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -233,7 +251,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 18-200mm f/3.5-6.3 DC&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -253,7 +271,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 18-200mm f/3.5-6.3 DC&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -297,7 +315,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 24-70mm f/2.8 EX DG Macro&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -316,7 +334,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 28-70mm f/2.8 EX DG&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -336,7 +354,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 28-300mm f/3.5-6.3 Macro ASP IF&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -356,7 +374,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 50-500mm f/4-6.3 EX DG HSM&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -377,7 +395,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 50-500mm F/4.5-6.3 DG OS HSM&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
@@ -399,7 +417,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 55-200mm f/4-5.6 DC&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -420,7 +438,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 70-300mm f/4-5.6 APO Macro Super II&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -445,6 +463,10 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 70-300mm F4-5.6 DL Macro&lt;/model&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
@@ -512,11 +534,10 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
-
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 14mm f/2.8 EX&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -529,7 +550,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 14mm f/3.5 EX&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -542,7 +563,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 20mm f/1.8 EX DG&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -555,7 +576,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 28mm f/1.8 EX DG&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -568,7 +589,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 30mm f/1.4 EX DC HSM&lt;/model&gt;
-        &lt;mount&gt;Sigma&lt;/mount&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
@@ -581,6 +602,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 50mm f/1.4 EX DG HSM&lt;/model&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
@@ -592,6 +614,9 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 50mm F1.4 EX DG HSM&lt;/model&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
@@ -611,5 +636,4 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
-
 &lt;/lensdatabase&gt;
diff -ur lensfun.201/data/db/slr-tamron.xml lensfun/data/db/slr-tamron.xml
--- lensfun.201/data/db/slr-tamron.xml	2013-01-13 03:13:05.651966397 +0100
+++ lensfun/data/db/slr-tamron.xml	2013-01-13 03:21:14.499977559 +0100
@@ -140,6 +140,7 @@
     &lt;lens&gt;
         &lt;maker&gt;Tamron&lt;/maker&gt;
         &lt;model&gt;Tamron SP 24-70mm F/2.8 Di VC USD&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
diff -ur lensfun.201/data/db/slr-tokina.xml lensfun/data/db/slr-tokina.xml
--- lensfun.201/data/db/slr-tokina.xml	2013-01-13 03:13:05.655966398 +0100
+++ lensfun/data/db/slr-tokina.xml	2013-01-13 03:19:54.239975725 +0100
@@ -2,41 +2,6 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Tokina&lt;/maker&gt;
-        &lt;model&gt;Tokina 12-24mm f/4 AT-X 124 AF PRO DX&lt;/model&gt;
-        &lt;mount&gt;Canon EF&lt;/mount&gt;
-        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
-        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
-        &lt;calibration&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;12&quot; a=&quot;-0.005227&quot; b=&quot;0.0018&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;-0.003321&quot; b=&quot;0.00043&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;15&quot; a=&quot;-0.002362&quot; b=&quot;0.00112&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;17&quot; a=&quot;-0.001493&quot; b=&quot;0.000502&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;19&quot; a=&quot;-0.000691&quot; b=&quot;0.000121&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;22&quot; a=&quot;-0.000208&quot; b=&quot;-0.000207&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0&quot; b=&quot;0&quot; c=&quot;0&quot; /&gt;
-        &lt;/calibration&gt;
-    &lt;/lens&gt;
-
-    &lt;lens&gt;
-        &lt;maker&gt;Tokina&lt;/maker&gt;
-        &lt;model&gt;Tokina 19-35mm f/3.5-4.5 AF 193&lt;/model&gt;
-        &lt;mount&gt;Canon EF&lt;/mount&gt;
-        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
-        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
-        &lt;calibration&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;19&quot; a=&quot;0&quot; b=&quot;-0.005476&quot; c=&quot;-0.022162&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;22&quot; a=&quot;0&quot; b=&quot;-0.003238&quot; c=&quot;-0.017549&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0&quot; b=&quot;-0.005132&quot; c=&quot;-0.0082&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;27&quot; a=&quot;0&quot; b=&quot;-0.004119&quot; c=&quot;-0.006452&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;29&quot; a=&quot;0&quot; b=&quot;-0.004177&quot; c=&quot;-0.003541&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;31&quot; a=&quot;0&quot; b=&quot;-0.002338&quot; c=&quot;-0.006455&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;33&quot; a=&quot;0&quot; b=&quot;-0.002642&quot; c=&quot;-0.006101&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0&quot; b=&quot;-0.000829&quot; c=&quot;-0.007504&quot; /&gt;
-        &lt;/calibration&gt;
-    &lt;/lens&gt;
-
-    &lt;lens&gt;
-        &lt;maker&gt;Tokina&lt;/maker&gt;
         &lt;model&gt;Tokina 11-16mm f/2.8 AT-X 116 AF PRO DX&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
@@ -52,6 +17,8 @@
     &lt;lens&gt;
         &lt;maker&gt;Tokina&lt;/maker&gt;
         &lt;model&gt;Tokina AT-X Pro DX 11-16mm F2.8&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
@@ -136,6 +103,40 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
+    &lt;lens&gt;
+        &lt;maker&gt;Tokina&lt;/maker&gt;
+        &lt;model&gt;Tokina 12-24mm f/4 AT-X 124 AF PRO DX&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;12&quot; a=&quot;-0.005227&quot; b=&quot;0.0018&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;-0.003321&quot; b=&quot;0.00043&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;15&quot; a=&quot;-0.002362&quot; b=&quot;0.00112&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;17&quot; a=&quot;-0.001493&quot; b=&quot;0.000502&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;19&quot; a=&quot;-0.000691&quot; b=&quot;0.000121&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;22&quot; a=&quot;-0.000208&quot; b=&quot;-0.000207&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0&quot; b=&quot;0&quot; c=&quot;0&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+    &lt;lens&gt;
+        &lt;maker&gt;Tokina&lt;/maker&gt;
+        &lt;model&gt;Tokina 19-35mm f/3.5-4.5 AF 193&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;19&quot; a=&quot;0&quot; b=&quot;-0.005476&quot; c=&quot;-0.022162&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;22&quot; a=&quot;0&quot; b=&quot;-0.003238&quot; c=&quot;-0.017549&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0&quot; b=&quot;-0.005132&quot; c=&quot;-0.0082&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;27&quot; a=&quot;0&quot; b=&quot;-0.004119&quot; c=&quot;-0.006452&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;29&quot; a=&quot;0&quot; b=&quot;-0.004177&quot; c=&quot;-0.003541&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;31&quot; a=&quot;0&quot; b=&quot;-0.002338&quot; c=&quot;-0.006455&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;33&quot; a=&quot;0&quot; b=&quot;-0.002642&quot; c=&quot;-0.006101&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0&quot; b=&quot;-0.000829&quot; c=&quot;-0.007504&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
 
     &lt;lens&gt;
         &lt;maker&gt;Tokina&lt;/maker&gt;
</code>
        <close_date>1358452328</close_date>
        <history id='13858'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1358452328</date>
        </history>
        <history id='13859'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1358452328</date>
        </history>
        <history id='13860'>
            <field_name>details</field_name>
            <old_value>Thanks a lot for your work!</old_value>
            <mod_by>36447</mod_by>
            <date>1358452328</date>
        </history>
        <history id='13861'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1358452328</date>
        </history>
    </patch>
    <patch id='3384'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='63184' name='mbabej'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1354493417</open_date>
        <summary>Vignetting + distortion data for 4 sony-mount lens</summary>
        <code>Index: data/db/slr-sigma.xml
===================================================================
--- data/db/slr-sigma.xml	(revision 196)
+++ data/db/slr-sigma.xml	(working copy)
@@ -444,6 +444,77 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
+        &lt;model&gt;Sigma 70-300mm F4-5.6 DL Macro&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;70&quot; a=&quot;-0.00291&quot; b=&quot;0.00834&quot; c=&quot;-0.00971&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;100&quot; a=&quot;-0.00296&quot; b=&quot;0.0116&quot; c=&quot;-0.00449&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;135&quot; a=&quot;-0.0029&quot; b=&quot;0.01687&quot; c=&quot;-0.01545&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;200&quot; a=&quot;-0.00219&quot; b=&quot;0.01513&quot; c=&quot;-0.01147&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;300&quot; a=&quot;-0.00382&quot; b=&quot;0.02103&quot; c=&quot;-0.01538&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;10&quot; k1=&quot;-0.5339&quot; k2=&quot;0.2603&quot; k3=&quot;-0.0804&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.5339&quot; k2=&quot;0.2603&quot; k3=&quot;-0.0804&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5&quot; distance=&quot;10&quot; k1=&quot;-0.1134&quot; k2=&quot;-0.0711&quot; k3=&quot;-0.0220&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5&quot; distance=&quot;1000&quot; k1=&quot;-0.1134&quot; k2=&quot;-0.0711&quot; k3=&quot;-0.0220&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;6.3&quot; distance=&quot;10&quot; k1=&quot;-0.2059&quot; k2=&quot;0.1615&quot; k3=&quot;-0.1053&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;6.3&quot; distance=&quot;1000&quot; k1=&quot;-0.2059&quot; k2=&quot;0.1615&quot; k3=&quot;-0.1053&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.2160&quot; k2=&quot;0.1671&quot; k3=&quot;-0.1054&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2160&quot; k2=&quot;0.1671&quot; k3=&quot;-0.1054&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;10&quot; distance=&quot;10&quot; k1=&quot;-0.2393&quot; k2=&quot;0.2034&quot; k3=&quot;-0.1265&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;10&quot; distance=&quot;1000&quot; k1=&quot;-0.2393&quot; k2=&quot;0.2034&quot; k3=&quot;-0.1265&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.2449&quot; k2=&quot;0.2257&quot; k3=&quot;-0.1361&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2449&quot; k2=&quot;0.2257&quot; k3=&quot;-0.1361&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;10&quot; k1=&quot;-0.5418&quot; k2=&quot;0.2964&quot; k3=&quot;-0.0942&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.5418&quot; k2=&quot;0.2964&quot; k3=&quot;-0.0942&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5&quot; distance=&quot;10&quot; k1=&quot;-0.1245&quot; k2=&quot;-0.2661&quot; k3=&quot;0.1532&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5&quot; distance=&quot;1000&quot; k1=&quot;-0.1245&quot; k2=&quot;-0.2661&quot; k3=&quot;0.1532&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;6.3&quot; distance=&quot;10&quot; k1=&quot;-0.1789&quot; k2=&quot;0.1612&quot; k3=&quot;-0.1008&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;6.3&quot; distance=&quot;1000&quot; k1=&quot;-0.1789&quot; k2=&quot;0.1612&quot; k3=&quot;-0.1008&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.1974&quot; k2=&quot;0.1709&quot; k3=&quot;-0.0983&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.1974&quot; k2=&quot;0.1709&quot; k3=&quot;-0.0983&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.2196&quot; k2=&quot;0.2274&quot; k3=&quot;-0.1269&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2196&quot; k2=&quot;0.2274&quot; k3=&quot;-0.1269&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.5472&quot; k2=&quot;0.4149&quot; k3=&quot;-0.1968&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.5472&quot; k2=&quot;0.4149&quot; k3=&quot;-0.1968&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.1663&quot; k2=&quot;0.2056&quot; k3=&quot;-0.1957&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1663&quot; k2=&quot;0.2056&quot; k3=&quot;-0.1957&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.1665&quot; k2=&quot;0.1322&quot; k3=&quot;-0.0744&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.1665&quot; k2=&quot;0.1322&quot; k3=&quot;-0.0744&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;9&quot; distance=&quot;10&quot; k1=&quot;-0.1736&quot; k2=&quot;0.1411&quot; k3=&quot;-0.0754&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;9&quot; distance=&quot;1000&quot; k1=&quot;-0.1736&quot; k2=&quot;0.1411&quot; k3=&quot;-0.0754&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.2012&quot; k2=&quot;0.1940&quot; k3=&quot;-0.0998&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2012&quot; k2=&quot;0.1940&quot; k3=&quot;-0.0998&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5&quot; distance=&quot;10&quot; k1=&quot;-0.4230&quot; k2=&quot;0.0406&quot; k3=&quot;0.0298&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5&quot; distance=&quot;1000&quot; k1=&quot;-0.4230&quot; k2=&quot;0.0406&quot; k3=&quot;0.0298&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;6.3&quot; distance=&quot;10&quot; k1=&quot;-0.0624&quot; k2=&quot;-0.0794&quot; k3=&quot;-0.0365&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;6.3&quot; distance=&quot;1000&quot; k1=&quot;-0.0624&quot; k2=&quot;-0.0794&quot; k3=&quot;-0.0365&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.1161&quot; k2=&quot;0.0689&quot; k3=&quot;-0.0492&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.1161&quot; k2=&quot;0.0689&quot; k3=&quot;-0.0492&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;10&quot; distance=&quot;10&quot; k1=&quot;-0.1115&quot; k2=&quot;0.0722&quot; k3=&quot;-0.0388&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;10&quot; distance=&quot;1000&quot; k1=&quot;-0.1115&quot; k2=&quot;0.0722&quot; k3=&quot;-0.0388&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;13&quot; distance=&quot;10&quot; k1=&quot;-0.1098&quot; k2=&quot;0.0615&quot; k3=&quot;-0.0289&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;13&quot; distance=&quot;1000&quot; k1=&quot;-0.1098&quot; k2=&quot;0.0615&quot; k3=&quot;-0.0289&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;25&quot; distance=&quot;10&quot; k1=&quot;-0.1194&quot; k2=&quot;0.0752&quot; k3=&quot;-0.0242&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;25&quot; distance=&quot;1000&quot; k1=&quot;-0.1194&quot; k2=&quot;0.0752&quot; k3=&quot;-0.0242&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.7348&quot; k2=&quot;0.6441&quot; k3=&quot;-0.2653&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.7348&quot; k2=&quot;0.6441&quot; k3=&quot;-0.2653&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.0752&quot; k2=&quot;-0.3913&quot; k3=&quot;0.2445&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.0752&quot; k2=&quot;-0.3913&quot; k3=&quot;0.2445&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;9&quot; distance=&quot;10&quot; k1=&quot;-0.0770&quot; k2=&quot;0.0718&quot; k3=&quot;-0.0707&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;9&quot; distance=&quot;1000&quot; k1=&quot;-0.0770&quot; k2=&quot;0.0718&quot; k3=&quot;-0.0707&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.0799&quot; k2=&quot;0.0542&quot; k3=&quot;-0.0297&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.0799&quot; k2=&quot;0.0542&quot; k3=&quot;-0.0297&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;14&quot; distance=&quot;10&quot; k1=&quot;-0.0885&quot; k2=&quot;0.0597&quot; k3=&quot;-0.0282&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;14&quot; distance=&quot;1000&quot; k1=&quot;-0.0885&quot; k2=&quot;0.0597&quot; k3=&quot;-0.0282&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;32&quot; distance=&quot;10&quot; k1=&quot;-0.0889&quot; k2=&quot;0.0432&quot; k3=&quot;0.0027&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.0889&quot; k2=&quot;0.0432&quot; k3=&quot;0.0027&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+
+    &lt;lens&gt;
+        &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 14mm f/2.8 EX&lt;/model&gt;
         &lt;mount&gt;Sigma&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
@@ -518,4 +589,27 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
+    &lt;lens&gt;
+        &lt;maker&gt;Sigma&lt;/maker&gt;
+        &lt;model&gt;Sigma 50mm F1.4 EX DG HSM&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;0.00055&quot; b=&quot;-0.00799&quot; c=&quot;0.00993&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;1.4&quot; distance=&quot;10&quot; k1=&quot;-0.5491&quot; k2=&quot;0.2293&quot; k3=&quot;-0.0540&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;1.4&quot; distance=&quot;1000&quot; k1=&quot;-0.5491&quot; k2=&quot;0.2293&quot; k3=&quot;-0.0540&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;1.7&quot; distance=&quot;10&quot; k1=&quot;-0.0950&quot; k2=&quot;-0.3674&quot; k3=&quot;0.1974&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;1.7&quot; distance=&quot;1000&quot; k1=&quot;-0.0950&quot; k2=&quot;-0.3674&quot; k3=&quot;0.1974&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;2.2&quot; distance=&quot;10&quot; k1=&quot;-0.1370&quot; k2=&quot;0.0074&quot; k3=&quot;0.0052&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;2.2&quot; distance=&quot;1000&quot; k1=&quot;-0.1370&quot; k2=&quot;0.0074&quot; k3=&quot;0.0052&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;2.8&quot; distance=&quot;10&quot; k1=&quot;-0.1324&quot; k2=&quot;-0.0046&quot; k3=&quot;0.0190&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.1324&quot; k2=&quot;-0.0046&quot; k3=&quot;0.0190&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;3.5&quot; distance=&quot;10&quot; k1=&quot;-0.1303&quot; k2=&quot;-0.0097&quot; k3=&quot;0.0256&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1303&quot; k2=&quot;-0.0097&quot; k3=&quot;0.0256&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.1414&quot; k2=&quot;0.0090&quot; k3=&quot;0.0253&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1414&quot; k2=&quot;0.0090&quot; k3=&quot;0.0253&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+
 &lt;/lensdatabase&gt;
Index: data/db/slr-sony.xml
===================================================================
--- data/db/slr-sony.xml	(revision 196)
+++ data/db/slr-sony.xml	(working copy)
@@ -319,6 +319,104 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;Minolta/Sony AF DT 18-70mm F3.5-5.6 (D)&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.02852&quot; b=&quot;-0.07655&quot; c=&quot;0.0228&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.02014&quot; b=&quot;-0.06395&quot; c=&quot;0.04007&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;28&quot; a=&quot;0.01124&quot; b=&quot;-0.03682&quot; c=&quot;0.02204&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0.00317&quot; b=&quot;-0.01195&quot; c=&quot;0.00656&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;0.00171&quot; b=&quot;-0.00519&quot; c=&quot;0.00528&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;70&quot; a=&quot;0.00358&quot; b=&quot;-0.01139&quot; c=&quot;0.0151&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;3.5&quot; distance=&quot;10&quot; k1=&quot;-0.2822&quot; k2=&quot;-0.2773&quot; k3=&quot;0.0297&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-0.2822&quot; k2=&quot;-0.2773&quot; k3=&quot;0.0297&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.2289&quot; k2=&quot;-0.0997&quot; k3=&quot;-0.0906&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.2289&quot; k2=&quot;-0.0997&quot; k3=&quot;-0.0906&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.2305&quot; k2=&quot;-0.1379&quot; k3=&quot;0.0322&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2305&quot; k2=&quot;-0.1379&quot; k3=&quot;0.0322&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.1860&quot; k2=&quot;-0.3038&quot; k3=&quot;0.1837&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.1860&quot; k2=&quot;-0.3038&quot; k3=&quot;0.1837&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;9&quot; distance=&quot;10&quot; k1=&quot;-0.1604&quot; k2=&quot;-0.3944&quot; k3=&quot;0.2621&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;9&quot; distance=&quot;1000&quot; k1=&quot;-0.1604&quot; k2=&quot;-0.3944&quot; k3=&quot;0.2621&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.1670&quot; k2=&quot;-0.3905&quot; k3=&quot;0.2690&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.1670&quot; k2=&quot;-0.3905&quot; k3=&quot;0.2690&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;14&quot; distance=&quot;10&quot; k1=&quot;-0.1725&quot; k2=&quot;-0.3784&quot; k3=&quot;0.2645&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;14&quot; distance=&quot;1000&quot; k1=&quot;-0.1725&quot; k2=&quot;-0.3784&quot; k3=&quot;0.2645&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.1985&quot; k2=&quot;-0.3162&quot; k3=&quot;0.2314&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1985&quot; k2=&quot;-0.3162&quot; k3=&quot;0.2314&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.2179&quot; k2=&quot;-0.2480&quot; k3=&quot;0.1111&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.2179&quot; k2=&quot;-0.2480&quot; k3=&quot;0.1111&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.2536&quot; k2=&quot;-0.0726&quot; k3=&quot;0.0699&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2536&quot; k2=&quot;-0.0726&quot; k3=&quot;0.0699&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.2592&quot; k2=&quot;-0.0670&quot; k3=&quot;0.0751&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.2592&quot; k2=&quot;-0.0670&quot; k3=&quot;0.0751&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;9&quot; distance=&quot;10&quot; k1=&quot;-0.2415&quot; k2=&quot;-0.1082&quot; k3=&quot;0.1079&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;9&quot; distance=&quot;1000&quot; k1=&quot;-0.2415&quot; k2=&quot;-0.1082&quot; k3=&quot;0.1079&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.2423&quot; k2=&quot;-0.1100&quot; k3=&quot;0.1118&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2423&quot; k2=&quot;-0.1100&quot; k3=&quot;0.1118&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;14&quot; distance=&quot;10&quot; k1=&quot;-0.2377&quot; k2=&quot;-0.1193&quot; k3=&quot;0.1173&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;14&quot; distance=&quot;1000&quot; k1=&quot;-0.2377&quot; k2=&quot;-0.1193&quot; k3=&quot;0.1173&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;25&quot; distance=&quot;10&quot; k1=&quot;-0.2359&quot; k2=&quot;-0.1308&quot; k3=&quot;0.1339&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;25&quot; distance=&quot;1000&quot; k1=&quot;-0.2359&quot; k2=&quot;-0.1308&quot; k3=&quot;0.1339&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.2914&quot; k2=&quot;0.1261&quot; k3=&quot;-0.1133&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.2914&quot; k2=&quot;0.1261&quot; k3=&quot;-0.1133&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.3071&quot; k2=&quot;0.1114&quot; k3=&quot;-0.0344&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.3071&quot; k2=&quot;0.1114&quot; k3=&quot;-0.0344&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.2692&quot; k2=&quot;0.0268&quot; k3=&quot;0.0214&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.2692&quot; k2=&quot;0.0268&quot; k3=&quot;0.0214&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;9&quot; distance=&quot;10&quot; k1=&quot;-0.2515&quot; k2=&quot;-0.0085&quot; k3=&quot;0.0425&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;9&quot; distance=&quot;1000&quot; k1=&quot;-0.2515&quot; k2=&quot;-0.0085&quot; k3=&quot;0.0425&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.2650&quot; k2=&quot;0.0177&quot; k3=&quot;0.0288&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2650&quot; k2=&quot;0.0177&quot; k3=&quot;0.0288&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;29&quot; distance=&quot;10&quot; k1=&quot;-0.2150&quot; k2=&quot;-0.1039&quot; k3=&quot;0.1132&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;29&quot; distance=&quot;1000&quot; k1=&quot;-0.2150&quot; k2=&quot;-0.1039&quot; k3=&quot;0.1132&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.2008&quot; k2=&quot;-0.0221&quot; k3=&quot;0.0260&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2008&quot; k2=&quot;-0.0221&quot; k3=&quot;0.0260&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.1970&quot; k2=&quot;-0.0447&quot; k3=&quot;0.0576&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.1970&quot; k2=&quot;-0.0447&quot; k3=&quot;0.0576&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;9&quot; distance=&quot;10&quot; k1=&quot;-0.2133&quot; k2=&quot;-0.0090&quot; k3=&quot;0.0372&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;9&quot; distance=&quot;1000&quot; k1=&quot;-0.2133&quot; k2=&quot;-0.0090&quot; k3=&quot;0.0372&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.2114&quot; k2=&quot;-0.0169&quot; k3=&quot;0.0432&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2114&quot; k2=&quot;-0.0169&quot; k3=&quot;0.0432&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;14&quot; distance=&quot;10&quot; k1=&quot;-0.2097&quot; k2=&quot;-0.0214&quot; k3=&quot;0.0473&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;14&quot; distance=&quot;1000&quot; k1=&quot;-0.2097&quot; k2=&quot;-0.0214&quot; k3=&quot;0.0473&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;32&quot; distance=&quot;10&quot; k1=&quot;-0.1763&quot; k2=&quot;-0.1044&quot; k3=&quot;0.1101&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.1763&quot; k2=&quot;-0.1044&quot; k3=&quot;0.1101&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.2141&quot; k2=&quot;0.0700&quot; k3=&quot;-0.0254&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2141&quot; k2=&quot;0.0700&quot; k3=&quot;-0.0254&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.2764&quot; k2=&quot;0.2208&quot; k3=&quot;-0.0960&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.2764&quot; k2=&quot;0.2208&quot; k3=&quot;-0.0960&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;9&quot; distance=&quot;10&quot; k1=&quot;-0.2859&quot; k2=&quot;0.2510&quot; k3=&quot;-0.1211&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;9&quot; distance=&quot;1000&quot; k1=&quot;-0.2859&quot; k2=&quot;0.2510&quot; k3=&quot;-0.1211&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.2178&quot; k2=&quot;0.0931&quot; k3=&quot;-0.0212&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2178&quot; k2=&quot;0.0931&quot; k3=&quot;-0.0212&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;14&quot; distance=&quot;10&quot; k1=&quot;-0.2282&quot; k2=&quot;0.1222&quot; k3=&quot;-0.0444&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;14&quot; distance=&quot;1000&quot; k1=&quot;-0.2282&quot; k2=&quot;0.1222&quot; k3=&quot;-0.0444&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;18&quot; distance=&quot;10&quot; k1=&quot;-0.2090&quot; k2=&quot;0.0720&quot; k3=&quot;-0.0109&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;18&quot; distance=&quot;1000&quot; k1=&quot;-0.2090&quot; k2=&quot;0.0720&quot; k3=&quot;-0.0109&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;36&quot; distance=&quot;10&quot; k1=&quot;-0.2278&quot; k2=&quot;0.1031&quot; k3=&quot;-0.0098&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;36&quot; distance=&quot;1000&quot; k1=&quot;-0.2278&quot; k2=&quot;0.1031&quot; k3=&quot;-0.0098&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.3260&quot; k2=&quot;0.1512&quot; k3=&quot;-0.0255&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.3260&quot; k2=&quot;0.1512&quot; k3=&quot;-0.0255&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.0046&quot; k2=&quot;-0.3102&quot; k3=&quot;0.1909&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.0046&quot; k2=&quot;-0.3102&quot; k3=&quot;0.1909&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;9&quot; distance=&quot;10&quot; k1=&quot;-0.0376&quot; k2=&quot;-0.1603&quot; k3=&quot;0.1161&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;9&quot; distance=&quot;1000&quot; k1=&quot;-0.0376&quot; k2=&quot;-0.1603&quot; k3=&quot;0.1161&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.0405&quot; k2=&quot;-0.1670&quot; k3=&quot;0.1305&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.0405&quot; k2=&quot;-0.1670&quot; k3=&quot;0.1305&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;14&quot; distance=&quot;10&quot; k1=&quot;-0.0582&quot; k2=&quot;-0.1240&quot; k3=&quot;0.1025&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;14&quot; distance=&quot;1000&quot; k1=&quot;-0.0582&quot; k2=&quot;-0.1240&quot; k3=&quot;0.1025&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;18&quot; distance=&quot;10&quot; k1=&quot;-0.0581&quot; k2=&quot;-0.1168&quot; k3=&quot;0.0938&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;18&quot; distance=&quot;1000&quot; k1=&quot;-0.0581&quot; k2=&quot;-0.1168&quot; k3=&quot;0.0938&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;36&quot; distance=&quot;10&quot; k1=&quot;-0.0088&quot; k2=&quot;-0.2440&quot; k3=&quot;0.1877&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;36&quot; distance=&quot;1000&quot; k1=&quot;-0.0088&quot; k2=&quot;-0.2440&quot; k3=&quot;0.1877&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+
+    &lt;lens&gt;
+      &lt;maker&gt;Sony&lt;/maker&gt;
         &lt;model&gt;Sony AF DT 55-200mm F4-5.6 SAM&lt;/model&gt;
 	    &lt;mount&gt;Sony Alpha&lt;/mount&gt;
 	    &lt;type&gt;rectilinear&lt;/type&gt;
Index: data/db/slr-tokina.xml
===================================================================
--- data/db/slr-tokina.xml	(revision 196)
+++ data/db/slr-tokina.xml	(working copy)
@@ -51,6 +51,94 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Tokina&lt;/maker&gt;
+        &lt;model&gt;Tokina AT-X Pro DX 11-16mm F2.8&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;11&quot; a=&quot;-0.00574&quot; b=&quot;-0.00115&quot; c=&quot;0.0022&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;12&quot; a=&quot;-0.00494&quot; b=&quot;-0.00187&quot; c=&quot;0.00464&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;13&quot; a=&quot;-0.00597&quot; b=&quot;0.00615&quot; c=&quot;-0.0041&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;-0.00852&quot; b=&quot;0.01584&quot; c=&quot;-0.01187&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;15&quot; a=&quot;-0.00318&quot; b=&quot;-0.0002&quot; c=&quot;0.00625&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;16&quot; a=&quot;-0.00972&quot; b=&quot;0.0226&quot; c=&quot;-0.01691&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;2.8&quot; distance=&quot;10&quot; k1=&quot;-0.0379&quot; k2=&quot;-1.0821&quot; k3=&quot;0.5311&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.0379&quot; k2=&quot;-1.0821&quot; k3=&quot;0.5311&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;3.5&quot; distance=&quot;10&quot; k1=&quot;-0.1331&quot; k2=&quot;-0.1912&quot; k3=&quot;-0.1581&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1331&quot; k2=&quot;-0.1912&quot; k3=&quot;-0.1581&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.2113&quot; k2=&quot;0.0191&quot; k3=&quot;-0.1865&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.2113&quot; k2=&quot;0.0191&quot; k3=&quot;-0.1865&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.2007&quot; k2=&quot;-0.1046&quot; k3=&quot;-0.0229&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2007&quot; k2=&quot;-0.1046&quot; k3=&quot;-0.0229&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.1672&quot; k2=&quot;-0.2698&quot; k3=&quot;0.1455&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.1672&quot; k2=&quot;-0.2698&quot; k3=&quot;0.1455&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.2105&quot; k2=&quot;-0.1988&quot; k3=&quot;0.1335&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;11&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2105&quot; k2=&quot;-0.1988&quot; k3=&quot;0.1335&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;2.8&quot; distance=&quot;10&quot; k1=&quot;-0.1743&quot; k2=&quot;-0.7147&quot; k3=&quot;0.4041&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.1743&quot; k2=&quot;-0.7147&quot; k3=&quot;0.4041&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;3.5&quot; distance=&quot;10&quot; k1=&quot;-0.1132&quot; k2=&quot;-0.3528&quot; k3=&quot;0.0961&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1132&quot; k2=&quot;-0.3528&quot; k3=&quot;0.0961&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.1374&quot; k2=&quot;-0.3360&quot; k3=&quot;0.2227&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1374&quot; k2=&quot;-0.3360&quot; k3=&quot;0.2227&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.1452&quot; k2=&quot;-0.3187&quot; k3=&quot;0.2177&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1452&quot; k2=&quot;-0.3187&quot; k3=&quot;0.2177&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.1536&quot; k2=&quot;-0.2926&quot; k3=&quot;0.2035&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.1536&quot; k2=&quot;-0.2926&quot; k3=&quot;0.2035&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.1984&quot; k2=&quot;-0.2024&quot; k3=&quot;0.1672&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;12&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1984&quot; k2=&quot;-0.2024&quot; k3=&quot;0.1672&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;2.8&quot; distance=&quot;10&quot; k1=&quot;-0.3366&quot; k2=&quot;-0.3427&quot; k3=&quot;0.2544&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.3366&quot; k2=&quot;-0.3427&quot; k3=&quot;0.2544&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;3.5&quot; distance=&quot;10&quot; k1=&quot;-0.0692&quot; k2=&quot;-0.5208&quot; k3=&quot;0.3049&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-0.0692&quot; k2=&quot;-0.5208&quot; k3=&quot;0.3049&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.1239&quot; k2=&quot;-0.3450&quot; k3=&quot;0.2508&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1239&quot; k2=&quot;-0.3450&quot; k3=&quot;0.2508&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.1408&quot; k2=&quot;-0.2910&quot; k3=&quot;0.2162&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1408&quot; k2=&quot;-0.2910&quot; k3=&quot;0.2162&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.1468&quot; k2=&quot;-0.2659&quot; k3=&quot;0.2002&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.1468&quot; k2=&quot;-0.2659&quot; k3=&quot;0.2002&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.1874&quot; k2=&quot;-0.2040&quot; k3=&quot;0.1839&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;13&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1874&quot; k2=&quot;-0.2040&quot; k3=&quot;0.1839&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;2.8&quot; distance=&quot;10&quot; k1=&quot;-0.4848&quot; k2=&quot;-0.0258&quot; k3=&quot;0.1050&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.4848&quot; k2=&quot;-0.0258&quot; k3=&quot;0.1050&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;3.5&quot; distance=&quot;10&quot; k1=&quot;-0.0747&quot; k2=&quot;-0.6430&quot; k3=&quot;0.4305&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-0.0747&quot; k2=&quot;-0.6430&quot; k3=&quot;0.4305&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.1224&quot; k2=&quot;-0.3113&quot; k3=&quot;0.2312&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1224&quot; k2=&quot;-0.3113&quot; k3=&quot;0.2312&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.1451&quot; k2=&quot;-0.2659&quot; k3=&quot;0.2105&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1451&quot; k2=&quot;-0.2659&quot; k3=&quot;0.2105&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.1566&quot; k2=&quot;-0.2378&quot; k3=&quot;0.1952&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.1566&quot; k2=&quot;-0.2378&quot; k3=&quot;0.1952&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.1747&quot; k2=&quot;-0.2080&quot; k3=&quot;0.1915&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1747&quot; k2=&quot;-0.2080&quot; k3=&quot;0.1915&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;2.8&quot; distance=&quot;10&quot; k1=&quot;-0.5189&quot; k2=&quot;0.1125&quot; k3=&quot;0.0317&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.5189&quot; k2=&quot;0.1125&quot; k3=&quot;0.0317&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;3.5&quot; distance=&quot;10&quot; k1=&quot;-0.1445&quot; k2=&quot;-0.5302&quot; k3=&quot;0.3909&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1445&quot; k2=&quot;-0.5302&quot; k3=&quot;0.3909&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.1347&quot; k2=&quot;-0.2554&quot; k3=&quot;0.1935&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1347&quot; k2=&quot;-0.2554&quot; k3=&quot;0.1935&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.1451&quot; k2=&quot;-0.2549&quot; k3=&quot;0.2090&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1451&quot; k2=&quot;-0.2549&quot; k3=&quot;0.2090&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.1645&quot; k2=&quot;-0.2101&quot; k3=&quot;0.1840&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.1645&quot; k2=&quot;-0.2101&quot; k3=&quot;0.1840&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.1766&quot; k2=&quot;-0.2047&quot; k3=&quot;0.1961&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;15&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1766&quot; k2=&quot;-0.2047&quot; k3=&quot;0.1961&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;2.8&quot; distance=&quot;10&quot; k1=&quot;-0.5341&quot; k2=&quot;0.1997&quot; k3=&quot;-0.0140&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.5341&quot; k2=&quot;0.1997&quot; k3=&quot;-0.0140&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;3.5&quot; distance=&quot;10&quot; k1=&quot;-0.3815&quot; k2=&quot;-0.0743&quot; k3=&quot;0.1491&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-0.3815&quot; k2=&quot;-0.0743&quot; k3=&quot;0.1491&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.1299&quot; k2=&quot;-0.2483&quot; k3=&quot;0.1805&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1299&quot; k2=&quot;-0.2483&quot; k3=&quot;0.1805&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.1361&quot; k2=&quot;-0.2659&quot; k3=&quot;0.2208&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1361&quot; k2=&quot;-0.2659&quot; k3=&quot;0.2208&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;7.1&quot; distance=&quot;10&quot; k1=&quot;-0.1586&quot; k2=&quot;-0.2196&quot; k3=&quot;0.1951&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;7.1&quot; distance=&quot;1000&quot; k1=&quot;-0.1586&quot; k2=&quot;-0.2196&quot; k3=&quot;0.1951&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.1690&quot; k2=&quot;-0.2027&quot; k3=&quot;0.1971&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;16&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1690&quot; k2=&quot;-0.2027&quot; k3=&quot;0.1971&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+
+    &lt;lens&gt;
+        &lt;maker&gt;Tokina&lt;/maker&gt;
         &lt;model&gt;Tokina 28-70mm f/2.8 AT-X 287 PRO SV&lt;/model&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
</code>
        <close_date>1357493237</close_date>
        <history id='13798'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1357493237</date>
        </history>
        <history id='13799'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1357493237</date>
        </history>
        <history id='13800'>
            <field_name>details</field_name>
            <old_value>Thank you very much!</old_value>
            <mod_by>36447</mod_by>
            <date>1357493237</date>
        </history>
        <history id='13801'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1357493237</date>
        </history>
    </patch>
    <patch id='3434'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1362811753</open_date>
        <summary>Fix for build error with libpng-1.6 (bug no. 018916).</summary>
        <code>Index: libs/auxfun/image.cpp
===================================================================
--- libs/auxfun/image.cpp	(revision 216)
+++ libs/auxfun/image.cpp	(working copy)
@@ -7,6 +7,7 @@
 #include &lt;zlib.h&gt;
 #include &lt;png.h&gt;
 #include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
 #ifdef _MSC_VER
 #define _USE_MATH_DEFINES 1
 #include &lt;math.h&gt;
</code>
        <close_date>1362913953</close_date>
        <history id='13980'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1362913953</date>
        </history>
        <history id='13981'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362913953</date>
        </history>
        <history id='13982'>
            <field_name>details</field_name>
            <old_value>applied to SVN</old_value>
            <mod_by>36447</mod_by>
            <date>1362913953</date>
        </history>
        <history id='13983'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1362913953</date>
        </history>
    </patch>
    <patch id='3489'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='2378' name='bronger'/>
        <open_date>1375443282</open_date>
        <summary>New camera model: Panasonic DMC-GX7.</summary>
        <code>Index: data/db/mil-panasonic.xml
===================================================================
--- data/db/mil-panasonic.xml	(revision 247)
+++ data/db/mil-panasonic.xml	(working copy)
@@ -100,6 +100,13 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Panasonic&lt;/maker&gt;
+        &lt;model&gt;DMC-GX7&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Panasonic&lt;/maker&gt;
         &lt;model&gt;DMC-G10&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
</code>
        <close_date>1377435224</close_date>
        <history id='14210'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1377435224</date>
        </history>
        <history id='14211'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1377435224</date>
        </history>
        <history id='14212'>
            <field_name>details</field_name>
            <old_value>Thank you, I included your patch into the source tree.</old_value>
            <mod_by>2378</mod_by>
            <date>1377435224</date>
        </history>
        <history id='14213'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1377435224</date>
        </history>
    </patch>
    <patch id='3410'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='62884' name='bentgm'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1358858416</open_date>
        <summary>New Lenscorrection Profile for Tamron 10-24/3,5-4,5</summary>
        <code>    &lt;lens&gt;
        &lt;maker&gt;Tamron&lt;/maker&gt;
	&lt;model&gt;Tamron SP AF 10-24mm F/3.5-4.5 Di II LD Aspherical IF&lt;/model&gt;
	&lt;mount&gt;Canon EF&lt;/mount&gt;
        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
        &lt;mount&gt;Pentax KAF&lt;/mount&gt;
        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;10&quot; k1=&quot;-0.02452&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;12&quot; k1=&quot;-0.03732&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;15&quot; k1=&quot;-0.023&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;17&quot; k1=&quot;-0.01204&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;24&quot; k1=&quot;-0.00673&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;10&quot; br=&quot;-0.0010404&quot; cr=&quot;0.0020275&quot; vr=&quot;0.9995749&quot; bb=&quot;0.0009303&quot; cb=&quot;-0.0018018&quot; vb=&quot;1.0010352&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;12&quot; br=&quot;-0.0007314&quot; cr=&quot;0.002109&quot; vr=&quot;0.9993352&quot; bb=&quot;0.0004953&quot; cb=&quot;-0.0011687&quot; vb=&quot;1.0007539&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;15&quot; br=&quot;-0.0001484&quot; cr=&quot;0.000925&quot; vr=&quot;0.9997811&quot; bb=&quot;0.0001986&quot; cb=&quot;-0.0006209&quot; vb=&quot;1.0005421&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;17&quot; br=&quot;0.0005667&quot; cr=&quot;-0.0006233&quot; vr=&quot;1.0004042&quot; bb=&quot;0.0000267&quot; cb=&quot;-0.000269&quot; vb=&quot;1.0004302&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0002315&quot; cr=&quot;-0.0001694&quot; vr=&quot;1.0002462&quot; bb=&quot;-0.0000242&quot; cb=&quot;-0.0001424&quot; vb=&quot;1.000351&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;24&quot; br=&quot;0.00027&quot; cr=&quot;-0.0002972&quot; vr=&quot;1.0002846&quot; bb=&quot;-0.0000645&quot; cb=&quot;-0.0000806&quot; vb=&quot;1.0003365&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;
</code>
        <close_date>1359304969</close_date>
        <history id='13901'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359304969</date>
        </history>
        <history id='13902'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1359304969</date>
        </history>
        <history id='13903'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359304969</date>
        </history>
    </patch>
    <patch id='3266'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='100' name='none'/>
        <open_date>1332788616</open_date>
        <summary>Lensfun slr-sony update</summary>
        <code>--- trunk-orig/data/db/slr-sony.xml	2012-03-26 20:30:59.391728072 +0200
+++ trunk-update/data/db/slr-sony.xml	2012-03-26 20:51:10.527345176 +0200
@@ -10,6 +10,51 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;SLT-A33&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 33&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;SLT-A35&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 35&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;SLT-A55V&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 55&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;SLT-A65V&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 65&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;SLT-A77V&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 77&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
         &lt;model&gt;DSLR-A100&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;Alpha 100&lt;/model&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
@@ -37,6 +82,15 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;DSLR-A290&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 290&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
         &lt;model&gt;DSLR-A300&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;Alpha 300&lt;/model&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
@@ -73,6 +127,15 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;DSLR-A390&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 390&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
         &lt;model&gt;DSLR-A450&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;Alpha 450&lt;/model&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
@@ -96,6 +159,24 @@
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;DSLR-A560&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 560&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;DSLR-A580&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 580&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
</code>
        <close_date>1333738456</close_date>
        <history id='13019'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1333738417</date>
        </history>
        <history id='13020'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1333738417</date>
        </history>
        <history id='13033'>
            <field_name>details</field_name>
            <old_value>Thanks for the patches!</old_value>
            <mod_by>36447</mod_by>
            <date>1333738456</date>
        </history>
        <history id='13034'>
            <field_name>close_date</field_name>
            <old_value>1333738417</old_value>
            <mod_by>36447</mod_by>
            <date>1333738456</date>
        </history>
    </patch>
    <patch id='3439'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1362895646</open_date>
        <summary>Fix version number for shared libauxfun (CMake build).</summary>
        <code>Index: libs/auxfun/CMakeLists.txt
===================================================================
--- libs/auxfun/CMakeLists.txt	(revision 216)
+++ libs/auxfun/CMakeLists.txt	(working copy)
@@ -6,7 +6,7 @@
 ADD_LIBRARY(auxfun SHARED ${AUXFUN_SRC})
 ENDIF()
 
-SET_TARGET_PROPERTIES(auxfun PROPERTIES VERSION &quot;${VERSION_MAJOR}.${VERSION_MINOR}).${VERSION_MICRO}.${VERSION_BUGFIX}&quot;)  
+SET_TARGET_PROPERTIES(auxfun PROPERTIES SOVERSION &quot;${VERSION_MAJOR}&quot; VERSION &quot;${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_MICRO}.${VERSION_BUGFIX}&quot;)  
 TARGET_LINK_LIBRARIES(auxfun ${PNG_LIBRARY} ${ZLIB_LIBRARY})
 INSTALL(TARGETS auxfun 
     RUNTIME DESTINATION ${BINDIR}
</code>
        <close_date>1362912341</close_date>
        <history id='13971'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1362912341</date>
        </history>
        <history id='13972'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362912341</date>
        </history>
        <history id='13973'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1362912341</date>
        </history>
    </patch>
    <patch id='3425'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1362000981</open_date>
        <summary>Fix vignetting interpolation</summary>
        <code>Index: libs/lensfun/lens.cpp
===================================================================
--- libs/lensfun/lens.cpp	(Revision 216)
+++ libs/lensfun/lens.cpp	(Arbeitskopie)
@@ -955,7 +955,7 @@
 	    }
 	    
 	    smallest_interpolation_distance = std::min(smallest_interpolation_distance, interpolation_distance);
-	    float weighting = abs (1.0 / pow (interpolation_distance, power));
+	    float weighting = fabs (1.0 / pow (interpolation_distance, power));
 	    for (size_t i = 0; i &lt; ARRAY_LEN (res.Terms); i++)
 	        res.Terms [i] += weighting * c-&gt;Terms [i];
 	    total_weighting += weighting;
</code>
        <close_date>1362913293</close_date>
        <history id='13977'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1362913293</date>
        </history>
        <history id='13978'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362913293</date>
        </history>
        <history id='13979'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1362913293</date>
        </history>
    </patch>
    <patch id='3438'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1362895577</open_date>
        <summary>Replace patch no. 3433 (&lt;/calibration&gt; tag missing).</summary>
        <code>Index: data/db/slr-sony.xml
===================================================================
--- data/db/slr-sony.xml	(revision 216)
+++ data/db/slr-sony.xml	(working copy)
@@ -207,6 +207,28 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;Sony DT 16-50mm F2.8 SSM&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;16&quot; a=&quot;0.0313950&quot; b=&quot;-0.0812810&quot; c=&quot;0.0164699&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;17&quot; a=&quot;0.0264456&quot; b=&quot;-0.0659419&quot; c=&quot;0.0065271&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.0269712&quot; b=&quot;-0.0687339&quot; c=&quot;0.0198162&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;20&quot; a=&quot;0.0226641&quot; b=&quot;-0.0556216&quot; c=&quot;0.0106769&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;22&quot; a=&quot;0.0132067&quot; b=&quot;-0.0314146&quot; c=&quot;0.0071973&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.0056959&quot; b=&quot;-0.0077006&quot; c=&quot;0.0122191&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;26&quot; a=&quot;0.0055174&quot; b=&quot;-0.0074034&quot; c=&quot;-0.0107297&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;28&quot; a=&quot;0.0058777&quot; b=&quot;-0.0106156&quot; c=&quot;-0.0023575&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.0021962&quot; b=&quot;0.0003911&quot; c=&quot;-0.0113694&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;-0.0029164&quot; b=&quot;0.0102165&quot; c=&quot;-0.0138367&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;40&quot; a=&quot;-0.0022428&quot; b=&quot;-0.0097886&quot; c=&quot;-0.0112101&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;45&quot; a=&quot;-0.0042728&quot; b=&quot;0.0196205&quot; c=&quot;-0.0251080&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;-0.0036411&quot; b=&quot;0.0132272&quot; c=&quot;-0.0130181&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+    &lt;lens&gt;
+        &lt;maker&gt;Sony&lt;/maker&gt;
         &lt;model&gt;Sony AF DT 16-105 mm F3.5-5.6&lt;/model&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
</code>
        <close_date>1363638079</close_date>
        <history id='14002'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1363638079</date>
        </history>
        <history id='14003'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1363638079</date>
        </history>
        <history id='14004'>
            <field_name>details</field_name>
            <old_value>Fixed it.</old_value>
            <mod_by>36447</mod_by>
            <date>1363638079</date>
        </history>
        <history id='14005'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1363638079</date>
        </history>
    </patch>
    <patch id='3497'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1378828469</open_date>
        <summary>Add new camera: Olympus E-M1.</summary>
        <code>Index: data/db/mil-olympus.xml
===================================================================
--- data/db/mil-olympus.xml	(revision 259)
+++ data/db/mil-olympus.xml	(working copy)
@@ -106,6 +106,14 @@
     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;E-M1&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-M5&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
</code>
        <close_date>1381671717</close_date>
        <history id='14335'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1381671717</date>
        </history>
        <history id='14336'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1381671717</date>
        </history>
        <history id='14337'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1381671717</date>
        </history>
    </patch>
    <patch id='3456'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1366778946</open_date>
        <summary>New camera: Panasonic DMC-G6</summary>
        <code>Index: data/db/mil-panasonic.xml
===================================================================
--- data/db/mil-panasonic.xml	(revision 229)
+++ data/db/mil-panasonic.xml	(working copy)
@@ -86,6 +86,13 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Panasonic&lt;/maker&gt;
+        &lt;model&gt;DMC-G6&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Panasonic&lt;/maker&gt;
         &lt;model&gt;DMC-GF6&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
</code>
        <close_date>1367752493</close_date>
        <history id='14075'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1367752493</date>
        </history>
        <history id='14076'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1367752493</date>
        </history>
        <history id='14077'>
            <field_name>details</field_name>
            <old_value>Thanks!</old_value>
            <mod_by>36447</mod_by>
            <date>1367752493</date>
        </history>
        <history id='14078'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1367752493</date>
        </history>
    </patch>
    <patch id='3510'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='100' name='none'/>
        <open_date>1381682021</open_date>
        <summary>Add new cameras: SONY NEX-5T, NIKON 1 AW1, NIKON D610.</summary>
        <code>Index: data/db/slr-nikon.xml
===================================================================
--- data/db/slr-nikon.xml	(revision 275)
+++ data/db/slr-nikon.xml	(working copy)
@@ -160,6 +160,15 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D610&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D610&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON D700&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;D700&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
Index: data/db/mil-nikon.xml
===================================================================
--- data/db/mil-nikon.xml	(revision 275)
+++ data/db/mil-nikon.xml	(working copy)
@@ -14,6 +14,15 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON 1 AW1&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;1 AW1&lt;/model&gt;
+        &lt;mount&gt;Nikon CX&lt;/mount&gt;
+        &lt;cropfactor&gt;2.7&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON 1 S1&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;1 S1&lt;/model&gt;
         &lt;mount&gt;Nikon CX&lt;/mount&gt;
Index: data/db/mil-sony.xml
===================================================================
--- data/db/mil-sony.xml	(revision 275)
+++ data/db/mil-sony.xml	(working copy)
@@ -75,6 +75,15 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;NEX-5T&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX 5T&lt;/model&gt;
+        &lt;mount&gt;Sony E&lt;/mount&gt;
+        &lt;cropfactor&gt;1.534&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
         &lt;model&gt;NEX-6&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;NEX 6&lt;/model&gt;
         &lt;mount&gt;Sony E&lt;/mount&gt;
</code>
        <close_date>1384349374</close_date>
        <history id='14405'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1384349374</date>
        </history>
        <history id='14406'>
            <field_name>details</field_name>
            <old_value>Thank you, I included the patch.</old_value>
            <mod_by>2378</mod_by>
            <date>1384349374</date>
        </history>
        <history id='14407'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1384349374</date>
        </history>
    </patch>
    <patch id='3267'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61930' name='pvsr'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1332790388</open_date>
        <summary>Olympus DB extending + lens name parser improvement.</summary>
        <code>Index: data/db/mil-olympus.xml
===================================================================
--- data/db/mil-olympus.xml	(revision 153)
+++ data/db/mil-olympus.xml	(working copy)
@@ -4,6 +4,7 @@
         &lt;name&gt;Micro 4/3 System&lt;/name&gt;
         &lt;compat&gt;M42&lt;/compat&gt;
         &lt;compat&gt;Generic&lt;/compat&gt;
+        &lt;compat&gt;4/3 System&lt;/compat&gt;
     &lt;/mount&gt;
 
     &lt;camera&gt;
@@ -80,7 +81,7 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
-        &lt;model&gt;Olympus M.Zuiko Digital ED 14-42mm F3.5-5.6&lt;/model&gt;
+        &lt;model&gt;OLYMPUS M.14-42mm F3.5-5.6&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
@@ -101,7 +102,7 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
-        &lt;model&gt;Olympus M.Zuiko Digital ED 14-42mm F3.5-5.6 L&lt;/model&gt;
+        &lt;model&gt;OLYMPUS M.14-42mm F3.5-5.6 L&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
@@ -120,10 +121,64 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
-        &lt;model&gt;Olympus M.Zuiko Digital 17mm F2.8 Pancake&lt;/model&gt;
+	&lt;model&gt;OLYMPUS M.14-42mm F3.5-5.6 II&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;0.018&quot; b=&quot;-0.074&quot; c=&quot;0.014&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.011&quot; b=&quot;-0.048&quot; c=&quot;0.021&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;25&quot; a=&quot;0.0&quot; b=&quot;-0.012&quot; c=&quot;0.008&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.007&quot; b=&quot;-0.015&quot; c=&quot;0.003&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0.007&quot; b=&quot;-0.021&quot; c=&quot;0.018&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;42&quot; a=&quot;-0.001&quot; b=&quot;0.008&quot; c=&quot;-0.010&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;14&quot; br=&quot;0.0000882&quot; vr=&quot;1.0001828&quot; bb=&quot;0.0002104&quot; vb=&quot;1.0004280&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0000087&quot; vr=&quot;1.0000985&quot; bb=&quot;-0.0001260&quot; vb=&quot;1.0002535&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;25&quot; br=&quot;-0.0000210&quot; vr=&quot;1.0001388&quot; bb=&quot;-0.0001294&quot; vb=&quot;1.0005537&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;30&quot; br=&quot;-0.0000429&quot; vr=&quot;1.0002040&quot; bb=&quot;0.0000872&quot; vb=&quot;1.0002187&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.0001262&quot; vr=&quot;1.0003653&quot; bb=&quot;-0.0000270&quot; vb=&quot;1.0003605&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;42&quot; br=&quot;-0.0000752&quot; vr=&quot;1.0003152&quot; bb=&quot;-0.0000213&quot; vb=&quot;1.0001196&quot;/&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+    &lt;lens&gt;
+        &lt;maker&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;OLYMPUS M.14-42mm F3.5-5.6 II R&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;0.018&quot; b=&quot;-0.074&quot; c=&quot;0.014&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.011&quot; b=&quot;-0.048&quot; c=&quot;0.021&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;25&quot; a=&quot;0.0&quot; b=&quot;-0.012&quot; c=&quot;0.008&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.007&quot; b=&quot;-0.015&quot; c=&quot;0.003&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0.007&quot; b=&quot;-0.021&quot; c=&quot;0.018&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;42&quot; a=&quot;-0.001&quot; b=&quot;0.008&quot; c=&quot;-0.010&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;14&quot; br=&quot;0.0000882&quot; vr=&quot;1.0001828&quot; bb=&quot;0.0002104&quot; vb=&quot;1.0004280&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0000087&quot; vr=&quot;1.0000985&quot; bb=&quot;-0.0001260&quot; vb=&quot;1.0002535&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;25&quot; br=&quot;-0.0000210&quot; vr=&quot;1.0001388&quot; bb=&quot;-0.0001294&quot; vb=&quot;1.0005537&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;30&quot; br=&quot;-0.0000429&quot; vr=&quot;1.0002040&quot; bb=&quot;0.0000872&quot; vb=&quot;1.0002187&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.0001262&quot; vr=&quot;1.0003653&quot; bb=&quot;-0.0000270&quot; vb=&quot;1.0003605&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;42&quot; br=&quot;-0.0000752&quot; vr=&quot;1.0003152&quot; bb=&quot;-0.0000213&quot; vb=&quot;1.0001196&quot;/&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+    &lt;lens&gt;
+        &lt;maker&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;OLYMPUS M.12mm F2.0&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+        &lt;focal value=&quot;12&quot; /&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;12&quot; a=&quot;-0.005&quot; b=&quot;-0.016&quot; c=&quot;-0.014&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;12&quot; br=&quot;0.0000749&quot; vr=&quot;1.0001239&quot; bb=&quot;0.0000350&quot; vb=&quot;1.0000181&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+    &lt;lens&gt;
+        &lt;maker&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;OLYMPUS M.17mm F2.8&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+        &lt;calibration&gt;
              &lt;distortion model=&quot;ptlens&quot; focal=&quot;17&quot; a=&quot;0.00835&quot; b=&quot;-0.04149&quot; c=&quot;-0.0022&quot; /&gt;
              &lt;tca model=&quot;poly3&quot; focal=&quot;17&quot; br=&quot;-0.0004492&quot; vr=&quot;1.0016410&quot; bb=&quot;0.0005749&quot; vb=&quot;0.9989794&quot; /&gt;
         &lt;/calibration&gt;
Index: libs/lensfun/lens.cpp
===================================================================
--- libs/lensfun/lens.cpp	(revision 153)
+++ libs/lensfun/lens.cpp	(working copy)
@@ -34,7 +34,7 @@
     },
     {
         // [min focal]-[max focal]mm f/[min aperture]-[max aperture]
-        &quot;([0-9.]+)(-[0-9.]+)?(mm)?[[:space:]]+(f/?)?([0-9.]+)(-[0-9.]+)?&quot;,
+        &quot;([0-9]+[0-9.]*)(-[0-9]+[0-9.]*)?(mm)?[[:space:]]+(f/?)?([0-9.]+)(-[0-9.]+)?&quot;,
         { 1, 2, 5, 6 },
         false
     }
</code>
        <close_date>1334947663</close_date>
        <history id='13035'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1333738903</date>
        </history>
        <history id='13036'>
            <field_name>details</field_name>
            <old_value>psvr: thanks for your contribution. Could you please clean up the patch in a way that micro 4/3  lenses and cameras go to mil-olympus.xml? 

Apart from that, are you sure that the optical characteristics of a lens are really the same on 4/3 and micro 4/3? </old_value>
            <mod_by>36447</mod_by>
            <date>1333738903</date>
        </history>
        <history id='13037'>
            <field_name>assigned_to</field_name>
            <old_value>12372</old_value>
            <mod_by>36447</mod_by>
            <date>1333738908</date>
        </history>
        <history id='13038'>
            <field_name>details</field_name>
            <old_value>Sorry for delay. 
I will prepare new patch using &quot;compat&quot;  tag. Also I am going to properly measure tca parameters for two added lens. Regarding 4/3 lens on micro 4/3 - 4/3 lenses are used on micro 4/3 cameras using converter that just compensates  flange focal distance so I think we can use the same correction data. </old_value>
            <mod_by>61930</mod_by>
            <date>1333748058</date>
        </history>
        <history id='13050'>
            <field_name>details</field_name>
            <old_value>There is  a new revised patch with following changes:
1)new lenses desription (distortion + tca parameters) is placed to mil-olympus
2)&lt;model&gt; tag set according to &quot;OlympusEq.LensModel&quot; exif tag. Last exiv2 version utilizes exactly this flag to recognise lens name and the the tag doesn't require additional decoding (the tag contains plain string).
3)fixed lens regexp to properly parse names like  M.14-42mm (with current parser we will get  0.14mm - 42mm  range).

BTW I was unable to use &quot;variant&quot; tag for lens name so I was forced to duplicate desription for &quot;OLYMPUS M.14-42mm F3.5-5.6 II&quot;/&quot;OLYMPUS M.14-42mm F3.5-5.6 II R&quot; - in fact it is lens with equal design but with different styling.</old_value>
            <mod_by>61930</mod_by>
            <date>1334124211</date>
        </history>
        <history id='13051'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61930</mod_by>
            <date>1334124211</date>
        </history>
        <history id='13064'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1334947663</date>
        </history>
        <history id='13065'>
            <field_name>details</field_name>
            <old_value>Took some days until I could take a look at this, but now it is applied to SVN. Thanks for your help!</old_value>
            <mod_by>36447</mod_by>
            <date>1334947663</date>
        </history>
        <history id='13066'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1334947663</date>
        </history>
        <history id='13015'>
            <field_name>details</field_name>
            <old_value>I've missed that trunk version already contains separate files for mirrorless cameras. But there are several issues (at least for mil-olympus.xml):
1) Lens name extracted from exif doesn't matched to lens name placed in mil-olympus.xml
2) There is no reason to make separate mount for Micro 4/3 because in fact it is possible to use 4/3 lens on m4/3. </old_value>
            <mod_by>61930</mod_by>
            <date>1332861791</date>
        </history>
        <history id='13017'>
            <field_name>details</field_name>
            <old_value>You cannot use Micro 4/3 lenses on 4/3 cameras AFAIK, so the correct way to make 4/3 lenses usable on Micro 4/3 cameras is to add the line

&lt;compat&gt;4/3 System&lt;/compat&gt;

to the Micro 4/3 mount tag in mil-olympus.xml.</old_value>
            <mod_by>61570</mod_by>
            <date>1333339397</date>
        </history>
    </patch>
    <patch id='3284'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1335609595</open_date>
        <summary>Add NIKON D3200 to lensfun database.</summary>
        <code>diff -urN lensfun.157/data/db/slr-nikon.xml lensfun/data/db/slr-nikon.xml
--- lensfun.157/data/db/slr-nikon.xml	2012-04-28 10:30:07.069840730 +0200
+++ lensfun/data/db/slr-nikon.xml	2012-04-28 10:30:52.849841775 +0200
@@ -192,6 +192,15 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D3200&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D3200&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON D5000&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;D5000&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
</code>
        <close_date>1335612177</close_date>
        <history id='13072'>
            <field_name>details</field_name>
            <old_value>This patch adds the new NIKON D3200 to the lensfun database.

On another note: Is it not time to make a new release of lensfun? The current release is more than two years old and a lot has changed in the code base. Most Linux distributions tend to use only released code.</old_value>
            <mod_by>61570</mod_by>
            <date>1335609729</date>
        </history>
        <history id='13073'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1335612177</date>
        </history>
        <history id='13074'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1335612177</date>
        </history>
        <history id='13075'>
            <field_name>details</field_name>
            <old_value>Thanks!

I planned to prepare a new release in may. It should have been done earlier but I had only very little free time in the last two months. There are also some ideas to refresh the homepage a little bit and for example create a list of supported lenses. </old_value>
            <mod_by>36447</mod_by>
            <date>1335612177</date>
        </history>
        <history id='13076'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1335612177</date>
        </history>
    </patch>
    <patch id='3317'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='62689' name='josefwells'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1345217002</open_date>
        <summary>Sony DSC-RX100 lens distortion xml</summary>
        <code>&lt;lensdatabase&gt;
  
  &lt;mount&gt;
    &lt;name&gt;sonyRX100&lt;/name&gt;
    &lt;compat&gt;Generic&lt;/compat&gt;
  &lt;/mount&gt;
  
  &lt;camera&gt;
    &lt;maker&gt;Sony&lt;/maker&gt;
    &lt;model&gt;DSC-RX100&lt;/model&gt;
    &lt;mount&gt;sonyRX100&lt;/mount&gt;
    &lt;cropfactor&gt;2.73&lt;/cropfactor&gt;
  &lt;/camera&gt;
  
  &lt;lens&gt;
    &lt;maker&gt;Sony&lt;/maker&gt;
    &lt;model&gt;RX100&lt;/model&gt;
    &lt;focal value=&quot;10.4&quot; /&gt;
    &lt;mount&gt;sonyRX100&lt;/mount&gt;
    &lt;cropfactor&gt;2.73&lt;/cropfactor&gt;
    &lt;calibration&gt;
      &lt;distortion focal=&quot;10.4&quot; model=&quot;ptlens&quot; a=&quot;0.00836&quot; b=&quot;-0.05316&quot; c=&quot;-0.02788&quot; /&gt;
      &lt;distortion focal=&quot;12.8&quot; model=&quot;ptlens&quot; a=&quot;0.00891&quot; b=&quot;-0.06095&quot; c=&quot;0.02196&quot; /&gt;
      &lt;distortion focal=&quot;14.9&quot; model=&quot;ptlens&quot; a=&quot;-0.00571&quot; b=&quot;0.00909&quot; c=&quot;-0.06449&quot; /&gt;
      &lt;distortion focal=&quot;16.6&quot; model=&quot;ptlens&quot; a=&quot;-0.00428&quot; b=&quot;-0.01113&quot; c=&quot;0.0042&quot; /&gt;
      &lt;distortion focal=&quot;19.1&quot; model=&quot;ptlens&quot; a=&quot;0.00523&quot; b=&quot;-0.03743&quot; c=&quot;0.03369&quot; /&gt;
      &lt;distortion focal=&quot;20.4&quot; model=&quot;ptlens&quot; a=&quot;-0.00312&quot; b=&quot;-0.00368&quot; c=&quot;-0.0036&quot; /&gt;
      &lt;distortion focal=&quot;23.3&quot; model=&quot;ptlens&quot; a=&quot;-0.00222&quot; b=&quot;-0.00843&quot; c=&quot;0.01379&quot; /&gt;
      &lt;distortion focal=&quot;25&quot; model=&quot;ptlens&quot; a=&quot;-0.00565&quot; b=&quot;0.0037&quot; c=&quot;0.00318&quot; /&gt;
      &lt;distortion focal=&quot;26.9&quot; model=&quot;ptlens&quot; a=&quot;-0.00245&quot; b=&quot;-0.00859&quot; c=&quot;0.01924&quot; /&gt;
      &lt;distortion focal=&quot;28.8&quot; model=&quot;ptlens&quot; a=&quot;-0.00842&quot; b=&quot;0.0158&quot; c=&quot;-0.01114&quot; /&gt;
      &lt;distortion focal=&quot;33.2&quot; model=&quot;ptlens&quot; a=&quot;-0.01065&quot; b=&quot;0.02132&quot; c=&quot;-0.01154&quot; /&gt;
      &lt;distortion focal=&quot;37.1&quot; model=&quot;ptlens&quot; a=&quot;0.00226&quot; b=&quot;-0.02401&quot; c=&quot;0.0397&quot; /&gt;
    &lt;/calibration&gt;
  &lt;/lens&gt;
  
&lt;/lensdatabase&gt;
</code>
        <close_date>1345887869</close_date>
        <history id='13362'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1345887869</date>
        </history>
        <history id='13363'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1345887869</date>
        </history>
        <history id='13364'>
            <field_name>details</field_name>
            <old_value>Thanks!</old_value>
            <mod_by>36447</mod_by>
            <date>1345887869</date>
        </history>
        <history id='13365'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1345887869</date>
        </history>
    </patch>
    <patch id='3262'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='100' name='none'/>
        <open_date>1332788526</open_date>
        <summary>Lensfun mil-samsung update</summary>
        <code>--- trunk-orig/data/db/mil-samsung.xml	2012-03-26 20:30:59.371737971 +0200
+++ trunk-update/data/db/mil-samsung.xml	2012-03-26 20:31:33.198983910 +0200
@@ -40,6 +40,15 @@ http://en.wikipedia.org/wiki/Mirrorless_
     &lt;camera&gt;
         &lt;maker&gt;SAMSUNG&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Samsung&lt;/maker&gt;
+        &lt;model&gt;NX20&lt;/model&gt;
+         &lt;model lang=&quot;en&quot;&gt;NX20&lt;/model&gt;
+        &lt;mount&gt;Samsung NX&lt;/mount&gt;
+        &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SAMSUNG&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Samsung&lt;/maker&gt;
         &lt;model&gt;NX200&lt;/model&gt;
          &lt;model lang=&quot;en&quot;&gt;NX200&lt;/model&gt;
         &lt;mount&gt;Samsung NX&lt;/mount&gt;
@@ -61,4 +70,14 @@ http://en.wikipedia.org/wiki/Mirrorless_
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
+    &lt;lens&gt;
+        &lt;maker&gt;Samsung&lt;/maker&gt;
+        &lt;model&gt;Samsung 30mm F2 Pancake&lt;/model&gt;
+        &lt;mount&gt;Samsung NX&lt;/mount&gt;
+        &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;poly3&quot; focal=&quot;30&quot; k1=&quot;-0.00596&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
 &lt;/lensdatabase&gt;
</code>
        <close_date>1333738418</close_date>
        <history id='13027'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1333738418</date>
        </history>
        <history id='13028'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1333738418</date>
        </history>
    </patch>
    <patch id='3261'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61925' name='goeland86'/>
        <assigned_to id='100' name='none'/>
        <open_date>1332768969</open_date>
        <summary>Additional cameras and lenses</summary>
        <code>diff -Nurpd trunk/data/db/slr-canon.xml trunk-update/data/db/slr-canon.xml
--- trunk/data/db/slr-canon.xml	2012-03-26 16:54:21.820281539 +0200
+++ trunk-update/data/db/slr-canon.xml	2012-03-26 16:59:02.151757298 +0200
@@ -470,6 +470,35 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EF-S 18-55mm f/3.5-5.6 III&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.00029&quot; b=&quot;-0.00065&quot; c=&quot;-0.04054&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;20&quot; a=&quot;0.00913&quot; b=&quot;-0.024255&quot; c=&quot;-0.02326&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;21&quot; a=&quot;0.0219&quot; b=&quot;-0.05865&quot; c=&quot;0.01747&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.02945&quot; b=&quot;-0.07112&quot; c=&quot;0.02358&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;27&quot; a=&quot;-0.00225&quot; b=&quot;0.00421&quot; c=&quot;-0.02519&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;28&quot; a=&quot;0.00888&quot; b=&quot;-0.02851&quot; c=&quot;0.00655&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;29&quot; a=&quot;-0.00423&quot; b=&quot;0.01103&quot; c=&quot;-0.02517&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;-0.02064&quot; b=&quot;0.0652&quot; c=&quot;-0.07411&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;33&quot; a=&quot;0.00378&quot; b=&quot;-0.00627&quot; c=&quot;-0.00869&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;34&quot; a=&quot;0.00579&quot; b=&quot;-0.01787&quot; c=&quot;0.00697&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;36&quot; a=&quot;0.00139&quot; b=&quot;0.00016&quot; c=&quot;-0.00891&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;37&quot; a=&quot;-0.01074&quot; b=&quot;0.01955&quot; c=&quot;0.00324&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;40&quot; a=&quot;-0.00209&quot; b=&quot;-0.00426&quot; c=&quot;-0.01103&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;41&quot; a=&quot;-0.00308&quot; b=&quot;0.01968&quot; c=&quot;-0.03451&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;43&quot; a=&quot;-0.00935&quot; b=&quot;0.02372&quot; c=&quot;-0.03174&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;44&quot; a=&quot;0.00283&quot; b=&quot;0.00211&quot; c=&quot;-0.01406&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;47&quot; a=&quot;-0.01247&quot; b=&quot;0.03006&quot; c=&quot;-0.01156&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;49&quot; a=&quot;0.00841&quot; b=&quot;-0.04436&quot; c=&quot;0.06329&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;53&quot; a=&quot;0.00359&quot; b=&quot;-0.01264&quot; c=&quot;0.01563&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;55&quot; a=&quot;-0.0117&quot; b=&quot;0.03217&quot; c=&quot;-0.02069&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+    
+    &lt;lens&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EF-S 17-55mm f/2.8 IS USM&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
@@ -661,6 +690,26 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EF 35-105mm f/4.5-5.6&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;-0.00202&quot; b=&quot;0.00115&quot; c=&quot;-0.00877&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;48&quot; a=&quot;0.00206&quot; b=&quot;-0.00395&quot; c=&quot;0.00411&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;57&quot; a=&quot;-0.00649&quot; b=&quot;0.02493&quot; c=&quot;-0.01898&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;62&quot; a=&quot;-0.01071&quot; b=&quot;0.01858&quot; c=&quot;0.00875&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;68&quot; a=&quot;-0.02787&quot; b=&quot;0.07826&quot; c=&quot;-0.05368&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;72&quot; a=&quot;-0.03351&quot; b=&quot;0.12504&quot; c=&quot;-0.14162&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;76&quot; a=&quot;0.00385&quot; b=&quot;-0.0011&quot; c=&quot;-0.00351&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;80&quot; a=&quot;0.01832&quot; b=&quot;-0.05905&quot; c=&quot;0.07657&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;87&quot; a=&quot;-0.03411&quot; b=&quot;0.14077&quot; c=&quot;-0.17993&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;98&quot; a=&quot;0.0103&quot; b=&quot;-0.03257&quot; c=&quot;0.02861&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;105&quot; a=&quot;0.03329&quot; b=&quot;-0.012513&quot; c=&quot;0.16021&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+    
+    &lt;lens&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EF 35-135mm f/4-5.6 USM&lt;/model&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
@@ -812,6 +861,35 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EF 75-300mm f/4-5.6 III&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;75&quot; a=&quot;0.47796&quot; b=&quot;-0.98871&quot; c=&quot;0.74143&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;80&quot; a=&quot;0.73577&quot; b=&quot;-1.35909&quot; c=&quot;0.82695&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;85&quot; a=&quot;0.18115&quot; b=&quot;-0.23959&quot; c=&quot;0.18792&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;90&quot; a=&quot;0.86117&quot; b=&quot;-1.83099&quot; c=&quot;1.24221&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;95&quot; a=&quot;1.1097&quot; b=&quot;-2.53267&quot; c=&quot;1.80147&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;100&quot; a=&quot;0.69157&quot; b=&quot;-1.62711&quot; c=&quot;1.19887&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;105&quot; a=&quot;0.26436&quot; b=&quot;-0.64004&quot; c=&quot;0.49201&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;110&quot; a=&quot;0.29814&quot; b=&quot;-0.72389&quot; c=&quot;0.55478&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;125&quot; a=&quot;0.14326&quot; b=&quot;-0.39549&quot; c=&quot;0.34747&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;130&quot; a=&quot;0.06614&quot; b=&quot;-0.16946&quot; c=&quot;0.14396&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;135&quot; a=&quot;0.09381&quot; b=&quot;-0.23171&quot; c=&quot;0.18154&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;140&quot; a=&quot;0.00267&quot; b=&quot;-0.01604&quot; c=&quot;0.02513&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;155&quot; a=&quot;-0.00101&quot; b=&quot;0.01422&quot; c=&quot;-0.0204&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;160&quot; a=&quot;-0.09721&quot; b=&quot;0.28794&quot; c=&quot;-0.28178&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;180&quot; a=&quot;0.00049&quot; b=&quot;-0.01582&quot; c=&quot;0.01736&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;200&quot; a=&quot;-0.00084&quot; b=&quot;0.01896&quot; c=&quot;-0.01011&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;240&quot; a=&quot;0.04928&quot; b=&quot;-0.11522&quot; c=&quot;0.02023&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;255&quot; a=&quot;0.02046&quot; b=&quot;-0.05515&quot; c=&quot;0.05526&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;280&quot; a=&quot;-0.00732&quot; b=&quot;0.01809&quot; c=&quot;-0.00273&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;300&quot; a=&quot;-0.00709&quot; b=&quot;0.03947&quot; c=&quot;-0.05006&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+    
+    &lt;lens&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EF 75-300mm f/4-5.6 IS USM&lt;/model&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
</code>
        <close_date>1333738438</close_date>
        <history id='13029'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1333738418</date>
        </history>
        <history id='13030'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1333738418</date>
        </history>
        <history id='13031'>
            <field_name>details</field_name>
            <old_value>Thank you!</old_value>
            <mod_by>36447</mod_by>
            <date>1333738438</date>
        </history>
        <history id='13032'>
            <field_name>close_date</field_name>
            <old_value>1333738418</old_value>
            <mod_by>36447</mod_by>
            <date>1333738438</date>
        </history>
        <history id='13011'>
            <field_name>details</field_name>
            <old_value>Removed entries for cameras added by Pascal de Bruijn in the darktable mailing list.</old_value>
            <mod_by>61925</mod_by>
            <date>1332774047</date>
        </history>
        <history id='13012'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61925</mod_by>
            <date>1332774048</date>
        </history>
    </patch>
    <patch id='3300'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='12744' name='rdieter'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1340973490</open_date>
        <summary>cmake support for LIB_SUFFIX</summary>
        <code>diff -up lensfun-0.2.6/CMakeLists.txt.LIB_SUFFIX lensfun-0.2.6/CMakeLists.txt
--- lensfun-0.2.6/CMakeLists.txt.LIB_SUFFIX	2012-06-10 09:19:35.000000000 -0500
+++ lensfun-0.2.6/CMakeLists.txt	2012-06-28 08:32:16.628591449 -0500
@@ -74,7 +74,7 @@ ENDIF()
  
 # define destination dirs (relative to prefix)
 SET(BINDIR bin)
-SET(LIBDIR lib)
+SET(LIBDIR lib${LIB_SUFFIX})
 SET(INCLUDEDIR include)
 SET(DATADIR share/lensfun)
 SET(DOCDIR share/doc/lensfun-${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_MICRO}.${VERSION_BUGFIX})
</code>
        <close_date>1342360742</close_date>
        <history id='13281'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1342360724</date>
        </history>
        <history id='13282'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1342360725</date>
        </history>
        <history id='13283'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1342360742</date>
        </history>
        <history id='13284'>
            <field_name>close_date</field_name>
            <old_value>1342360725</old_value>
            <mod_by>36447</mod_by>
            <date>1342360742</date>
        </history>
    </patch>
    <patch id='3272'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='100' name='none'/>
        <open_date>1333858050</open_date>
        <summary>Patch to replace 3267 (mil-olympus.xml + regex strings).</summary>
        <code>diff -urN lensfun.153/data/db/mil-olympus.xml lensfun/data/db/mil-olympus.xml
--- lensfun.153/data/db/mil-olympus.xml	2012-04-08 05:35:04.736406415 +0200
+++ lensfun/data/db/mil-olympus.xml	2012-04-08 05:40:20.223409559 +0200
@@ -3,6 +3,7 @@
     &lt;mount&gt;
         &lt;name&gt;Micro 4/3 System&lt;/name&gt;
         &lt;compat&gt;M42&lt;/compat&gt;
+        &lt;compat&gt;4/3 System&lt;/compat&gt;
         &lt;compat&gt;Generic&lt;/compat&gt;
     &lt;/mount&gt;
 
@@ -80,6 +81,17 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;Olympus M.12mm F2.0&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+        &lt;focal value=&quot;12&quot; /&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;12&quot; a=&quot;-0.005&quot; b=&quot;-0.016&quot; c=&quot;-0.014&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+    &lt;lens&gt;
+        &lt;maker&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;Olympus M.Zuiko Digital ED 14-42mm F3.5-5.6&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
@@ -120,6 +132,21 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;Olympus M.14-42mm F3.5-5.6 II R&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;0.018&quot; b=&quot;-0.074&quot; c=&quot;0.014&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.011&quot; b=&quot;-0.048&quot; c=&quot;0.021&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;25&quot; a=&quot;0.0&quot; b=&quot;-0.012&quot; c=&quot;0.008&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.007&quot; b=&quot;-0.015&quot; c=&quot;0.003&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0.007&quot; b=&quot;-0.021&quot; c=&quot;0.018&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;42&quot; a=&quot;-0.001&quot; b=&quot;0.008&quot; c=&quot;-0.010&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+    &lt;lens&gt;
+        &lt;maker&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;Olympus M.Zuiko Digital 17mm F2.8 Pancake&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
diff -urN lensfun.153/libs/lensfun/lens.cpp lensfun/libs/lensfun/lens.cpp
--- lensfun.153/libs/lensfun/lens.cpp	2012-04-08 05:35:04.876415361 +0200
+++ lensfun/libs/lensfun/lens.cpp	2012-04-08 05:37:18.239420254 +0200
@@ -34,7 +34,13 @@
     },
     {
         // [min focal]-[max focal]mm f/[min aperture]-[max aperture]
-        &quot;([0-9.]+)(-[0-9.]+)?(mm)?[[:space:]]+(f/?)?([0-9.]+)(-[0-9.]+)?&quot;,
+        &quot;([0-9]+[0-9.]*)(-[0-9]+[0-9.]*)?(mm)?[[:space:]]+(f/?)?([0-9.]+)(-[0-9.]+)?&quot;,
+        { 1, 2, 5, 6 },
+        false
+    },
+    {
+        // [min focal]-[max focal]mm F[min aperture]-[max aperture]
+        &quot;([0-9]+[0-9.]*)(-[0-9]+[0-9.]*)?(mm)?[[:space:]]+(F?)?([0-9.]+)(-[0-9.]+)?&quot;,
         { 1, 2, 5, 6 },
         false
     }
</code>
        <close_date>1334947204</close_date>
        <history id='13041'>
            <field_name>details</field_name>
            <old_value>This patch replaces patch no. 3267. It adds the &lt;compat&gt; tag and an extra regex string to help search for lenses.</old_value>
            <mod_by>61570</mod_by>
            <date>1333858144</date>
        </history>
        <history id='13052'>
            <field_name>details</field_name>
            <old_value>Ignore this patch. It has been made void by the revised patch no. 3267.</old_value>
            <mod_by>61570</mod_by>
            <date>1334201976</date>
        </history>
        <history id='13062'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1334947204</date>
        </history>
        <history id='13063'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1334947204</date>
        </history>
    </patch>
    <patch id='3362'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='62884' name='bentgm'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1352578982</open_date>
        <summary>Lens data for Sony kit-lens SAL 1855</summary>
        <code>&lt;lens&gt;
        &lt;maker&gt;Sony&lt;/maker&gt;
        &lt;model&gt;Sony DT 18-55mm F3.5-5.6 SAM SAL 1855&lt;/model&gt;
	&lt;mount&gt;Sony Alpha&lt;/mount&gt;
	&lt;type&gt;rectilinear&lt;/type&gt;
	&lt;focal min=&quot;18&quot; max=&quot;55&quot; /&gt;
        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;18&quot; k1=&quot;-0.01644&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;24&quot; k1=&quot;-0.00711&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;35&quot; k1=&quot;-0.00156&quot; /&gt;
	    &lt;distortion model=&quot;poly3&quot; focal=&quot;55&quot; k1=&quot;0.00022&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0,0002383&quot; cr=&quot;-0,0002026&quot; vr &quot;1,000005&quot; bb=&quot;-0,0000326&quot; cb &quot;-0,0002833&quot; vb=&quot;1,0005781&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;24&quot; br=&quot;0,0001333&quot; cr=&quot;-0,0000849&quot; vr &quot;0,9999687&quot; bb=&quot;-0,0002544&quot; cb &quot;0,0002858&quot; vb=&quot;1,0002966&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;28&quot; br=&quot;0,0000818&quot; cr=&quot;-0,0000641&quot; vr &quot;0,999984&quot; bb=&quot;-0,0002708&quot; cb &quot;0,0004174&quot; vb=&quot;1,0001424&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;0,0000722&quot; cr=&quot;-0,0001022&quot; vr &quot;1,000016&quot; bb=&quot;-0,0001064&quot; cb &quot;0,0000633&quot; vb=&quot;1,000208&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;55&quot; br=&quot;0,0000018&quot; cr=&quot;0,000005&quot; vr &quot;1,0000062&quot; bb=&quot;-0,0000538&quot; cb &quot;0,0001139&quot; vb=&quot;1,000009&quot; /&gt;
	    &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;3.5&quot; distance=&quot;8&quot; k1=&quot;-0.07471&quot; k2=&quot;-1.06505&quot; k3=&quot;0.49526&quot; /&gt;
	    &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4.5&quot; distance=&quot;8&quot; k1=&quot;-0.047204&quot; k2=&quot;-0.3346&quot; k3=&quot;-0.31317&quot; /&gt;
	    &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;8&quot; k1=&quot;-0.27732&quot; k2=&quot;0.18407&quot; k3=&quot;0.60019&quot; /&gt;
	    &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot;   distance=&quot;8&quot; k1=&quot;-0.34756&quot; k2=&quot;-2.15042&quot; k3=&quot;0.29237&quot; /&gt;
	    &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;8&quot; k1=&quot;-0.48086&quot; k2=&quot;-0.2996&quot; k3=&quot;-0.25975&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;</code>
        <close_date>1353261099</close_date>
        <history id='13589'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1353261099</date>
        </history>
        <history id='13590'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1353261099</date>
        </history>
        <history id='13591'>
            <field_name>details</field_name>
            <old_value>Thanks for both patches!</old_value>
            <mod_by>36447</mod_by>
            <date>1353261099</date>
        </history>
        <history id='13592'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1353261099</date>
        </history>
    </patch>
    <patch id='3263'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='100' name='none'/>
        <open_date>1332788552</open_date>
        <summary>Lensfun mil-sony update</summary>
        <code>--- trunk-orig/data/db/mil-sony.xml	1970-01-01 01:00:00.000000000 +0100
+++ trunk-update/data/db/mil-sony.xml	2012-03-26 20:48:58.126688694 +0200
@@ -0,0 +1,55 @@
+&lt;lensdatabase&gt;
+
+    &lt;mount&gt;
+        &lt;name&gt;Sony E&lt;/name&gt;
+        &lt;compat&gt;Sony Alpha&lt;/compat&gt;
+        &lt;compat&gt;Minolta AF&lt;/compat&gt;
+        &lt;compat&gt;Generic&lt;/compat&gt;
+    &lt;/mount&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;NEX-3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX 3&lt;/model&gt;
+        &lt;mount&gt;Sony E&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;NEX-5&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX 5&lt;/model&gt;
+        &lt;mount&gt;Sony E&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;NEX-C3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX C3&lt;/model&gt;
+        &lt;mount&gt;Sony E&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;NEX-5N&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX 5N&lt;/model&gt;
+        &lt;mount&gt;Sony E&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;NEX-7&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX 7&lt;/model&gt;
+        &lt;mount&gt;Sony E&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+&lt;/lensdatabase&gt;
</code>
        <close_date>1333738417</close_date>
        <history id='13025'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1333738417</date>
        </history>
        <history id='13026'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1333738417</date>
        </history>
        <history id='13013'>
            <field_name>details</field_name>
            <old_value>Fixed a typo.</old_value>
            <mod_by>61929</mod_by>
            <date>1332793758</date>
        </history>
        <history id='13014'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61929</mod_by>
            <date>1332793758</date>
        </history>
    </patch>
    <patch id='3255'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61037' name='tmodes'/>
        <assigned_to id='100' name='none'/>
        <open_date>1329553418</open_date>
        <summary>Fixes FindGLIB2.cmake on Windows</summary>
        <code>Index: build/CMakeModules/FindGLIB2.cmake
===================================================================
--- build/CMakeModules/FindGLIB2.cmake	(Revision 150)
+++ build/CMakeModules/FindGLIB2.cmake	(Arbeitskopie)
@@ -1,8 +1,9 @@
-
+IF(NOT WIN32)
 INCLUDE(FindPkgConfig)
 PKG_SEARCH_MODULE( GLIB2 REQUIRED glib-2.0 )
+ENDIF()
 
-IF ( NOT GLIB2_FOUND AND NOT PKG_CONFIG_FOUND )
+IF ( WIN32 OR (NOT GLIB2_FOUND AND NOT PKG_CONFIG_FOUND))
     FIND_PATH(GLIB2_GLIB2CONFIG_INCLUDE_PATH
         NAMES glibconfig.h
         PATHS
@@ -10,8 +11,8 @@
           /usr/lib
           /usr/lib64
           /opt/local/lib
+          ${GLIB2_BASE_DIR}/lib
           ${CMAKE_LIBRARY_PATH}
-          ${GLIB22_BASE_DIR}/lib
         PATH_SUFFIXES glib-2.0/include
     )
 
@@ -22,7 +23,7 @@
             /usr/local/include
             /usr/include
             /opt/local/include
-            ${GLIB22_BASE_DIR}/include
+            ${GLIB2_BASE_DIR}/include
         PATH_SUFFIXES gtk-2.0 glib-2.0 glib20 
     )
 
@@ -33,7 +34,7 @@
             /usr/lib
             /usr/lib64
             /opt/local/lib
-            ${GLIB22_BASE_DIR}/lib
+            ${GLIB2_BASE_DIR}/lib
     )
     
     IF(GLIB2_GLIB2CONFIG_INCLUDE_PATH AND GLIB2_INCLUDE_DIRS AND GLIB2_LIBRARIES)
@@ -46,10 +47,10 @@
         SET( GLIB2_FOUND 0)
     ENDIF()    
     
-ENDIF ( NOT GLIB2_FOUND AND NOT PKG_CONFIG_FOUND )
+ENDIF ()
 
 #INCLUDE( FindPackageHandleStandardArgs )
-#FIND_PACKAGE_HANDLE_STANDARD_ARGS( GLIB22 DEFAULT_MSG GLIB22_GLIB2_LIBRARY GLIB22_GLIB2CONFIG_INCLUDE_PATH GLIB22_GLIB2_INCLUDE_PATH )
+#FIND_PACKAGE_HANDLE_STANDARD_ARGS( GLIB2 DEFAULT_MSG GLIB2_LIBRARIES GLIB2_GLIB2CONFIG_INCLUDE_PATH GLIB2_GLIB2_INCLUDE_PATH )
 
 IF (NOT GLIB2_FOUND AND GLIB2_FIND_REQUIRED)
         MESSAGE(FATAL_ERROR &quot;Could not find glib2&quot;)
</code>
        <close_date>1329677509</close_date>
        <history id='12946'>
            <field_name>details</field_name>
            <old_value>Thanks for committing my patches.
But your modifications to FindGLIB2.cmake does not work on Windows.

First: pkg is not available on windows.
Second: You mixed some paths.

Attached find a patch, which fixes these issues.</old_value>
            <mod_by>61037</mod_by>
            <date>1329553441</date>
        </history>
        <history id='12948'>
            <field_name>details</field_name>
            <old_value>Thanks! 
Did everything else work as expected on windows?</old_value>
            <mod_by>36447</mod_by>
            <date>1329668993</date>
        </history>
        <history id='12950'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329676191</date>
        </history>
        <history id='12951'>
            <field_name>details</field_name>
            <old_value>Good to know. So I don't have to setup a windows build environment. I am closing this now.</old_value>
            <mod_by>36447</mod_by>
            <date>1329676191</date>
        </history>
        <history id='12952'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329676191</date>
        </history>
        <history id='12949'>
            <field_name>details</field_name>
            <old_value>Thanks.

All other works as expected on Windows.</old_value>
            <mod_by>61037</mod_by>
            <date>1329670211</date>
        </history>
        <history id='12953'>
            <field_name>patch_status_id</field_name>
            <old_value>2</old_value>
            <mod_by>36447</mod_by>
            <date>1329677509</date>
        </history>
        <history id='12954'>
            <field_name>close_date</field_name>
            <old_value>1329676191</old_value>
            <mod_by>36447</mod_by>
            <date>1329677509</date>
        </history>
    </patch>
    <patch id='3192'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='60339' name='squeegee'/>
        <assigned_to id='100' name='none'/>
        <open_date>1311654244</open_date>
        <summary>olympus 17mm lens distortion fix</summary>
        <code>### Eclipse Workspace Patch 1.0
#P lensfun
Index: data/db/slr-olympus.xml
===================================================================
--- data/db/slr-olympus.xml	(revision 137)
+++ data/db/slr-olympus.xml	(working copy)
@@ -372,8 +372,8 @@
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
-            &lt;distortion model=&quot;poly3&quot; focal=&quot;17&quot; k1=&quot;-0.110&quot; /&gt;
-            &lt;tca model=&quot;poly3&quot; focal=&quot;17&quot; br=&quot;-0.0002&quot; vr=&quot;1.00045&quot; bb=&quot;0.0003&quot; vb=&quot;1.0002&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;17&quot; a=&quot;0.00835&quot; b=&quot;-0.04149&quot; c=&quot;-0.0022&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;17&quot; br=&quot;-0.0004492&quot; vr=&quot;1.0016410&quot; bb=&quot;0.0005749&quot; vb=&quot;0.9989794&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
</code>
        <close_date>1329413034</close_date>
        <history id='12652'>
            <field_name>details</field_name>
            <old_value>UFRaw has a bug, currently suspected to be that it ignores the crop factor.

This is why hugin generated numbers didn't work in UFRaw.

The previously submitted numbers work in UFRaw, but they are wrong because they will not work anywhere else.

These numbers are correct, but won't work in UFRAW but will work everywhere else.</old_value>
            <mod_by>60339</mod_by>
            <date>1311654352</date>
        </history>
        <history id='12941'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329413034</date>
        </history>
        <history id='12942'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329413034</date>
        </history>
    </patch>
    <patch id='3422'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='63655' name='jenshnielsen'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1361379572</open_date>
        <summary>Lens calibration for Canon G1 X. </summary>
        <code>diff --git a/data/db/compact-canon.xml b/data/db/compact-canon.xml
index 11423b1..db23c17 100644
--- a/data/db/compact-canon.xml
+++ b/data/db/compact-canon.xml
@@ -41,6 +41,11 @@
     &lt;/mount&gt;
 
     &lt;mount&gt;
+        &lt;name&gt;canonG1X&lt;/name&gt;
+        &lt;compat&gt;Generic&lt;/compat&gt;
+    &lt;/mount&gt;
+
+    &lt;mount&gt;
         &lt;name&gt;canonG15&lt;/name&gt;
         &lt;compat&gt;Generic&lt;/compat&gt;
     &lt;/mount&gt;
@@ -253,6 +258,14 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon PowerShot G1X&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;PowerShot G1X&lt;/model&gt;
+        &lt;mount&gt;canonG1X&lt;/mount&gt;
+        &lt;cropfactor&gt;1.85&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon PowerShot G15&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;PowerShot G15&lt;/model&gt;
         &lt;mount&gt;canonG15&lt;/mount&gt;
@@ -898,6 +911,28 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
+    &lt;lens&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Standard&lt;/model&gt;
+        &lt;mount&gt;CanonG1X&lt;/mount&gt;
+        &lt;cropfactor&gt;1.85&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;15.1&quot; a=&quot;0.01389&quot; b=&quot;-0.0632&quot; c=&quot;-0.03599&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;22.9&quot; a=&quot;0.00964&quot; b=&quot;-0.04936&quot; c=&quot;0.03423&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;32.5&quot; a=&quot;0.00047&quot; b=&quot;-0.01424&quot; c=&quot;0.02027&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;45.6&quot; a=&quot;0.00015&quot; b=&quot;-0.01182&quot; c=&quot;0.02426&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;53.4&quot; a=&quot;0.01276&quot; b=&quot;-0.04981&quot; c=&quot;0.05674&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;60.4&quot; a=&quot;-0.00142&quot; b=&quot;-0.00527&quot; c=&quot;0.01387&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;15.1&quot; br=&quot;-0.0001069&quot; vr=&quot;1.0001453&quot; bb=&quot;0.0001296&quot; vb=&quot;1.0000490&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;22.9&quot; br=&quot;-0.0000233&quot; vr=&quot;1.0001337&quot; bb=&quot;-0.0000012&quot; vb=&quot;1.0000129&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;32.5&quot; br=&quot;0.0000042&quot; vr=&quot;0.9999859&quot; bb=&quot;-0.0000343&quot; vb=&quot;1.0000878&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;45.6&quot; br=&quot;0.0000399&quot; vr=&quot;0.9998265&quot; bb=&quot;-0.0001051&quot; vb=&quot;1.0001957&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;45.6&quot; br=&quot;0.0000437&quot; vr=&quot;0.9998187&quot; bb=&quot;-0.0001068&quot; vb=&quot;1.0001946&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;53.4&quot; br=&quot;0.0000996&quot; vr=&quot;0.9997218&quot; bb=&quot;-0.0001098&quot; vb=&quot;1.0001592&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;60.4&quot; br=&quot;0.0000722&quot; vr=&quot;0.9996755&quot; bb=&quot;-0.0001249&quot; vb=&quot;1.0002491&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
    &lt;lens&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Standard&lt;/model&gt;
</code>
        <close_date>1363637895</close_date>
        <history id='13986'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1363637895</date>
        </history>
        <history id='13987'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1363637895</date>
        </history>
        <history id='13988'>
            <field_name>details</field_name>
            <old_value>Thanks for the profile!</old_value>
            <mod_by>36447</mod_by>
            <date>1363637895</date>
        </history>
        <history id='13989'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1363637895</date>
        </history>
    </patch>
    <patch id='3276'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='57223' name='edgomez'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1334405950</open_date>
        <summary>Fix 2 lens descs for improved exiv2 lensid match</summary>
        <code>Index: slr-nikon.xml
===================================================================
--- slr-nikon.xml	(rvision 153)
+++ slr-nikon.xml	(copie de travail)
@@ -1015,7 +1015,7 @@
 
     &lt;lens&gt; &lt;!-- http://developer.berlios.de/patch/index.php?func=detailpatch&amp;patch_id=3047&amp;group_id=9034 --&gt;
         &lt;maker&gt;Nikon&lt;/maker&gt;
-        &lt;model&gt;Nikkor 50mm f/1.8D&lt;/model&gt;
+        &lt;model&gt;Nikon AF Nikkor 50mm f/1.8D&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;focal&gt;50&lt;/focal&gt;
         &lt;aperture&gt;1.8-22&lt;/aperture&gt;
@@ -1028,7 +1028,7 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Nikon&lt;/maker&gt;
-        &lt;model&gt;Nikkor 18-105mm f/3.5-5.6G ED&lt;/model&gt;
+        &lt;model&gt;Nikon AF-S DX VR Zoom-Nikkor 18-105mm f/3.5-5.6G ED&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;focal&gt;18-105&lt;/focal&gt;
         &lt;aperture&gt;3.5-22&lt;/aperture&gt;
</code>
        <close_date>1334946938</close_date>
        <history id='13054'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1334946938</date>
        </history>
        <history id='13055'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1334946938</date>
        </history>
        <history id='13056'>
            <field_name>details</field_name>
            <old_value>Thanks, it is applied now.</old_value>
            <mod_by>36447</mod_by>
            <date>1334946938</date>
        </history>
        <history id='13057'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1334946938</date>
        </history>
    </patch>
    <patch id='3229'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61037' name='tmodes'/>
        <assigned_to id='100' name='none'/>
        <open_date>1320085663</open_date>
        <summary>Extend lensfun library</summary>
        <code>Index: docs/manual-main.txt
===================================================================
--- docs/manual-main.txt	(Revision 143)
+++ docs/manual-main.txt	(Arbeitskopie)
@@ -271,7 +271,7 @@
 &lt;dd&gt;Lens variant. Sometimes there are several variants of the same lens which
     even sometimes differs in parameters.
 &lt;dt&gt;\&lt;type\&gt;string\&lt;/type\&gt;
-    Lens type. This is one of: &quot;rectilinear&quot;, &quot;fisheye&quot;, &quot;panoramic&quot;, &quot;equirectangular&quot;.
+    Lens type. This is one of: &quot;rectilinear&quot;, &quot;fisheye&quot;, &quot;panoramic&quot;, &quot;equirectangular&quot;, &quot;orthographic&quot;, &quot;stereographic&quot;, &quot;equisolid&quot;, &quot;fisheye_thoby&quot;.
 &lt;dt&gt;\&lt;focal min=&quot;number&quot; max=&quot;number&quot; value=&quot;number&quot; /\&gt;
 &lt;dd&gt;Lens focal length. This can be either a single value for a fixed-focal length
     lens, or a &quot;min-max&quot; range in the case of a zoom lens.
@@ -345,6 +345,17 @@
     and given distance to subject. This kind of calibration requires relatively many
     sample points since it depends on three variables.
     @see lfVignettingModel
+&lt;dt&gt;\&lt;crop focal=&quot;number&quot; mode=&quot;name&quot; left=&quot;number&quot; right=&quot;number&quot; top=&quot;number&quot; bottom=&quot;number&quot; /\&gt;
+&lt;dd&gt;Declares the image crop for this lens. Crop can be specific for every
+    focal length, so you can declare multiple crop entries with different focal
+    values; the library will interpolate the parameters for intermediate focal lengths.
+    @see lfCropMode
+&lt;dt&gt;\&lt;field_of_view focal=&quot;number&quot; fov=&quot;number&quot; /\&gt;
+&lt;dd&gt;Declares the real field of view for this lens. Field of view is specific for every
+    focal length, so you can declare multiple field of view entries with different focal
+    values; the library will interpolate the parameters for intermediate focal lengths.
+    Especially helpful for fisheye lenses where the field of view differs from the 
+    value calculated from the (nominal) focal length.
 &lt;/dl&gt;
 
 @page dbsearch How database files are found and loaded
Index: include/lensfun/lensfun.h.in
===================================================================
--- include/lensfun/lensfun.h.in	(Revision 143)
+++ include/lensfun/lensfun.h.in	(Arbeitskopie)
@@ -552,6 +552,61 @@
 C_TYPEDEF (struct, lfLensCalibVignetting)
 
 /**
+ *  Different crop modes
+ */
+enum lfCropMode
+{
+    /** no crop at all */
+    LF_NO_CROP,
+    /** use a rectangular crop */
+    LF_CROP_RECTANGLE,
+    /** use a circular crop, e.g. for circular fisheye images */
+    LF_CROP_CIRCLE
+};
+
+C_TYPEDEF(enum, lfCropMode)
+
+/**
+ *  Struct to save image crop, which can depend on the focal length
+ */
+struct lfLensCalibCrop
+{
+    /** Focal length at which this calibration data was taken (0 - unspecified) */
+    float Focal;
+    /** crop mode which should be applied to image to get rid of black borders */
+    enum lfCropMode CropMode;
+    /** @brief Crop coordinates, relative to image corresponding image dimension 
+     *
+     *  Crop goes left - 0, right - 1, top - 2, bottom - 3 
+     *  Left/right refers always to long side (width in landscape mode), 
+     *  top bottom to short side (height in landscape).
+     *  Also negative values are allowed for cropping of fisheye images,
+     *  where the crop circle can extend above the image border.
+     */
+    float Crop [4];
+};
+
+C_TYPEDEF (struct, lfLensCalibCrop)
+
+/**
+ *  Struct to save calibrated field of view, which can depends on the focal length
+ */
+struct lfLensCalibFov
+{
+    /** Focal length at which this calibration data was taken (0 - unspecified) */
+    float Focal;
+    /** @brief Field of view for given images
+     * 
+     *  Especially for fisheye images the field of view calculated from the (EXIF) focal
+     *  length differs slightly from the real field of view. The real field of view can be 
+     *  stored in this field 
+     */
+    float FieldOfView;
+};
+
+C_TYPEDEF (struct, lfLensCalibFov)
+
+/**
  * This structure describes a single parameter for some lens model.
  */
 struct lfParameter
@@ -588,7 +643,15 @@
      * Equirectangular (not that there are such lenses, but useful
      * to convert images TO this type, especially fish-eye images.
      */
-    LF_EQUIRECTANGULAR
+    LF_EQUIRECTANGULAR,
+    /** orthographic fisheye */
+    LF_FISHEYE_ORTHOGRAPHIC,
+    /** stereographic fisheye */
+    LF_FISHEYE_STEREOGRAPHIC,
+    /** equisolid fisheye */
+    LF_FISHEYE_EQUISOLID,
+    /** fisheye Thoby (for Nikkor 10.5) */
+    LF_FISHEYE_THOBY
 };
 
 C_TYPEDEF (enum, lfLensType)
@@ -647,6 +710,10 @@
     lfLensCalibTCA **CalibTCA;
     /** Lens vignetting calibration data, NULL-terminated (unsorted) */
     lfLensCalibVignetting **CalibVignetting;
+    /** Crop data, NULL-terminated (unsorted) */
+    lfLensCalibCrop **CalibCrop;
+    /** Field of view calibration data, NULL-terminated (unsorted) */
+    lfLensCalibFov **CalibFov;
     /** Lens matching score, used while searching: not actually a lens parameter */
     int Score;
 
@@ -748,6 +815,38 @@
     bool RemoveCalibVignetting (int idx);
 
     /**
+     * Add a new lens crop structure to the pool.
+     * The objects is copied, thus you can reuse it as soon as
+     * this function returns.
+     * @param lip
+     *     The lens crop structure.
+     */
+    void AddCalibCrop (const lfLensCalibCrop *cc);
+
+    /**
+     * Remove a lens crop entry from the lens crop structure.
+     * @param idx
+     *     The lens crop data index (zero-based).
+     */
+    bool RemoveCalibCrop (int idx);
+
+    /**
+     * Add a new lens fov structure to the pool.
+     * The objects is copied, thus you can reuse it as soon as
+     * this function returns.
+     * @param lip
+     *     The lens fov structure.
+     */
+    void AddCalibFov (const lfLensCalibFov *cf);
+
+    /**
+     * Remove a field of view  entry from the lens fov structure.
+     * @param idx
+     *     The lens information data index (zero-based).
+     */
+    bool RemoveCalibFov (int idx);
+
+    /**
      * This method fills some fields if they are missing but
      * can be derived from other fields. This includes such non-obvious
      * parameters like the range of focal lengths or the range
@@ -817,6 +916,24 @@
         lfVignettingModel model, const char **details, const lfParameter ***params);
 
     /**
+     * Get the human-readable crop name and the descriptions
+     * of the parameters required by this model.
+     * @param model
+     *     The model.
+     * @param details
+     *     If not NULL, this string will be set to a more detailed (technical)
+     *     description of the model. This string may contain newlines.
+     * @param params
+     *     If not NULL, this variable will be set to a pointer to an array
+     *     of lfParameter structures, every structure describes a model
+     *     parameter. The list is NULL-terminated.
+     * @return
+     *     A short name of the distortion model or NULL if model is unknown.
+     */
+    static const char *GetCropDesc (
+        lfCropMode mode, const char **details, const lfParameter ***params);
+
+    /**
      * Get the human-readable lens type name and a short description of this
      * lens type.
      * @param type
@@ -861,6 +978,24 @@
      */
     bool InterpolateVignetting (
         float focal, float aperture, float distance, lfLensCalibVignetting &amp;res) const;
+
+    /**
+     * Interpolate lens crop data for given focal length.
+     * @param focal
+     *     The focal length at which we need image parameters.
+     * @param res
+     *     The resulting interpolated information data.
+     */
+    bool InterpolateCrop (float focal, lfLensCalibCrop &amp;res) const;
+
+    /**
+     * Interpolate lens fov data for given focal length.
+     * @param focal
+     *     The focal length at which we need image parameters.
+     * @param res
+     *     The resulting interpolated information data.
+     */
+    bool InterpolateFov (float focal, lfLensCalibFov &amp;res) const;
 #endif
 };
 
@@ -914,6 +1049,10 @@
 LF_EXPORT const char *lf_get_vignetting_model_desc (
     enum lfVignettingModel model, const char **details, const lfParameter ***params);
 
+/** @sa lfLens::GetCropDesc */
+LF_EXPORT const char *lf_get_crop_desc (
+    enum lfCropMode mode, const char **details, const lfParameter ***params);
+
 /** @sa lfLens::GetLensTypeDesc */
 LF_EXPORT const char *lf_get_lens_type_desc (
     enum lfLensType type, const char **details);
@@ -929,6 +1068,14 @@
 LF_EXPORT cbool lf_lens_interpolate_vignetting (const lfLens *lens, float focal, float aperture,
     float distance, lfLensCalibVignetting *res);
 
+/** @sa lfLens::InterpolateCrop */
+LF_EXPORT cbool lf_lens_interpolate_crop (const lfLens *lens, float focal,
+    lfLensCalibCrop *res);
+
+/** @sa lfLens::InterpolateFov */
+LF_EXPORT cbool lf_lens_interpolate_fov (const lfLens *lens, float focal,
+    lfLensCalibFov *res);
+
 /** @sa lfLens::AddCalibDistortion */
 LF_EXPORT void lf_lens_add_calib_distortion (lfLens *lens, const lfLensCalibDistortion *dc);
 
@@ -947,6 +1094,18 @@
 /** @sa lfLens::RemoveCalibVignetting */
 LF_EXPORT cbool lf_lens_remove_calib_vignetting (lfLens *lens, int idx);
 
+/** @sa lfLens::AddCalibCrop */
+LF_EXPORT void lf_lens_add_calib_crop (lfLens *lens, const lfLensCalibCrop *cc);
+
+/** @sa lfLens::RemoveCalibCrop */
+LF_EXPORT cbool lf_lens_remove_calib_crop (lfLens *lens, int idx);
+
+/** @sa lfLens::AddCalibFov */
+LF_EXPORT void lf_lens_add_calib_fov (lfLens *lens, const lfLensCalibFov *cf);
+
+/** @sa lfLens::RemoveCalibFov */
+LF_EXPORT cbool lf_lens_remove_calib_fov (lfLens *lens, int idx);
+
 /** @} */
 
 /*----------------------------------------------------------------------------*/
Index: libs/lensfun/database.cpp
===================================================================
--- libs/lensfun/database.cpp	(Revision 143)
+++ libs/lensfun/database.cpp	(Arbeitskopie)
@@ -375,6 +375,63 @@
 
         pd-&gt;lens-&gt;AddCalibVignetting (&amp;vc);
     }
+    else if (!strcmp (element_name, &quot;crop&quot;))
+    {
+        if (!ctx || strcmp (ctx, &quot;calibration&quot;))
+            goto bad_ctx;
+
+        lfLensCalibCrop lcc;
+        memset (&amp;lcc, 0, sizeof (lcc));
+        for (i = 0; attribute_names [i]; i++)
+            if (!strcmp (attribute_names [i], &quot;focal&quot;))
+                lcc.Focal = atof (attribute_values [i]);
+            else if (!strcmp (attribute_names [i], &quot;mode&quot;))
+            {
+                if (!strcmp (attribute_values [i], &quot;no_crop&quot;))
+                    lcc.CropMode = LF_NO_CROP;
+                else if (!strcmp (attribute_values [i], &quot;crop_rectangle&quot;))
+                    lcc.CropMode = LF_CROP_RECTANGLE;
+                else if (!strcmp (attribute_values [i], &quot;crop_circle&quot;))
+                    lcc.CropMode = LF_CROP_CIRCLE;
+                else
+                {
+                    goto bad_attr;
+                }
+            }
+            else if (!strcmp (attribute_names [i], &quot;left&quot;))
+                lcc.Crop [0] = atof (attribute_values [i]);
+            else if (!strcmp (attribute_names [i], &quot;right&quot;))
+                lcc.Crop [1] = atof (attribute_values [i]);
+            else if (!strcmp (attribute_names [i], &quot;top&quot;))
+                lcc.Crop [2] = atof (attribute_values [i]);
+            else if (!strcmp (attribute_names [i], &quot;bottom&quot;))
+                lcc.Crop [3] = atof (attribute_values [i]);
+            else
+            {
+                goto unk_attr;
+            }
+
+        pd-&gt;lens-&gt;AddCalibCrop(&amp;lcc);
+    }
+    else if (!strcmp (element_name, &quot;field_of_view&quot;))
+    {
+        if (!ctx || strcmp (ctx, &quot;calibration&quot;))
+            goto bad_ctx;
+
+        lfLensCalibFov lcf;
+        memset (&amp;lcf, 0, sizeof (lcf));
+        for (i = 0; attribute_names [i]; i++)
+            if (!strcmp (attribute_names [i], &quot;focal&quot;))
+                lcf.Focal = atof (attribute_values [i]);
+            else if (!strcmp (attribute_names [i], &quot;fov&quot;))
+                lcf.FieldOfView = atof (attribute_values [i]);
+            else
+            {
+                goto unk_attr;
+            }
+
+        pd-&gt;lens-&gt;AddCalibFov(&amp;lcf);
+    }
     /* Handle multi-language strings */
     else if (!strcmp (element_name, &quot;maker&quot;) ||
              !strcmp (element_name, &quot;model&quot;) ||
@@ -547,6 +604,14 @@
                 pd-&gt;lens-&gt;Type = LF_PANORAMIC;
             else if (!_lf_strcmp (text, &quot;equirectangular&quot;))
                 pd-&gt;lens-&gt;Type = LF_EQUIRECTANGULAR;
+            else if (!_lf_strcmp (text, &quot;orthographic&quot;))
+                pd-&gt;lens-&gt;Type = LF_FISHEYE_ORTHOGRAPHIC;
+            else if (!_lf_strcmp (text, &quot;stereographic&quot;))
+                pd-&gt;lens-&gt;Type = LF_FISHEYE_STEREOGRAPHIC;
+            else if (!_lf_strcmp (text, &quot;equisolid&quot;))
+                pd-&gt;lens-&gt;Type = LF_FISHEYE_EQUISOLID;
+            else if (!_lf_strcmp (text, &quot;fisheye_thoby&quot;))
+                pd-&gt;lens-&gt;Type = LF_FISHEYE_THOBY;
             else
             {
                 g_set_error (error, G_MARKUP_ERROR, G_MARKUP_ERROR_INVALID_CONTENT,
@@ -735,6 +800,10 @@
                                 lenses [i]-&gt;Type == LF_FISHEYE ? &quot;fisheye&quot; :
                                 lenses [i]-&gt;Type == LF_PANORAMIC ? &quot;panoramic&quot; :
                                 lenses [i]-&gt;Type == LF_EQUIRECTANGULAR ? &quot;equirectangular&quot; :
+                                lenses [i]-&gt;Type == LF_FISHEYE_ORTHOGRAPHIC ? &quot;orthographic&quot; :
+                                lenses [i]-&gt;Type == LF_FISHEYE_STEREOGRAPHIC ? &quot;stereographic&quot; :
+                                lenses [i]-&gt;Type == LF_FISHEYE_EQUISOLID ? &quot;equisolid&quot; :
+                                lenses [i]-&gt;Type == LF_FISHEYE_THOBY ? &quot;fisheye_thoby&quot; :
                                 &quot;rectilinear&quot;);
 
             if (lenses [i]-&gt;CenterX || lenses [i]-&gt;CenterY)
@@ -753,7 +822,8 @@
                             lenses [i]-&gt;CropFactor);
 
             if (lenses [i]-&gt;CalibDistortion || lenses [i]-&gt;CalibTCA ||
-                lenses [i]-&gt;CalibVignetting)
+                lenses [i]-&gt;CalibVignetting || lenses [i]-&gt;CalibCrop || 
+                lenses [i]-&gt;CalibFov )
                 g_string_append (output, &quot;\t\t&lt;calibration&gt;\n&quot;);
 
             if (lenses [i]-&gt;CalibDistortion)
@@ -838,8 +908,53 @@
                 }
             }
 
+            if (lenses [i]-&gt;CalibCrop)
+            {
+                for (j = 0; lenses [i]-&gt;CalibCrop [j]; j++)
+                {
+                    lfLensCalibCrop *lcc = lenses [i]-&gt;CalibCrop [j];
+
+                    _lf_xml_printf (output, &quot;\t\t\t&lt;crop focal=\&quot;%g\&quot; &quot;,
+                                    lcc-&gt;Focal);
+                    switch (lcc-&gt;CropMode)
+                    {
+                        case LF_CROP_RECTANGLE:
+                            _lf_xml_printf (
+                                output, &quot;mode=\&quot;crop_rectangle\&quot; left=\&quot;%g\&quot; right=\&quot;%g\&quot; top=\&quot;%g\&quot; bottom=\&quot;%g\&quot; /&gt;\n&quot;,
+                                lcc-&gt;Crop [0], lcc-&gt;Crop [1], lcc-&gt;Crop [2], lcc-&gt;Crop [3]);
+                            break;
+
+                        case LF_CROP_CIRCLE:
+                            _lf_xml_printf (
+                                output, &quot;mode=\&quot;crop_circle\&quot; left=\&quot;%g\&quot; right=\&quot;%g\&quot; top=\&quot;%g\&quot; bottom=\&quot;%g\&quot; /&gt;\n&quot;,
+                                lcc-&gt;Crop [0], lcc-&gt;Crop [1], lcc-&gt;Crop [2], lcc-&gt;Crop [3]);
+                            break;
+
+                        case LF_NO_CROP:
+                        default:
+                            _lf_xml_printf (output, &quot;mode=\&quot;no_crop\&quot; /&gt;\n&quot;);
+                            break;
+                    }
+                }
+            }
+
+            if (lenses [i]-&gt;CalibFov)
+            {
+                for (j = 0; lenses [i]-&gt;CalibFov [j]; j++)
+                {
+                    lfLensCalibFov *lcf = lenses [i]-&gt;CalibFov [j];
+
+                    if(lcf-&gt;FieldOfView&gt;0)
+                    {
+                        _lf_xml_printf (output, &quot;\t\t\t&lt;field_of_view focal=\&quot;%g\&quot; fov=\&quot;%g\&quot; /&gt;\n&quot;,
+                            lcf-&gt;Focal, lcf-&gt;FieldOfView);
+                    };
+                }
+            }
+
             if (lenses [i]-&gt;CalibDistortion || lenses [i]-&gt;CalibTCA ||
-                lenses [i]-&gt;CalibVignetting)
+                lenses [i]-&gt;CalibVignetting || lenses [i]-&gt;CalibCrop ||
+                lenses [i]-&gt;CalibFov )
                 g_string_append (output, &quot;\t\t&lt;/calibration&gt;\n&quot;);
 
             g_string_append (output, &quot;\t&lt;/lens&gt;\n\n&quot;);
Index: libs/lensfun/lens.cpp
===================================================================
--- libs/lensfun/lens.cpp	(Revision 143)
+++ libs/lensfun/lens.cpp	(Arbeitskopie)
@@ -434,6 +434,52 @@
     return NULL;
 }
 
+const char *lfLens::GetCropDesc (
+    lfCropMode mode , const char **details, const lfParameter ***params)
+{
+    static const lfParameter *param_none [] = { NULL };
+
+    static const lfParameter param_crop_left = { &quot;left&quot;, -1.0F, 1.0F, 0.0F };
+    static const lfParameter param_crop_right = { &quot;right&quot;, -1.0F, 1.0F, 0.0F };
+    static const lfParameter param_crop_top = { &quot;top&quot;, -1.0F, 1.0F, 0.0F };
+    static const lfParameter param_crop_bottom = { &quot;bottom&quot;, -1.0F, 1.0F, 0.0F };
+    static const lfParameter *param_crop [] = { &amp;param_crop_left, &amp;param_crop_right, &amp;param_crop_top, &amp;param_crop_bottom, NULL };
+
+    switch (mode)
+    {
+        case LF_NO_CROP:
+            if (details)
+                *details = &quot;No crop&quot;;
+            if (params)
+                *params = param_none;
+            return &quot;No crop&quot;;
+
+        case LF_CROP_RECTANGLE:
+            if (details)
+                *details = &quot;Rectangular crop area&quot;;
+            if (params)
+                *params = param_crop;
+            return &quot;rectangular crop&quot;;
+
+        case LF_CROP_CIRCLE:
+            if (details)
+                *details = &quot;Circular crop area&quot;;
+            if (params)
+                *params = param_crop;
+            return &quot;circular crop&quot;;
+
+        default:
+            // keep gcc 4.4 happy
+            break;
+    }
+
+    if (details)
+        *details = NULL;
+    if (params)
+        *params = NULL;
+    return NULL;
+}
+
 const char *lfLens::GetLensTypeDesc (lfLensType type, const char **details)
 {
     switch (type)
@@ -463,6 +509,26 @@
                 *details = &quot;Ref: http://wiki.panotools.org/Equirectangular_Projection&quot;;
             return &quot;Equirectangular&quot;;
 
+        case LF_FISHEYE_ORTHOGRAPHIC:
+            if (details)
+                *details = &quot;Ref: http://wiki.panotools.org/Fisheye_Projection&quot;;
+            return &quot;Fisheye, orthographic&quot;;
+
+        case LF_FISHEYE_STEREOGRAPHIC:
+            if (details)
+                *details = &quot;Ref: http://wiki.panotools.org/Stereographic_Projection&quot;;
+            return &quot;Fisheye, stereographic&quot;;
+
+        case LF_FISHEYE_EQUISOLID:
+            if (details)
+                *details = &quot;Ref: http://wiki.panotools.org/Fisheye_Projection&quot;;
+            return &quot;Fisheye, equisolid&quot;;
+
+        case LF_FISHEYE_THOBY:
+            if (details)
+                *details = &quot;Ref: http://groups.google.com/group/hugin-ptx/browse_thread/thread/bd822d178e3e239d&quot;;
+            return &quot;Thoby-Fisheye&quot;;
+
         default:
             // keep gcc 4.4 happy
             break;
@@ -562,6 +628,64 @@
     return _lf_delobj (x.arr, idx);
 }
 
+static bool cmp_lenscrop (const void *x1, const void *x2)
+{
+    const lfLensCalibCrop *d1 = static_cast&lt;const lfLensCalibCrop *&gt; (x1);
+    const lfLensCalibCrop *d2 = static_cast&lt;const lfLensCalibCrop *&gt; (x2);
+    return (d1-&gt;Focal == d2-&gt;Focal);
+}
+
+void lfLens::AddCalibCrop (const lfLensCalibCrop *lcc)
+{
+    // Avoid &quot;dereferencing type-punned pointer will break strict-aliasing rules&quot; warning
+    union
+    {
+        lfLensCalibCrop ***cd;
+        void ***arr;
+    } x = { &amp;CalibCrop };
+    _lf_addobj (x.arr, lcc, sizeof (*lcc), cmp_lenscrop);
+}
+
+bool lfLens::RemoveCalibCrop (int idx)
+{
+    // Avoid &quot;dereferencing type-punned pointer will break strict-aliasing rules&quot; warning
+    union
+    {
+        lfLensCalibCrop ***cd;
+        void ***arr;
+    } x = { &amp;CalibCrop };
+    return _lf_delobj (x.arr, idx);
+}
+
+static bool cmp_lensfov (const void *x1, const void *x2)
+{
+    const lfLensCalibFov *d1 = static_cast&lt;const lfLensCalibFov *&gt; (x1);
+    const lfLensCalibFov *d2 = static_cast&lt;const lfLensCalibFov *&gt; (x2);
+    return (d1-&gt;Focal == d2-&gt;Focal);
+}
+
+void lfLens::AddCalibFov (const lfLensCalibFov *lcf)
+{
+    // Avoid &quot;dereferencing type-punned pointer will break strict-aliasing rules&quot; warning
+    union
+    {
+        lfLensCalibFov ***cd;
+        void ***arr;
+    } x = { &amp;CalibFov };
+    _lf_addobj (x.arr, lcf, sizeof (*lcf), cmp_lensfov);
+}
+
+bool lfLens::RemoveCalibFov (int idx)
+{
+    // Avoid &quot;dereferencing type-punned pointer will break strict-aliasing rules&quot; warning
+    union
+    {
+        lfLensCalibFov ***cd;
+        void ***arr;
+    } x = { &amp;CalibFov };
+    return _lf_delobj (x.arr, idx);
+}
+
 static int __insert_spline (void **spline, float *spline_dist, float dist, void *val)
 {
     if (dist &lt; 0)
@@ -1016,6 +1140,136 @@
     return rc;
 }
 
+bool lfLens::InterpolateCrop (float focal, lfLensCalibCrop &amp;res) const
+{
+    if (!CalibCrop)
+        return false;
+
+    union
+    {
+        lfLensCalibCrop *spline [4];
+        void *spline_ptr [4];
+    };
+    float spline_dist [4] = { -FLT_MAX, -FLT_MAX, FLT_MAX, FLT_MAX };
+    lfCropMode cm = LF_NO_CROP;
+
+    memset (spline, 0, sizeof (spline));
+    for (int i = 0; CalibCrop [i]; i++)
+    {
+        lfLensCalibCrop *c = CalibCrop [i];
+        if (c-&gt;CropMode == LF_NO_CROP)
+            continue;
+
+        // Take into account just the first encountered crop mode
+        if (cm == LF_NO_CROP)
+            cm = c-&gt;CropMode;
+        else if (cm != c-&gt;CropMode)
+        {
+            g_warning (&quot;WARNING: lens %s/%s has multiple crop modes defined\n&quot;,
+                       Maker, Model);
+            continue;
+        }
+
+        float df = focal - c-&gt;Focal;
+        if (df == 0.0)
+        {
+            // Exact match found, don't care to interpolate
+            res = *c;
+            return true;
+        }
+
+        __insert_spline (spline_ptr, spline_dist, df, c);
+    }
+
+    if (!spline [1] || !spline [2])
+    {
+        if (spline [1])
+            res = *spline [1];
+        else if (spline [2])
+            res = *spline [2];
+        else
+            return false;
+
+        return true;
+    }
+
+    // No exact match found, interpolate the model parameters
+    res.CropMode = cm;
+    res.Focal = focal;
+
+    float t = (focal - spline [1]-&gt;Focal) / (spline [2]-&gt;Focal - spline [1]-&gt;Focal);
+
+    for (size_t i = 0; i &lt; ARRAY_LEN (res.Crop); i++)
+        res.Crop [i] = _lf_interpolate (
+            spline [0] ? spline [0]-&gt;Crop [i] : FLT_MAX,
+            spline [1]-&gt;Crop [i], spline [2]-&gt;Crop [i],
+            spline [3] ? spline [3]-&gt;Crop [i] : FLT_MAX, t);
+
+    return true;
+}
+
+bool lfLens::InterpolateFov (float focal, lfLensCalibFov &amp;res) const
+{
+    if (!CalibFov)
+        return false;
+
+    union
+    {
+        lfLensCalibFov *spline [4];
+        void *spline_ptr [4];
+    };
+    float spline_dist [4] = { -FLT_MAX, -FLT_MAX, FLT_MAX, FLT_MAX };
+    lfCropMode cm = LF_NO_CROP;
+
+    memset (spline, 0, sizeof (spline));
+    int counter=0;
+    for (int i = 0; CalibFov [i]; i++)
+    {
+        lfLensCalibFov *c = CalibFov [i];
+        if (c-&gt;FieldOfView == 0)
+            continue;
+
+        counter++;
+        float df = focal - c-&gt;Focal;
+        if (df == 0.0)
+        {
+            // Exact match found, don't care to interpolate
+            res = *c;
+            return true;
+        }
+
+        __insert_spline (spline_ptr, spline_dist, df, c);
+    }
+
+    //no valid data found
+    if(counter==0)
+        return false;
+
+    if (!spline [1] || !spline [2])
+    {
+        if (spline [1])
+            res = *spline [1];
+        else if (spline [2])
+            res = *spline [2];
+        else
+            return false;
+
+        return true;
+    }
+
+    // No exact match found, interpolate the model parameters
+    res.Focal = focal;
+
+    float t = (focal - spline [1]-&gt;Focal) / (spline [2]-&gt;Focal - spline [1]-&gt;Focal);
+
+    res.FieldOfView = _lf_interpolate (
+        spline [0] ? spline [0]-&gt;FieldOfView : FLT_MAX,
+        spline [1]-&gt;FieldOfView, spline [2]-&gt;FieldOfView,
+        spline [3] ? spline [3]-&gt;FieldOfView : FLT_MAX, t);
+
+    return true;
+}
+
 gint _lf_lens_compare (gconstpointer a, gconstpointer b)
 {
     int i;
@@ -1269,6 +1523,12 @@
     return lfLens::GetVignettingModelDesc (model, details, params);
 }
 
+const char *lf_get_crop_desc (
+    enum lfCropMode mode, const char **details, const lfParameter ***params)
+{
+    return lfLens::GetCropDesc (mode, details, params);
+}
+
 const char *lf_get_lens_type_desc (enum lfLensType type, const char **details)
 {
     return lfLens::GetLensTypeDesc (type, details);
@@ -1291,6 +1551,18 @@
     return lens-&gt;InterpolateVignetting (focal, aperture, distance, *res);
 }
 
+cbool lf_lens_interpolate_crop (const lfLens *lens, float focal,
+    lfLensCalibCrop *res)
+{
+    return lens-&gt;InterpolateCrop (focal, *res);
+}
+
+cbool lf_lens_interpolate_fov (const lfLens *lens, float focal,
+    lfLensCalibFov *res)
+{
+    return lens-&gt;InterpolateFov (focal, *res);
+}
+
 void lf_lens_add_calib_distortion (lfLens *lens, const lfLensCalibDistortion *dc)
 {
     lens-&gt;AddCalibDistortion (dc);
@@ -1320,3 +1592,25 @@
 {
     return lens-&gt;RemoveCalibVignetting (idx);
 }
+
+void lf_lens_add_calib_crop (lfLens *lens, const lfLensCalibCrop *lcc)
+{
+    lens-&gt;AddCalibCrop (lcc);
+}
+
+cbool lf_lens_remove_calib_crop (lfLens *lens, int idx)
+{
+    return lens-&gt;RemoveCalibCrop (idx);
+}
+
+
+void lf_lens_add_calib_fov (lfLens *lens, const lfLensCalibFov *lcf)
+{
+    lens-&gt;AddCalibFov (lcf);
+}
+
+cbool lf_lens_remove_calib_fov (lfLens *lens, int idx)
+{
+    return lens-&gt;RemoveCalibFov (idx);
+}
+
</code>
        <close_date>1329405788</close_date>
        <history id='12757'>
            <field_name>details</field_name>
            <old_value>The patch extends the saved information in the database. This is intended for integration of lensfun into Hugin.</old_value>
            <mod_by>61037</mod_by>
            <date>1320085715</date>
        </history>
        <history id='12931'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329405788</date>
        </history>
        <history id='12932'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329405788</date>
        </history>
    </patch>
    <patch id='3273'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1333858183</open_date>
        <summary>Add new Nikon camera models.</summary>
        <code>--- lensfun.153/data/db/slr-nikon.xml	2012-04-08 05:35:04.728405209 +0200
+++ lensfun/data/db/slr-nikon.xml	2012-04-08 05:45:46.647434491 +0200
@@ -156,6 +156,24 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D800&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D800&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D800E&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D800E&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON D3000&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;D3000&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
@@ -174,8 +192,8 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
-        &lt;model&gt;NIKON D7000&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;D7000&lt;/model&gt;
+        &lt;model&gt;NIKON D5000&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D5000&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -183,8 +201,8 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
-        &lt;model&gt;NIKON D5000&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;D5000&lt;/model&gt;
+        &lt;model&gt;NIKON D5100&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D5100&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -192,8 +210,8 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
-        &lt;model&gt;NIKON D5100&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;D5100&lt;/model&gt;
+        &lt;model&gt;NIKON D7000&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D7000&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -289,10 +307,19 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D4&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D4&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
         &lt;maker&gt;FUJIFILM&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Fujifilm&lt;/maker&gt;
-        &lt;model&gt;FinePix S5Pro&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;FinePix S5 Pro&lt;/model&gt;
+        &lt;model&gt;FinePixS1Pro&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;FinePix S1 Pro&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -300,8 +327,8 @@
     &lt;camera&gt;
         &lt;maker&gt;FUJIFILM&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Fujifilm&lt;/maker&gt;
-        &lt;model&gt;FinePix S3Pro&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;FinePix S3 Pro&lt;/model&gt;
+        &lt;model&gt;FinePixS2Pro&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;FinePix S2 Pro&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -309,8 +336,8 @@
     &lt;camera&gt;
         &lt;maker&gt;FUJIFILM&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Fujifilm&lt;/maker&gt;
-        &lt;model&gt;FinePixS2Pro&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;FinePix S2 Pro&lt;/model&gt;
+        &lt;model&gt;FinePix S3Pro&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;FinePix S3 Pro&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -318,30 +345,30 @@
     &lt;camera&gt;
         &lt;maker&gt;FUJIFILM&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Fujifilm&lt;/maker&gt;
-        &lt;model&gt;FinePixS1Pro&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;FinePix S1 Pro&lt;/model&gt;
+        &lt;model&gt;FinePix S5Pro&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;FinePix S5 Pro&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Kodak&lt;/maker&gt;
-        &lt;model&gt;DCS Pro 14N&lt;/model&gt;
-        &lt;variant&gt;DCS-14n&lt;/variant&gt;
+        &lt;model&gt;DCS Pro SLR/n&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Kodak&lt;/maker&gt;
-        &lt;model&gt;DCS Pro SLR/n&lt;/model&gt;
+        &lt;model&gt;DCS Pro 14nx&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Kodak&lt;/maker&gt;
-        &lt;model&gt;DCS Pro 14nx&lt;/model&gt;
+        &lt;model&gt;DCS Pro 14N&lt;/model&gt;
+        &lt;variant&gt;DCS-14n&lt;/variant&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
     &lt;/camera&gt;
</code>
        <close_date>1334947028</close_date>
        <history id='13042'>
            <field_name>details</field_name>
            <old_value>This patch adds the Nikon D800, D800E and D4 camera models.</old_value>
            <mod_by>61570</mod_by>
            <date>1333858225</date>
        </history>
        <history id='13058'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1334947028</date>
        </history>
        <history id='13059'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1334947028</date>
        </history>
        <history id='13060'>
            <field_name>details</field_name>
            <old_value>Thanks! It's applied now.</old_value>
            <mod_by>36447</mod_by>
            <date>1334947028</date>
        </history>
        <history id='13061'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1334947028</date>
        </history>
    </patch>
    <patch id='3514'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='2378' name='bronger'/>
        <open_date>1383646288</open_date>
        <summary>Fix lens model name matching</summary>
        <code>*** libs/lensfun/auxfun.cpp	2010-03-14 18:48:00 +0000
--- libs/lensfun/auxfun.cpp	2013-11-05 10:03:36 +0000
***************
*** 585,591 ****
          }
      }
  
!     score = (score * 100) / pattern_words-&gt;len;
  
      Free (match_words);
  
--- 585,591 ----
          }
      }
  
!     score = (score * 100) / match_words-&gt;len;
  
      Free (match_words);
  
</code>
        <close_date>1384691702</close_date>
        <history id='14355'>
            <field_name>details</field_name>
            <old_value>Try the following:

1. Add a new dummy lens with the same name as an existing one.
2. Call ./tfun -L&quot;Name of this lens&quot;

You will see that both entries are found, with the same score.  Now append a word to one of the two lens names.  Still, both are found, even with the same score!

The best match is always the first one, which is why this bug was never a big problem.  But this is only because which loading the database, the lenses are sorted in a way that shorter names come first.  So this is &quot;working by coincidence&quot;.

This patch gives penalty to too long lens names in the database.  I even thin Andrew intended it this way and made a mere mistake.

However: Look for yourself, and play a little bit with tfun.  I still don't feel confident enough to be sure that the patch is correct.  In particular, I don't know whether it may cause problems in conjuction with &quot;all_words = False&quot;.</old_value>
            <mod_by>2378</mod_by>
            <date>1383646546</date>
        </history>
        <history id='14377'>
            <field_name>details</field_name>
            <old_value>Have tested it with the 
&quot;smc PENTAX-DA 18-55mm f/3.5-5.6 AL WR&quot;
and 
&quot;smc PENTAX-DA 18-55mm f/3.5-5.6 AL&quot;
from the database. 

Always wondered why they both get the same score... I think your patch properly fixed it.

</old_value>
            <mod_by>36447</mod_by>
            <date>1384105798</date>
        </history>
        <history id='14378'>
            <field_name>details</field_name>
            <old_value>What is this &quot;all_words&quot; parameter? Can't find it in the sources...</old_value>
            <mod_by>36447</mod_by>
            <date>1384105985</date>
        </history>
        <history id='14384'>
            <field_name>details</field_name>
            <old_value>Sorry, it is called &quot;match_all_words&quot;.</old_value>
            <mod_by>2378</mod_by>
            <date>1384163860</date>
        </history>
        <history id='14385'>
            <field_name>details</field_name>
            <old_value>Ah ok, AFAIK the fuzzy search flag in e.g. tfun sets match_all_words to false. I could not experience any problem Playing around with fuzzy search and without. But this is not easy to test... maybe we should extend the automatic testing in tfun with search strings that are known to be problematic.</old_value>
            <mod_by>36447</mod_by>
            <date>1384201115</date>
        </history>
        <history id='14421'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1384565660</date>
        </history>
        <history id='14422'>
            <field_name>details</field_name>
            <old_value>After further testing, I came to the conclusion that for both fuzzy and non-fuzzy to work, we need

score = (score * 200) / (pattern_words-&gt;len + match_words-&gt;len)

This way, the difference from the optimum (i.e. no dangling words in match nor pattern) is calculated.  I was unable to find a case where this didn't work optimally.  I included the patch.</old_value>
            <mod_by>2378</mod_by>
            <date>1384565660</date>
        </history>
        <history id='14423'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1384565660</date>
        </history>
        <history id='14436'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1384691692</date>
        </history>
        <history id='14437'>
            <field_name>close_date</field_name>
            <old_value>1384691673</old_value>
            <mod_by>36447</mod_by>
            <date>1384691692</date>
        </history>
        <history id='14434'>
            <field_name>details</field_name>
            <old_value>Great, I think you finally fixed the fuzzy search. Search results from both modes are much more stable now.</old_value>
            <mod_by>36447</mod_by>
            <date>1384691673</date>
        </history>
        <history id='14435'>
            <field_name>close_date</field_name>
            <old_value>1384565660</old_value>
            <mod_by>36447</mod_by>
            <date>1384691673</date>
        </history>
        <history id='14438'>
            <field_name>details</field_name>
            <old_value>Great, I think you finally fixed the fuzzy search. Search results from both modes are much more stable now.</old_value>
            <mod_by>36447</mod_by>
            <date>1384691702</date>
        </history>
        <history id='14439'>
            <field_name>close_date</field_name>
            <old_value>1384691692</old_value>
            <mod_by>36447</mod_by>
            <date>1384691702</date>
        </history>
    </patch>
    <patch id='3252'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='15649' name='gebner'/>
        <assigned_to id='100' name='none'/>
        <open_date>1329258164</open_date>
        <summary>Add Panasonic DMC-GX1 camera.</summary>
        <code>Index: data/db/mil-panasonic.xml
===================================================================
--- data/db/mil-panasonic.xml	(revision 147)
+++ data/db/mil-panasonic.xml	(working copy)
@@ -63,6 +63,13 @@
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
+    &lt;camera&gt;
+        &lt;maker&gt;Panasonic&lt;/maker&gt;
+        &lt;model&gt;DMC-GX1&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
     &lt;lens&gt;
         &lt;maker&gt;Panasonic&lt;/maker&gt;
         &lt;model&gt;LUMIX G 20/F1.7&lt;/model&gt;
</code>
        <close_date>1329405776</close_date>
        <history id='12921'>
            <field_name>details</field_name>
            <old_value>Thank you, patch is committed to SVN.</old_value>
            <mod_by>36447</mod_by>
            <date>1329339483</date>
        </history>
        <history id='12923'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329405756</date>
        </history>
        <history id='12924'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329405756</date>
        </history>
        <history id='12927'>
            <field_name>patch_status_id</field_name>
            <old_value>2</old_value>
            <mod_by>36447</mod_by>
            <date>1329405776</date>
        </history>
        <history id='12928'>
            <field_name>close_date</field_name>
            <old_value>1329405756</old_value>
            <mod_by>36447</mod_by>
            <date>1329405776</date>
        </history>
    </patch>
    <patch id='3265'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='100' name='none'/>
        <open_date>1332788590</open_date>
        <summary>Lensfun slr-nikon update</summary>
        <code>--- trunk-orig/data/db/slr-nikon.xml	2012-03-26 20:30:59.379734016 +0200
+++ trunk-update/data/db/slr-nikon.xml	2012-03-26 20:39:02.627736194 +0200
@@ -192,6 +192,15 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D5100&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D5100&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON D1&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;D1&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
</code>
        <close_date>1333738417</close_date>
        <history id='13021'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1333738417</date>
        </history>
        <history id='13022'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1333738417</date>
        </history>
    </patch>
    <patch id='3361'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1352308889</open_date>
        <summary>Initial Nikon 1 camera support</summary>
        <code>diff -Nurpd a/data/db/mil-nikon.xml b/data/db/mil-nikon.xml
--- a/data/db/mil-nikon.xml	1970-01-01 01:00:00.000000000 +0100
+++ b/data/db/mil-nikon.xml	2012-11-07 18:20:54.913769841 +0100
@@ -0,0 +1,49 @@
+&lt;lensdatabase&gt;
+
+    &lt;mount&gt;
+        &lt;name&gt;Nikon CX&lt;/name&gt;
+        &lt;compat&gt;M42&lt;/compat&gt;
+	&lt;compat&gt;Nikon F&lt;/compat&gt;
+        &lt;compat&gt;Nikon F AI&lt;/compat&gt;
+        &lt;compat&gt;Nikon F AI-S&lt;/compat&gt;
+        &lt;compat&gt;Nikon F AF&lt;/compat&gt;
+        &lt;compat&gt;Generic&lt;/compat&gt;
+    &lt;/mount&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON 1 V1&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;1 V1&lt;/model&gt;
+        &lt;mount&gt;Nikon CX&lt;/mount&gt;
+        &lt;cropfactor&gt;2.7&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON 1 J1&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;1 J1&lt;/model&gt;
+        &lt;mount&gt;Nikon CX&lt;/mount&gt;
+        &lt;cropfactor&gt;2.7&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON 1 V2&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;1 V2&lt;/model&gt;
+        &lt;mount&gt;Nikon CX&lt;/mount&gt;
+        &lt;cropfactor&gt;2.7&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON 1 J2&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;1 J2&lt;/model&gt;
+        &lt;mount&gt;Nikon CX&lt;/mount&gt;
+        &lt;cropfactor&gt;2.7&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+&lt;/lensdatabase&gt;
</code>
        <close_date>1352318799</close_date>
        <history id='13551'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1352318799</date>
        </history>
        <history id='13552'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1352318799</date>
        </history>
        <history id='13553'>
            <field_name>details</field_name>
            <old_value>Thanks, patch is applied.</old_value>
            <mod_by>36447</mod_by>
            <date>1352318799</date>
        </history>
        <history id='13554'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1352318799</date>
        </history>
    </patch>
    <patch id='3358'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1352191359</open_date>
        <summary>Fixing vignetting interpolation with IDW</summary>
        <code>diff -Naur lensfun-0.2.5/libs/lensfun/lens.cpp /home/bronger/temp/lensfun-0.2.5/libs/lensfun/lens.cpp
--- lensfun-0.2.5/libs/lensfun/lens.cpp	2010-03-22 23:14:25.000000000 +0100
+++ /home/bronger/temp/lensfun-0.2.5/libs/lensfun/lens.cpp	2012-11-06 09:43:19.716534768 +0100
@@ -738,7 +738,7 @@
 }
 
 static float __vignetting_dist (
-    const lfLens *l, lfLensCalibVignetting &amp;x, float focal, float aperture, float distance)
+    const lfLens *l, const lfLensCalibVignetting &amp;x, float focal, float aperture, float distance)
 {
     // translate every value to linear scale and normalize
     // approximatively to range 0..1
@@ -750,270 +750,65 @@
         f1 /= df;
         f2 /= df;
     }
-    float a1 = log (aperture) / 2.77258872223978123766;   // log(16)
-    float a2 = log (x.Aperture) / 2.77258872223978123766; // log(16)
-    float d1 = log (distance);
-    float d2 = log (x.Distance);
+    float a1 = 8.0 / aperture;
+    float a2 = 8.0 / x.Aperture;
+    float d1 = 0.1 / distance;
+    float d2 = 0.1 / x.Distance;
 
     return sqrt (square (f2 - f1) + square (a2 - a1) + square (d2 - d1));
 }
 
-static void __vignetting_interp (
-    lfLensCalibVignetting **spline, lfLensCalibVignetting &amp;res, float t)
-{
-    res.Focal = _lf_interpolate (
-        spline [0] ? spline [0]-&gt;Focal : FLT_MAX,
-        spline [1]-&gt;Focal, spline [2]-&gt;Focal,
-        spline [3] ? spline [3]-&gt;Focal : FLT_MAX, t);
-    res.Aperture = _lf_interpolate (
-        spline [0] ? spline [0]-&gt;Aperture : FLT_MAX,
-        spline [1]-&gt;Aperture, spline [2]-&gt;Aperture,
-        spline [3] ? spline [3]-&gt;Aperture : FLT_MAX, t);
-    res.Distance = _lf_interpolate (
-        spline [0] ? spline [0]-&gt;Distance : FLT_MAX,
-        spline [1]-&gt;Distance, spline [2]-&gt;Distance,
-        spline [3] ? spline [3]-&gt;Distance : FLT_MAX, t);
-}
-
 bool lfLens::InterpolateVignetting (
     float focal, float aperture, float distance, lfLensCalibVignetting &amp;res) const
 {
     if (!CalibVignetting)
         return false;
 
-    /* This is a pretty complex problem, despite its apparent simplicity.
-     * What we have is to find the intensity of a 3D force field in given
-     * point (let's call it p) determined by coordinates (X=focal,
-     * Y=aperture, Z=distance). For this we have a lot of measurements
-     * (e.g. calibration data) taken at other random points with their
-     * own X/Y/Z coordinates.
-     *
-     * We must find the line that intersects at least two calibration
-     * points and comes as close to the interpolation point as possible.
-     * Even better if we find 4 such points, in this case we can approximate
-     * by a real spline instead of doing linear interpolation.
-     *
-     * We will do this as follows. For every point find the other points
-     * on the line that intersects this point and the point p. We need
-     * just four points: two on one side of p, and two on other side of it.
-     * Then build a Hermit spline that passes through these four points.
-     * Finally, compute a estimate of the &quot;quality&quot; of this spline, which
-     * is made of: total spline length (the shorter is spline, the higher
-     * is quality), how close the resulting X,Y,Z is to our target.
-     * When we get a estimate of a high enough quality, we return
-     * the found point to the caller.
-     *
-     * Otherwise, the found point is added to the pool and the loop goes
-     * over and over again.
-     */
-
-    bool rc = false;
-
-    GPtrArray *vc = g_ptr_array_new ();
-    int cvc;
-    for (cvc = 0; CalibVignetting [cvc]; cvc++)
-        g_ptr_array_add (vc, CalibVignetting [cvc]);
-
     lfVignettingModel vm = LF_VIGNETTING_MODEL_NONE;
+    res.Focal = focal;
+    res.Aperture = aperture;
+    res.Distance = distance;
+    for (size_t i = 0; i &lt; ARRAY_LEN (res.Terms); i++)
+        res.Terms [i] = 0;
 
-    float min_dist = 0.01F;
-    for (guint i = 0; i &lt; vc-&gt;len; i++)
-    {
-        lfLensCalibVignetting *c =
-            (lfLensCalibVignetting *)g_ptr_array_index (vc, i);
+    float total_weighting = 0;
+    const float power = 3.5;
 
+    float smallest_interpolation_distance = FLT_MAX;
+    for (int i = 0; CalibVignetting [i]; i++)
+    {
+        const lfLensCalibVignetting* c = CalibVignetting [i];
         // Take into account just the first encountered lens model
         if (vm == LF_VIGNETTING_MODEL_NONE)
+	{
             vm = c-&gt;Model;
-        else if (vm != c-&gt;Model)
+	    res.Model = vm;
+        } else if (vm != c-&gt;Model)
         {
             g_warning (&quot;WARNING: lens %s/%s has multiple vignetting models defined\n&quot;,
                        Maker, Model);
             continue;
         }
 
-        //                    __
-        // Compute the vector pc
-        float pcx = c-&gt;Focal - focal;
-        float pcy = c-&gt;Aperture - aperture;
-        float pcz = c-&gt;Distance - distance;
-        float norm = sqrt (pcx * pcx + pcy * pcy + pcz * pcz);
-
-        // If c == p, return it without any interpolation
-        if (norm &lt; 0.0001)
-        {
-            res = *c;
-            rc = true;
-            goto leave;
-        }
-
-        norm = 1.0 / norm;
-        pcx *= norm;
-        pcy *= norm;
-        pcz *= norm;
-
-        union
-        {
-            lfLensCalibVignetting *spline [4];
-            void *spline_ptr [4];
-        };
-        // Don't pick up way off points
-        float spline_rating [4] = { -10.0, -10.0, 1.0, 10.0 };
-        float spline_dist [4] =  { FLT_MAX, FLT_MAX, 1.0, FLT_MAX };
-
-        memset (&amp;spline, 0, sizeof (spline));
-        for (guint j = 0; j &lt; vc-&gt;len; j++)
-        {
-            if (j == i)
-                continue;
-
-            lfLensCalibVignetting *x =
-                (lfLensCalibVignetting *)g_ptr_array_index (vc, j);
-
-            //                      __
-            // Calculate the vector px and bring it to same scale
-            float pxx = x-&gt;Focal - focal;
-            float pxy = x-&gt;Aperture - aperture;
-            float pxz = x-&gt;Distance - distance;
-            float norm2 = 1.0 / sqrt (pxx * pxx + pxy * pxy + pxz * pxz);
-
-            //                                                      __     __
-            // Compute the cosinus of the angle between the vectors px and pc
-            float cs = (pxx * pcx + pxy * pcy + pxz * pcz) * norm2;
-            if (cs &gt; -0.01 &amp;&amp; cs &lt; +0.01)
-                continue; // +-90 degrees
-
-            // We will judge how good this point is for us by computing
-            // the rating as the relation distance/cos(angle)^3
-            float dist = sqrt (square (pxx * norm) + square (pxy * norm) + square (pxz * norm));
-            float rating = dist / (cs * cs * cs);
-
-            if (rating &gt;= -0.00001 &amp;&amp; dist &lt;= +0.00001)
-            {
-                res = *x;
-                rc = true;
-                goto leave;
-            }
-
-            switch (__insert_spline (spline_ptr, spline_rating, rating, x))
-            {
-                case 0:
-                    spline_dist [0] = dist;
-                    break;
-
-                case 1:
-                    spline_dist [0] = spline_dist [1];
-                    spline_dist [1] = dist;
-                    break;
-
-                case 2:
-                    spline_dist [3] = spline_dist [2];
-                    spline_dist [2] = dist;
-                    break;
-
-                case 3:
-                    spline_dist [3] = dist;
-                    break;
-            }
-        }
-
-        // If we have found no points for the spline, drop
-        if (!spline [1] || !spline [2])
-            continue;
-
-        // Sort the spline points according to the real distance
-        // between p and the points, not by &quot;rating&quot;.
-        if (spline_dist [0] &lt; spline_dist [1])
-        {
-            lfLensCalibVignetting *tmp = spline [0];
-            spline [0] = spline [1];
-            spline [1] = tmp;
-            float tmpf = spline_dist [0];
-            spline_dist [0] = spline_dist [1];
-            spline_dist [1] = tmpf;
-        }
-        if (spline_dist [3] &lt; spline_dist [2])
-        {
-            lfLensCalibVignetting *tmp = spline [2];
-            spline [2] = spline [3];
-            spline [3] = tmp;
-            float tmpf = spline_dist [2];
-            spline_dist [2] = spline_dist [3];
-            spline_dist [3] = tmpf;
-        }
-
-        // Interpolate a new point given four spline points
-        // For this we have to find first the 't' parameter
-        // in the range 0..1 which gives the closest to p point
-        lfLensCalibVignetting m;
-        float t = 0.5;
-        float w = 0.25;
-
-        while (w &gt; 0.001)
-        {
-            __vignetting_interp (spline, m, t);
-            float md = __vignetting_dist (this, m, focal, aperture, distance);
-            if (md &lt; 0.01)
-                break;
-
-            lfLensCalibVignetting m1;
-            __vignetting_interp (spline, m1, t + 0.01);
-            float md1 = __vignetting_dist (this, m1, focal, aperture, distance);
-
-            if (md1 &gt; md)
-                t -= w;
-            else
-                t += w;
-            w /= 2;
-        }
-
-        for (size_t i = 0; i &lt; ARRAY_LEN (res.Terms); i++)
-            m.Terms [i] = _lf_interpolate (
-                spline [0] ? spline [0]-&gt;Terms [i] : FLT_MAX,
-                spline [1]-&gt;Terms [i], spline [2]-&gt;Terms [i],
-                spline [3] ? spline [3]-&gt;Terms [i] : FLT_MAX, t);
-
-        m.Model = vm;
-        m.Focal = _lf_interpolate (
-            spline [0] ? spline [0]-&gt;Focal : FLT_MAX,
-            spline [1]-&gt;Focal, spline [2]-&gt;Focal,
-            spline [3] ? spline [3]-&gt;Focal : FLT_MAX, t);
-        m.Aperture = _lf_interpolate (
-            spline [0] ? spline [0]-&gt;Aperture : FLT_MAX,
-            spline [1]-&gt;Aperture, spline [2]-&gt;Aperture,
-            spline [3] ? spline [3]-&gt;Aperture : FLT_MAX, t);
-        m.Distance = _lf_interpolate (
-            spline [0] ? spline [0]-&gt;Distance : FLT_MAX,
-            spline [1]-&gt;Distance, spline [2]-&gt;Distance,
-            spline [3] ? spline [3]-&gt;Distance : FLT_MAX, t);
-
-        // If interpolated point is close enough, take it
-        float dist = __vignetting_dist (this, m, focal, aperture, distance);
-        // 0.005 is a carefully manually crafted value ;-D
-        if (dist &lt; 0.005)
-        {
-            res = m;
-            rc = true;
-            goto leave;
-        }
-        if (dist &lt; min_dist)
-        {
-            res = m;
-            rc = true;
-        }
-
-        g_ptr_array_add (vc, new lfLensCalibVignetting (m));
+	float interpolation_distance = __vignetting_dist (this, *c, focal, aperture, distance);
+	if (interpolation_distance &lt; 0.0001) {
+	    res = *c;
+	    return true;
+	}
+	smallest_interpolation_distance = fmin(smallest_interpolation_distance, interpolation_distance);
+	float weighting = abs (1.0 / pow (interpolation_distance, power));
+	for (size_t i = 0; i &lt; ARRAY_LEN (res.Terms); i++)
+	    res.Terms [i] += weighting * c-&gt;Terms [i];
+	total_weighting += weighting;
     }
-
-leave:
-    for (guint i = cvc; i &lt; vc-&gt;len; i++)
+    if (smallest_interpolation_distance &gt; 1)
+        return false;
+    if (total_weighting &gt; 0 &amp;&amp; smallest_interpolation_distance &lt; FLT_MAX)
     {
-        lfLensCalibVignetting *c =
-            (lfLensCalibVignetting *)g_ptr_array_index (vc, i);
-        delete c;
-    }
-    g_ptr_array_free (vc, TRUE);
-    return rc;
+	for (size_t i = 0; i &lt; ARRAY_LEN (res.Terms); i++)
+	    res.Terms [i] /= total_weighting;
+	return true;
+    } else return false;
 }
 
 gint _lf_lens_compare (gconstpointer a, gconstpointer b)
</code>
        <close_date>1353261718</close_date>
        <history id='13526'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1352191426</date>
        </history>
        <history id='13527'>
            <field_name>details</field_name>
            <old_value>Final version; sorry about the mess.</old_value>
            <mod_by>2378</mod_by>
            <date>1352191512</date>
        </history>
        <history id='13528'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1352191512</date>
        </history>
        <history id='13596'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1353261718</date>
        </history>
        <history id='13597'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1353261718</date>
        </history>
        <history id='13598'>
            <field_name>details</field_name>
            <old_value>Thanks for the patch and also for the detailed analysis and plots on your homepage. Quite interesting!</old_value>
            <mod_by>36447</mod_by>
            <date>1353261718</date>
        </history>
        <history id='13599'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1353261718</date>
        </history>
    </patch>
    <patch id='3395'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1356050190</open_date>
        <summary>Update database with latest SONY NEX cameras.</summary>
        <code>--- lensfun/data/db/mil-sony.xml~	2012-12-21 01:05:12.438998512 +0100
+++ lensfun/data/db/mil-sony.xml	2012-12-21 01:21:15.103020477 +0100
@@ -25,8 +25,8 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
-        &lt;model&gt;NEX-5&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;NEX 5&lt;/model&gt;
+        &lt;model&gt;NEX-C3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX C3&lt;/model&gt;
         &lt;mount&gt;Sony E&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -34,8 +34,17 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
-        &lt;model&gt;NEX-C3&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;NEX C3&lt;/model&gt;
+        &lt;model&gt;NEX-F3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX F3&lt;/model&gt;
+        &lt;mount&gt;Sony E&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;NEX-5&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX 5&lt;/model&gt;
         &lt;mount&gt;Sony E&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -52,8 +61,17 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
-        &lt;model&gt;NEX-7&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;NEX 7&lt;/model&gt;
+        &lt;model&gt;NEX-5R&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX 5R&lt;/model&gt;
+        &lt;mount&gt;Sony E&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;NEX-6&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX 6&lt;/model&gt;
         &lt;mount&gt;Sony E&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
@@ -62,7 +80,7 @@
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
         &lt;model&gt;NEX-7&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;NEX-7&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX 7&lt;/model&gt;
         &lt;mount&gt;Sony E&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
     &lt;/camera&gt;
</code>
        <close_date>1357493477</close_date>
        <history id='13806'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1357493477</date>
        </history>
        <history id='13807'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1357493477</date>
        </history>
        <history id='13808'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1357493477</date>
        </history>
    </patch>
    <patch id='3451'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='63896' name='aevseev'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1365487129</open_date>
        <summary>All Minotla's lenses are full frame</summary>
        <code>--- a/data/db/slr-konica-minolta.xml	2008-06-02 02:24:54.000000000 +0400
+++ b/data/db/slr-konica-minolta.xml	2013-04-09 09:51:37.791808282 +0400
@@ -47,7 +47,7 @@
         &lt;maker&gt;Konica Minolta&lt;/maker&gt;
         &lt;model&gt;KM 24-105mm 3.5-4.5 AF D&lt;/model&gt;
         &lt;mount&gt;Minolta AF&lt;/mount&gt;
-        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.004504&quot; b=&quot;-0.01756&quot; c=&quot;0&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;28&quot; a=&quot;0&quot; b=&quot;-0.001188&quot; c=&quot;0&quot; /&gt;
@@ -65,7 +65,7 @@
         &lt;maker&gt;Konica Minolta&lt;/maker&gt;
         &lt;model&gt;KM 28-100mm 3.5-5.6 AF D&lt;/model&gt;
         &lt;mount&gt;Minolta AF&lt;/mount&gt;
-        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;28&quot; a=&quot;0.005155&quot; b=&quot;-0.020044&quot; c=&quot;0&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0.005248&quot; b=&quot;-0.012857&quot; c=&quot;0&quot; /&gt;
@@ -80,7 +80,7 @@
         &lt;maker&gt;Konica Minolta&lt;/maker&gt;
         &lt;model&gt;KM 80-200mm 2.8&lt;/model&gt;
         &lt;mount&gt;Minolta AF&lt;/mount&gt;
-        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;80&quot; a=&quot;0&quot; b=&quot;-0.004374&quot; c=&quot;0&quot; /&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;90&quot; a=&quot;0&quot; b=&quot;-0.002544&quot; c=&quot;0&quot; /&gt;
@@ -97,7 +97,7 @@
         &lt;maker&gt;Konica Minolta&lt;/maker&gt;
         &lt;model&gt;KM 20mm 2.8&lt;/model&gt;
         &lt;mount&gt;Minolta AF&lt;/mount&gt;
-        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;20&quot; a=&quot;0.005548&quot; b=&quot;-0.022552&quot; c=&quot;0&quot; /&gt;
         &lt;/calibration&gt;
</code>
        <close_date>1366534802</close_date>
        <history id='14024'>
            <field_name>details</field_name>
            <old_value>They might not have been profiled on full-frame bodies even if they are full-frame lenses.
</old_value>
            <mod_by>61570</mod_by>
            <date>1365487744</date>
        </history>
        <history id='14037'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1366534802</date>
        </history>
        <history id='14038'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1366534802</date>
        </history>
        <history id='14039'>
            <field_name>details</field_name>
            <old_value>Yes, nkbj is right. It is important which camera crop factor the lenses were profiled with, not what the crop factor is for which the lens actually was designed for. 
Imagine you profile a crop 1.0 lens on a crop 1.5 camera. Then only the center part of the lens is profiled, while the borders are not included.</old_value>
            <mod_by>36447</mod_by>
            <date>1366534802</date>
        </history>
        <history id='14040'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1366534802</date>
        </history>
    </patch>
    <patch id='3227'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61037' name='tmodes'/>
        <assigned_to id='100' name='none'/>
        <open_date>1320085530</open_date>
        <summary>CMake based build system</summary>
        <code>Index: CMakeLists.txt
===================================================================
--- CMakeLists.txt	(Revision 0)
+++ CMakeLists.txt	(Arbeitskopie)
@@ -0,0 +1,193 @@
+# require at least cmake 2.8
+CMAKE_MINIMUM_REQUIRED(VERSION 2.8 FATAL_ERROR )
+
+# path for helper modules
+set(CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/CMakeModules)
+GET_FILENAME_COMPONENT(SOURCE_BASE_DIR ${CMAKE_SOURCE_DIR} PATH CACHE)
+
+#  global setup
+project(lensfun)
+
+# version
+SET(VERSION_MAJOR 0)
+SET(VERSION_MINOR 2)
+SET(VERSION_MICRO 5)
+SET(VERSION_BUGFIX 1)
+
+# check if some include are available
+INCLUDE(CheckIncludeFiles)
+CHECK_INCLUDE_FILES(regex.h HAVE_REGEX_H)
+CHECK_INCLUDE_FILES(endian.h HAVE_ENDIAN_H)
+
+# set include directories
+INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR})
+INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/include/lensfun)
+INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/include/auxfun)
+IF(NOT HAVE_REGEX_H)
+  INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/include/regex)
+  INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/libs/regex)
+ENDIF()
+
+# options controlling the build process
+OPTION(BUILD_STATIC &quot;Build static library&quot; OFF)
+OPTION(BUILD_TESTS &quot;Build test programs&quot; ON)
+OPTION(BUILD_AUXFUN &quot;Build auxfun library (requires libpng)&quot; OFF)
+OPTION(BUILD_FOR_SSE &quot;Build with support for SSE&quot; OFF)
+OPTION(BUILD_FOR_SSE2 &quot;Build with support for SSE2&quot; OFF)
+OPTION(BUILD_DOC &quot;Build documentation with doxygen&quot; OFF)
+
+IF(BUILD_FOR_SSE)
+  SET(VECTORIZATION_SSE 1)
+  IF(CMAKE_COMPILER_IS_GNUCXX)
+    set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -msse&quot;)
+  ENDIF()
+ENDIF()
+IF(BUILD_FOR_SSE2)
+  SET(VECTORIZATION_SSE2 1)
+  IF(CMAKE_COMPILER_IS_GNUCXX)
+    set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -msse2&quot;)
+  ENDIF()
+ENDIF()
+
+IF(WIN32)
+  INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/libs/getopt)
+  # base path for searching for glib on windows
+  IF(NOT GLIB2_BASE_DIR)
+    SET(GLIB2_BASE_DIR &quot;${SOURCE_BASE_DIR}/glib-2.28.1&quot; CACHE STRING &quot;Base path of glib2 dir.&quot; FORCE)
+  ENDIF()
+ENDIF()
+
+# find dependencies
+FIND_PACKAGE(GLIB2 REQUIRED)
+INCLUDE_DIRECTORIES(${GLIB_INCLUDE_DIR})
+
+IF(BUILD_AUXFUN)
+  FIND_PACKAGE(PNG REQUIRED)
+  INCLUDE_DIRECTORIES(${ZLIB_INCLUDE_DIR})
+  INCLUDE_DIRECTORIES(${PNG_INCLUDE_DIR})
+  INCLUDE_DIRECTORIES(${ZLIB_INCLUDE_DIR})
+ENDIF()
+
+IF(BUILD_STATIC)
+  ADD_DEFINITIONS(-DCONF_LENSFUN_STATIC)
+ENDIF()
+ 
+# define destination dirs (relative to prefix)
+SET(BINDIR bin)
+SET(LIBDIR lib)
+SET(INCLUDEDIR include)
+SET(DATADIR share/lensfun)
+SET(DOCDIR share/doc/lensfun-${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_MICRO}.${VERSION_BUGFIX})
+
+IF(WIN32)
+  SET(PLATFORM_WINDOWS 1)
+  # install into place in build-dir
+  SET(CMAKE_INSTALL_PREFIX &quot;${SOURCE_BASE_DIR}/lensfun&quot; CACHE PATH &quot;Install prefix for lensfun&quot; FORCE)
+
+  IF (MSVC)
+    IF(BUILD_STATIC)
+      # compile everything for the static C runtime
+      FOREACH(TYPE C CXX)
+        # makefiles use blank configuration
+        FOREACH(CFG &quot;_DEBUG&quot; &quot;_MINSIZEREL&quot; &quot;_RELEASE&quot; &quot;_RELWITHDEBINFO&quot;)
+          SET(NEW_FLAGS &quot;${CMAKE_${TYPE}_FLAGS${CFG}}&quot;)
+          # fix up static libc flags
+          STRING(REPLACE &quot;/MD&quot; &quot;/MT&quot; NEW_FLAGS &quot;${NEW_FLAGS}&quot;)
+          # *FORCE* to override whats already placed into the cache
+          SET(CMAKE_${TYPE}_FLAGS${CFG} &quot;${NEW_FLAGS}&quot; CACHE STRING
+            &quot;CMAKE_${TYPE}_FLAGS${CFG} (overwritten to ensure static build)&quot; FORCE)
+        ENDFOREACH(CFG)
+      ENDFOREACH(TYPE)
+      # link only with the static C runtime !! THIS IS A MUST !!
+      SET(NEW_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS}&quot;)
+      # ensure that the flags are not duplicaated on subsequent runs
+      STRING(REPLACE &quot; /NODEFAULTLIB:\&quot;MSVCRT.lib\&quot; /NODEFAULTLIB:\&quot;MSVCRTd.lib\&quot;&quot; &quot;&quot; NEW_FLAGS &quot;${NEW_FLAGS}&quot;)
+      # note that flag names (NODEFAULTLIB) etc.) are case sensitive
+      SET(CMAKE_EXE_LINKER_FLAGS
+          &quot;${NEW_FLAGS} /NODEFAULTLIB:\&quot;MSVCRT.lib\&quot; /NODEFAULTLIB:\&quot;MSVCRTd.lib\&quot;&quot;
+          CACHE STRING &quot;for MSVC&quot; FORCE
+      )
+    ENDIF()
+  ENDIF(MSVC)
+ENDIF(WIN32)
+
+# create config.h file
+CONFIGURE_FILE(include/lensfun/config.h.in.cmake ${CMAKE_BINARY_DIR}/config.h)
+# create lensfun.h file
+CONFIGURE_FILE(include/lensfun/lensfun.h.in ${CMAKE_BINARY_DIR}/lensfun.h @ONLY)
+
+# include libs
+ADD_SUBDIRECTORY(libs)
+
+# include example programs
+IF(BUILD_TESTS)
+ADD_SUBDIRECTORY(tests)
+ENDIF()
+
+# install include files
+INSTALL(FILES ${CMAKE_BINARY_DIR}/lensfun.h DESTINATION ${INCLUDEDIR}/lensfun)
+IF(NOT HAVE_REGEX_H)
+  INSTALL(FILES include/regex/regex.h DESTINATION ${INCLUDEDIR}/regex)
+ENDIF()
+IF(BUILD_AUXFUN)
+  INSTALL(FILES include/auxfun/image.h include/auxfun/rgbpixel.h DESTINATION ${INCLUDEDIR}/auxfun)
+ENDIF()
+
+# install db files
+FILE(GLOB DATABASE_FILES data/db/*.xml)
+INSTALL(FILES ${DATABASE_FILES} DESTINATION ${DATADIR})
+
+# build documentation
+IF(BUILD_DOC)
+  ADD_SUBDIRECTORY(docs)
+ENDIF()
+
+IF(WIN32 AND NOT BUILD_STATIC)
+FIND_FILE(GLIB2_DLL 
+          NAMES glib-2.dll glib-2-vs9.dll
+          PATHS &quot;${GLIB2_BASE_DIR}/bin&quot;
+          NO_SYSTEM_ENVIRONMENT_PATH)
+INSTALL(FILES ${GLIB2_DLL} DESTINATION ${BINDIR})
+ENDIF()
+
+# print some information
+MESSAGE(STATUS &quot;Building lensfun ${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_MICRO}.${VERSION_BUGFIX}&quot;)
+MESSAGE(STATUS &quot;-------------------------------------------------------------------------------------&quot;)
+IF(BUILD_STATIC)
+  MESSAGE(STATUS &quot;Build as static library&quot;)
+ELSE()
+  MESSAGE(STATUS &quot;Build as dynamic/shared library&quot;)
+ENDIF()
+MESSAGE(STATUS &quot;Build doc: ${BUILD_DOC}&quot;)
+MESSAGE(STATUS &quot;Build test programs ${BUILD_TESTS}&quot;)
+IF(BUILD_AUXFUN)
+  MESSAGE(STATUS &quot;Building auxfun library (with Image class)&quot;)
+ENDIF()
+MESSAGE(STATUS &quot;Build with support for SSE: ${BUILD_FOR_SSE}&quot;)
+MESSAGE(STATUS &quot;Build with support for SSE2: ${BUILD_FOR_SSE2}&quot;)
+MESSAGE(STATUS &quot;\nUsing: &quot;)
+MESSAGE(STATUS &quot;GLIB2 include dir: ${GLIB_INCLUDE_DIR}&quot;)
+MESSAGE(STATUS &quot;GLIB2 library: ${GLIB_LIBRARY}&quot;)
+IF(BUILD_AUXFUN)
+MESSAGE(STATUS &quot;libpng include dir: ${PNG_INCLUDE_DIR}&quot;)
+MESSAGE(STATUS &quot;libpng lib: ${PNG_LIBRARY}&quot;)
+MESSAGE(STATUS &quot;zlib include dir: ${ZLIB_INCLUDE_DIR}&quot;)
+MESSAGE(STATUS &quot;zlib lib: ${ZLIB_LIBRARY}&quot;)
+ENDIF()
+
+# package
+SET(CPACK_PACKAGE_VERSION_MAJOR &quot;${VERSION_MAJOR}&quot;)
+SET(CPACK_PACKAGE_VERSION_MINOR &quot;${VERSION_MINOR}&quot;)
+SET(CPACK_PACKAGE_VERSION_PATCH &quot;${VERSION_MICRO}.${VERSION_BUGFIX}&quot;)
+SET(CPACK_PACKAGE_INSTALL_DIRECTORY &quot;CMake ${V_MAJOR}.${V_MINOR}&quot;)
+SET(CPACK_SOURCE_PACKAGE_FILE_NAME &quot;lensfun-${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_MICRO}.${VERSION_BUGFIX}&quot;)
+SET(CPACK_SOURCE_GENERATOR &quot;TGZ;TBZ2&quot;)
+SET(CPACK_PACKAGE_CONTACT &quot;zap@homelink.ru&quot;)
+SET(CPACK_SET_DESTDIR &quot;ON&quot;)
+IF(BUILD_AUXFUN)
+SET(CPACK_DEBIAN_PACKAGE_DEPENDS &quot;glib2 (&gt;=2.0.0), libpng (&gt;=1.0), zlib (&gt;=1.0)&quot;)
+ELSE()
+SET(CPACK_DEBIAN_PACKAGE_DEPENDS &quot;glib2 (&gt;=2.0.0)&quot;)
+ENDIF()
+
+INCLUDE(CPack)
Index: CMakeModules/FindGLIB2.cmake
===================================================================
--- CMakeModules/FindGLIB2.cmake	(Revision 0)
+++ CMakeModules/FindGLIB2.cmake	(Arbeitskopie)
@@ -0,0 +1,45 @@
+FIND_PATH(GLIB2_GLIBCONFIG_INCLUDE_PATH
+    NAMES glibconfig.h
+    PATHS
+      /usr/local/lib
+      /usr/lib
+      /opt/local/lib
+      ${GLIB2_BASE_DIR}/lib
+    PATH_SUFFIXES glib-2.0/include
+)
+
+
+FIND_PATH(GLIB2_GLIB_INCLUDE_PATH
+    NAMES glib.h
+    PATHS
+        /usr/local/include
+        /usr/include
+        /opt/local/include
+        ${GLIB2_BASE_DIR}/include
+    PATH_SUFFIXES gtk-2.0 glib-2.0 glib20 
+)
+
+FIND_LIBRARY(GLIB2_GLIB_LIBRARY
+    NAMES  glib-2.0 glib20 glib
+    PATHS  
+        /usr/local/lib
+        /usr/lib
+        /opt/local/lib
+        ${GLIB2_BASE_DIR}/lib
+)
+
+INCLUDE( FindPackageHandleStandardArgs )
+FIND_PACKAGE_HANDLE_STANDARD_ARGS( GLIB DEFAULT_MSG GLIB2_GLIB_LIBRARY GLIB2_GLIBCONFIG_INCLUDE_PATH GLIB2_GLIB_INCLUDE_PATH )
+
+IF(GLIB_FOUND)
+    SET( GLIB_INCLUDE_DIR  ${GLIB2_GLIBCONFIG_INCLUDE_PATH} ${GLIB2_GLIB_INCLUDE_PATH} )
+    SET( GLIB_LIBRARY ${GLIB2_GLIB_LIBRARY} )
+ELSE()
+    SET( GLIB_INCLUDE_DIR )
+    SET( GLIB_LIBRARY )
+    IF(GLIB2_FIND_REQUIRED)
+        MESSAGE(FATAL_ERROR &quot;Could not find glib2&quot;)
+    ENDIF()
+ENDIF()
+
+
Index: docs/CMakeLists.txt
===================================================================
--- docs/CMakeLists.txt	(Revision 0)
+++ docs/CMakeLists.txt	(Arbeitskopie)
@@ -0,0 +1,23 @@
+# find doxygen
+FIND_PACKAGE(Doxygen REQUIRED)
+
+# set some files/path for later user
+# we don't use path doc because path doc is used by cmake itself because
+# of target doc
+SET(CMAKE_DOC_OUT ${CMAKE_BINARY_DIR}/doc_doxygen)
+set(DOXYFILE &quot;${CMAKE_CURRENT_BINARY_DIR}/doxyfile&quot;)
+
+# create doxyfile
+CONFIGURE_FILE(doxyfile.in.cmake ${DOXYFILE} @ONLY)
+
+# now build documentation
+ADD_CUSTOM_TARGET(doc
+  COMMAND &quot;${DOXYGEN_EXECUTABLE}&quot;
+  DEPENDS doxyfile.in.cmake manual-main.txt ../include/lensfun/lensfun.h.in
+  WORKING_DIRECTORY &quot;${CMAKE_CURRENT_BINARY_DIR}&quot;
+  COMMENT &quot;Building documentation with doxygen&quot;
+)
+
+# install documentation  
+FILE(GLOB doc_files &quot;${CMAKE_DOC_OUT}/*.*&quot;)
+INSTALL(FILES ${doc_files} DESTINATION ${DOCDIR})
Index: docs/doxyfile.in.cmake
===================================================================
--- docs/doxyfile.in.cmake	(Revision 0)
+++ docs/doxyfile.in.cmake	(Arbeitskopie)
@@ -0,0 +1,1475 @@
+# Doxyfile 1.5.7.1
+
+# This file describes the settings to be used by the documentation system
+# doxygen (www.doxygen.org) for a project
+#
+# All text after a hash (#) is considered a comment and will be ignored
+# The format is:
+#       TAG = value [value, ...]
+# For lists items can also be appended using:
+#       TAG += value [value, ...]
+# Values that contain spaces should be placed between quotes (&quot; &quot;)
+
+#---------------------------------------------------------------------------
+# Project related configuration options
+#---------------------------------------------------------------------------
+
+# This tag specifies the encoding used for all characters in the config file 
+# that follow. The default is UTF-8 which is also the encoding used for all 
+# text before the first occurrence of this tag. Doxygen uses libiconv (or the 
+# iconv built into libc) for the transcoding. See 
+# http://www.gnu.org/software/libiconv for the list of possible encodings.
+
+DOXYFILE_ENCODING      = UTF-8
+
+# The PROJECT_NAME tag is a single word (or a sequence of words surrounded 
+# by quotes) that should identify the project.
+
+PROJECT_NAME           = lensfun
+
+# The PROJECT_NUMBER tag can be used to enter a project or revision number. 
+# This could be handy for archiving the generated documentation or 
+# if some version control system is used.
+
+PROJECT_NUMBER         = @VERSION_MAJOR@.@VERSION_MINOR@.@VERSION_MICRO@.@VERSION_BUGFIX@
+
+# The OUTPUT_DIRECTORY tag is used to specify the (relative or absolute) 
+# base path where the generated documentation will be put. 
+# If a relative path is entered, it will be relative to the location 
+# where doxygen was started. If left blank the current directory will be used.
+
+OUTPUT_DIRECTORY       = @CMAKE_DOC_OUT@
+
+# If the CREATE_SUBDIRS tag is set to YES, then doxygen will create 
+# 4096 sub-directories (in 2 levels) under the output directory of each output 
+# format and will distribute the generated files over these directories. 
+# Enabling this option can be useful when feeding doxygen a huge amount of 
+# source files, where putting all generated files in the same directory would 
+# otherwise cause performance problems for the file system.
+
+CREATE_SUBDIRS         = NO
+
+# The OUTPUT_LANGUAGE tag is used to specify the language in which all 
+# documentation generated by doxygen is written. Doxygen will use this 
+# information to generate all constant output in the proper language. 
+# The default language is English, other supported languages are: 
+# Afrikaans, Arabic, Brazilian, Catalan, Chinese, Chinese-Traditional, 
+# Croatian, Czech, Danish, Dutch, Farsi, Finnish, French, German, Greek, 
+# Hungarian, Italian, Japanese, Japanese-en (Japanese with English messages), 
+# Korean, Korean-en, Lithuanian, Norwegian, Macedonian, Persian, Polish, 
+# Portuguese, Romanian, Russian, Serbian, Serbian-Cyrilic, Slovak, Slovene, 
+# Spanish, Swedish, and Ukrainian.
+
+OUTPUT_LANGUAGE        = English
+
+# If the BRIEF_MEMBER_DESC tag is set to YES (the default) Doxygen will 
+# include brief member descriptions after the members that are listed in 
+# the file and class documentation (similar to JavaDoc). 
+# Set to NO to disable this.
+
+BRIEF_MEMBER_DESC      = YES
+
+# If the REPEAT_BRIEF tag is set to YES (the default) Doxygen will prepend 
+# the brief description of a member or function before the detailed description. 
+# Note: if both HIDE_UNDOC_MEMBERS and BRIEF_MEMBER_DESC are set to NO, the 
+# brief descriptions will be completely suppressed.
+
+REPEAT_BRIEF           = YES
+
+# This tag implements a quasi-intelligent brief description abbreviator 
+# that is used to form the text in various listings. Each string 
+# in this list, if found as the leading text of the brief description, will be 
+# stripped from the text and the result after processing the whole list, is 
+# used as the annotated text. Otherwise, the brief description is used as-is. 
+# If left blank, the following values are used (&quot;$name&quot; is automatically 
+# replaced with the name of the entity): &quot;The $name class&quot; &quot;The $name widget&quot; 
+# &quot;The $name file&quot; &quot;is&quot; &quot;provides&quot; &quot;specifies&quot; &quot;contains&quot; 
+# &quot;represents&quot; &quot;a&quot; &quot;an&quot; &quot;the&quot;
+
+ABBREVIATE_BRIEF       = 
+
+# If the ALWAYS_DETAILED_SEC and REPEAT_BRIEF tags are both set to YES then 
+# Doxygen will generate a detailed section even if there is only a brief 
+# description.
+
+ALWAYS_DETAILED_SEC    = NO
+
+# If the INLINE_INHERITED_MEMB tag is set to YES, doxygen will show all 
+# inherited members of a class in the documentation of that class as if those 
+# members were ordinary class members. Constructors, destructors and assignment 
+# operators of the base classes will not be shown.
+
+INLINE_INHERITED_MEMB  = NO
+
+# If the FULL_PATH_NAMES tag is set to YES then Doxygen will prepend the full 
+# path before files name in the file list and in the header files. If set 
+# to NO the shortest path that makes the file name unique will be used.
+
+FULL_PATH_NAMES        = NO
+
+# If the FULL_PATH_NAMES tag is set to YES then the STRIP_FROM_PATH tag 
+# can be used to strip a user-defined part of the path. Stripping is 
+# only done if one of the specified strings matches the left-hand part of 
+# the path. The tag can be used to show relative paths in the file list. 
+# If left blank the directory from which doxygen is run is used as the 
+# path to strip.
+
+STRIP_FROM_PATH        = 
+
+# The STRIP_FROM_INC_PATH tag can be used to strip a user-defined part of 
+# the path mentioned in the documentation of a class, which tells 
+# the reader which header file to include in order to use a class. 
+# If left blank only the name of the header file containing the class 
+# definition is used. Otherwise one should specify the include paths that 
+# are normally passed to the compiler using the -I flag.
+
+STRIP_FROM_INC_PATH    = 
+
+# If the SHORT_NAMES tag is set to YES, doxygen will generate much shorter 
+# (but less readable) file names. This can be useful is your file systems 
+# doesn't support long names like on DOS, Mac, or CD-ROM.
+
+SHORT_NAMES            = NO
+
+# If the JAVADOC_AUTOBRIEF tag is set to YES then Doxygen 
+# will interpret the first line (until the first dot) of a JavaDoc-style 
+# comment as the brief description. If set to NO, the JavaDoc 
+# comments will behave just like regular Qt-style comments 
+# (thus requiring an explicit @brief command for a brief description.)
+
+JAVADOC_AUTOBRIEF      = YES
+
+# If the QT_AUTOBRIEF tag is set to YES then Doxygen will 
+# interpret the first line (until the first dot) of a Qt-style 
+# comment as the brief description. If set to NO, the comments 
+# will behave just like regular Qt-style comments (thus requiring 
+# an explicit \brief command for a brief description.)
+
+QT_AUTOBRIEF           = NO
+
+# The MULTILINE_CPP_IS_BRIEF tag can be set to YES to make Doxygen 
+# treat a multi-line C++ special comment block (i.e. a block of //! or /// 
+# comments) as a brief description. This used to be the default behaviour. 
+# The new default is to treat a multi-line C++ comment block as a detailed 
+# description. Set this tag to YES if you prefer the old behaviour instead.
+
+MULTILINE_CPP_IS_BRIEF = NO
+
+# If the INHERIT_DOCS tag is set to YES (the default) then an undocumented 
+# member inherits the documentation from any documented member that it 
+# re-implements.
+
+INHERIT_DOCS           = YES
+
+# If the SEPARATE_MEMBER_PAGES tag is set to YES, then doxygen will produce 
+# a new page for each member. If set to NO, the documentation of a member will 
+# be part of the file/class/namespace that contains it.
+
+SEPARATE_MEMBER_PAGES  = NO
+
+# The TAB_SIZE tag can be used to set the number of spaces in a tab. 
+# Doxygen uses this value to replace tabs by spaces in code fragments.
+
+TAB_SIZE               = 8
+
+# This tag can be used to specify a number of aliases that acts 
+# as commands in the documentation. An alias has the form &quot;name=value&quot;. 
+# For example adding &quot;sideeffect=\par Side Effects:\n&quot; will allow you to 
+# put the command \sideeffect (or @sideeffect) in the documentation, which 
+# will result in a user-defined paragraph with heading &quot;Side Effects:&quot;. 
+# You can put \n's in the value part of an alias to insert newlines.
+
+ALIASES                = 
+
+# Set the OPTIMIZE_OUTPUT_FOR_C tag to YES if your project consists of C 
+# sources only. Doxygen will then generate output that is more tailored for C. 
+# For instance, some of the names that are used will be different. The list 
+# of all members will be omitted, etc.
+
+OPTIMIZE_OUTPUT_FOR_C  = NO
+
+# Set the OPTIMIZE_OUTPUT_JAVA tag to YES if your project consists of Java 
+# sources only. Doxygen will then generate output that is more tailored for 
+# Java. For instance, namespaces will be presented as packages, qualified 
+# scopes will look different, etc.
+
+OPTIMIZE_OUTPUT_JAVA   = NO
+
+# Set the OPTIMIZE_FOR_FORTRAN tag to YES if your project consists of Fortran 
+# sources only. Doxygen will then generate output that is more tailored for 
+# Fortran.
+
+OPTIMIZE_FOR_FORTRAN   = NO
+
+# Set the OPTIMIZE_OUTPUT_VHDL tag to YES if your project consists of VHDL 
+# sources. Doxygen will then generate output that is tailored for 
+# VHDL.
+
+OPTIMIZE_OUTPUT_VHDL   = NO
+
+# If you use STL classes (i.e. std::string, std::vector, etc.) but do not want 
+# to include (a tag file for) the STL sources as input, then you should 
+# set this tag to YES in order to let doxygen match functions declarations and 
+# definitions whose arguments contain STL classes (e.g. func(std::string); v.s. 
+# func(std::string) {}). This also make the inheritance and collaboration 
+# diagrams that involve STL classes more complete and accurate.
+
+BUILTIN_STL_SUPPORT    = NO
+
+# If you use Microsoft's C++/CLI language, you should set this option to YES to
+# enable parsing support.
+
+CPP_CLI_SUPPORT        = NO
+
+# Set the SIP_SUPPORT tag to YES if your project consists of sip sources only. 
+# Doxygen will parse them like normal C++ but will assume all classes use public 
+# instead of private inheritance when no explicit protection keyword is present.
+
+SIP_SUPPORT            = NO
+
+# For Microsoft's IDL there are propget and propput attributes to indicate getter 
+# and setter methods for a property. Setting this option to YES (the default) 
+# will make doxygen to replace the get and set methods by a property in the 
+# documentation. This will only work if the methods are indeed getting or 
+# setting a simple type. If this is not the case, or you want to show the 
+# methods anyway, you should set this option to NO.
+
+IDL_PROPERTY_SUPPORT   = YES
+
+# If member grouping is used in the documentation and the DISTRIBUTE_GROUP_DOC 
+# tag is set to YES, then doxygen will reuse the documentation of the first 
+# member in the group (if any) for the other members of the group. By default 
+# all members of a group must be documented explicitly.
+
+DISTRIBUTE_GROUP_DOC   = NO
+
+# Set the SUBGROUPING tag to YES (the default) to allow class member groups of 
+# the same type (for instance a group of public functions) to be put as a 
+# subgroup of that type (e.g. under the Public Functions section). Set it to 
+# NO to prevent subgrouping. Alternatively, this can be done per class using 
+# the \nosubgrouping command.
+
+SUBGROUPING            = YES
+
+# When TYPEDEF_HIDES_STRUCT is enabled, a typedef of a struct, union, or enum 
+# is documented as struct, union, or enum with the name of the typedef. So 
+# typedef struct TypeS {} TypeT, will appear in the documentation as a struct 
+# with name TypeT. When disabled the typedef will appear as a member of a file, 
+# namespace, or class. And the struct will be named TypeS. This can typically 
+# be useful for C code in case the coding convention dictates that all compound 
+# types are typedef'ed and only the typedef is referenced, never the tag name.
+
+TYPEDEF_HIDES_STRUCT   = NO
+
+# The SYMBOL_CACHE_SIZE determines the size of the internal cache use to 
+# determine which symbols to keep in memory and which to flush to disk.
+# When the cache is full, less often used symbols will be written to disk.
+# For small to medium size projects (&lt;1000 input files) the default value is 
+# probably good enough. For larger projects a too small cache size can cause 
+# doxygen to be busy swapping symbols to and from disk most of the time 
+# causing a significant performance penality. 
+# If the system has enough physical memory increasing the cache will improve the 
+# performance by keeping more symbols in memory. Note that the value works on 
+# a logarithmic scale so increasing the size by one will rougly double the 
+# memory usage. The cache size is given by this formula: 
+# 2^(16+SYMBOL_CACHE_SIZE). The valid range is 0..9, the default is 0, 
+# corresponding to a cache size of 2^16 = 65536 symbols
+
+SYMBOL_CACHE_SIZE      = 0
+
+#---------------------------------------------------------------------------
+# Build related configuration options
+#---------------------------------------------------------------------------
+
+# If the EXTRACT_ALL tag is set to YES doxygen will assume all entities in 
+# documentation are documented, even if no documentation was available. 
+# Private class members and static file members will be hidden unless 
+# the EXTRACT_PRIVATE and EXTRACT_STATIC tags are set to YES
+
+EXTRACT_ALL            = NO
+
+# If the EXTRACT_PRIVATE tag is set to YES all private members of a class 
+# will be included in the documentation.
+
+EXTRACT_PRIVATE        = NO
+
+# If the EXTRACT_STATIC tag is set to YES all static members of a file 
+# will be included in the documentation.
+
+EXTRACT_STATIC         = NO
+
+# If the EXTRACT_LOCAL_CLASSES tag is set to YES classes (and structs) 
+# defined locally in source files will be included in the documentation. 
+# If set to NO only classes defined in header files are included.
+
+EXTRACT_LOCAL_CLASSES  = YES
+
+# This flag is only useful for Objective-C code. When set to YES local 
+# methods, which are defined in the implementation section but not in 
+# the interface are included in the documentation. 
+# If set to NO (the default) only methods in the interface are included.
+
+EXTRACT_LOCAL_METHODS  = NO
+
+# If this flag is set to YES, the members of anonymous namespaces will be 
+# extracted and appear in the documentation as a namespace called 
+# 'anonymous_namespace{file}', where file will be replaced with the base 
+# name of the file that contains the anonymous namespace. By default 
+# anonymous namespace are hidden.
+
+EXTRACT_ANON_NSPACES   = NO
+
+# If the HIDE_UNDOC_MEMBERS tag is set to YES, Doxygen will hide all 
+# undocumented members of documented classes, files or namespaces. 
+# If set to NO (the default) these members will be included in the 
+# various overviews, but no documentation section is generated. 
+# This option has no effect if EXTRACT_ALL is enabled.
+
+HIDE_UNDOC_MEMBERS     = NO
+
+# If the HIDE_UNDOC_CLASSES tag is set to YES, Doxygen will hide all 
+# undocumented classes that are normally visible in the class hierarchy. 
+# If set to NO (the default) these classes will be included in the various 
+# overviews. This option has no effect if EXTRACT_ALL is enabled.
+
+HIDE_UNDOC_CLASSES     = NO
+
+# If the HIDE_FRIEND_COMPOUNDS tag is set to YES, Doxygen will hide all 
+# friend (class|struct|union) declarations. 
+# If set to NO (the default) these declarations will be included in the 
+# documentation.
+
+HIDE_FRIEND_COMPOUNDS  = NO
+
+# If the HIDE_IN_BODY_DOCS tag is set to YES, Doxygen will hide any 
+# documentation blocks found inside the body of a function. 
+# If set to NO (the default) these blocks will be appended to the 
+# function's detailed documentation block.
+
+HIDE_IN_BODY_DOCS      = NO
+
+# The INTERNAL_DOCS tag determines if documentation 
+# that is typed after a \internal command is included. If the tag is set 
+# to NO (the default) then the documentation will be excluded. 
+# Set it to YES to include the internal documentation.
+
+INTERNAL_DOCS          = NO
+
+# If the CASE_SENSE_NAMES tag is set to NO then Doxygen will only generate 
+# file names in lower-case letters. If set to YES upper-case letters are also 
+# allowed. This is useful if you have classes or files whose names only differ 
+# in case and if your file system supports case sensitive file names. Windows 
+# and Mac users are advised to set this option to NO.
+
+CASE_SENSE_NAMES       = YES
+
+# If the HIDE_SCOPE_NAMES tag is set to NO (the default) then Doxygen 
+# will show members with their full class and namespace scopes in the 
+# documentation. If set to YES the scope will be hidden.
+
+HIDE_SCOPE_NAMES       = NO
+
+# If the SHOW_INCLUDE_FILES tag is set to YES (the default) then Doxygen 
+# will put a list of the files that are included by a file in the documentation 
+# of that file.
+
+SHOW_INCLUDE_FILES     = YES
+
+# If the INLINE_INFO tag is set to YES (the default) then a tag [inline] 
+# is inserted in the documentation for inline members.
+
+INLINE_INFO            = YES
+
+# If the SORT_MEMBER_DOCS tag is set to YES (the default) then doxygen 
+# will sort the (detailed) documentation of file and class members 
+# alphabetically by member name. If set to NO the members will appear in 
+# declaration order.
+
+SORT_MEMBER_DOCS       = YES
+
+# If the SORT_BRIEF_DOCS tag is set to YES then doxygen will sort the 
+# brief documentation of file, namespace and class members alphabetically 
+# by member name. If set to NO (the default) the members will appear in 
+# declaration order.
+
+SORT_BRIEF_DOCS        = NO
+
+# If the SORT_GROUP_NAMES tag is set to YES then doxygen will sort the 
+# hierarchy of group names into alphabetical order. If set to NO (the default) 
+# the group names will appear in their defined order.
+
+SORT_GROUP_NAMES       = NO
+
+# If the SORT_BY_SCOPE_NAME tag is set to YES, the class list will be 
+# sorted by fully-qualified names, including namespaces. If set to 
+# NO (the default), the class list will be sorted only by class name, 
+# not including the namespace part. 
+# Note: This option is not very useful if HIDE_SCOPE_NAMES is set to YES.
+# Note: This option applies only to the class list, not to the 
+# alphabetical list.
+
+SORT_BY_SCOPE_NAME     = NO
+
+# The GENERATE_TODOLIST tag can be used to enable (YES) or 
+# disable (NO) the todo list. This list is created by putting \todo 
+# commands in the documentation.
+
+GENERATE_TODOLIST      = YES
+
+# The GENERATE_TESTLIST tag can be used to enable (YES) or 
+# disable (NO) the test list. This list is created by putting \test 
+# commands in the documentation.
+
+GENERATE_TESTLIST      = YES
+
+# The GENERATE_BUGLIST tag can be used to enable (YES) or 
+# disable (NO) the bug list. This list is created by putting \bug 
+# commands in the documentation.
+
+GENERATE_BUGLIST       = YES
+
+# The GENERATE_DEPRECATEDLIST tag can be used to enable (YES) or 
+# disable (NO) the deprecated list. This list is created by putting 
+# \deprecated commands in the documentation.
+
+GENERATE_DEPRECATEDLIST= YES
+
+# The ENABLED_SECTIONS tag can be used to enable conditional 
+# documentation sections, marked by \if sectionname ... \endif.
+
+ENABLED_SECTIONS       = 
+
+# The MAX_INITIALIZER_LINES tag determines the maximum number of lines 
+# the initial value of a variable or define consists of for it to appear in 
+# the documentation. If the initializer consists of more lines than specified 
+# here it will be hidden. Use a value of 0 to hide initializers completely. 
+# The appearance of the initializer of individual variables and defines in the 
+# documentation can be controlled using \showinitializer or \hideinitializer 
+# command in the documentation regardless of this setting.
+
+MAX_INITIALIZER_LINES  = 30
+
+# Set the SHOW_USED_FILES tag to NO to disable the list of files generated 
+# at the bottom of the documentation of classes and structs. If set to YES the 
+# list will mention the files that were used to generate the documentation.
+
+SHOW_USED_FILES        = YES
+
+# If the sources in your project are distributed over multiple directories 
+# then setting the SHOW_DIRECTORIES tag to YES will show the directory hierarchy 
+# in the documentation. The default is NO.
+
+SHOW_DIRECTORIES       = NO
+
+# Set the SHOW_FILES tag to NO to disable the generation of the Files page.
+# This will remove the Files entry from the Quick Index and from the 
+# Folder Tree View (if specified). The default is YES.
+
+SHOW_FILES             = YES
+
+# Set the SHOW_NAMESPACES tag to NO to disable the generation of the 
+# Namespaces page.  This will remove the Namespaces entry from the Quick Index
+# and from the Folder Tree View (if specified). The default is YES.
+
+SHOW_NAMESPACES        = YES
+
+# The FILE_VERSION_FILTER tag can be used to specify a program or script that 
+# doxygen should invoke to get the current version for each file (typically from 
+# the version control system). Doxygen will invoke the program by executing (via 
+# popen()) the command &lt;command&gt; &lt;input-file&gt;, where &lt;command&gt; is the value of 
+# the FILE_VERSION_FILTER tag, and &lt;input-file&gt; is the name of an input file 
+# provided by doxygen. Whatever the program writes to standard output 
+# is used as the file version. See the manual for examples.
+
+FILE_VERSION_FILTER    = 
+
+# The LAYOUT_FILE tag can be used to specify a layout file which will be parsed by 
+# doxygen. The layout file controls the global structure of the generated output files 
+# in an output format independent way. The create the layout file that represents 
+# doxygen's defaults, run doxygen with the -l option. You can optionally specify a 
+# file name after the option, if omitted DoxygenLayout.xml will be used as the name 
+# of the layout file.
+
+LAYOUT_FILE            = 
+
+#---------------------------------------------------------------------------
+# configuration options related to warning and progress messages
+#---------------------------------------------------------------------------
+
+# The QUIET tag can be used to turn on/off the messages that are generated 
+# by doxygen. Possible values are YES and NO. If left blank NO is used.
+
+QUIET                  = YES
+
+# The WARNINGS tag can be used to turn on/off the warning messages that are 
+# generated by doxygen. Possible values are YES and NO. If left blank 
+# NO is used.
+
+WARNINGS               = YES
+
+# If WARN_IF_UNDOCUMENTED is set to YES, then doxygen will generate warnings 
+# for undocumented members. If EXTRACT_ALL is set to YES then this flag will 
+# automatically be disabled.
+
+WARN_IF_UNDOCUMENTED   = YES
+
+# If WARN_IF_DOC_ERROR is set to YES, doxygen will generate warnings for 
+# potential errors in the documentation, such as not documenting some 
+# parameters in a documented function, or documenting parameters that 
+# don't exist or using markup commands wrongly.
+
+WARN_IF_DOC_ERROR      = YES
+
+# This WARN_NO_PARAMDOC option can be abled to get warnings for 
+# functions that are documented, but have no documentation for their parameters 
+# or return value. If set to NO (the default) doxygen will only warn about 
+# wrong or incomplete parameter documentation, but not about the absence of 
+# documentation.
+
+WARN_NO_PARAMDOC       = NO
+
+# The WARN_FORMAT tag determines the format of the warning messages that 
+# doxygen can produce. The string should contain the $file, $line, and $text 
+# tags, which will be replaced by the file and line number from which the 
+# warning originated and the warning text. Optionally the format may contain 
+# $version, which will be replaced by the version of the file (if it could 
+# be obtained via FILE_VERSION_FILTER)
+
+WARN_FORMAT            = &quot;$file:$line: $text&quot;
+
+# The WARN_LOGFILE tag can be used to specify a file to which warning 
+# and error messages should be written. If left blank the output is written 
+# to stderr.
+
+WARN_LOGFILE           = 
+
+#---------------------------------------------------------------------------
+# configuration options related to the input files
+#---------------------------------------------------------------------------
+
+# The INPUT tag can be used to specify the files and/or directories that contain 
+# documented source files. You may enter file names like &quot;myfile.cpp&quot; or 
+# directories like &quot;/usr/src/myproject&quot;. Separate the files or directories 
+# with spaces.
+
+INPUT                  = @CMAKE_SOURCE_DIR@/docs/manual-main.txt \
+                         @CMAKE_BINARY_DIR@/lensfun.h
+
+# This tag can be used to specify the character encoding of the source files 
+# that doxygen parses. Internally doxygen uses the UTF-8 encoding, which is 
+# also the default input encoding. Doxygen uses libiconv (or the iconv built 
+# into libc) for the transcoding. See http://www.gnu.org/software/libiconv for 
+# the list of possible encodings.
+
+INPUT_ENCODING         = UTF-8
+
+# If the value of the INPUT tag contains directories, you can use the 
+# FILE_PATTERNS tag to specify one or more wildcard pattern (like *.cpp 
+# and *.h) to filter out the source-files in the directories. If left 
+# blank the following patterns are tested: 
+# *.c *.cc *.cxx *.cpp *.c++ *.java *.ii *.ixx *.ipp *.i++ *.inl *.h *.hh *.hxx 
+# *.hpp *.h++ *.idl *.odl *.cs *.php *.php3 *.inc *.m *.mm *.py *.f90
+
+FILE_PATTERNS          = 
+
+# The RECURSIVE tag can be used to turn specify whether or not subdirectories 
+# should be searched for input files as well. Possible values are YES and NO. 
+# If left blank NO is used.
+
+RECURSIVE              = NO
+
+# The EXCLUDE tag can be used to specify files and/or directories that should 
+# excluded from the INPUT source files. This way you can easily exclude a 
+# subdirectory from a directory tree whose root is specified with the INPUT tag.
+
+EXCLUDE                = 
+
+# The EXCLUDE_SYMLINKS tag can be used select whether or not files or 
+# directories that are symbolic links (a Unix filesystem feature) are excluded 
+# from the input.
+
+EXCLUDE_SYMLINKS       = NO
+
+# If the value of the INPUT tag contains directories, you can use the 
+# EXCLUDE_PATTERNS tag to specify one or more wildcard patterns to exclude 
+# certain files from those directories. Note that the wildcards are matched 
+# against the file with absolute path, so to exclude all test directories 
+# for example use the pattern */test/*
+
+EXCLUDE_PATTERNS       = 
+
+# The EXCLUDE_SYMBOLS tag can be used to specify one or more symbol names 
+# (namespaces, classes, functions, etc.) that should be excluded from the 
+# output. The symbol name can be a fully qualified name, a word, or if the 
+# wildcard * is used, a substring. Examples: ANamespace, AClass, 
+# AClass::ANamespace, ANamespace::*Test
+
+EXCLUDE_SYMBOLS        = 
+
+# The EXAMPLE_PATH tag can be used to specify one or more files or 
+# directories that contain example code fragments that are included (see 
+# the \include command).
+
+EXAMPLE_PATH           = @CMAKE_SOURCE_DIR@
+
+# If the value of the EXAMPLE_PATH tag contains directories, you can use the 
+# EXAMPLE_PATTERNS tag to specify one or more wildcard pattern (like *.cpp 
+# and *.h) to filter out the source-files in the directories. If left 
+# blank all files are included.
+
+EXAMPLE_PATTERNS       = 
+
+# If the EXAMPLE_RECURSIVE tag is set to YES then subdirectories will be 
+# searched for input files to be used with the \include or \dontinclude 
+# commands irrespective of the value of the RECURSIVE tag. 
+# Possible values are YES and NO. If left blank NO is used.
+
+EXAMPLE_RECURSIVE      = YES
+
+# The IMAGE_PATH tag can be used to specify one or more files or 
+# directories that contain image that are included in the documentation (see 
+# the \image command).
+
+IMAGE_PATH             = 
+
+# The INPUT_FILTER tag can be used to specify a program that doxygen should 
+# invoke to filter for each input file. Doxygen will invoke the filter program 
+# by executing (via popen()) the command &lt;filter&gt; &lt;input-file&gt;, where &lt;filter&gt; 
+# is the value of the INPUT_FILTER tag, and &lt;input-file&gt; is the name of an 
+# input file. Doxygen will then use the output that the filter program writes 
+# to standard output.  If FILTER_PATTERNS is specified, this tag will be 
+# ignored.
+
+INPUT_FILTER           = 
+
+# The FILTER_PATTERNS tag can be used to specify filters on a per file pattern 
+# basis.  Doxygen will compare the file name with each pattern and apply the 
+# filter if there is a match.  The filters are a list of the form: 
+# pattern=filter (like *.cpp=my_cpp_filter). See INPUT_FILTER for further 
+# info on how filters are used. If FILTER_PATTERNS is empty, INPUT_FILTER 
+# is applied to all files.
+
+FILTER_PATTERNS        = 
+
+# If the FILTER_SOURCE_FILES tag is set to YES, the input filter (if set using 
+# INPUT_FILTER) will be used to filter the input files when producing source 
+# files to browse (i.e. when SOURCE_BROWSER is set to YES).
+
+FILTER_SOURCE_FILES    = NO
+
+#---------------------------------------------------------------------------
+# configuration options related to source browsing
+#---------------------------------------------------------------------------
+
+# If the SOURCE_BROWSER tag is set to YES then a list of source files will 
+# be generated. Documented entities will be cross-referenced with these sources. 
+# Note: To get rid of all source code in the generated output, make sure also 
+# VERBATIM_HEADERS is set to NO.
+
+SOURCE_BROWSER         = NO
+
+# Setting the INLINE_SOURCES tag to YES will include the body 
+# of functions and classes directly in the documentation.
+
+INLINE_SOURCES         = NO
+
+# Setting the STRIP_CODE_COMMENTS tag to YES (the default) will instruct 
+# doxygen to hide any special comment blocks from generated source code 
+# fragments. Normal C and C++ comments will always remain visible.
+
+STRIP_CODE_COMMENTS    = YES
+
+# If the REFERENCED_BY_RELATION tag is set to YES 
+# then for each documented function all documented 
+# functions referencing it will be listed.
+
+REFERENCED_BY_RELATION = YES
+
+# If the REFERENCES_RELATION tag is set to YES 
+# then for each documented function all documented entities 
+# called/used by that function will be listed.
+
+REFERENCES_RELATION    = YES
+
+# If the REFERENCES_LINK_SOURCE tag is set to YES (the default)
+# and SOURCE_BROWSER tag is set to YES, then the hyperlinks from
+# functions in REFERENCES_RELATION and REFERENCED_BY_RELATION lists will
+# link to the source code.  Otherwise they will link to the documentstion.
+
+REFERENCES_LINK_SOURCE = YES
+
+# If the USE_HTAGS tag is set to YES then the references to source code 
+# will point to the HTML generated by the htags(1) tool instead of doxygen 
+# built-in source browser. The htags tool is part of GNU's global source 
+# tagging system (see http://www.gnu.org/software/global/global.html). You 
+# will need version 4.8.6 or higher.
+
+USE_HTAGS              = NO
+
+# If the VERBATIM_HEADERS tag is set to YES (the default) then Doxygen 
+# will generate a verbatim copy of the header file for each class for 
+# which an include is specified. Set to NO to disable this.
+
+VERBATIM_HEADERS       = YES
+
+#---------------------------------------------------------------------------
+# configuration options related to the alphabetical class index
+#---------------------------------------------------------------------------
+
+# If the ALPHABETICAL_INDEX tag is set to YES, an alphabetical index 
+# of all compounds will be generated. Enable this if the project 
+# contains a lot of classes, structs, unions or interfaces.
+
+ALPHABETICAL_INDEX     = NO
+
+# If the alphabetical index is enabled (see ALPHABETICAL_INDEX) then 
+# the COLS_IN_ALPHA_INDEX tag can be used to specify the number of columns 
+# in which this list will be split (can be a number in the range [1..20])
+
+COLS_IN_ALPHA_INDEX    = 5
+
+# In case all classes in a project start with a common prefix, all 
+# classes will be put under the same header in the alphabetical index. 
+# The IGNORE_PREFIX tag can be used to specify one or more prefixes that 
+# should be ignored while generating the index headers.
+
+IGNORE_PREFIX          = 
+
+#---------------------------------------------------------------------------
+# configuration options related to the HTML output
+#---------------------------------------------------------------------------
+
+# If the GENERATE_HTML tag is set to YES (the default) Doxygen will 
+# generate HTML output.
+
+GENERATE_HTML          = YES
+
+# The HTML_OUTPUT tag is used to specify where the HTML docs will be put. 
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# put in front of it. If left blank `html' will be used as the default path.
+
+HTML_OUTPUT            = .
+
+# The HTML_FILE_EXTENSION tag can be used to specify the file extension for 
+# each generated HTML page (for example: .htm,.php,.asp). If it is left blank 
+# doxygen will generate files with .html extension.
+
+HTML_FILE_EXTENSION    = .html
+
+# The HTML_HEADER tag can be used to specify a personal HTML header for 
+# each generated HTML page. If it is left blank doxygen will generate a 
+# standard header.
+
+HTML_HEADER            = 
+
+# The HTML_FOOTER tag can be used to specify a personal HTML footer for 
+# each generated HTML page. If it is left blank doxygen will generate a 
+# standard footer.
+
+HTML_FOOTER            = 
+
+# The HTML_STYLESHEET tag can be used to specify a user-defined cascading 
+# style sheet that is used by each HTML page. It can be used to 
+# fine-tune the look of the HTML output. If the tag is left blank doxygen 
+# will generate a default style sheet. Note that doxygen will try to copy 
+# the style sheet file to the HTML output directory, so don't put your own 
+# stylesheet in the HTML output directory as well, or it will be erased!
+
+HTML_STYLESHEET        = 
+
+# If the HTML_ALIGN_MEMBERS tag is set to YES, the members of classes, 
+# files or namespaces will be aligned in HTML using tables. If set to 
+# NO a bullet list will be used.
+
+HTML_ALIGN_MEMBERS     = YES
+
+# If the HTML_DYNAMIC_SECTIONS tag is set to YES then the generated HTML 
+# documentation will contain sections that can be hidden and shown after the 
+# page has loaded. For this to work a browser that supports 
+# JavaScript and DHTML is required (for instance Mozilla 1.0+, Firefox 
+# Netscape 6.0+, Internet explorer 5.0+, Konqueror, or Safari).
+
+HTML_DYNAMIC_SECTIONS  = NO
+
+# If the GENERATE_DOCSET tag is set to YES, additional index files 
+# will be generated that can be used as input for Apple's Xcode 3 
+# integrated development environment, introduced with OSX 10.5 (Leopard). 
+# To create a documentation set, doxygen will generate a Makefile in the 
+# HTML output directory. Running make will produce the docset in that 
+# directory and running &quot;make install&quot; will install the docset in 
+# ~/Library/Developer/Shared/Documentation/DocSets so that Xcode will find 
+# it at startup. 
+# See http://developer.apple.com/tools/creatingdocsetswithdoxygen.html for more information.
+
+GENERATE_DOCSET        = NO
+
+# When GENERATE_DOCSET tag is set to YES, this tag determines the name of the 
+# feed. A documentation feed provides an umbrella under which multiple 
+# documentation sets from a single provider (such as a company or product suite) 
+# can be grouped.
+
+DOCSET_FEEDNAME        = &quot;Doxygen generated docs&quot;
+
+# When GENERATE_DOCSET tag is set to YES, this tag specifies a string that 
+# should uniquely identify the documentation set bundle. This should be a 
+# reverse domain-name style string, e.g. com.mycompany.MyDocSet. Doxygen 
+# will append .docset to the name.
+
+DOCSET_BUNDLE_ID       = org.doxygen.Project
+
+# If the GENERATE_HTMLHELP tag is set to YES, additional index files 
+# will be generated that can be used as input for tools like the 
+# Microsoft HTML help workshop to generate a compiled HTML help file (.chm) 
+# of the generated HTML documentation.
+
+GENERATE_HTMLHELP      = NO
+
+# If the GENERATE_HTMLHELP tag is set to YES, the CHM_FILE tag can 
+# be used to specify the file name of the resulting .chm file. You 
+# can add a path in front of the file if the result should not be 
+# written to the html output directory.
+
+CHM_FILE               = 
+
+# If the GENERATE_HTMLHELP tag is set to YES, the HHC_LOCATION tag can 
+# be used to specify the location (absolute path including file name) of 
+# the HTML help compiler (hhc.exe). If non-empty doxygen will try to run 
+# the HTML help compiler on the generated index.hhp.
+
+HHC_LOCATION           = 
+
+# If the GENERATE_HTMLHELP tag is set to YES, the GENERATE_CHI flag 
+# controls if a separate .chi index file is generated (YES) or that 
+# it should be included in the master .chm file (NO).
+
+GENERATE_CHI           = NO
+
+# If the GENERATE_HTMLHELP tag is set to YES, the CHM_INDEX_ENCODING
+# is used to encode HtmlHelp index (hhk), content (hhc) and project file
+# content.
+
+CHM_INDEX_ENCODING     = 
+
+# If the GENERATE_HTMLHELP tag is set to YES, the BINARY_TOC flag 
+# controls whether a binary table of contents is generated (YES) or a 
+# normal table of contents (NO) in the .chm file.
+
+BINARY_TOC             = NO
+
+# The TOC_EXPAND flag can be set to YES to add extra items for group members 
+# to the contents of the HTML help documentation and to the tree view.
+
+TOC_EXPAND             = NO
+
+# If the GENERATE_QHP tag is set to YES and both QHP_NAMESPACE and QHP_VIRTUAL_FOLDER 
+# are set, an additional index file will be generated that can be used as input for 
+# Qt's qhelpgenerator to generate a Qt Compressed Help (.qch) of the generated 
+# HTML documentation.
+
+GENERATE_QHP           = NO
+
+# If the QHG_LOCATION tag is specified, the QCH_FILE tag can 
+# be used to specify the file name of the resulting .qch file. 
+# The path specified is relative to the HTML output folder.
+
+QCH_FILE               = 
+
+# The QHP_NAMESPACE tag specifies the namespace to use when generating 
+# Qt Help Project output. For more information please see 
+# &lt;a href=&quot;http://doc.trolltech.com/qthelpproject.html#namespace&quot;&gt;Qt Help Project / Namespace&lt;/a&gt;.
+
+QHP_NAMESPACE          = org.doxygen.Project
+
+# The QHP_VIRTUAL_FOLDER tag specifies the namespace to use when generating 
+# Qt Help Project output. For more information please see 
+# &lt;a href=&quot;http://doc.trolltech.com/qthelpproject.html#virtual-folders&quot;&gt;Qt Help Project / Virtual Folders&lt;/a&gt;.
+
+QHP_VIRTUAL_FOLDER     = doc
+
+# If the GENERATE_QHP tag is set to YES, the QHG_LOCATION tag can 
+# be used to specify the location of Qt's qhelpgenerator. 
+# If non-empty doxygen will try to run qhelpgenerator on the generated 
+# .qhp file .
+
+QHG_LOCATION           = 
+
+# The DISABLE_INDEX tag can be used to turn on/off the condensed index at 
+# top of each HTML page. The value NO (the default) enables the index and 
+# the value YES disables it.
+
+DISABLE_INDEX          = NO
+
+# This tag can be used to set the number of enum values (range [1..20]) 
+# that doxygen will group on one line in the generated HTML documentation.
+
+ENUM_VALUES_PER_LINE   = 4
+
+# The GENERATE_TREEVIEW tag is used to specify whether a tree-like index
+# structure should be generated to display hierarchical information.
+# If the tag value is set to FRAME, a side panel will be generated
+# containing a tree-like index structure (just like the one that 
+# is generated for HTML Help). For this to work a browser that supports 
+# JavaScript, DHTML, CSS and frames is required (for instance Mozilla 1.0+, 
+# Netscape 6.0+, Internet explorer 5.0+, or Konqueror). Windows users are 
+# probably better off using the HTML help feature. Other possible values 
+# for this tag are: HIERARCHIES, which will generate the Groups, Directories,
+# and Class Hierarchy pages using a tree view instead of an ordered list;
+# ALL, which combines the behavior of FRAME and HIERARCHIES; and NONE, which
+# disables this behavior completely. For backwards compatibility with previous
+# releases of Doxygen, the values YES and NO are equivalent to FRAME and NONE
+# respectively.
+
+GENERATE_TREEVIEW      = NO
+
+# If the treeview is enabled (see GENERATE_TREEVIEW) then this tag can be 
+# used to set the initial width (in pixels) of the frame in which the tree 
+# is shown.
+
+TREEVIEW_WIDTH         = 250
+
+# Use this tag to change the font size of Latex formulas included 
+# as images in the HTML documentation. The default is 10. Note that 
+# when you change the font size after a successful doxygen run you need 
+# to manually remove any form_*.png images from the HTML output directory 
+# to force them to be regenerated.
+
+FORMULA_FONTSIZE       = 10
+
+#---------------------------------------------------------------------------
+# configuration options related to the LaTeX output
+#---------------------------------------------------------------------------
+
+# If the GENERATE_LATEX tag is set to YES (the default) Doxygen will 
+# generate Latex output.
+
+GENERATE_LATEX         = NO
+
+# The LATEX_OUTPUT tag is used to specify where the LaTeX docs will be put. 
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# put in front of it. If left blank `latex' will be used as the default path.
+
+LATEX_OUTPUT           = latex
+
+# The LATEX_CMD_NAME tag can be used to specify the LaTeX command name to be 
+# invoked. If left blank `latex' will be used as the default command name.
+
+LATEX_CMD_NAME         = latex
+
+# The MAKEINDEX_CMD_NAME tag can be used to specify the command name to 
+# generate index for LaTeX. If left blank `makeindex' will be used as the 
+# default command name.
+
+MAKEINDEX_CMD_NAME     = makeindex
+
+# If the COMPACT_LATEX tag is set to YES Doxygen generates more compact 
+# LaTeX documents. This may be useful for small projects and may help to 
+# save some trees in general.
+
+COMPACT_LATEX          = NO
+
+# The PAPER_TYPE tag can be used to set the paper type that is used 
+# by the printer. Possible values are: a4, a4wide, letter, legal and 
+# executive. If left blank a4wide will be used.
+
+PAPER_TYPE             = a4wide
+
+# The EXTRA_PACKAGES tag can be to specify one or more names of LaTeX 
+# packages that should be included in the LaTeX output.
+
+EXTRA_PACKAGES         = 
+
+# The LATEX_HEADER tag can be used to specify a personal LaTeX header for 
+# the generated latex document. The header should contain everything until 
+# the first chapter. If it is left blank doxygen will generate a 
+# standard header. Notice: only use this tag if you know what you are doing!
+
+LATEX_HEADER           = 
+
+# If the PDF_HYPERLINKS tag is set to YES, the LaTeX that is generated 
+# is prepared for conversion to pdf (using ps2pdf). The pdf file will 
+# contain links (just like the HTML output) instead of page references 
+# This makes the output suitable for online browsing using a pdf viewer.
+
+PDF_HYPERLINKS         = NO
+
+# If the USE_PDFLATEX tag is set to YES, pdflatex will be used instead of 
+# plain latex in the generated Makefile. Set this option to YES to get a 
+# higher quality PDF documentation.
+
+USE_PDFLATEX           = NO
+
+# If the LATEX_BATCHMODE tag is set to YES, doxygen will add the \\batchmode. 
+# command to the generated LaTeX files. This will instruct LaTeX to keep 
+# running if errors occur, instead of asking the user for help. 
+# This option is also used when generating formulas in HTML.
+
+LATEX_BATCHMODE        = NO
+
+# If LATEX_HIDE_INDICES is set to YES then doxygen will not 
+# include the index chapters (such as File Index, Compound Index, etc.) 
+# in the output.
+
+LATEX_HIDE_INDICES     = NO
+
+#---------------------------------------------------------------------------
+# configuration options related to the RTF output
+#---------------------------------------------------------------------------
+
+# If the GENERATE_RTF tag is set to YES Doxygen will generate RTF output 
+# The RTF output is optimized for Word 97 and may not look very pretty with 
+# other RTF readers or editors.
+
+GENERATE_RTF           = NO
+
+# The RTF_OUTPUT tag is used to specify where the RTF docs will be put. 
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# put in front of it. If left blank `rtf' will be used as the default path.
+
+RTF_OUTPUT             = rtf
+
+# If the COMPACT_RTF tag is set to YES Doxygen generates more compact 
+# RTF documents. This may be useful for small projects and may help to 
+# save some trees in general.
+
+COMPACT_RTF            = NO
+
+# If the RTF_HYPERLINKS tag is set to YES, the RTF that is generated 
+# will contain hyperlink fields. The RTF file will 
+# contain links (just like the HTML output) instead of page references. 
+# This makes the output suitable for online browsing using WORD or other 
+# programs which support those fields. 
+# Note: wordpad (write) and others do not support links.
+
+RTF_HYPERLINKS         = NO
+
+# Load stylesheet definitions from file. Syntax is similar to doxygen's 
+# config file, i.e. a series of assignments. You only have to provide 
+# replacements, missing definitions are set to their default value.
+
+RTF_STYLESHEET_FILE    = 
+
+# Set optional variables used in the generation of an rtf document. 
+# Syntax is similar to doxygen's config file.
+
+RTF_EXTENSIONS_FILE    = 
+
+#---------------------------------------------------------------------------
+# configuration options related to the man page output
+#---------------------------------------------------------------------------
+
+# If the GENERATE_MAN tag is set to YES (the default) Doxygen will 
+# generate man pages
+
+GENERATE_MAN           = NO
+
+# The MAN_OUTPUT tag is used to specify where the man pages will be put. 
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# put in front of it. If left blank `man' will be used as the default path.
+
+MAN_OUTPUT             = man
+
+# The MAN_EXTENSION tag determines the extension that is added to 
+# the generated man pages (default is the subroutine's section .3)
+
+MAN_EXTENSION          = .3
+
+# If the MAN_LINKS tag is set to YES and Doxygen generates man output, 
+# then it will generate one additional man file for each entity 
+# documented in the real man page(s). These additional files 
+# only source the real man page, but without them the man command 
+# would be unable to find the correct page. The default is NO.
+
+MAN_LINKS              = NO
+
+#---------------------------------------------------------------------------
+# configuration options related to the XML output
+#---------------------------------------------------------------------------
+
+# If the GENERATE_XML tag is set to YES Doxygen will 
+# generate an XML file that captures the structure of 
+# the code including all documentation.
+
+GENERATE_XML           = NO
+
+# The XML_OUTPUT tag is used to specify where the XML pages will be put. 
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# put in front of it. If left blank `xml' will be used as the default path.
+
+XML_OUTPUT             = xml
+
+# The XML_SCHEMA tag can be used to specify an XML schema, 
+# which can be used by a validating XML parser to check the 
+# syntax of the XML files.
+
+XML_SCHEMA             = 
+
+# The XML_DTD tag can be used to specify an XML DTD, 
+# which can be used by a validating XML parser to check the 
+# syntax of the XML files.
+
+XML_DTD                = 
+
+# If the XML_PROGRAMLISTING tag is set to YES Doxygen will 
+# dump the program listings (including syntax highlighting 
+# and cross-referencing information) to the XML output. Note that 
+# enabling this will significantly increase the size of the XML output.
+
+XML_PROGRAMLISTING     = YES
+
+#---------------------------------------------------------------------------
+# configuration options for the AutoGen Definitions output
+#---------------------------------------------------------------------------
+
+# If the GENERATE_AUTOGEN_DEF tag is set to YES Doxygen will 
+# generate an AutoGen Definitions (see autogen.sf.net) file 
+# that captures the structure of the code including all 
+# documentation. Note that this feature is still experimental 
+# and incomplete at the moment.
+
+GENERATE_AUTOGEN_DEF   = NO
+
+#---------------------------------------------------------------------------
+# configuration options related to the Perl module output
+#---------------------------------------------------------------------------
+
+# If the GENERATE_PERLMOD tag is set to YES Doxygen will 
+# generate a Perl module file that captures the structure of 
+# the code including all documentation. Note that this 
+# feature is still experimental and incomplete at the 
+# moment.
+
+GENERATE_PERLMOD       = NO
+
+# If the PERLMOD_LATEX tag is set to YES Doxygen will generate 
+# the necessary Makefile rules, Perl scripts and LaTeX code to be able 
+# to generate PDF and DVI output from the Perl module output.
+
+PERLMOD_LATEX          = NO
+
+# If the PERLMOD_PRETTY tag is set to YES the Perl module output will be 
+# nicely formatted so it can be parsed by a human reader.  This is useful 
+# if you want to understand what is going on.  On the other hand, if this 
+# tag is set to NO the size of the Perl module output will be much smaller 
+# and Perl will parse it just the same.
+
+PERLMOD_PRETTY         = YES
+
+# The names of the make variables in the generated doxyrules.make file 
+# are prefixed with the string contained in PERLMOD_MAKEVAR_PREFIX. 
+# This is useful so different doxyrules.make files included by the same 
+# Makefile don't overwrite each other's variables.
+
+PERLMOD_MAKEVAR_PREFIX = 
+
+#---------------------------------------------------------------------------
+# Configuration options related to the preprocessor   
+#---------------------------------------------------------------------------
+
+# If the ENABLE_PREPROCESSING tag is set to YES (the default) Doxygen will 
+# evaluate all C-preprocessor directives found in the sources and include 
+# files.
+
+ENABLE_PREPROCESSING   = YES
+
+# If the MACRO_EXPANSION tag is set to YES Doxygen will expand all macro 
+# names in the source code. If set to NO (the default) only conditional 
+# compilation will be performed. Macro expansion can be done in a controlled 
+# way by setting EXPAND_ONLY_PREDEF to YES.
+
+MACRO_EXPANSION        = YES
+
+# If the EXPAND_ONLY_PREDEF and MACRO_EXPANSION tags are both set to YES 
+# then the macro expansion is limited to the macros specified with the 
+# PREDEFINED and EXPAND_AS_DEFINED tags.
+
+EXPAND_ONLY_PREDEF     = YES
+
+# If the SEARCH_INCLUDES tag is set to YES (the default) the includes files 
+# in the INCLUDE_PATH (see below) will be search if a #include is found.
+
+SEARCH_INCLUDES        = YES
+
+# The INCLUDE_PATH tag can be used to specify one or more directories that 
+# contain include files that are not input files but should be processed by 
+# the preprocessor.
+
+INCLUDE_PATH           = 
+
+# You can use the INCLUDE_FILE_PATTERNS tag to specify one or more wildcard 
+# patterns (like *.h and *.hpp) to filter out the header-files in the 
+# directories. If left blank, the patterns specified with FILE_PATTERNS will 
+# be used.
+
+INCLUDE_FILE_PATTERNS  = 
+
+# The PREDEFINED tag can be used to specify one or more macro names that 
+# are defined before the preprocessor is started (similar to the -D option of 
+# gcc). The argument of the tag is a list of macros of the form: name 
+# or name=definition (no spaces). If the definition and the = are 
+# omitted =1 is assumed. To prevent a macro definition from being 
+# undefined via #undef or recursively expanded use the := operator 
+# instead of the = operator.
+
+PREDEFINED             = __cplusplus \
+                         LF_EXPORT= CONF_LENSFUN_STATIC
+
+# If the MACRO_EXPANSION and EXPAND_ONLY_PREDEF tags are set to YES then 
+# this tag can be used to specify a list of macro names that should be expanded. 
+# The macro definition that is found in the sources will be used. 
+# Use the PREDEFINED tag if you want to use a different macro definition.
+
+EXPAND_AS_DEFINED      = 
+
+# If the SKIP_FUNCTION_MACROS tag is set to YES (the default) then 
+# doxygen's preprocessor will remove all function-like macros that are alone 
+# on a line, have an all uppercase name, and do not end with a semicolon. Such 
+# function macros are typically used for boiler-plate code, and will confuse 
+# the parser if not removed.
+
+SKIP_FUNCTION_MACROS   = YES
+
+#---------------------------------------------------------------------------
+# Configuration::additions related to external references   
+#---------------------------------------------------------------------------
+
+# The TAGFILES option can be used to specify one or more tagfiles. 
+# Optionally an initial location of the external documentation 
+# can be added for each tagfile. The format of a tag file without 
+# this location is as follows: 
+#   TAGFILES = file1 file2 ... 
+# Adding location for the tag files is done as follows: 
+#   TAGFILES = file1=loc1 &quot;file2 = loc2&quot; ... 
+# where &quot;loc1&quot; and &quot;loc2&quot; can be relative or absolute paths or 
+# URLs. If a location is present for each tag, the installdox tool 
+# does not have to be run to correct the links.
+# Note that each tag file must have a unique name
+# (where the name does NOT include the path)
+# If a tag file is not located in the directory in which doxygen 
+# is run, you must also specify the path to the tagfile here.
+
+TAGFILES               = 
+
+# When a file name is specified after GENERATE_TAGFILE, doxygen will create 
+# a tag file that is based on the input files it reads.
+
+GENERATE_TAGFILE       = 
+
+# If the ALLEXTERNALS tag is set to YES all external classes will be listed 
+# in the class index. If set to NO only the inherited external classes 
+# will be listed.
+
+ALLEXTERNALS           = NO
+
+# If the EXTERNAL_GROUPS tag is set to YES all external groups will be listed 
+# in the modules index. If set to NO, only the current project's groups will 
+# be listed.
+
+EXTERNAL_GROUPS        = YES
+
+# The PERL_PATH should be the absolute path and name of the perl script 
+# interpreter (i.e. the result of `which perl').
+
+PERL_PATH              = /usr/bin/perl
+
+#---------------------------------------------------------------------------
+# Configuration options related to the dot tool   
+#---------------------------------------------------------------------------
+
+# If the CLASS_DIAGRAMS tag is set to YES (the default) Doxygen will 
+# generate a inheritance diagram (in HTML, RTF and LaTeX) for classes with base 
+# or super classes. Setting the tag to NO turns the diagrams off. Note that 
+# this option is superseded by the HAVE_DOT option below. This is only a 
+# fallback. It is recommended to install and use dot, since it yields more 
+# powerful graphs.
+
+CLASS_DIAGRAMS         = YES
+
+# You can define message sequence charts within doxygen comments using the \msc 
+# command. Doxygen will then run the mscgen tool (see 
+# http://www.mcternan.me.uk/mscgen/) to produce the chart and insert it in the 
+# documentation. The MSCGEN_PATH tag allows you to specify the directory where 
+# the mscgen tool resides. If left empty the tool is assumed to be found in the 
+# default search path.
+
+MSCGEN_PATH            = 
+
+# If set to YES, the inheritance and collaboration graphs will hide 
+# inheritance and usage relations if the target is undocumented 
+# or is not a class.
+
+HIDE_UNDOC_RELATIONS   = YES
+
+# If you set the HAVE_DOT tag to YES then doxygen will assume the dot tool is 
+# available from the path. This tool is part of Graphviz, a graph visualization 
+# toolkit from AT&amp;T and Lucent Bell Labs. The other options in this section 
+# have no effect if this option is set to NO (the default)
+
+HAVE_DOT               = NO
+
+# By default doxygen will write a font called FreeSans.ttf to the output 
+# directory and reference it in all dot files that doxygen generates. This 
+# font does not include all possible unicode characters however, so when you need 
+# these (or just want a differently looking font) you can specify the font name 
+# using DOT_FONTNAME. You need need to make sure dot is able to find the font, 
+# which can be done by putting it in a standard location or by setting the 
+# DOTFONTPATH environment variable or by setting DOT_FONTPATH to the directory 
+# containing the font.
+
+DOT_FONTNAME           = FreeSans
+
+# The DOT_FONTSIZE tag can be used to set the size of the font of dot graphs. 
+# The default size is 10pt.
+
+DOT_FONTSIZE           = 10
+
+# By default doxygen will tell dot to use the output directory to look for the 
+# FreeSans.ttf font (which doxygen will put there itself). If you specify a 
+# different font using DOT_FONTNAME you can set the path where dot 
+# can find it using this tag.
+
+DOT_FONTPATH           = 
+
+# If the CLASS_GRAPH and HAVE_DOT tags are set to YES then doxygen 
+# will generate a graph for each documented class showing the direct and 
+# indirect inheritance relations. Setting this tag to YES will force the 
+# the CLASS_DIAGRAMS tag to NO.
+
+CLASS_GRAPH            = YES
+
+# If the COLLABORATION_GRAPH and HAVE_DOT tags are set to YES then doxygen 
+# will generate a graph for each documented class showing the direct and 
+# indirect implementation dependencies (inheritance, containment, and 
+# class references variables) of the class with other documented classes.
+
+COLLABORATION_GRAPH    = YES
+
+# If the GROUP_GRAPHS and HAVE_DOT tags are set to YES then doxygen 
+# will generate a graph for groups, showing the direct groups dependencies
+
+GROUP_GRAPHS           = YES
+
+# If the UML_LOOK tag is set to YES doxygen will generate inheritance and 
+# collaboration diagrams in a style similar to the OMG's Unified Modeling 
+# Language.
+
+UML_LOOK               = NO
+
+# If set to YES, the inheritance and collaboration graphs will show the 
+# relations between templates and their instances.
+
+TEMPLATE_RELATIONS     = NO
+
+# If the ENABLE_PREPROCESSING, SEARCH_INCLUDES, INCLUDE_GRAPH, and HAVE_DOT 
+# tags are set to YES then doxygen will generate a graph for each documented 
+# file showing the direct and indirect include dependencies of the file with 
+# other documented files.
+
+INCLUDE_GRAPH          = YES
+
+# If the ENABLE_PREPROCESSING, SEARCH_INCLUDES, INCLUDED_BY_GRAPH, and 
+# HAVE_DOT tags are set to YES then doxygen will generate a graph for each 
+# documented header file showing the documented files that directly or 
+# indirectly include this file.
+
+INCLUDED_BY_GRAPH      = YES
+
+# If the CALL_GRAPH and HAVE_DOT options are set to YES then 
+# doxygen will generate a call dependency graph for every global function 
+# or class method. Note that enabling this option will significantly increase 
+# the time of a run. So in most cases it will be better to enable call graphs 
+# for selected functions only using the \callgraph command.
+
+CALL_GRAPH             = NO
+
+# If the CALLER_GRAPH and HAVE_DOT tags are set to YES then 
+# doxygen will generate a caller dependency graph for every global function 
+# or class method. Note that enabling this option will significantly increase 
+# the time of a run. So in most cases it will be better to enable caller 
+# graphs for selected functions only using the \callergraph command.
+
+CALLER_GRAPH           = NO
+
+# If the GRAPHICAL_HIERARCHY and HAVE_DOT tags are set to YES then doxygen 
+# will graphical hierarchy of all classes instead of a textual one.
+
+GRAPHICAL_HIERARCHY    = YES
+
+# If the DIRECTORY_GRAPH, SHOW_DIRECTORIES and HAVE_DOT tags are set to YES 
+# then doxygen will show the dependencies a directory has on other directories 
+# in a graphical way. The dependency relations are determined by the #include
+# relations between the files in the directories.
+
+DIRECTORY_GRAPH        = YES
+
+# The DOT_IMAGE_FORMAT tag can be used to set the image format of the images 
+# generated by dot. Possible values are png, jpg, or gif
+# If left blank png will be used.
+
+DOT_IMAGE_FORMAT       = png
+
+# The tag DOT_PATH can be used to specify the path where the dot tool can be 
+# found. If left blank, it is assumed the dot tool can be found in the path.
+
+DOT_PATH               = 
+
+# The DOTFILE_DIRS tag can be used to specify one or more directories that 
+# contain dot files that are included in the documentation (see the 
+# \dotfile command).
+
+DOTFILE_DIRS           = 
+
+# The DOT_GRAPH_MAX_NODES tag can be used to set the maximum number of 
+# nodes that will be shown in the graph. If the number of nodes in a graph 
+# becomes larger than this value, doxygen will truncate the graph, which is 
+# visualized by representing a node as a red box. Note that doxygen if the 
+# number of direct children of the root node in a graph is already larger than 
+# DOT_GRAPH_MAX_NODES then the graph will not be shown at all. Also note 
+# that the size of a graph can be further restricted by MAX_DOT_GRAPH_DEPTH.
+
+DOT_GRAPH_MAX_NODES    = 50
+
+# The MAX_DOT_GRAPH_DEPTH tag can be used to set the maximum depth of the 
+# graphs generated by dot. A depth value of 3 means that only nodes reachable 
+# from the root by following a path via at most 3 edges will be shown. Nodes 
+# that lay further from the root node will be omitted. Note that setting this 
+# option to 1 or 2 may greatly reduce the computation time needed for large 
+# code bases. Also note that the size of a graph can be further restricted by 
+# DOT_GRAPH_MAX_NODES. Using a depth of 0 means no depth restriction.
+
+MAX_DOT_GRAPH_DEPTH    = 0
+
+# Set the DOT_TRANSPARENT tag to YES to generate images with a transparent 
+# background. This is disabled by default, because dot on Windows does not 
+# seem to support this out of the box. Warning: Depending on the platform used, 
+# enabling this option may lead to badly anti-aliased labels on the edges of 
+# a graph (i.e. they become hard to read).
+
+DOT_TRANSPARENT        = NO
+
+# Set the DOT_MULTI_TARGETS tag to YES allow dot to generate multiple output 
+# files in one run (i.e. multiple -o and -T options on the command line). This 
+# makes dot run faster, but since only newer versions of dot (&gt;1.8.10) 
+# support this, this feature is disabled by default.
+
+DOT_MULTI_TARGETS      = NO
+
+# If the GENERATE_LEGEND tag is set to YES (the default) Doxygen will 
+# generate a legend page explaining the meaning of the various boxes and 
+# arrows in the dot generated graphs.
+
+GENERATE_LEGEND        = YES
+
+# If the DOT_CLEANUP tag is set to YES (the default) Doxygen will 
+# remove the intermediate dot files that are used to generate 
+# the various graphs.
+
+DOT_CLEANUP            = YES
+
+#---------------------------------------------------------------------------
+# Configuration::additions related to the search engine   
+#---------------------------------------------------------------------------
+
+# The SEARCHENGINE tag specifies whether or not a search engine should be 
+# used. If set to NO the values of all tags below this one will be ignored.
+
+SEARCHENGINE           = NO
Index: include/auxfun/image.h
===================================================================
--- include/auxfun/image.h	(Revision 143)
+++ include/auxfun/image.h	(Arbeitskopie)
@@ -22,12 +22,22 @@
 #include &quot;rgbpixel.h&quot;
 #include &lt;stdio.h&gt;
 
+#if defined (_MSC_VER) &amp;&amp; !defined(CONF_LENSFUN_STATIC)
+#if defined auxfun_EXPORTS
+#define AF_EXPORT __declspec(dllexport)
+#else
+#define AF_EXPORT __declspec(dllimport)
+#endif
+#else
+#define AF_EXPORT
+#endif
+
 /**
  * This class represents an image object.
  * It provides loading/saving from a PNG file functionality (through libPNG),
  * the rest was cut off ;-)
  */
-class Image
+class AF_EXPORT Image
 {
     FILE *file;
     int filesize;
Index: include/lensfun/config.h.in.cmake
===================================================================
--- include/lensfun/config.h.in.cmake	(Revision 0)
+++ include/lensfun/config.h.in.cmake	(Arbeitskopie)
@@ -0,0 +1,24 @@
+/* config file for lensfun library 
+   generated by CMake
+*/
+
+#define CONF_PACKAGE &quot;lensfun&quot;
+#define CONF_VERSION &quot;@VERSION_MAJOR@.@VERSION_MINOR@.@VERSION_MICRO@.@VERSION_BUGFIX@&quot;
+
+#cmakedefine PLATFORM_WINDOWS
+
+#cmakedefine CMAKE_COMPILER_IS_GNUCC 
+#ifdef CMAKE_COMPILER_IS_GNUCC 
+#define CONF_COMPILER_GCC 1 
+#endif
+
+#ifndef PLATFORM_WINDOWS
+//fix path to data works only on *nix systems
+//on windows that data dir is relocatable
+#define CONF_DATADIR &quot;${CMAKE_INSTALL_PREFIX}/${DATADIR}&quot;
+#endif
+
+#cmakedefine VECTORIZATION_SSE
+#cmakedefine VECTORIZATION_SSE2
+
+#cmakedefine HAVE_ENDIAN_H
Index: libs/auxfun/CMakeLists.txt
===================================================================
--- libs/auxfun/CMakeLists.txt	(Revision 0)
+++ libs/auxfun/CMakeLists.txt	(Arbeitskopie)
@@ -0,0 +1,14 @@
+# build auxfun lib
+SET(AUXFUN_SRC ../../include/auxfun/image.h ../../include/auxfun/rgbpixel.h image.cpp)
+IF(BUILD_STATIC)
+ADD_LIBRARY(auxfun STATIC ${AUXFUN_SRC})
+ELSE()
+ADD_LIBRARY(auxfun SHARED ${AUXFUN_SRC})
+ENDIF()
+
+SET_TARGET_PROPERTIES(auxfun PROPERTIES VERSION &quot;${VERSION_MAJOR}.${VERSION_MINOR}).${VERSION_MICRO}.${VERSION_BUGFIX}&quot;)  
+TARGET_LINK_LIBRARIES(auxfun ${PNG_LIBRARY} ${ZLIB_LIBRARY})
+INSTALL(TARGETS auxfun 
+    RUNTIME DESTINATION ${BINDIR}
+    LIBRARY DESTINATION ${LIBDIR}
+    ARCHIVE DESTINATION ${LIBDIR})
Index: libs/CMakeLists.txt
===================================================================
--- libs/CMakeLists.txt	(Revision 0)
+++ libs/CMakeLists.txt	(Arbeitskopie)
@@ -0,0 +1,14 @@
+IF(NOT HAVE_REGEX_H)
+  ADD_SUBDIRECTORY(regex)
+ENDIF()
+
+ADD_SUBDIRECTORY(lensfun)
+
+IF(BUILD_AUXFUN)
+  ADD_SUBDIRECTORY(auxfun)
+ENDIF()
+
+# also build getopt on windows
+IF(WIN32 AND BUILD_TESTS)
+  ADD_SUBDIRECTORY(getopt)
+ENDIF()
Index: libs/getopt/CMakeLists.txt
===================================================================
--- libs/getopt/CMakeLists.txt	(Revision 0)
+++ libs/getopt/CMakeLists.txt	(Arbeitskopie)
@@ -0,0 +1 @@
+ADD_LIBRARY(getopt STATIC getopt.c getopt.h)
Index: libs/getopt/getopt.c
===================================================================
--- libs/getopt/getopt.c	(Revision 0)
+++ libs/getopt/getopt.c	(Arbeitskopie)
@@ -0,0 +1,774 @@
+/* Getopt for GNU.
+   NOTE: getopt is now part of the C library, so if you don't know what
+   &quot;Keep this file name-space clean&quot; means, talk to roland@gnu.ai.mit.edu
+   before changing it!
+
+   Copyright (C) 1987, 88, 89, 90, 91, 92, 1993
+   	Free Software Foundation, Inc.
+
+   This program is free software; you can redistribute it and/or modify it
+   under the terms of the GNU General Public License as published by the
+   Free Software Foundation; either version 2, or (at your option) any
+   later version.
+
+   This program is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.
+
+   You should have received a copy of the GNU General Public License
+   along with this program; if not, write to the Free Software
+   Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */
+
+/* NOTE!!!  AIX requires this to be the first thing in the file.
+   Do not put ANYTHING before it!  */
+#if !defined (__GNUC__) &amp;&amp; defined (_AIX)
+ #pragma alloca
+#endif
+
+#ifdef HAVE_CONFIG_H
+#include &quot;config.h&quot;
+#endif
+
+#ifdef __GNUC__
+#define alloca __builtin_alloca
+#else /* not __GNUC__ */
+#if defined (HAVE_ALLOCA_H) || (defined(sparc) &amp;&amp; (defined(sun) || (!defined(USG) &amp;&amp; !defined(SVR4) &amp;&amp; !defined(__svr4__))))
+#include &lt;alloca.h&gt;
+#else
+#ifndef _AIX
+char *alloca ();
+#endif
+#endif /* alloca.h */
+#endif /* not __GNUC__ */
+
+#if !__STDC__ &amp;&amp; !defined(const) &amp;&amp; IN_GCC
+#define const
+#endif
+
+/* This tells Alpha OSF/1 not to define a getopt prototype in &lt;stdio.h&gt;.  */
+#ifndef _NO_PROTO
+#define _NO_PROTO
+#endif
+
+#include &lt;stdio.h&gt;
+
+/* Comment out all this code if we are using the GNU C Library, and are not
+   actually compiling the library itself.  This code is part of the GNU C
+   Library, but also included in many other GNU distributions.  Compiling
+   and linking in this code is a waste when using the GNU C library
+   (especially if it is a shared library).  Rather than having every GNU
+   program understand `configure --with-gnu-libc' and omit the object files,
+   it is simpler to just do this in the source for each such file.  */
+
+#if defined (_LIBC) || !defined (__GNU_LIBRARY__)
+
+
+/* This needs to come after some library #include
+   to get __GNU_LIBRARY__ defined.  */
+#ifdef	__GNU_LIBRARY__
+#undef	alloca
+/* Don't include stdlib.h for non-GNU C libraries because some of them
+   contain conflicting prototypes for getopt.  */
+#include &lt;stdlib.h&gt;
+#else	/* Not GNU C library.  */
+#if defined(__IBMC__) || defined(__IBMCPP__) || defined(_MSC_VER)
+#include &lt;stdlib.h&gt;
+#ifdef _MSC_VER
+#include &lt;malloc.h&gt;
+#undef __alloca
+#define __alloca _alloca
+#else
+#undef alloca
+#define alloca _alloca
+#endif
+#else
+#define	__alloca	alloca
+#endif  /* IBMCSet */
+#endif	/* GNU C library.  */
+
+/* If GETOPT_COMPAT is defined, `+' as well as `--' can introduce a
+   long-named option.  Because this is not POSIX.2 compliant, it is
+   being phased out.  */
+/* #define GETOPT_COMPAT */
+
+/* This version of `getopt' appears to the caller like standard Unix `getopt'
+   but it behaves differently for the user, since it allows the user
+   to intersperse the options with the other arguments.
+
+   As `getopt' works, it permutes the elements of ARGV so that,
+   when it is done, all the options precede everything else.  Thus
+   all application programs are extended to handle flexible argument order.
+
+   Setting the environment variable POSIXLY_CORRECT disables permutation.
+   Then the behavior is completely standard.
+
+   GNU application programs can use a third alternative mode in which
+   they can distinguish the relative order of options and other arguments.  */
+
+#include &quot;getopt.h&quot;
+
+/* For communication from `getopt' to the caller.
+   When `getopt' finds an option that takes an argument,
+   the argument value is returned here.
+   Also, when `ordering' is RETURN_IN_ORDER,
+   each non-option ARGV-element is returned here.  */
+
+char *optarg = 0;
+
+/* Index in ARGV of the next element to be scanned.
+   This is used for communication to and from the caller
+   and for communication between successive calls to `getopt'.
+
+   On entry to `getopt', zero means this is the first call; initialize.
+
+   When `getopt' returns EOF, this is the index of the first of the
+   non-option elements that the caller should itself scan.
+
+   Otherwise, `optind' communicates from one call to the next
+   how much of ARGV has been scanned so far.  */
+
+/* XXX 1003.2 says this must be 1 before any call.  */
+int optind = 0;
+
+/* The next char to be scanned in the option-element
+   in which the last option character we returned was found.
+   This allows us to pick up the scan where we left off.
+
+   If this is zero, or a null string, it means resume the scan
+   by advancing to the next ARGV-element.  */
+
+static char *nextchar;
+
+/* Callers store zero here to inhibit the error message
+   for unrecognized options.  */
+
+int opterr = 1;
+
+/* Set to an option character which was unrecognized.
+   This must be initialized on some systems to avoid linking in the
+   system's own getopt implementation.  */
+
+int optopt = '?';
+
+/* Describe how to deal with options that follow non-option ARGV-elements.
+
+   If the caller did not specify anything,
+   the default is REQUIRE_ORDER if the environment variable
+   POSIXLY_CORRECT is defined, PERMUTE otherwise.
+
+   REQUIRE_ORDER means don't recognize them as options;
+   stop option processing when the first non-option is seen.
+   This is what Unix does.
+   This mode of operation is selected by either setting the environment
+   variable POSIXLY_CORRECT, or using `+' as the first character
+   of the list of option characters.
+
+   PERMUTE is the default.  We permute the contents of ARGV as we scan,
+   so that eventually all the non-options are at the end.  This allows options
+   to be given in any order, even with programs that were not written to
+   expect this.
+
+   RETURN_IN_ORDER is an option available to programs that were written
+   to expect options and other ARGV-elements in any order and that care about
+   the ordering of the two.  We describe each non-option ARGV-element
+   as if it were the argument of an option with character code 1.
+   Using `-' as the first character of the list of option characters
+   selects this mode of operation.
+
+   The special argument `--' forces an end of option-scanning regardless
+   of the value of `ordering'.  In the case of RETURN_IN_ORDER, only
+   `--' can cause `getopt' to return EOF with `optind' != ARGC.  */
+
+static enum
+{
+  REQUIRE_ORDER, PERMUTE, RETURN_IN_ORDER
+} ordering;
+
+#if defined(__GNU_LIBRARY__) || defined(__IBMC__) || defined(__IBMCPP__) || defined(_MSC_VER)
+/* We want to avoid inclusion of string.h with non-GNU libraries
+   because there are many ways it can cause trouble.
+   On some systems, it contains special magic macros that don't work
+   in GCC.  */
+#include &lt;string.h&gt;
+#define	my_index	strchr
+#define	my_bcopy(src, dst, n)	memcpy ((dst), (src), (n))
+#else
+
+/* Avoid depending on library functions or files
+   whose names are inconsistent.  */
+
+char *getenv ();
+
+static char *
+#if __STDC__ || _MSC_VER
+my_index (const char *str, int chr)
+#else
+my_index (str, chr)
+     const char *str;
+     int chr;
+#endif
+{
+  while (*str)
+    {
+      if (*str == chr)
+	return (char *) str;
+      str++;
+    }
+  return 0;
+}
+
+static void
+#if __STDC__ || _MSC_VER
+my_bcopy (const char *from, char *to, int size)
+#else
+my_bcopy (from, to, size)
+     const char *from;
+     char *to;
+     int size;
+#endif
+{
+  int i;
+  for (i = 0; i &lt; size; i++)
+    to[i] = from[i];
+}
+#endif				/* GNU C library.  */
+
+/* Handle permutation of arguments.  */
+
+/* Describe the part of ARGV that contains non-options that have
+   been skipped.  `first_nonopt' is the index in ARGV of the first of them;
+   `last_nonopt' is the index after the last of them.  */
+
+static int first_nonopt;
+static int last_nonopt;
+
+/* Exchange two adjacent subsequences of ARGV.
+   One subsequence is elements [first_nonopt,last_nonopt)
+   which contains all the non-options that have been skipped so far.
+   The other is elements [last_nonopt,optind), which contains all
+   the options processed since those non-options were skipped.
+
+   `first_nonopt' and `last_nonopt' are relocated so that they describe
+   the new indices of the non-options in ARGV after they are moved.  */
+
+static void
+#if __STDC__ || _MSC_VER
+exchange (char **argv)
+#else
+exchange (argv)
+     char **argv;
+#endif
+{
+  int nonopts_size = (last_nonopt - first_nonopt) * sizeof (char *);
+  char **temp = (char **) __alloca (nonopts_size);
+
+  /* Interchange the two blocks of data in ARGV.  */
+
+  my_bcopy ((char *) &amp;argv[first_nonopt], (char *) temp, nonopts_size);
+  my_bcopy ((char *) &amp;argv[last_nonopt], (char *) &amp;argv[first_nonopt],
+	    (optind - last_nonopt) * sizeof (char *));
+  my_bcopy ((char *) temp,
+	    (char *) &amp;argv[first_nonopt + optind - last_nonopt],
+	    nonopts_size);
+
+  /* Update records for the slots the non-options now occupy.  */
+
+  first_nonopt += (optind - last_nonopt);
+  last_nonopt = optind;
+}
+
+/* Scan elements of ARGV (whose length is ARGC) for option characters
+   given in OPTSTRING.
+
+   If an element of ARGV starts with '-', and is not exactly &quot;-&quot; or &quot;--&quot;,
+   then it is an option element.  The characters of this element
+   (aside from the initial '-') are option characters.  If `getopt'
+   is called repeatedly, it returns successively each of the option characters
+   from each of the option elements.
+
+   If `getopt' finds another option character, it returns that character,
+   updating `optind' and `nextchar' so that the next call to `getopt' can
+   resume the scan with the following option character or ARGV-element.
+
+   If there are no more option characters, `getopt' returns `EOF'.
+   Then `optind' is the index in ARGV of the first ARGV-element
+   that is not an option.  (The ARGV-elements have been permuted
+   so that those that are not options now come last.)
+
+   OPTSTRING is a string containing the legitimate option characters.
+   If an option character is seen that is not listed in OPTSTRING,
+   return '?' after printing an error message.  If you set `opterr' to
+   zero, the error message is suppressed but we still return '?'.
+
+   If a char in OPTSTRING is followed by a colon, that means it wants an arg,
+   so the following text in the same ARGV-element, or the text of the following
+   ARGV-element, is returned in `optarg'.  Two colons mean an option that
+   wants an optional arg; if there is text in the current ARGV-element,
+   it is returned in `optarg', otherwise `optarg' is set to zero.
+
+   If OPTSTRING starts with `-' or `+', it requests different methods of
+   handling the non-option ARGV-elements.
+   See the comments about RETURN_IN_ORDER and REQUIRE_ORDER, above.
+
+   Long-named options begin with `--' instead of `-'.
+   Their names may be abbreviated as long as the abbreviation is unique
+   or is an exact match for some defined option.  If they have an
+   argument, it follows the option name in the same ARGV-element, separated
+   from the option name by a `=', or else the in next ARGV-element.
+   When `getopt' finds a long-named option, it returns 0 if that option's
+   `flag' field is nonzero, the value of the option's `val' field
+   if the `flag' field is zero.
+
+   The elements of ARGV aren't really const, because we permute them.
+   But we pretend they're const in the prototype to be compatible
+   with other systems.
+
+   LONGOPTS is a vector of `struct option' terminated by an
+   element containing a name which is zero.
+
+   LONGIND returns the index in LONGOPT of the long-named option found.
+   It is only valid when a long-named option has been found by the most
+   recent call.
+
+   If LONG_ONLY is nonzero, '-' as well as '--' can introduce
+   long-named options.  */
+
+int
+#if __STDC__ || _MSC_VER
+_getopt_internal (int argc, char *const *argv, const char *optstring,
+                  const struct option *longopts, int *longind, int long_only)
+#else
+_getopt_internal (argc, argv, optstring, longopts, longind, long_only)
+     int argc;
+     char *const *argv;
+     const char *optstring;
+     const struct option *longopts;
+     int *longind;
+     int long_only;
+#endif
+{
+  int option_index;
+
+  optarg = 0;
+
+  /* Initialize the internal data when the first call is made.
+     Start processing options with ARGV-element 1 (since ARGV-element 0
+     is the program name); the sequence of previously skipped
+     non-option ARGV-elements is empty.  */
+
+  if (optind == 0)
+    {
+      first_nonopt = last_nonopt = optind = 1;
+
+      nextchar = NULL;
+
+      /* Determine how to handle the ordering of options and nonoptions.  */
+
+      if (optstring[0] == '-')
+	{
+	  ordering = RETURN_IN_ORDER;
+	  ++optstring;
+	}
+      else if (optstring[0] == '+')
+	{
+	  ordering = REQUIRE_ORDER;
+	  ++optstring;
+	}
+      else if (getenv (&quot;POSIXLY_CORRECT&quot;) != NULL)
+	ordering = REQUIRE_ORDER;
+      else
+	ordering = PERMUTE;
+    }
+
+  if (nextchar == NULL || *nextchar == '\0')
+    {
+      if (ordering == PERMUTE)
+	{
+	  /* If we have just processed some options following some non-options,
+	     exchange them so that the options come first.  */
+
+	  if (first_nonopt != last_nonopt &amp;&amp; last_nonopt != optind)
+	    exchange ((char **) argv);
+	  else if (last_nonopt != optind)
+	    first_nonopt = optind;
+
+	  /* Now skip any additional non-options
+	     and extend the range of non-options previously skipped.  */
+
+	  while (optind &lt; argc
+		 &amp;&amp; (argv[optind][0] != '-' || argv[optind][1] == '\0')
+#ifdef GETOPT_COMPAT
+		 &amp;&amp; (longopts == NULL
+		     || argv[optind][0] != '+' || argv[optind][1] == '\0')
+#endif				/* GETOPT_COMPAT */
+		 )
+	    optind++;
+	  last_nonopt = optind;
+	}
+
+      /* Special ARGV-element `--' means premature end of options.
+	 Skip it like a null option,
+	 then exchange with previous non-options as if it were an option,
+	 then skip everything else like a non-option.  */
+
+      if (optind != argc &amp;&amp; !strcmp (argv[optind], &quot;--&quot;))
+	{
+	  optind++;
+
+	  if (first_nonopt != last_nonopt &amp;&amp; last_nonopt != optind)
+	    exchange ((char **) argv);
+	  else if (first_nonopt == last_nonopt)
+	    first_nonopt = optind;
+	  last_nonopt = argc;
+
+	  optind = argc;
+	}
+
+      /* If we have done all the ARGV-elements, stop the scan
+	 and back over any non-options that we skipped and permuted.  */
+
+      if (optind == argc)
+	{
+	  /* Set the next-arg-index to point at the non-options
+	     that we previously skipped, so the caller will digest them.  */
+	  if (first_nonopt != last_nonopt)
+	    optind = first_nonopt;
+	  return EOF;
+	}
+
+      /* If we have come to a non-option and did not permute it,
+	 either stop the scan or describe it to the caller and pass it by.  */
+
+      if ((argv[optind][0] != '-' || argv[optind][1] == '\0')
+#ifdef GETOPT_COMPAT
+	  &amp;&amp; (longopts == NULL
+	      || argv[optind][0] != '+' || argv[optind][1] == '\0')
+#endif				/* GETOPT_COMPAT */
+	  )
+	{
+	  if (ordering == REQUIRE_ORDER)
+	    return EOF;
+	  optarg = argv[optind++];
+	  return 1;
+	}
+
+      /* We have found another option-ARGV-element.
+	 Start decoding its characters.  */
+
+      nextchar = (argv[optind] + 1
+		  + (longopts != NULL &amp;&amp; argv[optind][1] == '-'));
+    }
+
+  if (longopts != NULL
+      &amp;&amp; ((argv[optind][0] == '-'
+	   &amp;&amp; (argv[optind][1] == '-' || long_only))
+#ifdef GETOPT_COMPAT
+	  || argv[optind][0] == '+'
+#endif				/* GETOPT_COMPAT */
+	  ))
+    {
+      const struct option *p;
+      char *s = nextchar;
+      int exact = 0;
+      int ambig = 0;
+      const struct option *pfound = NULL;
+      int indfound = 0;
+
+      while (*s &amp;&amp; *s != '=')
+	s++;
+
+      /* Test all options for either exact match or abbreviated matches.  */
+      for (p = longopts, option_index = 0; p-&gt;name;
+	   p++, option_index++)
+	if (!strncmp (p-&gt;name, nextchar, s - nextchar))
+	  {
+	    if ((size_t) (s - nextchar) == strlen (p-&gt;name))
+	      {
+		/* Exact match found.  */
+		pfound = p;
+		indfound = option_index;
+		exact = 1;
+		break;
+	      }
+	    else if (pfound == NULL)
+	      {
+		/* First nonexact match found.  */
+		pfound = p;
+		indfound = option_index;
+	      }
+	    else
+	      /* Second nonexact match found.  */
+	      ambig = 1;
+	  }
+
+      if (ambig &amp;&amp; !exact)
+	{
+	  if (opterr)
+	    fprintf (stderr, &quot;%s: option `%s' is ambiguous\n&quot;,
+		     argv[0], argv[optind]);
+	  nextchar += strlen (nextchar);
+	  optind++;
+	  return '?';
+	}
+
+      if (pfound != NULL)
+	{
+	  option_index = indfound;
+	  optind++;
+	  if (*s)
+	    {
+	      /* Don't test has_arg with &gt;, because some C compilers don't
+		 allow it to be used on enums.  */
+	      if (pfound-&gt;has_arg)
+		optarg = s + 1;
+	      else
+		{
+		  if (opterr)
+		    {
+		      if (argv[optind - 1][1] == '-')
+			/* --option */
+			fprintf (stderr,
+				 &quot;%s: option `--%s' doesn't allow an argument\n&quot;,
+				 argv[0], pfound-&gt;name);
+		      else
+			/* +option or -option */
+			fprintf (stderr,
+			     &quot;%s: option `%c%s' doesn't allow an argument\n&quot;,
+			     argv[0], argv[optind - 1][0], pfound-&gt;name);
+		    }
+		  nextchar += strlen (nextchar);
+		  return '?';
+		}
+	    }
+	  else if (pfound-&gt;has_arg == 1)
+	    {
+	      if (optind &lt; argc)
+		optarg = argv[optind++];
+	      else
+		{
+		  if (opterr)
+		    fprintf (stderr, &quot;%s: option `%s' requires an argument\n&quot;,
+			     argv[0], argv[optind - 1]);
+		  nextchar += strlen (nextchar);
+		  return optstring[0] == ':' ? ':' : '?';
+		}
+	    }
+	  nextchar += strlen (nextchar);
+	  if (longind != NULL)
+	    *longind = option_index;
+	  if (pfound-&gt;flag)
+	    {
+	      *(pfound-&gt;flag) = pfound-&gt;val;
+	      return 0;
+	    }
+	  return pfound-&gt;val;
+	}
+      /* Can't find it as a long option.  If this is not getopt_long_only,
+	 or the option starts with '--' or is not a valid short
+	 option, then it's an error.
+	 Otherwise interpret it as a short option.  */
+      if (!long_only || argv[optind][1] == '-'
+#ifdef GETOPT_COMPAT
+	  || argv[optind][0] == '+'
+#endif				/* GETOPT_COMPAT */
+	  || my_index (optstring, *nextchar) == NULL)
+	{
+	  if (opterr)
+	    {
+	      if (argv[optind][1] == '-')
+		/* --option */
+		fprintf (stderr, &quot;%s: unrecognized option `--%s'\n&quot;,
+			 argv[0], nextchar);
+	      else
+		/* +option or -option */
+		fprintf (stderr, &quot;%s: unrecognized option `%c%s'\n&quot;,
+			 argv[0], argv[optind][0], nextchar);
+	    }
+	  nextchar = (char *) &quot;&quot;;
+	  optind++;
+	  return '?';
+	}
+    }
+
+  /* Look at and handle the next option-character.  */
+
+  {
+    char c = *nextchar++;
+    char *temp = my_index (optstring, c);
+
+    /* Increment `optind' when we start to process its last character.  */
+    if (*nextchar == '\0')
+      ++optind;
+
+    if (temp == NULL || c == ':')
+      {
+	if (opterr)
+	  {
+#if 0
+	    if (c &lt; 040 || c &gt;= 0177)
+	      fprintf (stderr, &quot;%s: unrecognized option, character code 0%o\n&quot;,
+		       argv[0], c);
+	    else
+	      fprintf (stderr, &quot;%s: unrecognized option `-%c'\n&quot;, argv[0], c);
+#else
+	    /* 1003.2 specifies the format of this message.  */
+	    fprintf (stderr, &quot;%s: illegal option -- %c\n&quot;, argv[0], c);
+#endif
+	  }
+	optopt = c;
+	return '?';
+      }
+    if (temp[1] == ':')
+      {
+	if (temp[2] == ':')
+	  {
+	    /* This is an option that accepts an argument optionally.  */
+	    if (*nextchar != '\0')
+	      {
+		optarg = nextchar;
+		optind++;
+	      }
+	    else
+	      optarg = 0;
+	    nextchar = NULL;
+	  }
+	else
+	  {
+	    /* This is an option that requires an argument.  */
+	    if (*nextchar != '\0')
+	      {
+		optarg = nextchar;
+		/* If we end this ARGV-element by taking the rest as an arg,
+		   we must advance to the next element now.  */
+		optind++;
+	      }
+	    else if (optind == argc)
+	      {
+		if (opterr)
+		  {
+#if 0
+		    fprintf (stderr, &quot;%s: option `-%c' requires an argument\n&quot;,
+			     argv[0], c);
+#else
+		    /* 1003.2 specifies the format of this message.  */
+		    fprintf (stderr, &quot;%s: option requires an argument -- %c\n&quot;,
+			     argv[0], c);
+#endif
+		  }
+		optopt = c;
+		if (optstring[0] == ':')
+		  c = ':';
+		else
+		  c = '?';
+	      }
+	    else
+	      /* We already incremented `optind' once;
+		 increment it again when taking next ARGV-elt as argument.  */
+	      optarg = argv[optind++];
+	    nextchar = NULL;
+	  }
+      }
+    return c;
+  }
+}
+
+int
+#if __STDC__ || _MSC_VER
+getopt (int argc, char *const *argv, const char *optstring)
+#else
+getopt (argc, argv, optstring)
+     int argc;
+     char *const *argv;
+     const char *optstring;
+#endif
+{
+  return _getopt_internal (argc, argv, optstring,
+			   (const struct option *) 0,
+			   (int *) 0,
+			   0);
+}
+
+int getopt_long (int argc, char *const *argv, const char *shortopts,
+                 const struct option *longopts, int *longind)
+{
+    return _getopt_internal(argc, argv, shortopts, longopts, longind, 0);
+}
+
+#endif	/* _LIBC or not __GNU_LIBRARY__.  */
+
+#ifdef TEST
+
+/* Compile with -DTEST to make an executable for use in testing
+   the above definition of `getopt'.  */
+
+int
+#if __STDC__ || _MSC_VER
+main (int argc, char **argv)
+#else
+main (argc, argv)
+     int argc;
+     char **argv;
+#endif
+{
+  int c;
+  int digit_optind = 0;
+
+  while (1)
+    {
+      int this_option_optind = optind ? optind : 1;
+
+      c = getopt (argc, argv, &quot;abc:d:0123456789&quot;);
+      if (c == EOF)
+	break;
+
+      switch (c)
+	{
+	case '0':
+	case '1':
+	case '2':
+	case '3':
+	case '4':
+	case '5':
+	case '6':
+	case '7':
+	case '8':
+	case '9':
+	  if (digit_optind != 0 &amp;&amp; digit_optind != this_option_optind)
+	    printf (&quot;digits occur in two different argv-elements.\n&quot;);
+	  digit_optind = this_option_optind;
+	  printf (&quot;option %c\n&quot;, c);
+	  break;
+
+	case 'a':
+	  printf (&quot;option a\n&quot;);
+	  break;
+
+	case 'b':
+	  printf (&quot;option b\n&quot;);
+	  break;
+
+	case 'c':
+	  printf (&quot;option c with value `%s'\n&quot;, optarg);
+	  break;
+
+	case '?':
+	  break;
+
+	default:
+	  printf (&quot;?? getopt returned character code 0%o ??\n&quot;, c);
+	}
+    }
+
+  if (optind &lt; argc)
+    {
+      printf (&quot;non-option ARGV-elements: &quot;);
+      while (optind &lt; argc)
+	printf (&quot;%s &quot;, argv[optind++]);
+      printf (&quot;\n&quot;);
+    }
+
+  exit (0);
+}
+
+#endif /* TEST */
Index: libs/getopt/getopt.h
===================================================================
--- libs/getopt/getopt.h	(Revision 0)
+++ libs/getopt/getopt.h	(Arbeitskopie)
@@ -0,0 +1,129 @@
+/* Declarations for getopt.
+   Copyright (C) 1989, 1990, 1991, 1992, 1993 Free Software Foundation, Inc.
+
+   This program is free software; you can redistribute it and/or modify it
+   under the terms of the GNU General Public License as published by the
+   Free Software Foundation; either version 2, or (at your option) any
+   later version.
+
+   This program is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.
+
+   You should have received a copy of the GNU General Public License
+   along with this program; if not, write to the Free Software
+   Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */
+
+#ifndef _GETOPT_H
+#define _GETOPT_H 1
+
+#ifdef	__cplusplus
+extern &quot;C&quot; {
+#endif
+
+/* For communication from `getopt' to the caller.
+   When `getopt' finds an option that takes an argument,
+   the argument value is returned here.
+   Also, when `ordering' is RETURN_IN_ORDER,
+   each non-option ARGV-element is returned here.  */
+
+extern char *optarg;
+
+/* Index in ARGV of the next element to be scanned.
+   This is used for communication to and from the caller
+   and for communication between successive calls to `getopt'.
+
+   On entry to `getopt', zero means this is the first call; initialize.
+
+   When `getopt' returns EOF, this is the index of the first of the
+   non-option elements that the caller should itself scan.
+
+   Otherwise, `optind' communicates from one call to the next
+   how much of ARGV has been scanned so far.  */
+
+extern int optind;
+
+/* Callers store zero here to inhibit the error message `getopt' prints
+   for unrecognized options.  */
+
+extern int opterr;
+
+/* Set to an option character which was unrecognized.  */
+
+extern int optopt;
+
+/* Describe the long-named options requested by the application.
+   The LONG_OPTIONS argument to getopt_long or getopt_long_only is a vector
+   of `struct option' terminated by an element containing a name which is
+   zero.
+
+   The field `has_arg' is:
+   no_argument		(or 0) if the option does not take an argument,
+   required_argument	(or 1) if the option requires an argument,
+   optional_argument 	(or 2) if the option takes an optional argument.
+
+   If the field `flag' is not NULL, it points to a variable that is set
+   to the value given in the field `val' when the option is found, but
+   left unchanged if the option is not found.
+
+   To have a long-named option do something other than set an `int' to
+   a compiled-in constant, such as set a value from `optarg', set the
+   option's `flag' field to zero and its `val' field to a nonzero
+   value (the equivalent single-letter option character, if there is
+   one).  For long options that have a zero `flag' field, `getopt'
+   returns the contents of the `val' field.  */
+
+struct option
+{
+#if	__STDC__ || _MSC_VER || defined(XP_OS2_VACPP)
+  const char *name;
+#else
+  char *name;
+#endif
+  /* has_arg can't be an enum because some compilers complain about
+     type mismatches in all the code that assumes it is an int.  */
+  int has_arg;
+  int *flag;
+  int val;
+};
+
+/* Names for the values of the `has_arg' field of `struct option'.  */
+
+#define	no_argument		0
+#define required_argument	1
+#define optional_argument	2
+
+#if __STDC__ || _MSC_VER || defined( XP_OS2_VACPP )
+#if defined(__GNU_LIBRARY__) || defined( XP_OS2_VACPP ) || defined(_MSC_VER)
+/* Many other libraries have conflicting prototypes for getopt, with
+   differences in the consts, in stdlib.h.  To avoid compilation
+   errors, only prototype getopt for the GNU C library.  */
+extern int getopt (int argc, char *const *argv, const char *shortopts);
+#else /* not __GNU_LIBRARY__ */
+extern int getopt ();
+#endif /* not __GNU_LIBRARY__ */
+extern int getopt_long (int argc, char *const *argv, const char *shortopts,
+		        const struct option *longopts, int *longind);
+extern int getopt_long_only (int argc, char *const *argv,
+			     const char *shortopts,
+		             const struct option *longopts, int *longind);
+
+/* Internal only.  Users should not call this directly.  */
+extern int _getopt_internal (int argc, char *const *argv,
+			     const char *shortopts,
+		             const struct option *longopts, int *longind,
+			     int long_only);
+#else /* not __STDC__ */
+extern int getopt ();
+extern int getopt_long ();
+extern int getopt_long_only ();
+
+extern int _getopt_internal ();
+#endif /* not __STDC__ */
+
+#ifdef	__cplusplus
+}
+#endif
+
+#endif /* _GETOPT_H */
Index: libs/getopt/LICENSE
===================================================================
--- libs/getopt/LICENSE	(Revision 0)
+++ libs/getopt/LICENSE	(Arbeitskopie)
@@ -0,0 +1,357 @@
+
+                         GNU GENERAL PUBLIC LICENSE
+
+                            Version 2, June 1991
+
+     Copyright (c) 1989, 1991 Free Software Foundation, Inc.
+     675 Mass Ave, Cambridge, MA 02139, USA
+
+     Everyone is permitted to copy and distribute verbatim copies
+     of this license document, but changing it is not allowed.
+
+                                  Preamble
+
+   The licenses for most software are designed to take away your freedom
+   to share and change it. By contrast, the GNU General Public License is
+   intended to guarantee your freedom to share and change free
+   software - to make sure the software is free for all its users. This
+   General Public License applies to most of the Free Software
+   Foundation's software and to any other program whose authors commit to
+   using it. (Some other Free Software Foundation software is covered by
+   the GNU Library General Public License instead.) You can apply it to
+   your programs, too.
+
+   When we speak of free software, we are referring to freedom, not
+   price. Our General Public Licenses are designed to make sure that you
+   have the freedom to distribute copies of free software (and charge for
+   this service if you wish), that you receive source code or can get it
+   if you want it, that you can change the software or use pieces of it
+   in new free programs; and that you know you can do these things.
+
+   To protect your rights, we need to make restrictions that forbid
+   anyone to deny you these rights or to ask you to surrender the rights.
+   These restrictions translate to certain responsibilities for you if
+   you distribute copies of the software, or if you modify it.
+
+   For example, if you distribute copies of such a program, whether
+   gratis or for a fee, you must give the recipients all the rights that
+   you have. You must make sure that they, too, receive or can get the
+   source code. And you must show them these terms so they know their
+   rights.
+
+   We protect your rights with two steps: (1) copyright the software, and
+   (2) offer you this license which gives you legal permission to copy,
+   distribute and/or modify the software.
+
+   Also, for each author's protection and ours, we want to make certain
+   that everyone understands that there is no warranty for this free
+   software. If the software is modified by someone else and passed on,
+   we want its recipients to know that what they have is not the
+   original, so that any problems introduced by others will not reflect
+   on the original authors' reputations.
+
+   Finally, any free program is threatened constantly by software
+   patents. We wish to avoid the danger that redistributors of a free
+   program will individually obtain patent licenses, in effect making the
+   program proprietary. To prevent this, we have made it clear that any
+   patent must be licensed for everyone's free use or not licensed at
+   all.
+
+   The precise terms and conditions for copying, distribution and
+   modification follow.
+
+      TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+
+   This License applies to any program or other work which contains a
+   notice placed by the copyright holder saying it may be distributed
+   under the terms of this General Public License. The ``Program'',
+   below, refers to any such program or work, and a ``work based on the
+   Program'' means either the Program or any derivative work under
+   copyright law: that is to say, a work containing the Program or a
+   portion of it, either verbatim or with modifications and/or translated
+   into another language. (Hereinafter, translation is included without
+   limitation in the term ``modification''.) Each licensee is addressed
+   as ``you''.
+
+   Activities other than copying, distribution and modification are not
+   covered by this License; they are outside its scope. The act of
+   running the Program is not restricted, and the output from the Program
+   is covered only if its contents constitute a work based on the Program
+   (independent of having been made by running the Program). Whether that
+   is true depends on what the Program does.
+
+    1. You may copy and distribute verbatim copies of the Program's
+       source code as you receive it, in any medium, provided that you
+       conspicuously and appropriately publish on each copy an
+       appropriate copyright notice and disclaimer of warranty; keep
+       intact all the notices that refer to this License and to the
+       absence of any warranty; and give any other recipients of the
+       Program a copy of this License along with the Program.
+
+       You may charge a fee for the physical act of transferring a copy,
+       and you may at your option offer warranty protection in exchange
+       for a fee.
+
+    2. You may modify your copy or copies of the Program or any portion
+       of it, thus forming a work based on the Program, and copy and
+       distribute such modifications or work under the terms of Section 1
+       above, provided that you also meet all of these conditions:
+
+         a. You must cause the modified files to carry prominent notices
+            stating that you changed the files and the date of any
+            change.
+
+         b. You must cause any work that you distribute or publish, that
+            in whole or in part contains or is derived from the Program
+            or any part thereof, to be licensed as a whole at no charge
+            to all third parties under the terms of this License.
+
+         c. If the modified program normally reads commands interactively
+            when run, you must cause it, when started running for such
+            interactive use in the most ordinary way, to print or display
+            an announcement including an appropriate copyright notice and
+            a notice that there is no warranty (or else, saying that you
+            provide a warranty) and that users may redistribute the
+            program under these conditions, and telling the user how to
+            view a copy of this License. (Exception: if the Program
+            itself is interactive but does not normally print such an
+            announcement, your work based on the Program is not required
+            to print an announcement.)
+
+       These requirements apply to the modified work as a whole. If
+       identifiable sections of that work are not derived from the
+       Program, and can be reasonably considered independent and separate
+       works in themselves, then this License, and its terms, do not
+       apply to those sections when you distribute them as separate
+       works. But when you distribute the same sections as part of a
+       whole which is a work based on the Program, the distribution of
+       the whole must be on the terms of this License, whose permissions
+       for other licensees extend to the entire whole, and thus to each
+       and every part regardless of who wrote it.
+
+       Thus, it is not the intent of this section to claim rights or
+       contest your rights to work written entirely by you; rather, the
+       intent is to exercise the right to control the distribution of
+       derivative or collective works based on the Program.
+
+       In addition, mere aggregation of another work not based on the
+       Program with the Program (or with a work based on the Program) on
+       a volume of a storage or distribution medium does not bring the
+       other work under the scope of this License.
+
+    3. You may copy and distribute the Program (or a work based on it,
+       under Section 2) in object code or executable form under the terms
+       of Sections 1 and 2 above provided that you also do one of the
+       following:
+         a. Accompany it with the complete corresponding machine-readable
+            source code, which must be distributed under the terms of
+            Sections 1 and 2 above on a medium customarily used for
+            software interchange; or,
+         b. Accompany it with a written offer, valid for at least three
+            years, to give any third party, for a charge no more than
+            your cost of physically performing source distribution, a
+            complete machine-readable copy of the corresponding source
+            code, to be distributed under the terms of Sections 1 and 2
+            above on a medium customarily used for software interchange;
+            or,
+         c. Accompany it with the information you received as to the
+            offer to distribute corresponding source code. (This
+            alternative is allowed only for noncommercial distribution
+            and only if you received the program in object code or
+            executable form with such an offer, in accord with Subsection
+            b above.)
+
+       The source code for a work means the preferred form of the work
+       for making modifications to it. For an executable work, complete
+       source code means all the source code for all modules it contains,
+       plus any associated interface definition files, plus the scripts
+       used to control compilation and installation of the executable.
+       However, as a special exception, the source code distributed need
+       not include anything that is normally distributed (in either
+       source or binary form) with the major components (compiler,
+       kernel, and so on) of the operating system on which the executable
+       runs, unless that component itself accompanies the executable.
+
+       If distribution of executable or object code is made by offering
+       access to copy from a designated place, then offering equivalent
+       access to copy the source code from the same place counts as
+       distribution of the source code, even though third parties are not
+       compelled to copy the source along with the object code.
+
+    4. You may not copy, modify, sublicense, or distribute the Program
+       except as expressly provided under this License. Any attempt
+       otherwise to copy, modify, sublicense or distribute the Program is
+       void, and will automatically terminate your rights under this
+       License. However, parties who have received copies, or rights,
+       from you under this License will not have their licenses
+       terminated so long as such parties remain in full compliance.
+
+    5. You are not required to accept this License, since you have not
+       signed it. However, nothing else grants you permission to modify
+       or distribute the Program or its derivative works. These actions
+       are prohibited by law if you do not accept this License.
+       Therefore, by modifying or distributing the Program (or any work
+       based on the Program), you indicate your acceptance of this
+       License to do so, and all its terms and conditions for copying,
+       distributing or modifying the Program or works based on it.
+
+    6. Each time you redistribute the Program (or any work based on the
+       Program), the recipient automatically receives a license from the
+       original licensor to copy, distribute or modify the Program
+       subject to these terms and conditions. You may not impose any
+       further restrictions on the recipients' exercise of the rights
+       granted herein. You are not responsible for enforcing compliance
+       by third parties to this License.
+
+    7. If, as a consequence of a court judgment or allegation of patent
+       infringement or for any other reason (not limited to patent
+       issues), conditions are imposed on you (whether by court order,
+       agreement or otherwise) that contradict the conditions of this
+       License, they do not excuse you from the conditions of this
+       License. If you cannot distribute so as to satisfy simultaneously
+       your obligations under this License and any other pertinent
+       obligations, then as a consequence you may not distribute the
+       Program at all. For example, if a patent license would not permit
+       royalty-free redistribution of the Program by all those who
+       receive copies directly or indirectly through you, then the only
+       way you could satisfy both it and this License would be to refrain
+       entirely from distribution of the Program.
+
+       If any portion of this section is held invalid or unenforceable
+       under any particular circumstance, the balance of the section is
+       intended to apply and the section as a whole is intended to apply
+       in other circumstances.
+
+       It is not the purpose of this section to induce you to infringe
+       any patents or other property right claims or to contest validity
+       of any such claims; this section has the sole purpose of
+       protecting the integrity of the free software distribution system,
+       which is implemented by public license practices. Many people have
+       made generous contributions to the wide range of software
+       distributed through that system in reliance on consistent
+       application of that system; it is up to the author/donor to decide
+       if he or she is willing to distribute software through any other
+       system and a licensee cannot impose that choice.
+       This section is intended to make thoroughly clear what is believed
+       to be a consequence of the rest of this License.
+
+    8. If the distribution and/or use of the Program is restricted in
+       certain countries either by patents or by copyrighted interfaces,
+       the original copyright holder who places the Program under this
+       License may add an explicit geographical distribution limitation
+       excluding those countries, so that distribution is permitted only
+       in or among countries not thus excluded. In such case, this
+       License incorporates the limitation as if written in the body of
+       this License.
+
+    9. The Free Software Foundation may publish revised and/or new
+       versions of the General Public License from time to time. Such new
+       versions will be similar in spirit to the present version, but may
+       differ in detail to address new problems or concerns.
+
+       Each version is given a distinguishing version number. If the
+       Program specifies a version number of this License which applies
+       to it and ``any later version'', you have the option of following
+       the terms and conditions either of that version or of any later
+       version published by the Free Software Foundation. If the Program
+       does not specify a version number of this License, you may choose
+       any version ever published by the Free Software Foundation.
+
+   10. If you wish to incorporate parts of the Program into other free
+       programs whose distribution conditions are different, write to the
+       author to ask for permission. For software which is copyrighted by
+       the Free Software Foundation, write to the Free Software
+       Foundation; we sometimes make exceptions for this. Our decision
+       will be guided by the two goals of preserving the free status of
+       all derivatives of our free software and of promoting the sharing
+       and reuse of software generally.
+
+                                NO WARRANTY
+
+   11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO
+       WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE
+       LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS
+       AND/OR OTHER PARTIES PROVIDE THE PROGRAM ``AS IS'' WITHOUT
+       WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT
+       NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
+       FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE
+       QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE
+       PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY
+       SERVICING, REPAIR OR CORRECTION.
+
+   12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
+       WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY
+       MODIFY AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE
+       LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL,
+       INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR
+       INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF
+       DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU
+       OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY
+       OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN
+       ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
+
+                        END OF TERMS AND CONDITIONS
+
+               How to Apply These Terms to Your New Programs
+
+   If you develop a new program, and you want it to be of the greatest
+   possible use to the public, the best way to achieve this is to make it
+   free software which everyone can redistribute and change under these
+   terms.
+
+   To do so, attach the following notices to the program. It is safest to
+   attach them to the start of each source file to most effectively
+   convey the exclusion of warranty; and each file should have at least
+   the ``copyright'' line and a pointer to where the full notice is
+   found.
+
+     One line to give the program's name and a brief idea of what it does.
+     Copyright (C) 19yy  Name of author
+
+     This program is free software; you can redistribute it and/or modify
+     it under the terms of the GNU General Public License as published by
+     the Free Software Foundation; either version 2 of the License, or
+     (at your option) any later version.
+
+     This program is distributed in the hope that it will be useful,
+     but WITHOUT ANY WARRANTY; without even the implied warranty of
+     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
+     GNU General Public License for more details.
+
+     You should have received a copy of the GNU General Public License
+     along with this program; if not, write to the Free Software
+     Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
+
+   Also add information on how to contact you by electronic and paper
+   mail.
+
+   If the program is interactive, make it output a short notice like this
+   when it starts in an interactive mode:
+
+     Gnomovision version 69, Copyright (C) 19yy  Name of author
+     Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
+
+     This is free software, and you are welcome to redistribute it
+     under certain conditions; type `show c' for details.
+
+   The hypothetical commands show w and show c should show the
+   appropriate parts of the General Public License. Of course, the
+   commands you use may be called something other than show w and show c;
+   they could even be mouse-clicks or menu items - whatever suits your
+   program.
+
+   You should also get your employer (if you work as a programmer) or
+   your school, if any, to sign a ``copyright disclaimer'' for the
+   program, if necessary. Here is a sample; alter the names:
+
+     Yoyodyne, Inc., hereby disclaims all copyright interest in the program
+     `Gnomovision' (which makes passes at compilers) written by James Hacker.
+
+     Signature of Ty Coon, 1 April 1989
+     Ty Coon, President of Vice
+
+   This General Public License does not permit incorporating your program
+   into proprietary programs. If your program is a subroutine library,
+   you may consider it more useful to permit linking proprietary
+   applications with the library. If this is what you want to do, use the
+   GNU Library General Public License instead of this License.
Index: libs/lensfun/CMakeLists.txt
===================================================================
--- libs/lensfun/CMakeLists.txt	(Revision 0)
+++ libs/lensfun/CMakeLists.txt	(Arbeitskopie)
@@ -0,0 +1,28 @@
+# build lensfun library
+SET(LENSFUN_SRC camera.cpp database.cpp lens.cpp 
+                mount.cpp lensfunprv.h cpuid.cpp 
+                mod-color-sse2.cpp mod-color.cpp 
+                mod-coord-sse.cpp mod-coord.cpp
+                mod-subpix.cpp modifier.cpp auxfun.cpp
+                ../../include/lensfun/lensfun.h.in)
+IF(WIN32)
+  LIST(APPEND LENSFUN_SRC windows/auxfun.cpp)
+ENDIF()
+
+IF(BUILD_STATIC)
+  ADD_LIBRARY(lensfun STATIC ${LENSFUN_SRC})
+ELSE()
+  ADD_LIBRARY(lensfun SHARED ${LENSFUN_SRC})
+  SET_TARGET_PROPERTIES(lensfun PROPERTIES COMPILE_FLAGS -DCONF_SYMBOL_VISIBILITY)
+ENDIF()
+SET_TARGET_PROPERTIES(lensfun PROPERTIES VERSION &quot;${VERSION_MAJOR}.${VERSION_MINOR}).${VERSION_MICRO}.${VERSION_BUGFIX}&quot;)  
+
+IF(NOT HAVE_REGEX_H)
+  TARGET_LINK_LIBRARIES(lensfun tre_regex)
+ENDIF()
+TARGET_LINK_LIBRARIES(lensfun ${GLIB_LIBRARY})
+
+INSTALL(TARGETS lensfun 
+        RUNTIME DESTINATION ${BINDIR}
+        LIBRARY DESTINATION ${LIBDIR}
+        ARCHIVE DESTINATION ${LIBDIR})
Index: libs/regex/CMakeLists.txt
===================================================================
--- libs/regex/CMakeLists.txt	(Revision 0)
+++ libs/regex/CMakeLists.txt	(Arbeitskopie)
@@ -0,0 +1,9 @@
+# build regex library
+IF(NOT HAVE_REGEX_H)
+FILE(GLOB REGEX_SRC *.c *.h)
+LIST(APPEND REGEX_SRC ../../include/regex/regex.h)
+ADD_LIBRARY(tre_regex STATIC ${REGEX_SRC})
+SET_TARGET_PROPERTIES(tre_regex PROPERTIES COMPILE_FLAGS &quot;-DHAVE_SYS_TYPES_H -DTRE_REGEX_T_FIELD=value -DTRE_VERSION=\\\&quot;0.8.0\\\&quot; -Dinline=_inline&quot;)
+SET_TARGET_PROPERTIES(tre_regex PROPERTIES VERSION &quot;${VERSION_MAJOR}.${VERSION_MINOR}).${VERSION_MICRO}.${VERSION_BUGFIX}&quot;)  
+INSTALL(TARGETS tre_regex ARCHIVE DESTINATION ${LIBDIR})
+ENDIF()
Index: tests/CMakeLists.txt
===================================================================
--- tests/CMakeLists.txt	(Revision 0)
+++ tests/CMakeLists.txt	(Arbeitskopie)
@@ -0,0 +1,23 @@
+IF(WIN32)
+  SET(COMMON_LIBS getopt)
+ENDIF()
+
+ADD_EXECUTABLE(example example/example.c)
+TARGET_LINK_LIBRARIES(example lensfun ${COMMON_LIBS})
+
+ADD_EXECUTABLE(tfun tfun/tfun.cpp)
+TARGET_LINK_LIBRARIES(tfun lensfun ${COMMON_LIBS})
+
+ADD_EXECUTABLE(trwxml trwxml/trwxml.cpp)
+TARGET_LINK_LIBRARIES(trwxml lensfun ${COMMON_LIBS})
+
+INSTALL(TARGETS example tfun trwxml DESTINATION ${BINDIR})
+
+IF(BUILD_AUXFUN)
+ADD_EXECUTABLE(tmod tmod/tmod.cpp)
+TARGET_LINK_LIBRARIES(tmod lensfun auxfun ${COMMON_LIBS} ${PNG_LIBRARY} ${ZLIB_LIBRARY})
+INSTALL(TARGETS tmod DESTINATION ${BINDIR})
+ENDIF()
+
+
+
</code>
        <close_date>1329405804</close_date>
        <history id='12759'>
            <field_name>details</field_name>
            <old_value>The patch implements a CMake based build system (alternatively to Python based).

Assuming you are in the lensfun folder: first create folder where to build:
cd ..
mkdir build_lensfun
Now you can start cmake
cmake ../lensfun
Then
make
make install

You can tweak by adding the following options (in caps is the default
option):
-DBUILD_STATIC=OFF|on  build static or shared lib
-DBUILD_TESTS=off|ON  build also the test programs
-DBUILD_AUXFUN=OFF|on  build also the auxfun lib and the tmod test program
-DBUILD_FOR_SSE=OFF|on  build with SSE optimisation
-DBUILD_FOR_SSE2=OFF|on build with SSE2 optimisaiton
-DBUILD_DOC=OFF|on  build documentation

You can also build packages with cmake:
Add -DCPACK_BINARY_DEB:BOOL=ON or -DCPACK_BINARY_RPM:BOOL=ON to the
command line and then &quot;make package&quot;. (But this is not extensively tested.)
</old_value>
            <mod_by>61037</mod_by>
            <date>1320085852</date>
        </history>
        <history id='12801'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61037</mod_by>
            <date>1321080964</date>
        </history>
        <history id='12802'>
            <field_name>details</field_name>
            <old_value>Updated patch to compile on Mac OS</old_value>
            <mod_by>61037</mod_by>
            <date>1321080988</date>
        </history>
        <history id='12935'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329405804</date>
        </history>
        <history id='12936'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329405804</date>
        </history>
    </patch>
    <patch id='3386'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1354573235</open_date>
        <summary>Tutorial improvements</summary>
        <code>Index: docs/lens-calibration/lens-distortion.html
===================================================================
--- docs/lens-calibration/lens-distortion.html	(revision 196)
+++ docs/lens-calibration/lens-distortion.html	(working copy)
@@ -16,7 +16,7 @@
 which is a fourth-order polynomial:
 &lt;/p&gt;
 
-&lt;pre&gt;Ru = a * Rd^4 + b * Rd^3 + c * Rd + Rd&lt;/pre&gt;
+&lt;pre&gt;Ru = a * Rd^4 + b * Rd^3 + c * Rd^2 + Rd&lt;/pre&gt;
 
 &lt;p&gt;(here Rd is the radius of the distorted pixel, Ru is the radius of the undistorted
 pixel). Another useful model is the &quot;poly3&quot; model, which is a simplified 3rd order
@@ -32,19 +32,20 @@
 3rd-order polynomial).
 &lt;/p&gt;
 
-&lt;p&gt;As Pentax 12-24 is a very linear lens with very little distortion (for its wide angle),
+&lt;p&gt;As Pentax 1224 is a very linear lens with very little distortion (for its wide angle),
 we'll use the poly3 model here. Computing the ptlens model coefficients is almost as
 simple, you'll just have to click more checkboxes in Hugin :)
 &lt;/p&gt;
 
 &lt;p&gt;So we now will run Hugin and load several images we made at one focal length
-(three to be precise). Now switch to the &quot;Control points&quot; page, select image 0
-on left, image 1 on right and make at least 10 quality control points. Try to place
-points in high-contrast places like corners and edges. Use only &quot;normal&quot; control
-points, don't mark horizontal and vertical lines as we aren't going to make
-a panorama anyway. Try to pick points spreaded around the whole image, and don't
-forget to put points in at least two corners of the shot. Here's a example of
-how a good distribution of control points looks:
+(three to be precise) at a distance of at least 8 metres. Now switch to the
+&quot;Control points&quot; page, select image 0 on left, image 1 on right and make at
+least 10 quality control points. Try to place points in high-contrast places
+like corners and edges. Use only &quot;normal&quot; control points, don't mark horizontal
+and vertical lines as we aren't going to make a panorama anyway. Try to pick
+points spreaded around the whole image, and don't forget to put points in at
+least two corners of the shot. Here's a example of how a good distribution of
+control points looks:
 &lt;/p&gt;
 
 &lt;img src=&quot;dist-hugin-controlpoints.jpg&quot; /&gt;
@@ -78,7 +79,7 @@
 
 &lt;p&gt;Now you can go to the &quot;Camera and lens&quot; page and collect the computed &quot;b&quot; (and,
 possibly, &quot;a&quot; and &quot;c&quot; if you need the ptlens model) parameters. In my case &quot;b&quot; was
--0.01919, so I can start filling calibration data for my lens:
+0.01919, so I can start filling calibration data for my lens:
 &lt;/p&gt;
 
 &lt;pre&gt;
Index: docs/lens-calibration/lens-vignetting.html
===================================================================
--- docs/lens-calibration/lens-vignetting.html	(revision 196)
+++ docs/lens-calibration/lens-vignetting.html	(working copy)
@@ -12,9 +12,15 @@
 &lt;p&gt;Creating a vignetting model is a &lt;b&gt;very&lt;/b&gt; tedious task. The problem is that
 vignetting depends not only on the focal length, like TCA and distortion.
 It also depends on aperture and distance to subject. This makes the number
-of test shots required for a good vignetting model grow exponentially.
+of test shots required for a good vignetting model grow exponentially.  The
+TIFFs used must be in the sensor's linear RGB colour space.  For example, if
+you use dcraw, call it like this:
 &lt;/p&gt;
 
+&lt;pre&gt;
+dcraw -4 -o 0 -M myimage.RAW
+&lt;/pre&gt;
+
 &lt;p&gt;Hugin uses the following equation for modelling lens vignetting:
 &lt;/p&gt;
 
Index: docs/lens-calibration/lens-calibration.html
===================================================================
--- docs/lens-calibration/lens-calibration.html	(revision 196)
+++ docs/lens-calibration/lens-calibration.html	(working copy)
@@ -10,13 +10,13 @@
 
 &lt;p&gt;Often I'm asked how to add new lenses to the databases, and how to evaluate the
 distortion, tca and vignetting lens parameters for a particular lens.
-A few years ago I had no answer to these questions - there was some commercial
+A few years ago I had no answer to these questions  there was some commercial
 software available which could compute some of these parameters, but I had no
 access to it so I had no idea what it can and what can't do.
 &lt;/p&gt;
 
 &lt;p&gt;But in the later years the Hugin open-source program have evolved, so now it
-covers most of the functionality that lensfun can use. In fact, it was a oncoming
+covers most of the functionality that lensfun can use. In fact, it was an oncoming
 traffic, as lensfun was also modified to be more compatible with Hugin models.
 So today it is possible to create a complete lens database entry using just
 Hugin and the tools which are part of the Hugin package.
@@ -70,15 +70,22 @@
 model of its distortions and fill them in the database. For this we'll need a few test
 shots made with the lens you're trying to model (if it is a zoom lens, make several
 series of shots at several intermediate focal lengths including the extremes). Also,
-you will need Hugin - the best tool for automatic dealing with image distortions I know.
+you will need Hugin  the best tool for automatic dealing with image distortions I know.
 In fact, Hugin will do most of the calibration work for us; our task is to feed the
 correct data and click the correct buttons :)
 &lt;/p&gt;
 
+&lt;p&gt;There exists also a
+shorter &lt;a href=&quot;http://wilson.homeunix.com/lens_calibration_tutorial/&quot;&gt;tutorial
+for LensFun calibration&lt;/a&gt;.  It is not as comprehensive regarding the
+theoretical background.  But it includes a free command-line program that
+automates most of what is explained here.&lt;/p&gt;
+
 &lt;p&gt;In my case I've used the Samsung GX20 body (crop factor 1.5, 14 megapixels).
-I made three panoramic test shots (turning 5-10 degrees after every shot) at focal
+I made three panoramic test shots (turning 510 degrees after every shot) at focal
 lengths of 12, 15, 18, 21 and 24 mm, thus in the end I've got 15 test shots.
-All raw files were developed to 8-bit tiffs.
+All raw files were developed to TIFFs.  For TCA and vignetting calibration,
+these TIFFs must be in the sensor's linear RGB colour space.
 &lt;/p&gt;
 
 &lt;p&gt;When making test shots for computing distortion, choose the aperture that makes
@@ -94,7 +101,7 @@
 
 &lt;p&gt;For example, if a model is made with a crop factor of 1.0, it can be used with
 shots made with another camera with a crop factor of 1.5, but lensfun will have
-to scale the coordinates accordingly. On the other hand, if model was made
+to scale the coordinates accordingly. On the other hand, if the model was made
 for a crop factor of 1.5, it is not a very good idea to use this model for shots
 made with another camera with a crop factor of, say, 1.1, because the math model
 was verified only for the smaller portion of the image in the center. However,
Index: docs/lens-calibration/lens-tca.html
===================================================================
--- docs/lens-calibration/lens-tca.html	(revision 196)
+++ docs/lens-calibration/lens-tca.html	(working copy)
@@ -32,11 +32,17 @@
 This tool is called tca_correct.
 &lt;/p&gt;
 
-&lt;p&gt;So, you just take a sample image (make sure it has a lot of high-contrast objects
-on it, for example you could make a photo of a newspaper or something like that).
-It would be better to use a flash here.
+&lt;p&gt;So, you just take a sample image at a distance of at least 8 metres (make
+sure it has a lot of high-contrast objects on it, for example you could make a
+photo of a white building with dark windows or something like that).  Then,
+generate a TIFF with the sensor's original linear RGB colour space.  For
+example, if you use dcraw, call it like this:
 &lt;/p&gt;
 
+&lt;pre&gt;
+dcraw -4 -o 0 -M myimage.RAW
+&lt;/pre&gt;
+
 &lt;p&gt;Now just run tca_correct on it like this:
 &lt;/p&gt;
 
</code>
        <close_date>1358450583</close_date>
        <history id='13663'>
            <field_name>details</field_name>
            <old_value>I made substantial improvements to the tutorial.  In particular, I pointed out that the TCA and vignetting calibration must be done on linear RGB values, with no colour space transform applied.  Additionally, I dared to add a link to my own tutorial because I think its automation script lowers the threshold for contributingn calibration data.</old_value>
            <mod_by>2378</mod_by>
            <date>1354573282</date>
        </history>
        <history id='13664'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1354573282</date>
        </history>
        <history id='13846'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1358450583</date>
        </history>
        <history id='13847'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1358450583</date>
        </history>
        <history id='13848'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1358450583</date>
        </history>
    </patch>
    <patch id='3244'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61316' name='bmbroom'/>
        <assigned_to id='100' name='none'/>
        <open_date>1324148338</open_date>
        <summary>Patch for additional Pentax K mount lenses</summary>
        <code>*** /usr/share/lensfun/slr-pentax.xml	2011-10-23 16:26:07.000000000 -0500
--- .local/share/lensfun/slr-pentax.xml	2011-12-06 23:08:58.000000000 -0600
***************
*** 272,275 ****
--- 272,435 ----
          &lt;/calibration&gt;
      &lt;/lens&gt;
  
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC PENTAX DA 40mm F/2.8 Limited&lt;/model&gt;
+         &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;40&quot; k1=&quot;-0.00384&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;40&quot; br=&quot;-0.0000230&quot; vr=&quot;1.0001421&quot; bb=&quot;0.0000150&quot; vb=&quot;0.9999150&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;40&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.17248&quot; k2=&quot;0.21247&quot; k3=&quot;-0.13119&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC PENTAX K 30mm F/2.8&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;30&quot; k1=&quot;-0.00537&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;30&quot; br=&quot;0.0000083&quot; vr=&quot;1.0002&quot; bb=&quot;0.00008&quot; vb=&quot;0.99976&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;30&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.36804&quot; k2=&quot;0.318&quot; k3=&quot;-0.18433&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;Takumar 135mm F/2.5 Bayonet&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;135&quot; k1=&quot;0.00185&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;135&quot; br=&quot;0.0000400&quot; vr=&quot;0.999887&quot; bb=&quot;-0.00012&quot; vb=&quot;1.0002&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.40098&quot; k2=&quot;0.46402&quot; k3=&quot;-0.26756&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC PENTAX M 50mm F/2&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;50&quot; k1=&quot;-0.00239&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;0.0000100&quot; vr=&quot;1.00005&quot; bb=&quot;-0.0000100&quot; vb=&quot;0.99974&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.30738&quot; k2=&quot;0.29474&quot; k3=&quot;-0.16389&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC PENTAX M 150mm F/3.5&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;150&quot; k1=&quot;0.00133&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;150&quot; br=&quot;-0.00001&quot; vr=&quot;0.9999&quot; bb=&quot;-0.00005&quot; vb=&quot;1.00007&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;150&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.45436&quot; k2=&quot;0.68491&quot; k3=&quot;-0.48506&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC Pentax DA L 18-55mm f/3.5-5.6&lt;/model&gt;
+         &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.00117&quot; b=&quot;-0.01707&quot; c=&quot;-0.00529&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0&quot; b=&quot;-0.0071&quot; c=&quot;0&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0&quot; b=&quot;0.0002&quot; c=&quot;0&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;42.5&quot; a=&quot;0.00291&quot; b=&quot;-0.00765&quot; c=&quot;0.00808&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;55&quot; a=&quot;0&quot; b=&quot;0.00333&quot; c=&quot;0&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.26538&quot; k2=&quot;0.5437&quot; k3=&quot;-0.51036&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.08271&quot; k2=&quot;0.02282&quot; k3=&quot;-0.04481&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.05666&quot; k2=&quot;0.02789&quot; k3=&quot;-0.01283&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;42.5&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.03675&quot; k2=&quot;0.01041&quot; k3=&quot;-0.00479&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.07077&quot; k2=&quot;0.07738&quot; k3=&quot;-0.04494&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0000246&quot; vr=&quot;1.0008065&quot; bb=&quot;0.00025&quot; vb=&quot;0.9998&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;24&quot; br=&quot;0.00004&quot; vr=&quot;1.00056&quot; bb=&quot;0.00024&quot; vb=&quot;0.9999&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;0.00001&quot; vr=&quot;1.000127&quot; bb=&quot;0.000022&quot; vb=&quot;1.0001&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;42.5&quot; br=&quot;0.000084&quot; vr=&quot;1.0000218&quot; bb=&quot;-0.0000375&quot; vb=&quot;1.0000794&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;55&quot; br=&quot;0.0000165&quot; vr=&quot;0.99999&quot; bb=&quot;-0.0000538&quot; vb=&quot;1.0000742&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Pentax&lt;/maker&gt;
+         &lt;model&gt;SMC PENTAX DA 18-135mm F/3.5-5.6 ED AL [IF] DC WR&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;18&quot; k1=&quot;-0.02615&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0001&quot; vr=&quot;1.00017&quot; bb=&quot;0.00005&quot; vb=&quot;1.00048&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.0932&quot; k2=&quot;0.02721&quot; k3=&quot;-0.0432&quot; /&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;24&quot; k1=&quot;-0.00343&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;24&quot; br=&quot;0.000&quot; vr=&quot;1.00013&quot; bb=&quot;0.0001&quot; vb=&quot;1.000223&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.12861&quot; k2=&quot;0.09689&quot; k3=&quot;-0.05551&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;36&quot; a=&quot;0.01095&quot; b=&quot;-0.01774&quot; c=&quot;0.01645&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;36&quot; br=&quot;-0.000019&quot; vr=&quot;1.00003&quot; bb=&quot;-0.00005&quot; vb=&quot;1.00023&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;36&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.14874&quot; k2=&quot;0.19321&quot; k3=&quot;-0.12757&quot; /&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;53&quot; k1=&quot;0.00971&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;53&quot; br=&quot;0.0000&quot; vr=&quot;0.9999&quot; bb=&quot;-0.00005&quot; vb=&quot;1.0001&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;53&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.05186&quot; k2=&quot;-0.06742&quot; k3=&quot;0.05663&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;68&quot; a=&quot;-0.00032&quot; b=&quot;0.00979&quot; c=&quot;-0.00265&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;68&quot; br=&quot;0.000&quot; vr=&quot;0.9998&quot; bb=&quot;-0.00005&quot; vb=&quot;1.0000&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;68&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.11324&quot; k2=&quot;0.21297&quot; k3=&quot;-0.19382&quot; /&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;100&quot; k1=&quot;0.00771&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;100&quot; br=&quot;-0.00015&quot; vr=&quot;0.99955&quot; bb=&quot;-0.00005&quot; vb=&quot;0.99996&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.10339&quot; k2=&quot;0.24899&quot; k3=&quot;-0.28571&quot; /&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;135&quot; k1=&quot;0.00701&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;135&quot; br=&quot;-0.0004&quot; vr=&quot;0.9994&quot; bb=&quot;-0.00007&quot; vb=&quot;0.99991&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.16882&quot; k2=&quot;0.35516&quot; k3=&quot;-0.28791&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Tamron&lt;/maker&gt;
+         &lt;model&gt;Tamron 35-70mm F/3.5 CF MACRO&lt;/model&gt;
+         &lt;mount&gt;Pentax K&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;35&quot; k1=&quot;-0.00768&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.00004&quot; vr=&quot;1.00018&quot; bb=&quot;0.00007&quot; vb=&quot;0.999835&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.07601&quot; k2=&quot;0.00922&quot; k3=&quot;-0.04755&quot; /&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;40&quot; a=&quot;0.0012&quot; b=&quot;-0.00676&quot; c=&quot;0.00204&quot; /&gt;
+ 	    &lt;tca model=&quot;poly3&quot; focal=&quot;40&quot; br=&quot;-0.00003&quot; vr=&quot;1.00011&quot; bb=&quot;0.000021&quot; vb=&quot;0.999909&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;40&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.11121&quot; k2=&quot;0.08366&quot; k3=&quot;-0.10313&quot; /&gt;
+             &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;-0.00143&quot; b=&quot;0.00459&quot; c=&quot;-0.00465&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;-0.0000088&quot; vr=&quot;1.0000432&quot; bb=&quot;0.0000117&quot; vb=&quot;0.9999312&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.21197&quot; k2=&quot;-0.08795&quot; k3=&quot;0.07518&quot; /&gt;
+             &lt;distortion model=&quot;poly3&quot; focal=&quot;70&quot; k1=&quot;0.00233&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;70&quot; br=&quot;-0.0000079&quot; vr=&quot;1.0000614&quot; bb=&quot;-0.0000911&quot; vb=&quot;1.000192&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.25218&quot; k2=&quot;0.278&quot; k3=&quot;-0.15618&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+     &lt;lens&gt;
+         &lt;maker&gt;Tamron&lt;/maker&gt;
+         &lt;model&gt;Tamron AF70-300mm F/4-5.6 LD MACRO&lt;/model&gt;
+         &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+         &lt;calibration&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;70&quot; a=&quot;0.00168&quot; b=&quot;-0.00649&quot; c=&quot;0.0021&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.05486&quot; k2=&quot;0.04427&quot; k3=&quot;-0.01908&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;70&quot; br=&quot;-0.0000487&quot; vr=&quot;1.0002053&quot; bb=&quot;0.0000352&quot; vb=&quot;0.9998612&quot; /&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;100&quot; a=&quot;-0.00287&quot; b=&quot;0.01075&quot; c=&quot;-0.00716&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.07719&quot; k2=&quot;0.13209&quot; k3=&quot;-0.09579&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;100&quot; br=&quot;-0.0000402&quot; vr=&quot;1.0000889&quot; bb=&quot;0.0000026&quot; vb=&quot;0.9998133&quot; /&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;133&quot; a=&quot;0.00404&quot; b=&quot;-0.0061&quot; c=&quot;0.00845&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;133&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.05807&quot; k2=&quot;0.07773&quot; k3=&quot;-0.05601&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;133&quot; br=&quot;-0.0000210&quot; vr=&quot;0.9999776&quot; bb=&quot;0.0000067&quot; vb=&quot;0.9998469&quot; /&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;180&quot; a=&quot;0.0&quot; b=&quot;0.00388&quot; c=&quot;0.0&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;180&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.03723&quot; k2=&quot;0.02431&quot; k3=&quot;-0.02236&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;180&quot; br=&quot;-0.0000139&quot; vr=&quot;0.9998566&quot; bb=&quot;0.0000295&quot; vb=&quot;0.999785&quot; /&gt;
+ 	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;300&quot; a=&quot;0.0&quot; b=&quot;0.00442&quot; c=&quot;0.0&quot; /&gt;
+             &lt;vignetting model=&quot;pa&quot; focal=&quot;300&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.03866&quot; k2=&quot;0.05966&quot; k3=&quot;-0.04464&quot; /&gt;
+             &lt;tca model=&quot;poly3&quot; focal=&quot;300&quot; br=&quot;-0.000011&quot; vr=&quot;0.9996417&quot; bb=&quot;0.000022&quot; vb=&quot;0.9998125&quot; /&gt;
+         &lt;/calibration&gt;
+     &lt;/lens&gt;
+ 
+ 
  &lt;/lensdatabase&gt;
</code>
        <close_date>1329405782</close_date>
        <history id='12894'>
            <field_name>details</field_name>
            <old_value>Patch is applied to r145</old_value>
            <mod_by>36447</mod_by>
            <date>1328990292</date>
        </history>
        <history id='12925'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329405768</date>
        </history>
        <history id='12926'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329405768</date>
        </history>
        <history id='12929'>
            <field_name>patch_status_id</field_name>
            <old_value>2</old_value>
            <mod_by>36447</mod_by>
            <date>1329405782</date>
        </history>
        <history id='12930'>
            <field_name>close_date</field_name>
            <old_value>1329405768</old_value>
            <mod_by>36447</mod_by>
            <date>1329405782</date>
        </history>
    </patch>
    <patch id='3228'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61037' name='tmodes'/>
        <assigned_to id='100' name='none'/>
        <open_date>1320085580</open_date>
        <summary>Fixes for MSVC</summary>
        <code>Index: libs/auxfun/image.cpp
===================================================================
--- libs/auxfun/image.cpp	(Revision 143)
+++ libs/auxfun/image.cpp	(Arbeitskopie)
@@ -7,8 +7,24 @@
 #include &lt;zlib.h&gt;
 #include &lt;png.h&gt;
 #include &lt;stdlib.h&gt;
+#ifdef _MSC_VER
+#define _USE_MATH_DEFINES 1
+#include &lt;math.h&gt;
+
+float rint(float x)
+{
+     return floor(x + 0.5f);
+}
+
+float trunc (float x)
+{
+  return (((x) &lt; 0) ? ceil((x)) : floor((x)));
+} 
+#define unlink _unlink
+#else
 #include &lt;unistd.h&gt;
 #include &lt;math.h&gt;
+#endif
 
 // A support of 3 gives an overall sharper looking image, but
 // it is a) slower b) gives more sharpening artefacts
Index: libs/lensfun/cpuid.cpp
===================================================================
--- libs/lensfun/cpuid.cpp	(Revision 143)
+++ libs/lensfun/cpuid.cpp	(Arbeitskopie)
@@ -7,6 +7,62 @@
 #include &quot;lensfun.h&quot;
 #include &quot;lensfunprv.h&quot;
 
+#if defined (_MSC_VER)
+#include &lt;intrin.h&gt;
+guint _lf_detect_cpu_features ()
+{
+    static GStaticMutex lock = G_STATIC_MUTEX_INIT;
+    static guint cpuflags = -1;
+
+    g_static_mutex_lock (&amp;lock);
+    if (cpuflags == (guint)-1)
+    {
+        cpuflags = 0;
+
+        int CPUInfo[4] = {-1};
+        __cpuid(CPUInfo,0);
+        /* Are there are standard features? */
+        if (CPUInfo[0]&gt;=1)
+        {
+            /* Get the standard level */
+            __cpuid(CPUInfo,1);
+            if (CPUInfo[3] &amp; 0x800000)
+                cpuflags |= LF_CPU_FLAG_MMX;
+            if (CPUInfo[3] &amp; 0x2000000)
+                cpuflags |= LF_CPU_FLAG_SSE;
+            if (CPUInfo[3] &amp; 0x4000000)
+                cpuflags |= LF_CPU_FLAG_SSE2;
+            if(CPUInfo[3] &amp; 0x8000)
+                cpuflags |= LF_CPU_FLAG_CMOV;
+            if(CPUInfo[2] &amp; 0x1)
+                cpuflags |= LF_CPU_FLAG_SSE3;
+            if (CPUInfo[2] &amp; 0x200)
+                cpuflags |= LF_CPU_FLAG_SSSE3;
+            if (CPUInfo[2] &amp; 0x80000)
+                cpuflags |= LF_CPU_FLAG_SSE4_1;
+            if (CPUInfo[2] &amp; 0x100000)
+                cpuflags |= LF_CPU_FLAG_SSE4_2;
+
+            /* Are there extensions? */
+            __cpuid(CPUInfo, 0x80000000);
+            if(CPUInfo[0]&gt;=1)
+            {
+                /* ask extensions */
+                __cpuid(CPUInfo, 0x80000001);
+                if (CPUInfo[3] &amp; 0x80000000)
+                    cpuflags |= LF_CPU_FLAG_3DNOW;
+                if (CPUInfo[3] &amp; 0x40000000)
+                    cpuflags |= LF_CPU_FLAG_3DNOW_EXT;
+                if (CPUInfo[3] &amp; 0x00400000)
+                    cpuflags |= LF_CPU_FLAG_AMD_ISSE;
+            };
+        };
+    };
+    g_static_mutex_unlock (&amp;lock);
+
+    return cpuflags;
+};
+#else
 #if defined (__i386__) || defined (__x86_64__)
 
 #if defined (__i386__)
@@ -110,3 +166,4 @@
 }
 
 #endif /* __i386__ || __x86_64__ */
+#endif
Index: libs/lensfun/mod-color-sse2.cpp
===================================================================
--- libs/lensfun/mod-color-sse2.cpp	(Revision 143)
+++ libs/lensfun/mod-color-sse2.cpp	(Arbeitskopie)
@@ -11,9 +11,16 @@
 #include &quot;lensfunprv.h&quot;
 #include &lt;emmintrin.h&gt;
 
-static gint _15_bit_epi32[4] __attribute__ ((aligned (16))) =
+#if defined (_MSC_VER)
+#define PREFIX_ALIGN __declspec(align(16)) 
+#define SUFFIX_ALIGN
+#else
+#define PREFIX_ALIGN
+#define SUFFIX_ALIGN __attribute__ ((aligned (16)))
+#endif
+static PREFIX_ALIGN gint _15_bit_epi32[4] SUFFIX_ALIGN =
 { 32768, 32768, 32768, 32768 };
-static guint _16_bit_sign[4] __attribute__ ((aligned (16))) =
+static PREFIX_ALIGN guint _16_bit_sign[4] SUFFIX_ALIGN =
 { 0x80008000, 0x80008000, 0x80008000, 0x80008000 };
 
 void lfExtModifier::ModifyColor_DeVignetting_PA_SSE2 (
@@ -232,7 +239,11 @@
             &amp;pixels [loop_count * 4], comp_role, count);
 }
 
+#if defined (_MSC_VER)
+typedef size_t uintptr_t;
+#else
 typedef __SIZE_TYPE__ uintptr_t;
+#endif
 
 void lfExtModifier::ModifyColor_DeVignetting_PA_Select (
     void *data, float x, float y, lf_u16 *pixels, int comp_role, int count)
Index: libs/lensfun/mod-coord-sse.cpp
===================================================================
--- libs/lensfun/mod-coord-sse.cpp	(Revision 143)
+++ libs/lensfun/mod-coord-sse.cpp	(Arbeitskopie)
@@ -79,7 +79,11 @@
     ModifyCoord_Dist_PTLens (data, &amp;iocoord [loop_count * 2], remain);
 }
 
+#if defined (_MSC_VER)
+typedef size_t uintptr_t;
+#else
 typedef __SIZE_TYPE__ uintptr_t;
+#endif
 
 void lfExtModifier::ModifyCoord_UnDist_PTLens_SSE (void *data, float *iocoord, int count)
 {
Index: tests/tmod/tmod.cpp
===================================================================
--- tests/tmod/tmod.cpp	(Revision 143)
+++ tests/tmod/tmod.cpp	(Arbeitskopie)
@@ -17,6 +17,12 @@
    see main comment to the lfModifier class */
 #define COMBINE_13
 
+#if defined(_MSC_VER)
+#define strcasecmp _stricmp
+#define snprintf _snprintf
+#define strtof (float)strtod
+#endif 
+
 static struct
 {
     const char *Program;
</code>
        <close_date>1329405795</close_date>
        <history id='12758'>
            <field_name>details</field_name>
            <old_value>The patch fixes some issues when compiling with MS Visual C++ compiler.</old_value>
            <mod_by>61037</mod_by>
            <date>1320085789</date>
        </history>
        <history id='12933'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329405795</date>
        </history>
        <history id='12934'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329405795</date>
        </history>
    </patch>
    <patch id='3387'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1354574403</open_date>
        <summary>Add note to developers</summary>
        <code>Index: docs/manual-main.txt
===================================================================
--- docs/manual-main.txt	(revision 196)
+++ docs/manual-main.txt	(working copy)
@@ -445,7 +445,14 @@
 create a lfModifier object using lens data. Using this object the image
 may be modified according to user preferences.
 
+LensFun transformations -- at least those involving TCA and vignetting
+correction -- must be applied to linear RGB data in the sensor's original
+colour space.  This is very important.  If you do e.g. TCA correction on sRGB
+data, the colour fringes are still visible.  And if you do vignetting
+correction after a gamma has been applied, the corners probably will look too
+bright.  So make sure that LensFun comes early enough in your processing chain.
 
+
 @page filldb Filling the database
 
 Earlier or later (usually earlier) you'll find out that your camera/lens is not
</code>
        <close_date>1358450948</close_date>
        <history id='13849'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1358450948</date>
        </history>
        <history id='13850'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1358450948</date>
        </history>
        <history id='13851'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1358450948</date>
        </history>
    </patch>
    <patch id='3403'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1358045161</open_date>
        <summary>IMPORTANT! Fix typo in database.</summary>
        <code>--- lensfun.201/data/db/mil-panasonic.xml	2013-01-13 03:13:05.651966397 +0100
+++ lensfun/data/db/mil-panasonic.xml	2013-01-13 03:13:35.531967076 +0100
@@ -97,7 +97,7 @@
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;0.0116&quot; b=&quot;-0.04802&quot; c=&quot;-0.00435&quot; &gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;0.0116&quot; b=&quot;-0.04802&quot; c=&quot;-0.00435&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
</code>
        <close_date>1358452308</close_date>
        <history id='13855'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1358452308</date>
        </history>
        <history id='13856'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1358452308</date>
        </history>
        <history id='13857'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1358452308</date>
        </history>
    </patch>
    <patch id='3201'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='59944' name='romainht'/>
        <assigned_to id='100' name='none'/>
        <open_date>1312881458</open_date>
        <summary>Lens data for Tokina SZ-X 80-200</summary>
        <code>Index: data/db/slr-tokina.xml
===================================================================
--- data/db/slr-tokina.xml	(revision 137)
+++ data/db/slr-tokina.xml	(copie de travail)
@@ -73,5 +73,22 @@
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;17&quot; a=&quot;0&quot; b=&quot;-0.004083&quot; c=&quot;-0.015672&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;
+	
+    &lt;lens&gt;
+        &lt;maker&gt;Tokina&lt;/maker&gt;
+        &lt;model&gt;Tokina 80-200mm f/4.5-5.6 SZ-X&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;mount&gt;Pentax KAF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;80&quot; a=&quot;-0.01761&quot; b=&quot;0.06433&quot; c=&quot;-0.07566&quot; /&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;110&quot; a=&quot;-0.01579&quot; b=&quot;0.05909&quot; c=&quot;-0.06129&quot; /&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;200&quot; a=&quot;-0.01328&quot; b=&quot;0.04681&quot; c=&quot;-0.03935&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;80&quot; br=&quot;0.0000351&quot; vr=&quot;0.9998083&quot; bb=&quot;-0.0000109&quot; vb=&quot;0.9998991&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;110&quot; br=&quot;-0.0000155&quot; vr=&quot;0.9999253&quot; bb=&quot;-0.0000348&quot; vb=&quot;0.9994977&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;200&quot; br=&quot;-0.0000075&quot; vr=&quot;0.9993965&quot; bb=&quot;-0.0000782&quot; vb=&quot;0.9994524&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
 
 &lt;/lensdatabase&gt;</code>
        <close_date>1329412931</close_date>
        <history id='12937'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329412931</date>
        </history>
        <history id='12938'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329412931</date>
        </history>
    </patch>
    <patch id='3325'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1345889411</open_date>
        <summary>Add Pentax K-30</summary>
        <code>diff -Nurpd lensfun-r173/data/db/slr-pentax.xml lensfun-r173-pentax/data/db/slr-pentax.xml
--- lensfun-r173/data/db/slr-pentax.xml	2012-08-22 18:05:02.943857844 +0200
+++ lensfun-r173-pentax/data/db/slr-pentax.xml	2012-08-25 12:03:57.328491876 +0200
@@ -157,6 +157,15 @@
     &lt;camera&gt;
         &lt;maker&gt;PENTAX&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Pentax&lt;/maker&gt;
+        &lt;model&gt;PENTAX K-30&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;K-30&lt;/model&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;PENTAX&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Pentax&lt;/maker&gt;
         &lt;model&gt;PENTAX K-7&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;K-7&lt;/model&gt;
         &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
</code>
        <close_date>1349283035</close_date>
        <history id='13424'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1349283035</date>
        </history>
        <history id='13425'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1349283035</date>
        </history>
        <history id='13426'>
            <field_name>details</field_name>
            <old_value>Thanks!</old_value>
            <mod_by>36447</mod_by>
            <date>1349283035</date>
        </history>
        <history id='13427'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1349283035</date>
        </history>
    </patch>
    <patch id='3469'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1369711998</open_date>
        <summary>Update list of SIGMA compact cameras.</summary>
        <code>Index: data/db/compact-sigma.xml
===================================================================
--- data/db/compact-sigma.xml	(revision 233)
+++ data/db/compact-sigma.xml	(working copy)
@@ -12,6 +12,15 @@
     &lt;camera&gt;
         &lt;maker&gt;SIGMA&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
+        &lt;model&gt;SIGMA DP1 Merrill&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;DP1 Merrill&lt;/model&gt;
+        &lt;mount&gt;SigmaDP1M&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SIGMA&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;SIGMA DP1S&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;DP1S&lt;/model&gt;
         &lt;mount&gt;SigmaDP1&lt;/mount&gt;
@@ -39,10 +48,37 @@
     &lt;camera&gt;
         &lt;maker&gt;SIGMA&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
+        &lt;model&gt;SIGMA DP2 Merrill&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;DP2 Merrill&lt;/model&gt;
+        &lt;mount&gt;SigmaDP2M&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SIGMA&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;SIGMA DP2S&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;DP2S&lt;/model&gt;
         &lt;mount&gt;SigmaDP2&lt;/mount&gt;
         &lt;cropfactor&gt;1.7&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
+    &lt;camera&gt;
+        &lt;maker&gt;SIGMA&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
+        &lt;model&gt;SIGMA DP2X&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;DP2X&lt;/model&gt;
+        &lt;mount&gt;SigmaDP2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.7&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SIGMA&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sigma&lt;/maker&gt;
+        &lt;model&gt;SIGMA DP3 Merrill&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;DP3 Merrill&lt;/model&gt;
+        &lt;mount&gt;SigmaDP3M&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
 &lt;/lensdatabase&gt;
</code>
        <close_date>1371983599</close_date>
        <history id='14169'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1371983599</date>
        </history>
        <history id='14170'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1371983599</date>
        </history>
        <history id='14171'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1371983599</date>
        </history>
    </patch>
    <patch id='3459'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1368165882</open_date>
        <summary>Add new cameras: Sony NEX-3N, Olympus E-P5 and E-PL6.</summary>
        <code>Index: data/db/mil-sony.xml
===================================================================
--- data/db/mil-sony.xml	(revision 232)
+++ data/db/mil-sony.xml	(working copy)
@@ -43,6 +43,15 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;NEX-3N&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;NEX 3N&lt;/model&gt;
+        &lt;mount&gt;Sony E&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
         &lt;model&gt;NEX-5&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;NEX 5&lt;/model&gt;
         &lt;mount&gt;Sony E&lt;/mount&gt;
Index: data/db/mil-olympus.xml
===================================================================
--- data/db/mil-olympus.xml	(revision 232)
+++ data/db/mil-olympus.xml	(working copy)
@@ -34,6 +34,14 @@
     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;E-P5&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL1&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
@@ -74,6 +82,14 @@
     &lt;camera&gt;
         &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;E-PL6&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PM1&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
</code>
        <close_date>1371983599</close_date>
        <history id='14172'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1371983599</date>
        </history>
        <history id='14173'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1371983599</date>
        </history>
        <history id='14174'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1371983599</date>
        </history>
    </patch>
    <patch id='3257'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61037' name='tmodes'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1330276816</open_date>
        <summary>Fixes memory leak</summary>
        <code>Index: libs/lensfun/database.cpp
===================================================================
--- libs/lensfun/database.cpp	(Revision 151)
+++ libs/lensfun/database.cpp	(Arbeitskopie)
@@ -644,7 +644,9 @@
     lfExtDatabase *This = static_cast&lt;lfExtDatabase *&gt; (this);
 
     /* Temporarily drop numeric format to &quot;C&quot; */
-    char *old_numeric = setlocale (LC_NUMERIC, &quot;C&quot;);
+    char *old_numeric = setlocale (LC_NUMERIC, NULL);
+    old_numeric = strdup(old_numeric);
+    setlocale(LC_NUMERIC,&quot;C&quot;);
 
     /* eek! GPtrArray does not have a method to insert a pointer
      into middle of the array... We have to remove the trailing
@@ -681,6 +683,7 @@
 
     /* Restore numeric format */
     setlocale (LC_NUMERIC, old_numeric);
+    free(old_numeric);
 
     return e;
 }
@@ -730,6 +733,11 @@
                         const lfCamera *const *cameras,
                         const lfLens *const *lenses)
 {
+    /* Temporarily drop numeric format to &quot;C&quot; */
+    char *old_numeric = setlocale (LC_NUMERIC, NULL);
+    old_numeric = strdup(old_numeric);
+    setlocale(LC_NUMERIC,&quot;C&quot;);
+
     int i, j;
     GString *output = g_string_sized_new (1024);
 
@@ -962,6 +970,10 @@
 
     g_string_append (output, &quot;&lt;/lensdatabase&gt;\n&quot;);
 
+    /* Restore numeric format */
+    setlocale (LC_NUMERIC, old_numeric);
+    free(old_numeric);
+
     return g_string_free (output, FALSE);
 }
 
Index: libs/lensfun/lens.cpp
===================================================================
--- libs/lensfun/lens.cpp	(Revision 151)
+++ libs/lensfun/lens.cpp	(Arbeitskopie)
@@ -123,6 +123,8 @@
     _lf_list_free ((void **)CalibDistortion);
     _lf_list_free ((void **)CalibTCA);
     _lf_list_free ((void **)CalibVignetting);
+    _lf_list_free ((void **)CalibCrop);
+    _lf_list_free ((void **)CalibFov);
     if (!--_lf_lens_regex_refs)
         _lf_free_lens_regex ();
 }
@@ -163,6 +165,14 @@
     if (other.CalibVignetting)
         for (int i = 0; other.CalibVignetting [i]; i++)
             AddCalibVignetting (other.CalibVignetting [i]);
+    lf_free (CalibCrop); CalibCrop = NULL;
+    if (other.CalibCrop)
+        for (int i = 0; other.CalibCrop [i]; i++)
+            AddCalibCrop (other.CalibCrop [i]);
+    lf_free (CalibFov); CalibFov = NULL;
+    if (other.CalibFov)
+        for (int i = 0; other.CalibFov [i]; i++)
+            AddCalibFov (other.CalibFov [i]);
 
     return *this;
 }
@@ -188,7 +198,9 @@
     float minf = float (INT_MAX), maxf = float (INT_MIN);
     float mina = float (INT_MAX), maxa = float (INT_MIN);
 
-    char *old_numeric = setlocale (LC_NUMERIC, &quot;C&quot;);
+    char *old_numeric = setlocale (LC_NUMERIC, NULL);
+    old_numeric = strdup(old_numeric);
+    setlocale(LC_NUMERIC,&quot;C&quot;);
 
     if (!MinAperture || !MinFocal)
         _lf_parse_lens_name (Model, minf, maxf, mina, maxa);
@@ -228,6 +240,25 @@
                 if (a &gt; maxa)
                     maxa = a;
             }
+        if (CalibCrop)
+            for (int i=0; CalibCrop [i]; i++)
+            {
+                float f = CalibCrop [i] -&gt;Focal;
+                if (f &lt; minf)
+                    minf = f;
+                if (f &gt; maxf)
+                    maxf = f;
+            }
+        if (CalibFov)
+            for (int i=0; CalibFov [i]; i++)
+            {
+                float f = CalibFov [i] -&gt;Focal;
+                if (f &lt; minf)
+                    minf = f;
+                if (f &gt; maxf)
+                    maxf = f;
+            }
+
     }
 
     if (minf != INT_MAX &amp;&amp; !MinFocal)
@@ -245,6 +276,7 @@
         MaxAperture = MinAperture;
 
     setlocale (LC_NUMERIC, old_numeric);
+    free(old_numeric);
 }
 
 bool lfLens::Check ()
@@ -440,9 +472,9 @@
     static const lfParameter *param_none [] = { NULL };
 
     static const lfParameter param_crop_left = { &quot;left&quot;, -1.0F, 1.0F, 0.0F };
-    static const lfParameter param_crop_right = { &quot;right&quot;, -1.0F, 1.0F, 0.0F };
+    static const lfParameter param_crop_right = { &quot;right&quot;, 0.0F, 2.0F, 0.0F };
     static const lfParameter param_crop_top = { &quot;top&quot;, -1.0F, 1.0F, 0.0F };
-    static const lfParameter param_crop_bottom = { &quot;bottom&quot;, -1.0F, 1.0F, 0.0F };
+    static const lfParameter param_crop_bottom = { &quot;bottom&quot;, 0.0F, 2.0F, 0.0F };
     static const lfParameter *param_crop [] = { &amp;param_crop_left, &amp;param_crop_right, &amp;param_crop_top, &amp;param_crop_bottom, NULL };
 
     switch (mode)
</code>
        <close_date>1330977938</close_date>
        <history id='12979'>
            <field_name>details</field_name>
            <old_value>Fix for limit of crop added</old_value>
            <mod_by>61037</mod_by>
            <date>1330733667</date>
        </history>
        <history id='12980'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61037</mod_by>
            <date>1330733668</date>
        </history>
        <history id='12981'>
            <field_name>details</field_name>
            <old_value>Some more modification: Also change numeric locale when **saving** to database. </old_value>
            <mod_by>61037</mod_by>
            <date>1330768820</date>
        </history>
        <history id='12982'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61037</mod_by>
            <date>1330768821</date>
        </history>
        <history id='12969'>
            <field_name>details</field_name>
            <old_value>Improved the patch applied as rev 146.
Correctly handle the operator= and fixes the destructor to prevent memory leaks.</old_value>
            <mod_by>61037</mod_by>
            <date>1330276976</date>
        </history>
        <history id='12975'>
            <field_name>details</field_name>
            <old_value>Updated patch to correctly set locale. The existing code did not correctly restore the old locale (at least on windows). The modified code works on windows.</old_value>
            <mod_by>61037</mod_by>
            <date>1330541540</date>
        </history>
        <history id='12976'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61037</mod_by>
            <date>1330541541</date>
        </history>
        <history id='13000'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1330859367</date>
        </history>
        <history id='13001'>
            <field_name>details</field_name>
            <old_value>Thanks for your commits! Unfortunately I cannot connect to berlios SVN server at the moment. I will apply the patches as soon as it's working again.</old_value>
            <mod_by>36447</mod_by>
            <date>1330859367</date>
        </history>
        <history id='13002'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1330977930</date>
        </history>
        <history id='13003'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1330977930</date>
        </history>
        <history id='13004'>
            <field_name>patch_status_id</field_name>
            <old_value>2</old_value>
            <mod_by>36447</mod_by>
            <date>1330977938</date>
        </history>
        <history id='13005'>
            <field_name>close_date</field_name>
            <old_value>1330977930</old_value>
            <mod_by>36447</mod_by>
            <date>1330977938</date>
        </history>
        <history id='13006'>
            <field_name>details</field_name>
            <old_value>Thanks for committing.
Info: Hugin has now the ability to read and write from/to lensfun library. Also the calibrate_lens_gui can write to the library. So it's easier to calibrate the lenses.</old_value>
            <mod_by>61037</mod_by>
            <date>1331050785</date>
        </history>
    </patch>
    <patch id='3301'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='12744' name='rdieter'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1340973544</open_date>
        <summary>cmake pkgconfig support (install a usable lensfun.pc)</summary>
        <code>diff -up lensfun-0.2.6/libs/lensfun/CMakeLists.txt.cmake_pkgconfig lensfun-0.2.6/libs/lensfun/CMakeLists.txt
--- lensfun-0.2.6/libs/lensfun/CMakeLists.txt.cmake_pkgconfig	2012-02-12 05:19:39.000000000 -0600
+++ lensfun-0.2.6/libs/lensfun/CMakeLists.txt	2012-06-28 10:05:08.767440482 -0500
@@ -26,3 +26,8 @@ INSTALL(TARGETS lensfun
         RUNTIME DESTINATION ${BINDIR}
         LIBRARY DESTINATION ${LIBDIR}
         ARCHIVE DESTINATION ${LIBDIR})
+
+# pkgconfig support
+CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/lensfun.pc.cmake ${CMAKE_CURRENT_BINARY_DIR}/lensfun.pc @ONLY)
+INSTALL( FILES ${CMAKE_CURRENT_BINARY_DIR}/lensfun.pc DESTINATION ${LIBDIR}/pkgconfig )
+
diff -up lensfun-0.2.6/libs/lensfun/lensfun.pc.cmake.cmake_pkgconfig lensfun-0.2.6/libs/lensfun/lensfun.pc.cmake
--- lensfun-0.2.6/libs/lensfun/lensfun.pc.cmake.cmake_pkgconfig	2012-06-28 10:05:08.767440482 -0500
+++ lensfun-0.2.6/libs/lensfun/lensfun.pc.cmake	2012-06-28 10:37:50.337917472 -0500
@@ -0,0 +1,13 @@
+prefix=@CMAKE_INSTALL_PREFIX@
+bindir=@CMAKE_INSTALL_PREFIX@/@BINDIR@
+libdir=@CMAKE_INSTALL_PREFIX@/@LIBDIR@
+includedir=@CMAKE_INSTALL_PREFIX@/@INCLUDEDIR@
+datadir=@CMAKE_INSTALL_PREFIX@/@DATADIR@
+docdir=@CMAKE_INSTALL_PREFIX@/@DOCDIR@
+
+Name: lensfun
+Description: A photographic lens database and access library
+Version: @VERSION_MAJOR@.@VERSION_MINOR@.@VERSION_MICRO@.@VERSION_BUGFIX@
+Requires.private: glib-2.0
+Libs: -L${libdir} -llensfun
+Cflags: -I${includedir}
</code>
        <close_date>1342360717</close_date>
        <history id='13277'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1342360717</date>
        </history>
        <history id='13278'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1342360717</date>
        </history>
        <history id='13279'>
            <field_name>details</field_name>
            <old_value>Thanks! Both patches are applied to SVN.</old_value>
            <mod_by>36447</mod_by>
            <date>1342360717</date>
        </history>
        <history id='13280'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1342360717</date>
        </history>
    </patch>
    <patch id='3200'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='59944' name='romainht'/>
        <assigned_to id='100' name='none'/>
        <open_date>1312881234</open_date>
        <summary>Lens data for Pentax DA 55-300</summary>
        <code>Index: db/slr-pentax.xml
===================================================================
--- db/slr-pentax.xml	(revision 137)
+++ db/slr-pentax.xml	(copie de travail)
@@ -248,6 +248,27 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
+	&lt;lens&gt;
+        &lt;maker&gt;Pentax&lt;/maker&gt;
+        &lt;model&gt;SMC PENTAX DA 55-300mm F/4-5.8 ED&lt;/model&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;55&quot; a=&quot;-0.00518&quot; b=&quot;0.01937&quot; c=&quot;-0.02824&quot; /&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;70&quot; a=&quot;-0.00835&quot; b=&quot;0.03291&quot; c=&quot;-0.03127&quot; /&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;100&quot; a=&quot;-0.00192&quot; b=&quot;0.0237&quot; c=&quot;-0.02643&quot; /&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;135&quot; a=&quot;0.00299&quot; b=&quot;0.00061&quot; c=&quot;0.01078&quot; /&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;210&quot; a=&quot;-0.00376&quot; b=&quot;0.02149&quot; c=&quot;-0.01102&quot; /&gt;
+			&lt;distortion model=&quot;ptlens&quot; focal=&quot;300&quot; a=&quot;0.00076&quot; b=&quot;0.00759&quot; c=&quot;-0.00349&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;55&quot; br=&quot;0.0000246&quot; vr=&quot;1.0000974&quot; bb=&quot;-0.0001380&quot; vb=&quot;1.0004061&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;70&quot; br=&quot;0.00003&quot; vr=&quot;0.99993&quot; bb=&quot;-0.00013&quot; vb=&quot;1.00017&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;100&quot; br=&quot;0.0000716&quot; vr=&quot;0.9996644&quot; bb=&quot;-0.0002294&quot; vb=&quot;1.0001925&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;135&quot; br=&quot;0.0000352&quot; vr=&quot;0.9996857&quot; bb=&quot;-0.0001704&quot; vb=&quot;0.9999750&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;210&quot; br=&quot;0.0000202&quot; vr=&quot;0.9993629&quot; bb=&quot;-0.0000804&quot; vb=&quot;0.9992342&quot; /&gt;
+			&lt;tca model=&quot;poly3&quot; focal=&quot;300&quot; br=&quot;-0.0002627&quot; vr=&quot;0.9998441&quot; bb=&quot;-0.0002958&quot; vb=&quot;0.9995492&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
     &lt;lens&gt;
         &lt;maker&gt;Pentax&lt;/maker&gt;
         &lt;model&gt;SMC PENTAX DA 12-24mm F/4 ED AL IF&lt;/model&gt;
</code>
        <close_date>1329412957</close_date>
        <history id='12939'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1329412957</date>
        </history>
        <history id='12940'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1329412957</date>
        </history>
    </patch>
    <patch id='2928'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='54330' name='spoilerhead'/>
        <assigned_to id='100' name='none'/>
        <open_date>1265908925</open_date>
        <summary>Path for Canon EF-S 55-250 IS 4-5.6 lens</summary>
        <code>diff -upr org/slr-canon.xml fixed/slr-canon.xml
--- org/slr-canon.xml	2010-01-25 12:02:28.000000000 +0100
+++ fixed/slr-canon.xml	2010-02-11 18:11:23.000000000 +0100
@@ -980,6 +980,13 @@
         &lt;model&gt;Canon EF-S 55-250 f/4-5.6 IS&lt;/model&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+        &lt;calibration&gt; &lt;!-- data gathered by Spoilerhead 2010 &lt;spoilerhead@gmail.com&gt; using hugin--&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;55&quot; a=&quot;-0.000303056&quot; b=&quot;-0.00581537&quot; c=&quot;-0.00237143&quot; /&gt; &lt;!-- 15 shots--&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;70&quot; a=&quot;-0.000520255&quot; b=&quot;2.86405e-05&quot; c=&quot;0.00286934&quot; /&gt; &lt;!-- 21 shots --&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;100&quot; a=&quot;0.00268582&quot; b=&quot;-0.00578304&quot; c=&quot;0.00718748&quot; /&gt; &lt;!-- 17--&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;135&quot; a=&quot;0.00120309&quot; b=&quot;0.00979416&quot; c=&quot;-0.00868762&quot; /&gt; &lt;!-- 15 --&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;250&quot; a=&quot;-0.00226069&quot; b=&quot;0.0111545&quot; c=&quot;-0.00536676&quot; /&gt;   &lt;!-- 18 --&gt;         
+        &lt;/calibration&gt;
     &lt;/lens&gt;
 
 &lt;/lensdatabase&gt;

</code>
        <close_date>1294174765</close_date>
        <history id='11587'>
            <field_name>details</field_name>
            <old_value>still missing 200mm
need to create better testshots for that</old_value>
            <mod_by>54330</mod_by>
            <date>1265908978</date>
        </history>
        <history id='12353'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1294174765</date>
        </history>
        <history id='12354'>
            <field_name>details</field_name>
            <old_value>Integrated into SVN, thanks.</old_value>
            <mod_by>12372</mod_by>
            <date>1294174765</date>
        </history>
        <history id='12355'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1294174765</date>
        </history>
    </patch>
    <patch id='3047'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='57223' name='edgomez'/>
        <assigned_to id='100' name='none'/>
        <open_date>1281562685</open_date>
        <summary>Data for Nikkor 50mm F/1.8 D and Nikkor 18-105mm F/3.5-5.6 </summary>
        <code>&lt;lensdatabase&gt;

  &lt;lens&gt;
    &lt;maker&gt;Nikon&lt;/maker&gt;
    &lt;model&gt;Nikkor 50mm f/1.8D&lt;/model&gt;
    &lt;mount&gt;Nikon F AF&lt;/mount&gt;
    &lt;focal&gt;50&lt;/focal&gt;
    &lt;aperture&gt;1.8-22&lt;/aperture&gt;
    &lt;type&gt;rectilinear&lt;/type&gt;
    &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
    &lt;calibration&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;50.0&quot; a=&quot;-0.00255&quot; b=&quot;0.00841&quot; c=&quot;-0.01107&quot; /&gt;
    &lt;/calibration&gt;
  &lt;/lens&gt;

  &lt;lens&gt;
    &lt;maker&gt;Nikon&lt;/maker&gt;
    &lt;model&gt;Nikkor 18-105mm f/3.5-5.6G ED&lt;/model&gt;
    &lt;mount&gt;Nikon F AF&lt;/mount&gt;
    &lt;focal&gt;18-105&lt;/focal&gt;
    &lt;aperture&gt;3.5-22&lt;/aperture&gt;
    &lt;type&gt;rectilinear&lt;/type&gt;
    &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
    &lt;calibration&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;18.0&quot; a=&quot;0.00529&quot; b=&quot;-0.02091&quot; c=&quot;-0.01697&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;25.0&quot; a=&quot;0.01542&quot; b=&quot;-0.03457&quot; c=&quot;0.02371&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;35.0&quot; a=&quot;0.00716&quot; b=&quot;-0.00354&quot; c=&quot;0.00352&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;50.0&quot; a=&quot;0.00477&quot; b=&quot;-0.00182&quot; c=&quot;0.00982&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;75.0&quot; a=&quot;-0.0024&quot; b=&quot;0.02231&quot; c=&quot;-0.01516&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;105.0&quot; a=&quot;0.00392&quot; b=&quot;-0.00253&quot; c=&quot;0.01061&quot; /&gt;
    &lt;/calibration&gt;
  &lt;/lens&gt;

&lt;/lensdatabase&gt;
</code>
        <close_date>1294175057</close_date>
        <history id='12356'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>12372</mod_by>
            <date>1294175057</date>
        </history>
        <history id='12357'>
            <field_name>details</field_name>
            <old_value>Submitted to SVN, thank you!</old_value>
            <mod_by>12372</mod_by>
            <date>1294175057</date>
        </history>
        <history id='12358'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>12372</mod_by>
            <date>1294175057</date>
        </history>
    </patch>
    <patch id='3378'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1353824472</open_date>
        <summary>Fix naming of Olympus MIL cameras to make search work.</summary>
        <code>--- lensfun.191/data/db/mil-olympus.xml	2012-11-25 06:30:59.455067323 +0100
+++ lensfun/data/db/mil-olympus.xml	2012-11-25 06:56:50.643015639 +0100
@@ -8,7 +8,7 @@
     &lt;/mount&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-P1&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
@@ -16,7 +16,7 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-P2&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
@@ -24,7 +24,7 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-P3&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
@@ -32,7 +32,7 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL1&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
@@ -40,7 +40,7 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL1s&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
@@ -48,7 +48,7 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL2&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
@@ -56,7 +56,7 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL3&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
@@ -64,7 +64,7 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PL5&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
@@ -72,7 +72,7 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PM1&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
@@ -80,7 +80,7 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-PM2&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
@@ -88,7 +88,7 @@
     &lt;/camera&gt;
 
     &lt;camera&gt;
-        &lt;maker&gt;OLYMPUS CORPORATION&lt;/maker&gt;
+        &lt;maker&gt;OLYMPUS IMAGING CORP.&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;E-M5&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
</code>
        <close_date>1354355543</close_date>
        <history id='13650'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1354355543</date>
        </history>
        <history id='13651'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1354355543</date>
        </history>
        <history id='13652'>
            <field_name>details</field_name>
            <old_value>Thanks a lot! Patch is applied.</old_value>
            <mod_by>36447</mod_by>
            <date>1354355543</date>
        </history>
        <history id='13653'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1354355543</date>
        </history>
    </patch>
    <patch id='3363'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='62884' name='bentgm'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1352579094</open_date>
        <summary>Lens data for Sony tele-zoom 55-200</summary>
        <code>    &lt;lens&gt;
        &lt;maker&gt;Sony&lt;/maker&gt;
        &lt;model&gt;Sony AF DT 55-200mm F4-5.6 SAM&lt;/model&gt;
	&lt;mount&gt;Sony Alpha&lt;/mount&gt;
	&lt;type&gt;rectilinear&lt;/type&gt;
	&lt;focal min=&quot;55&quot; max=&quot;200&quot; /&gt;
        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;55&quot; k1=&quot;-0.00346&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;70&quot; k1=&quot;0.00586&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;100&quot; k1=&quot;0.01073&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;135&quot; k1=&quot;0.00952&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;200&quot; k1=&quot;0.00871&quot; /&gt;
	    &lt;tca model=&quot;poly3&quot; focal=&quot;55&quot; br=&quot;0.0000101&quot; vr=&quot;1.0001643&quot; bb=&quot;0.0001108&quot; vb=&quot;0.9999451&quot; /&gt;
	    &lt;tca model=&quot;poly3&quot; focal=&quot;70&quot; br=&quot;-0.0000150&quot; vr=&quot;1.0001222&quot; bb=&quot;0.0000510&quot; vb=&quot;0.9998586&quot; /&gt;
	    &lt;tca model=&quot;poly3&quot; focal=&quot;100&quot; br=&quot;-0.0000128&quot; vr=&quot;0.9998724&quot; bb=&quot;-0.0000023&quot; vb=&quot;0.9997716&quot; /&gt;
	    &lt;tca model=&quot;poly3&quot; focal=&quot;135&quot; br=&quot;-0.0000979&quot; vr=&quot;0.9998131&quot; bb=&quot;-0.0001018&quot; vb=&quot;0.9997999&quot; /&gt;
	    &lt;tca model=&quot;poly3&quot; focal=&quot;200&quot; br=&quot;-0.0001877&quot; vr=&quot;0.9997167&quot; bb=&quot;-0.0000221&quot; vb=&quot;0.9996858&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;</code>
        <close_date>1353261107</close_date>
        <history id='13593'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1353261107</date>
        </history>
        <history id='13594'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1353261107</date>
        </history>
        <history id='13595'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1353261107</date>
        </history>
    </patch>
    <patch id='3388'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1354582259</open_date>
        <summary>Correction of PTLens and Poly3 distortion formulae</summary>
        <code>Index: include/lensfun/lensfun.h.in
===================================================================
--- include/lensfun/lensfun.h.in	(revision 196)
+++ include/lensfun/lensfun.h.in	(working copy)
@@ -411,7 +411,7 @@
     LF_DIST_MODEL_NONE,
     /**
      * 3rd order polynomial model:
-     * Ru = Rd * (1 + k1 * Rd^2)
+     * Ru = Rd * (1 - k1 + k1 * Rd^2)
      * Ref: http://www.imatest.com/docs/distortion.html
      */
     LF_DIST_MODEL_POLY3,
@@ -428,7 +428,7 @@
     LF_DIST_MODEL_FOV1,
     /**
      * PTLens rectilinear:
-     * Ru = Rd * (a * Rd^3 + b * Rd^2 + c * Rd + 1)
+     * Ru = Rd * (a * Rd^3 + b * Rd^2 + c * Rd + 1 - a - b - c)
      */
     LF_DIST_MODEL_PTLENS,
 };
Index: docs/lens-calibration/lens-distortion.html
===================================================================
--- docs/lens-calibration/lens-distortion.html	(revision 196)
+++ docs/lens-calibration/lens-distortion.html	(working copy)
@@ -16,14 +16,14 @@
 which is a fourth-order polynomial:
 &lt;/p&gt;
 
-&lt;pre&gt;Ru = a * Rd^4 + b * Rd^3 + c * Rd + Rd&lt;/pre&gt;
+&lt;pre&gt;Ru = a * Rd^4 + b * Rd^3 + c * Rd^2 + (1 - a - b - c) * Rd&lt;/pre&gt;
 
 &lt;p&gt;(here Rd is the radius of the distorted pixel, Ru is the radius of the undistorted
 pixel). Another useful model is the &quot;poly3&quot; model, which is a simplified 3rd order
 polynomial:
 &lt;/p&gt;
 
-&lt;pre&gt;Ru = k1 * Rd^3 + Rd&lt;/pre&gt;
+&lt;pre&gt;Ru = k1 * Rd^3 + (1 - k1) * Rd&lt;/pre&gt;
 
 &lt;p&gt;If you pay attention you can see that poly3 is a simplified variant of the ptlens
 model, with a=0, b=k1 and c=0. Thus, poly3 is suitable for lenses with more predictable
Index: libs/lensfun/lens.cpp
===================================================================
--- libs/lensfun/lens.cpp	(revision 196)
+++ libs/lensfun/lens.cpp	(working copy)
@@ -321,7 +321,7 @@
 
         case LF_DIST_MODEL_POLY3:
             if (details)
-                *details = &quot;Ru = Rd * (1 + k1 * Rd^2)\n&quot;
+                *details = &quot;Ru = Rd * (1 - k1 + k1 * Rd^2)\n&quot;
                     &quot;Ref: http://www.imatest.com/docs/distortion.html&quot;;
             if (params)
                 *params = param_poly3;
@@ -345,7 +345,7 @@
 
         case LF_DIST_MODEL_PTLENS:
             if (details)
-                *details = &quot;Ru = Rd * (a * Rd^3 + b * Rd^2 + c * Rd + 1)\n&quot;
+                *details = &quot;Ru = Rd * (a * Rd^3 + b * Rd^2 + c * Rd + 1 - (a + b + c))\n&quot;
                     &quot;Ref: http://wiki.panotools.org/Lens_correction_model&quot;;
             if (params)
                 *params = param_ptlens;
Index: libs/lensfun/mod-coord-sse.cpp
===================================================================
--- libs/lensfun/mod-coord-sse.cpp	(revision 196)
+++ libs/lensfun/mod-coord-sse.cpp	(working copy)
@@ -23,6 +23,7 @@
   __m128 c = _mm_set_ps1 (param [2]);
   __m128 very_small = _mm_set_ps1 (1e-15);
   __m128 one = _mm_set_ps1 (1.0f);
+  __m128 d = _mm_sub_ps (one, _mm_add_ps (a, _mm_add_ps (b, c)));
 
   // SSE Loop processes 4 pixels/loop
   int loop_count = count / 4;
@@ -41,10 +42,10 @@
     __m128 rd = ru;
     for (int step = 0; step &lt; 4; step++)
     {
-      // frd = rd * (a * rd * rd + b * rd + c * rd + 1.0) - ru
+      // frd = rd * (a * rd * rd + b * rd + c * rd + d) - ru
       __m128 rd_sq =  _mm_mul_ps (rd, rd);
       __m128 frd = _mm_mul_ps (_mm_mul_ps (a, rd), rd_sq);
-      __m128 t = _mm_add_ps (_mm_mul_ps (b, rd_sq), _mm_add_ps (one, _mm_mul_ps (c, rd)));
+      __m128 t = _mm_add_ps (_mm_mul_ps (b, rd_sq), _mm_add_ps (d, _mm_mul_ps (c, rd)));
       frd = _mm_sub_ps (_mm_mul_ps (_mm_add_ps (t, frd), rd), ru);
 
       // This is most likely faster than loading form L1 cache
@@ -52,9 +53,9 @@
       __m128 three = _mm_add_ps (one, two);
       __m128 four = _mm_add_ps (two, two);
 
-      // corr =  4 * a * rd * rd + 3 * b * rd + 2 * c * rd + 1.0
+      // corr =  4 * a * rd * rd + 3 * b * rd + 2 * c * rd + d
       __m128 corr = _mm_mul_ps (c, rd);
-      corr = _mm_add_ps (one, _mm_add_ps (corr, corr));
+      corr = _mm_add_ps (d, _mm_add_ps (corr, corr));
       t = _mm_mul_ps (rd_sq, _mm_mul_ps (three, b));
       corr = _mm_add_ps (corr, _mm_mul_ps (_mm_mul_ps (rd, rd_sq), _mm_mul_ps (four, a)));
       corr = _mm_rcp_ps (_mm_add_ps (corr, t));
@@ -89,11 +90,11 @@
 {
   float *param = (float *)data;
 
-  // Ru = Rd * (a * Rd^3 + b * Rd^2 + c * Rd + 1)
+  // Ru = Rd * (a * Rd^3 + b * Rd^2 + c * Rd + d)
   __m128 a = _mm_set_ps1 (param [0]);
   __m128 b = _mm_set_ps1 (param [1]);
   __m128 c = _mm_set_ps1 (param [2]);
-  __m128 one = _mm_set_ps1 (1.0f);
+  __m128 d = _mm_sub_ps (_mm_set_ps1 (1.0f), _mm_add_ps (a, _mm_add_ps (b, c)));
   int aligned = !((uintptr_t)(iocoord)&amp;0xf);
 
   // SSE Loop processes 4 pixels/loop
@@ -108,11 +109,11 @@
       __m128 r2 = _mm_add_ps (_mm_mul_ps (x, x), _mm_mul_ps (y, y));
       __m128 r = _mm_rcp_ps (_mm_rsqrt_ps (r2));
 
-      // Calculate poly3 = a * r2 * r + b * r2 + c * r + 1.0;
+      // Calculate poly3 = a * r2 * r + b * r2 + c * r + d;
       __m128 t = _mm_mul_ps (r2, b);
       __m128 poly3 = _mm_mul_ps (_mm_mul_ps (a, r2), r);
       t = _mm_add_ps (t, _mm_mul_ps (r, c));
-      poly3 = _mm_add_ps (t, _mm_add_ps (poly3, one));
+      poly3 = _mm_add_ps (t, _mm_add_ps (poly3, d));
       _mm_store_ps (&amp;iocoord [8 * i], _mm_mul_ps (poly3, c0));
       _mm_store_ps (&amp;iocoord [8 * i + 4], _mm_mul_ps (poly3, c1));
     }
@@ -126,11 +127,11 @@
       __m128 r2 = _mm_add_ps (_mm_mul_ps (x, x), _mm_mul_ps (y, y));
       __m128 r = _mm_rcp_ps (_mm_rsqrt_ps (r2));
 
-      // Calculate poly3 = a * r2 * r + b * r2 + c * r + 1.0;
+      // Calculate poly3 = a * r2 * r + b * r2 + c * r + d;
       __m128 poly3 = _mm_mul_ps (_mm_mul_ps (a, r2), r);
       __m128 t = _mm_mul_ps (r2, b);
       poly3 = _mm_add_ps (poly3, _mm_mul_ps (r, c));
-      poly3 = _mm_add_ps (poly3, _mm_add_ps (t, one));
+      poly3 = _mm_add_ps (poly3, _mm_add_ps (t, d));
       _mm_storeu_ps (&amp;iocoord [8 * i], _mm_mul_ps (poly3, c0));
       _mm_storeu_ps (&amp;iocoord [8 * i + 4], _mm_mul_ps (poly3, c1));
     }
Index: libs/lensfun/mod-coord.cpp
===================================================================
--- libs/lensfun/mod-coord.cpp	(revision 196)
+++ libs/lensfun/mod-coord.cpp	(working copy)
@@ -462,6 +462,7 @@
 void lfExtModifier::ModifyCoord_Dist_Poly3 (void *data, float *iocoord, int count)
 {
     const float inv_k1 = *(float *)data;
+    const float one_minus_k1_div_k1 = (1 - 1.0 / inv_k1) * inv_k1;
 
     for (float *end = iocoord + count * 2; iocoord &lt; end; iocoord += 2)
     {
@@ -478,21 +479,21 @@
         // method (and we don't use complex numbers in it, which is
         // required for a full solution!)
         //
-        // Original function: Ru = k1 * Rd^3 + Rd
-        // Target function:   k1 * Rd^3 + Rd - Ru = 0
-        // Divide by k1:      R2^3 + Rd/k1 - Ru/k1 = 0
-        // Derivative:        3 * Rd^2 + 1/k1
+        // Original function: Ru = k1 * Rd^3 + (1 - k1) * Rd
+        // Target function:   k1 * Rd^3 + (1 - k1) * Rd - Ru = 0
+        // Divide by k1:      Rd^3 + Rd * (1 - k1)/k1 - Ru/k1 = 0
+        // Derivative:        3 * Rd^2 + (1 - k1)/k1
         double rd = ru;
         for (int step = 0; ; step++)
         {
-            double frd = rd * rd * rd + rd * inv_k1 - ru_div_k1;
+            double frd = rd * rd * rd + rd * one_minus_k1_div_k1 - ru_div_k1;
             if (frd &gt;= -NEWTON_EPS &amp;&amp; frd &lt; NEWTON_EPS)
                 break;
             if (step &gt; 5)
                 // Does not converge, no real solution in this area?
                 goto next_pixel;
 
-            rd -= frd / (3 * rd * rd + inv_k1);
+            rd -= frd / (3 * rd * rd + one_minus_k1_div_k1);
         }
         if (rd &lt; 0.0)
             continue; // Negative radius does not make sense at all
@@ -508,14 +509,15 @@
 
 void lfExtModifier::ModifyCoord_UnDist_Poly3 (void *data, float *iocoord, int count)
 {
-    // Ru = Rd * (1 + k1 * Rd^2)
+    // Ru = Rd * (1 - k1 + k1 * Rd^2)
     const float k1 = *(float *)data;
+    const float one_minus_k1 = 1.0 - k1;
 
     for (float *end = iocoord + count * 2; iocoord &lt; end; iocoord += 2)
     {
         const float x = iocoord [0];
         const float y = iocoord [1];
-        const float poly2 = 1.0 + k1 * (x * x + y * y);
+        const float poly2 = one_minus_k1 + k1 * (x * x + y * y);
 
         iocoord [0] = x * poly2;
         iocoord [1] = y * poly2;
@@ -622,6 +624,7 @@
     float a = param [0];
     float b = param [1];
     float c = param [2];
+    float d = 1.0 - a - b - c;
 
     for (float *end = iocoord + count * 2; iocoord &lt; end; iocoord += 2)
     {
@@ -635,14 +638,14 @@
         double rd = ru;
         for (int step = 0; ; step++)
         {
-            double frd = rd * (a * rd * rd * rd + b * rd * rd + c * rd + 1.0) - ru;
+            double frd = rd * (a * rd * rd * rd + b * rd * rd + c * rd + d) - ru;
             if (frd &gt;= -NEWTON_EPS &amp;&amp; frd &lt; NEWTON_EPS)
                 break;
             if (step &gt; 5)
                 // Does not converge, no real solution in this area?
                 goto next_pixel;
 
-            rd -= frd / (4 * a * rd * rd * rd + 3 * b * rd * rd + 2 * c * rd + 1.0);
+            rd -= frd / (4 * a * rd * rd * rd + 3 * b * rd * rd + 2 * c * rd + d);
         }
         if (rd &lt; 0.0)
             continue; // Negative radius does not make sense at all
@@ -659,10 +662,11 @@
 void lfExtModifier::ModifyCoord_UnDist_PTLens (void *data, float *iocoord, int count)
 {
     float *param = (float *)data;
-    // Ru = Rd * (a * Rd^3 + b * Rd^2 + c * Rd + 1)
+    // Ru = Rd * (a * Rd^3 + b * Rd^2 + c * Rd + d)
     const float a = param [0];
     const float b = param [1];
     const float c = param [2];
+    const float d = 1.0 - a - b - c;
 
     for (float *end = iocoord + count * 2; iocoord &lt; end; iocoord += 2)
     {
@@ -670,7 +674,7 @@
         const float y = iocoord [1];
         const float r2 = x * x + y * y;
         const float r = sqrtf (r2);
-        const float poly3 = a * r2 * r + b * r2 + c * r + 1.0;
+        const float poly3 = a * r2 * r + b * r2 + c * r + d;
 
         iocoord [0] = x * poly3;
         iocoord [1] = y * poly3;
</code>
        <close_date>1358451730</close_date>
        <history id='13665'>
            <field_name>details</field_name>
            <old_value>One file was missing.</old_value>
            <mod_by>2378</mod_by>
            <date>1354591742</date>
        </history>
        <history id='13666'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1354591742</date>
        </history>
        <history id='13852'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1358451730</date>
        </history>
        <history id='13853'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1358451730</date>
        </history>
        <history id='13854'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1358451730</date>
        </history>
    </patch>
    <patch id='3390'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1354594121</open_date>
        <summary>Fix priorities of geometry modifications</summary>
        <code>diff -Naur lensfun_current/include/lensfun/lensfun.h.in lensfun/include/lensfun/lensfun.h.in
--- lensfun_current/include/lensfun/lensfun.h.in	2012-12-04 04:27:43.962306191 +0100
+++ lensfun/include/lensfun/lensfun.h.in	2012-12-04 05:06:09.130671577 +0100
@@ -1887,8 +1887,8 @@
 
     /**
      * Add the stock lens distortion correcting callback into the chain.
-     * The distortion correction callback always has a fixed priority of 250
-     * when rectifying a image and 750 on reverse transform.
+     * The distortion correction callback always has a fixed priority of 750
+     * when rectifying a image and 250 on reverse transform.
      * @param model
      *     Lens distortion model data.
      * @param reverse
diff -Naur lensfun_current/libs/lensfun/mod-coord.cpp lensfun/libs/lensfun/mod-coord.cpp
--- lensfun_current/libs/lensfun/mod-coord.cpp	2012-12-04 04:24:32.842523881 +0100
+++ lensfun/libs/lensfun/mod-coord.cpp	2012-12-04 05:01:22.930299741 +0100
@@ -33,12 +33,12 @@
                 if (!model.Terms [0])
                     return false;
                 tmp [0] = 1.0 / model.Terms [0];
-                AddCoordCallback (lfExtModifier::ModifyCoord_Dist_Poly3, 750,
+                AddCoordCallback (lfExtModifier::ModifyCoord_Dist_Poly3, 250,
                                   tmp, sizeof (float));
                 break;
 
             case LF_DIST_MODEL_POLY5:
-                AddCoordCallback (lfExtModifier::ModifyCoord_Dist_Poly5, 750,
+                AddCoordCallback (lfExtModifier::ModifyCoord_Dist_Poly5, 250,
                                   model.Terms, sizeof (float) * 2);
                 break;
 
@@ -47,18 +47,18 @@
                     return false;
                 tmp [0] = 1.0 / model.Terms [0];
                 tmp [1] = 2.0 * tan (model.Terms [0] / 2.0);
-                AddCoordCallback (lfExtModifier::ModifyCoord_Dist_FOV1, 750,
+                AddCoordCallback (lfExtModifier::ModifyCoord_Dist_FOV1, 250,
                                   tmp, sizeof (float) * 2);
                 break;
 
             case LF_DIST_MODEL_PTLENS:
 #ifdef VECTORIZATION_SSE
                 if (_lf_detect_cpu_features () &amp; LF_CPU_FLAG_SSE)
-                    AddCoordCallback (lfExtModifier::ModifyCoord_Dist_PTLens_SSE, 750,
+                    AddCoordCallback (lfExtModifier::ModifyCoord_Dist_PTLens_SSE, 250,
                                       model.Terms, sizeof (float) * 3);
                 else
 #endif
-                AddCoordCallback (lfExtModifier::ModifyCoord_Dist_PTLens, 750,
+                AddCoordCallback (lfExtModifier::ModifyCoord_Dist_PTLens, 250,
                                   model.Terms, sizeof (float) * 3);
                 break;
 
@@ -69,12 +69,12 @@
         switch (model.Model)
         {
             case LF_DIST_MODEL_POLY3:
-                AddCoordCallback (lfExtModifier::ModifyCoord_UnDist_Poly3, 250,
+                AddCoordCallback (lfExtModifier::ModifyCoord_UnDist_Poly3, 750,
                                   model.Terms, sizeof (float));
                 break;
 
             case LF_DIST_MODEL_POLY5:
-                AddCoordCallback (lfExtModifier::ModifyCoord_UnDist_Poly5, 250,
+                AddCoordCallback (lfExtModifier::ModifyCoord_UnDist_Poly5, 750,
                                   model.Terms, sizeof (float) * 2);
                 break;
 
@@ -83,17 +83,17 @@
                     return false;
                 tmp [0] = model.Terms [0];
                 tmp [1] = 0.5 / tan (model.Terms [0] / 2.0);
-                AddCoordCallback (lfExtModifier::ModifyCoord_UnDist_FOV1, 250, tmp, sizeof (float) * 2);
+                AddCoordCallback (lfExtModifier::ModifyCoord_UnDist_FOV1, 750, tmp, sizeof (float) * 2);
                 break;
 
             case LF_DIST_MODEL_PTLENS:
 #ifdef VECTORIZATION_SSE
                 if (_lf_detect_cpu_features () &amp; LF_CPU_FLAG_SSE)
-                    AddCoordCallback (lfExtModifier::ModifyCoord_UnDist_PTLens_SSE, 250,
+                    AddCoordCallback (lfExtModifier::ModifyCoord_UnDist_PTLens_SSE, 750,
                                       model.Terms, sizeof (float) * 3);
                 else
 #endif
-                AddCoordCallback (lfExtModifier::ModifyCoord_UnDist_PTLens, 250,
+                AddCoordCallback (lfExtModifier::ModifyCoord_UnDist_PTLens, 750,
                                   model.Terms, sizeof (float) * 3);
                 break;
 
</code>
        <close_date>1359304442</close_date>
        <history id='13887'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359304442</date>
        </history>
        <history id='13888'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1359304442</date>
        </history>
        <history id='13889'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359304442</date>
        </history>
    </patch>
    <patch id='3416'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1359341217</open_date>
        <summary>Move LEICA DIGILUX 3 to new file slr-leica.xml</summary>
        <code>diff -urN lensfun.210/data/db/compact-leica.xml lensfun/data/db/compact-leica.xml
--- lensfun.210/data/db/compact-leica.xml	2013-01-28 03:01:00.243268240 +0100
+++ lensfun/data/db/compact-leica.xml	2013-01-28 03:02:47.295270680 +0100
@@ -27,15 +27,6 @@
     &lt;camera&gt;
         &lt;maker&gt;LEICA&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Leica&lt;/maker&gt;
-        &lt;model&gt;DIGILUX 3&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;Digilux 3&lt;/model&gt;
-        &lt;mount&gt;4/3 System&lt;/mount&gt;
-        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
-    &lt;/camera&gt;
-
-    &lt;camera&gt;
-        &lt;maker&gt;LEICA&lt;/maker&gt;
-        &lt;maker lang=&quot;en&quot;&gt;Leica&lt;/maker&gt;
         &lt;model&gt;D-LUX 4&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;Digilux 4&lt;/model&gt;
         &lt;variant&gt;16:9&lt;/variant&gt;
diff -urN lensfun.210/data/db/slr-leica.xml lensfun/data/db/slr-leica.xml
--- lensfun.210/data/db/slr-leica.xml	1970-01-01 01:00:00.000000000 +0100
+++ lensfun/data/db/slr-leica.xml	2013-01-28 03:02:27.803270236 +0100
@@ -0,0 +1,12 @@
+&lt;lensdatabase&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;LEICA&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Leica&lt;/maker&gt;
+        &lt;model&gt;DIGILUX 3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Digilux 3&lt;/model&gt;
+        &lt;mount&gt;4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+&lt;/lensdatabase&gt;
</code>
        <close_date>1359824531</close_date>
        <history id='13904'>
            <field_name>details</field_name>
            <old_value>The LEICA DIGILUX 3 is a DSLR not a compact camera.</old_value>
            <mod_by>61570</mod_by>
            <date>1359341279</date>
        </history>
        <history id='13922'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359824531</date>
        </history>
        <history id='13923'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1359824531</date>
        </history>
        <history id='13924'>
            <field_name>details</field_name>
            <old_value>Thanks!</old_value>
            <mod_by>36447</mod_by>
            <date>1359824531</date>
        </history>
        <history id='13925'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359824531</date>
        </history>
    </patch>
    <patch id='3389'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1354593271</open_date>
        <summary>Fix geometry modification if lens crop != 1.0</summary>
        <code>diff -Naur lensfun_current/libs/lensfun/modifier.cpp lensfun/libs/lensfun/modifier.cpp
--- lensfun_current/libs/lensfun/modifier.cpp	2012-12-04 03:46:47.461404279 +0100
+++ lensfun/libs/lensfun/modifier.cpp	2012-12-04 04:55:12.130156945 +0100
@@ -47,11 +47,16 @@
                 oflags |= LF_MODIFY_DISTORTION;
     }
 
+    // Un-do effect of lens crop factor for geometry transformation.  Lens crop
+    // factor is really needed only for the application of lens un-distortion.
+    double focal_36mm = lens &amp;&amp; lens-&gt;CropFactor ? focal * lens-&gt;CropFactor :
+        focal;
+
     if (flags &amp; LF_MODIFY_GEOMETRY &amp;&amp;
         lens-&gt;Type != targeom)
         if (reverse ?
-            AddCoordCallbackGeometry (targeom, lens-&gt;Type, focal) :
-            AddCoordCallbackGeometry (lens-&gt;Type, targeom, focal))
+            AddCoordCallbackGeometry (targeom, lens-&gt;Type, focal_36mm) :
+            AddCoordCallbackGeometry (lens-&gt;Type, targeom, focal_36mm))
             oflags |= LF_MODIFY_GEOMETRY;
 
     if (flags &amp; LF_MODIFY_SCALE &amp;&amp;
</code>
        <close_date>1359304443</close_date>
        <history id='13667'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1354593335</date>
        </history>
        <history id='13890'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359304443</date>
        </history>
        <history id='13891'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1359304443</date>
        </history>
        <history id='13892'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359304443</date>
        </history>
    </patch>
    <patch id='3393'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1355024009</open_date>
        <summary>Add NIKON D5200 to database.</summary>
        <code>--- lensfun/data/db/slr-nikon.xml~	2012-12-09 04:15:11.069825943 +0100
+++ lensfun/data/db/slr-nikon.xml	2012-12-09 04:16:13.917823852 +0100
@@ -228,6 +228,15 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D5200&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D5200&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON D7000&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;D7000&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
</code>
        <close_date>1357493471</close_date>
        <history id='13802'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1357493471</date>
        </history>
        <history id='13803'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1357493471</date>
        </history>
        <history id='13804'>
            <field_name>details</field_name>
            <old_value>Thanks a lot!</old_value>
            <mod_by>36447</mod_by>
            <date>1357493471</date>
        </history>
        <history id='13805'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1357493471</date>
        </history>
    </patch>
    <patch id='3397'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1356323118</open_date>
        <summary>Add latest Panasonic mirrorless cameras to database.</summary>
        <code>--- lensfun/data/db/mil-panasonic.xml~	2012-12-24 05:08:26.536369933 +0100
+++ lensfun/data/db/mil-panasonic.xml	2012-12-24 05:10:49.043387821 +0100
@@ -65,6 +65,27 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Panasonic&lt;/maker&gt;
+        &lt;model&gt;DMC-GH3&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Panasonic&lt;/maker&gt;
+        &lt;model&gt;DMC-G5&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Panasonic&lt;/maker&gt;
+        &lt;model&gt;DMC-GF5&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Panasonic&lt;/maker&gt;
         &lt;model&gt;DMC-G10&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
</code>
        <close_date>1357493485</close_date>
        <history id='13809'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1357493485</date>
        </history>
        <history id='13810'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1357493485</date>
        </history>
        <history id='13811'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1357493485</date>
        </history>
    </patch>
    <patch id='3411'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='62884' name='bentgm'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1358858617</open_date>
        <summary>Bugfix and better data for Sony SAM 1855</summary>
        <code>    &lt;lens&gt;
        &lt;maker&gt;Sony&lt;/maker&gt;
        &lt;model&gt;Sony DT 18-55mm F3.5-5.6 SAM SAL 1855&lt;/model&gt;
        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
        &lt;type&gt;rectilinear&lt;/type&gt;
        &lt;focal min=&quot;18&quot; max=&quot;55&quot; /&gt;
        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;18&quot; k1=&quot;-0.01644&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;24&quot; k1=&quot;-0.00711&quot; /&gt;
            &lt;distortion model=&quot;poly3&quot; focal=&quot;35&quot; k1=&quot;-0.00156&quot; /&gt;
	    &lt;distortion model=&quot;poly3&quot; focal=&quot;55&quot; k1=&quot;0.00022&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;0.0004103&quot; cr=&quot;-0.0005073&quot; vr &quot;1.0001516&quot; bb=&quot;-0.0001287&quot; cb &quot;-0.000226&quot; vb=&quot;1.0007798&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;24&quot; br=&quot;0.0001554&quot; cr=&quot;-0.0001725&quot; vr &quot;1.0000343&quot; bb=&quot;-0.000046&quot; cb &quot;-0.0002381&quot; vb=&quot;1.000655&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;28&quot; br=&quot;0.0001039&quot; cr=&quot;-0.0000794&quot; vr &quot;0.9999764&quot; bb=&quot;0.0000066&quot; cb &quot;-0.0003685&quot; vb=&quot;1.0006678&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;0.0000526&quot; cr=&quot;-0.0000497&quot; vr &quot;0.9999977&quot; bb=&quot;0.0000094&quot; cb &quot;-0.0002178&quot; vb=&quot;1.0004108&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;40&quot; br=&quot;0.0000877&quot; cr=&quot;-0.0000872&quot; vr &quot;1.0000064&quot; bb=&quot;0.0000676&quot; cb &quot;-0.0003308&quot; vb=&quot;1.0004211&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;0.0000768&quot; cr=&quot;-0.000147&quot; vr &quot;1.0000969&quot; bb=&quot;-0.0000479&quot; cb &quot;-0.0000054&quot; vb=&quot;1.0002261&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;55&quot; br=&quot;0.0000843&quot; cr=&quot;-0.0001494&quot; vr &quot;1.0001189&quot; bb=&quot;-0.0000056&quot; cb &quot;-0.0000362&quot; vb=&quot;1.0001643&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;
</code>
        <close_date>1359304962</close_date>
        <history id='13897'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359304962</date>
        </history>
        <history id='13898'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1359304962</date>
        </history>
        <history id='13899'>
            <field_name>details</field_name>
            <old_value>Thanks for both profiles!</old_value>
            <mod_by>36447</mod_by>
            <date>1359304962</date>
        </history>
        <history id='13900'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359304962</date>
        </history>
    </patch>
    <patch id='3541'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1388673904</open_date>
        <summary>Change meaning of MaxAperture</summary>
        <code>diff --git a/data/db/compact-panasonic.xml b/data/db/compact-panasonic.xml
index e262253..afe7516 100644
--- a/data/db/compact-panasonic.xml
+++ b/data/db/compact-panasonic.xml
@@ -401,7 +401,7 @@
         &lt;model&gt;Standard&lt;/model&gt;
         &lt;mount&gt;panasonicFZ28&lt;/mount&gt;
 	    &lt;focal min=&quot;4.8&quot; max=&quot;86.4&quot;/&gt; 
-	    &lt;aperture min=&quot;2.8&quot; max=&quot;4.4&quot;/&gt; 
+	    &lt;aperture min=&quot;2.8&quot; max=&quot;8&quot;/&gt; 
         &lt;cropfactor&gt;5.6&lt;/cropfactor&gt;
         &lt;aspect-ratio&gt;4:3&lt;/aspect-ratio&gt;
         &lt;calibration&gt;
diff --git a/data/db/slr-ussr.xml b/data/db/slr-ussr.xml
index 7bf6d36..da31ba3 100644
--- a/data/db/slr-ussr.xml
+++ b/data/db/slr-ussr.xml
@@ -115,7 +115,7 @@
         &lt;model lang=&quot;ru&quot;&gt; - 2.8-3.5/25-45&lt;/model&gt;
         &lt;mount&gt;M42&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
-        &lt;aperture min=&quot;2.8&quot; max=&quot;3.5&quot; /&gt;
+        &lt;aperture min=&quot;2.8&quot; /&gt;
         &lt;focal min=&quot;25&quot; max=&quot;45&quot; /&gt;
     &lt;/lens&gt;
 
diff --git a/docs/manual-main.txt b/docs/manual-main.txt
index 494df81..b27e8c3 100644
--- a/docs/manual-main.txt
+++ b/docs/manual-main.txt
@@ -373,8 +373,9 @@ Possible embedded elements:
 &lt;dd&gt;Lens focal length in mm. This can be either a single value for a fixed-focal length
     lens, or a minimum and maximum value in the case of a zoom lens.
 &lt;dt&gt;\&lt;aperture min=&quot;number&quot; max=&quot;number&quot; value=&quot;number&quot; /\&gt;
-&lt;dd&gt;Lens aperture as the f-number. This can be either a single value for a fixed-focal length
-    lens, or the aperture at the minimum and maximum focal length in the case of a zoom lens.
+&lt;dd&gt;Lens aperture as the f-number. This can be either a single value for a fixed-aperture
+    lens (very rare), or the minimal and maximal possible f-stop number for
+    this lens (over the whole zoom range for a zoom lens).
 &lt;dt&gt;\&lt;mount\&gt;string\&lt;/mount\&gt;
 &lt;dd&gt;Lens mount. There can be multiple \&lt;mount\&gt; entries if the same lens is manufactured
     with several mounts, or it has a variable mount (e.g. Tamron Adaptall).
@@ -425,10 +426,14 @@ Another pattern for lens parameters is
 &lt;li&gt;4.5/300
 &lt;/ul&gt;
 
-If you encode lens parameters directly in the lens name, you may omit the
-@&lt;focal@&gt; and @&lt;aperture@&gt; elements. Also if the range of focal lengths is
-missing both from lens name and there's no @&lt;focal@&gt; element, the library
-tries to guess the range of focal lengths from the @&lt;calibration@&gt; section.
+(Note that max aperture refers here to the minimal f-stop number at the
+maximal focal length of a zoom lens.  Its value is ignored by lensfun.  As
+explained above, lensfun only stores the minimal and maximal possible f-stop
+number of the lens, not matter at which focal length, e.g. 3.532.)
+
+Moreover, the library finds missing min/max values for focal length and
+aperture by looking at the range of these parameters in the @&lt;calibration@&gt;
+section.
 
 
 @page elem_calibration Lens calibration data format
diff --git a/include/lensfun/lensfun.h.in b/include/lensfun/lensfun.h.in
index e52494b..db685b3 100644
--- a/include/lensfun/lensfun.h.in
+++ b/include/lensfun/lensfun.h.in
@@ -748,9 +748,9 @@ struct LF_EXPORT lfLens
     float MinFocal;
     /** Maximum focal length, mm (ex: 105). Can be equal to MinFocal. */
     float MaxFocal;
-    /** Aperture (f-number) at minimum focal length (ex: 3.5). */
+    /** Smallest f-number possible (ex: 3.5). */
     float MinAperture;
-    /** Aperture (f-number) at maximum focal length (ex: 4.3). Can be equal to MinAperture. */
+    /** Biggest f-number possible (ex: 22). Can be equal to MinAperture. */
     float MaxAperture;
     /** Available mounts (NULL-terminated list) (ex: { &quot;QBM&quot;, NULL }) */
     char **Mounts;
diff --git a/libs/lensfun/lens.cpp b/libs/lensfun/lens.cpp
index 19a240f..6d86646 100644
--- a/libs/lensfun/lens.cpp
+++ b/libs/lensfun/lens.cpp
@@ -16,7 +16,7 @@
 static struct
 {
     const char *regex;
-    guchar matchidx [4];
+    guchar matchidx [3];
     bool compiled;
     regex_t rex;
 } lens_name_regex [] =
@@ -24,19 +24,19 @@ static struct
     {
         // 1:[min aperture]-[max aperture] [min focal]-[max focal]mm
         &quot;[[:space:]]+1:([0-9.]+)(-[0-9.]+)?[[:space:]]+([0-9.]+)(-[0-9.]+)?(mm)?&quot;,
-        { 3, 4, 1, 2 },
+        { 3, 4, 1 },
         false
     },
     {
         // [min aperture]-[max aperture]/[min focal]-[max focal]
         &quot;([0-9.]+)(-[0-9.]+)?[[:space:]]*/[[:space:]]*([0-9.]+)(-[0-9.]+)?&quot;,
-        { 3, 4, 1, 2 },
+        { 3, 4, 1 },
         false
     },
     {
         // [min focal]-[max focal]mm f/[min aperture]-[max aperture]
         &quot;([0-9]+[0-9.]*)(-[0-9]+[0-9.]*)?(mm)?[[:space:]]+(f/?)?([0-9.]+)(-[0-9.]+)?&quot;,
-        { 1, 2, 5, 6 },
+        { 1, 2, 5 },
         false
     }
 };
@@ -58,7 +58,7 @@ static float _lf_parse_float (const char *model, const regmatch_t &amp;match)
 
 static bool _lf_parse_lens_name (const char *model,
                                  float &amp;minf, float &amp;maxf,
-                                 float &amp;mina, float &amp;maxa)
+                                 float &amp;mina)
 {
     if (!model)
         return false;
@@ -83,8 +83,6 @@ static bool _lf_parse_lens_name (const char *model,
             maxf = _lf_parse_float (model, matches [matchidx [1]]);
         if (matches [matchidx [2]].rm_so != -1)
             mina = _lf_parse_float (model, matches [matchidx [2]]);
-        if (matches [matchidx [3]].rm_so != -1)
-            maxa = _lf_parse_float (model, matches [matchidx [3]]);
         return true;
     }
 
@@ -205,10 +203,10 @@ void lfLens::GuessParameters ()
 
     char *old_numeric = setlocale (LC_NUMERIC, NULL);
     old_numeric = strdup (old_numeric);
-    setlocale (LC_NUMERIC,&quot;C&quot;);
+    setlocale (LC_NUMERIC, &quot;C&quot;);
 
     if (!MinAperture || !MinFocal)
-        _lf_parse_lens_name (Model, minf, maxf, mina, maxa);
+        _lf_parse_lens_name (Model, minf, maxf, mina);
 
     if (!MinAperture || !MinFocal)
     {
@@ -277,8 +275,6 @@ void lfLens::GuessParameters ()
 
     if (!MaxFocal)
         MaxFocal = MinFocal;
-    if (!MaxAperture)
-        MaxAperture = MinAperture;
 
     setlocale (LC_NUMERIC, old_numeric);
     free (old_numeric);
@@ -289,8 +285,8 @@ bool lfLens::Check ()
     GuessParameters ();
 
     if (!Model || !Mounts || CropFactor &lt;= 0 ||
-        MinFocal &gt; MaxFocal || MinAperture &gt; MaxAperture ||
-        !isfinite(AspectRatio) || AspectRatio &lt; 1)
+        MinFocal &gt; MaxFocal || (MaxAperture &amp;&amp; MinAperture &gt; MaxAperture) ||
+        !isfinite (AspectRatio) || AspectRatio &lt; 1)
         return false;
 
     return true;
@@ -1229,12 +1225,10 @@ int _lf_lens_compare_score (const lfLens *pattern, const lfLens *match,
             break;
     }
 
-    // MaxAperture is usually not given in database...
-    // so it's a guessed value, often incorrect.
     switch (_lf_compare_num (pattern-&gt;MaxAperture, match-&gt;MaxAperture))
     {
-        //case -1:
-        //    return 0;
+        case -1:
+            return 0;
 
         case +1:
             score += 10;
</code>
        <close_date>1388845298</close_date>
        <history id='14571'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1388674047</date>
        </history>
        <history id='14575'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388845298</date>
        </history>
        <history id='14576'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388845298</date>
        </history>
        <history id='14577'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1388845298</date>
        </history>
    </patch>
    <patch id='3409'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1358573636</open_date>
        <summary>Update Sigma lens mounts - now with 4/3 System.</summary>
        <code>Index: data/db/slr-sigma.xml
===================================================================
--- data/db/slr-sigma.xml	(revision 205)
+++ data/db/slr-sigma.xml	(working copy)
@@ -66,6 +66,7 @@
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
+        &lt;mount&gt;4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;10&quot; a=&quot;-0.017985&quot; b=&quot;0.026145&quot; c=&quot;0&quot; /&gt;
@@ -99,6 +100,7 @@
         &lt;model&gt;Sigma 15-30mm f/3.5-4.5 EX DG&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
@@ -120,6 +122,7 @@
         &lt;model&gt;Sigma 17-35mm f/2.8-4 EX DG&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
@@ -137,6 +140,7 @@
         &lt;model&gt;Sigma 17-70mm f/2.8-4.5 DC Macro&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
@@ -195,6 +199,7 @@
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
+        &lt;mount&gt;4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.018244&quot; b=&quot;-0.048901&quot; c=&quot;0&quot; /&gt;
@@ -216,17 +221,15 @@
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
-        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+        &lt;mount&gt;4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.02211&quot; b=&quot;-0.050462&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;23&quot; a=&quot;0.016565&quot; b=&quot;-0.027307&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.011429&quot; b=&quot;-0.013359&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;38&quot; a=&quot;0&quot; b=&quot;0.012386&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;51&quot; a=&quot;0&quot; b=&quot;0.013262&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;67&quot; a=&quot;0&quot; b=&quot;0.011758&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;87&quot; a=&quot;0&quot; b=&quot;0.011008&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;109&quot; a=&quot;0&quot; b=&quot;0.01145&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;125&quot; a=&quot;0&quot; b=&quot;0.009078&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.028249&quot; b=&quot;-0.061326&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;26&quot; a=&quot;0.008998&quot; b=&quot;-0.008014&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;38&quot; a=&quot;0.004437&quot; b=&quot;0.005654&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;60&quot; a=&quot;0&quot; b=&quot;0.011257&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;100&quot; a=&quot;0&quot; b=&quot;0.011071&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;125&quot; a=&quot;0&quot; b=&quot;0.010822&quot; c=&quot;0&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
@@ -237,14 +240,18 @@
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
-        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;mount&gt;4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
         &lt;calibration&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.028249&quot; b=&quot;-0.061326&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;26&quot; a=&quot;0.008998&quot; b=&quot;-0.008014&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;38&quot; a=&quot;0.004437&quot; b=&quot;0.005654&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;60&quot; a=&quot;0&quot; b=&quot;0.011257&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;100&quot; a=&quot;0&quot; b=&quot;0.011071&quot; c=&quot;0&quot; /&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;125&quot; a=&quot;0&quot; b=&quot;0.010822&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.02211&quot; b=&quot;-0.050462&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;23&quot; a=&quot;0.016565&quot; b=&quot;-0.027307&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.011429&quot; b=&quot;-0.013359&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;38&quot; a=&quot;0&quot; b=&quot;0.012386&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;51&quot; a=&quot;0&quot; b=&quot;0.013262&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;67&quot; a=&quot;0&quot; b=&quot;0.011758&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;87&quot; a=&quot;0&quot; b=&quot;0.011008&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;109&quot; a=&quot;0&quot; b=&quot;0.01145&quot; c=&quot;0&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;125&quot; a=&quot;0&quot; b=&quot;0.009078&quot; c=&quot;0&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
@@ -291,7 +298,9 @@
     &lt;lens&gt;
         &lt;maker&gt;Sigma&lt;/maker&gt;
         &lt;model&gt;Sigma 18-200mm f/3.5-6.3 II DC OS HSM&lt;/model&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.02199&quot; b=&quot;-0.06697&quot; c=&quot;0.0302&quot;/&gt;
@@ -317,6 +326,7 @@
         &lt;model&gt;Sigma 24-70mm f/2.8 EX DG Macro&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
@@ -356,6 +366,7 @@
         &lt;model&gt;Sigma 28-300mm f/3.5-6.3 Macro ASP IF&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
@@ -376,8 +387,10 @@
         &lt;model&gt;Sigma 50-500mm f/4-6.3 EX DG HSM&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
+        &lt;mount&gt;4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;0&quot; b=&quot;-0.00059&quot; c=&quot;0&quot; /&gt;
@@ -397,7 +410,6 @@
         &lt;model&gt;Sigma 50-500mm F/4.5-6.3 DG OS HSM&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
-        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
@@ -421,6 +433,7 @@
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
+        &lt;mount&gt;4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;55&quot; a=&quot;0&quot; b=&quot;-0.004366&quot; c=&quot;0&quot; /&gt;
@@ -440,6 +453,7 @@
         &lt;model&gt;Sigma 70-300mm f/4-5.6 APO Macro Super II&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
@@ -465,9 +479,9 @@
         &lt;model&gt;Sigma 70-300mm F4-5.6 DL Macro&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
-        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;70&quot; a=&quot;-0.00291&quot; b=&quot;0.00834&quot; c=&quot;-0.00971&quot; /&gt;
@@ -539,6 +553,7 @@
         &lt;model&gt;Sigma 14mm f/2.8 EX&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
@@ -552,6 +567,7 @@
         &lt;model&gt;Sigma 14mm f/3.5 EX&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
@@ -565,6 +581,7 @@
         &lt;model&gt;Sigma 20mm f/1.8 EX DG&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
@@ -578,6 +595,7 @@
         &lt;model&gt;Sigma 28mm f/1.8 EX DG&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
@@ -591,8 +609,10 @@
         &lt;model&gt;Sigma 30mm f/1.4 EX DC HSM&lt;/model&gt;
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;mount&gt;Minolta AF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Pentax KAF&lt;/mount&gt;
+        &lt;mount&gt;4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.003926&quot; b=&quot;-0.013819&quot; c=&quot;0&quot; /&gt;
@@ -605,6 +625,8 @@
         &lt;mount&gt;Sigma SA&lt;/mount&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;mount&gt;4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;-0.008&quot; b=&quot;0.012&quot; c=&quot;-0.002&quot; /&gt;
@@ -618,6 +640,7 @@
         &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;mount&gt;4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;0.00055&quot; b=&quot;-0.00799&quot; c=&quot;0.00993&quot; /&gt;
</code>
        <close_date>1359304518</close_date>
        <history id='13862'>
            <field_name>details</field_name>
            <old_value>I have gone through the Sigma lenses and added missing lens mounts (mainly Minolta AF and 4/3 System).</old_value>
            <mod_by>61570</mod_by>
            <date>1358573682</date>
        </history>
        <history id='13893'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1359304518</date>
        </history>
        <history id='13894'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1359304518</date>
        </history>
        <history id='13895'>
            <field_name>details</field_name>
            <old_value>Thanks!</old_value>
            <mod_by>36447</mod_by>
            <date>1359304518</date>
        </history>
        <history id='13896'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1359304518</date>
        </history>
    </patch>
    <patch id='3432'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61929' name='pmjdebruijn'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1362592331</open_date>
        <summary>New camera defintions</summary>
        <code>diff -Nurpd trunk-r216-a/data/db/mil-nikon.xml trunk-r216-b/data/db/mil-nikon.xml
--- trunk-r216-a/data/db/mil-nikon.xml	2013-03-06 18:54:28.185581966 +0100
+++ trunk-r216-b/data/db/mil-nikon.xml	2013-03-06 18:58:37.049589679 +0100
@@ -13,6 +13,15 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON 1 S1&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;1 S1&lt;/model&gt;
+        &lt;mount&gt;Nikon CX&lt;/mount&gt;
+        &lt;cropfactor&gt;2.7&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON 1 V1&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;1 V1&lt;/model&gt;
         &lt;mount&gt;Nikon CX&lt;/mount&gt;
@@ -45,5 +54,14 @@
         &lt;mount&gt;Nikon CX&lt;/mount&gt;
         &lt;cropfactor&gt;2.7&lt;/cropfactor&gt;
     &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON 1 J3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;1 J3&lt;/model&gt;
+        &lt;mount&gt;Nikon CX&lt;/mount&gt;
+        &lt;cropfactor&gt;2.7&lt;/cropfactor&gt;
+    &lt;/camera&gt;
 
 &lt;/lensdatabase&gt;
diff -Nurpd trunk-r216-a/data/db/mil-samsung.xml trunk-r216-b/data/db/mil-samsung.xml
--- trunk-r216-a/data/db/mil-samsung.xml	2013-03-06 18:54:28.161581966 +0100
+++ trunk-r216-b/data/db/mil-samsung.xml	2013-03-06 18:55:55.929584685 +0100
@@ -73,6 +73,15 @@ http://en.wikipedia.org/wiki/Mirrorless_
         &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
+    &lt;camera&gt;
+        &lt;maker&gt;SAMSUNG&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Samsung&lt;/maker&gt;
+        &lt;model&gt;NX300&lt;/model&gt;
+         &lt;model lang=&quot;en&quot;&gt;NX300&lt;/model&gt;
+        &lt;mount&gt;Samsung NX&lt;/mount&gt;
+        &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
     &lt;lens&gt;
         &lt;maker&gt;Samsung&lt;/maker&gt;
         &lt;model&gt;Samsung NX 20-50mm F3.5-5.6 ED&lt;/model&gt;
diff -Nurpd trunk-r216-a/data/db/slr-canon.xml trunk-r216-b/data/db/slr-canon.xml
--- trunk-r216-a/data/db/slr-canon.xml	2013-03-06 18:54:28.161581966 +0100
+++ trunk-r216-b/data/db/slr-canon.xml	2013-03-06 18:55:34.681584027 +0100
@@ -15,6 +15,14 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS 6D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 6D&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS 5D Mark III&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS 5D Mark III&lt;/model&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
diff -Nurpd trunk-r216-a/data/db/slr-nikon.xml trunk-r216-b/data/db/slr-nikon.xml
--- trunk-r216-a/data/db/slr-nikon.xml	2013-03-06 18:54:28.173581966 +0100
+++ trunk-r216-b/data/db/slr-nikon.xml	2013-03-06 18:56:10.569585140 +0100
@@ -246,6 +246,15 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D7100&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D7100&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON D1&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;D1&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
diff -Nurpd trunk-r216-a/data/db/slr-pentax.xml trunk-r216-b/data/db/slr-pentax.xml
--- trunk-r216-a/data/db/slr-pentax.xml	2013-03-06 18:54:28.185581966 +0100
+++ trunk-r216-b/data/db/slr-pentax.xml	2013-03-06 18:55:19.409583552 +0100
@@ -184,6 +184,24 @@
     &lt;camera&gt;
         &lt;maker&gt;PENTAX&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Pentax&lt;/maker&gt;
+        &lt;model&gt;PENTAX K-5 II&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;K-5 II&lt;/model&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;PENTAX&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Pentax&lt;/maker&gt;
+        &lt;model&gt;PENTAX K-5 II s&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;K-5 II s&lt;/model&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;PENTAX&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Pentax&lt;/maker&gt;
         &lt;model&gt;PENTAX K2000&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;K2000&lt;/model&gt;
         &lt;mount&gt;Pentax KAF3&lt;/mount&gt;
</code>
        <close_date>1363637908</close_date>
        <history id='13954'>
            <field_name>details</field_name>
            <old_value>Oops, mixed up comment and patch. This should be fine now.
</old_value>
            <mod_by>61929</mod_by>
            <date>1362592824</date>
        </history>
        <history id='13955'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61929</mod_by>
            <date>1362592824</date>
        </history>
        <history id='13990'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1363637908</date>
        </history>
        <history id='13991'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1363637908</date>
        </history>
        <history id='13992'>
            <field_name>details</field_name>
            <old_value>Thanks!</old_value>
            <mod_by>36447</mod_by>
            <date>1363637908</date>
        </history>
        <history id='13993'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1363637908</date>
        </history>
    </patch>
    <patch id='3444'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1363766560</open_date>
        <summary>Correct application of TCA</summary>
        <code>--- libs/lensfun/mod-subpix.cpp (Revision 223)
+++ libs/lensfun/mod-subpix.cpp (Arbeitskopie)
@@ -139,6 +139,13 @@
             out += 6;
         }
 
+        for (i = 0; i &lt; (int)This-&gt;CoordCallbacks-&gt;len; i++)
+        {
+            lfCoordCallbackData *cd =
+                (lfCoordCallbackData *)g_ptr_array_index (This-&gt;CoordCallbacks, i);
+            cd-&gt;callback (cd-&gt;data, res, width * 3);
+        }
+
         for (i = 0; i &lt; (int)This-&gt;SubpixelCallbacks-&gt;len; i++)
         {
             lfSubpixelCallbackData *cd =
@@ -146,13 +153,6 @@
             cd-&gt;callback (cd-&gt;data, res, width);
         }
 
-        for (i = 0; i &lt; (int)This-&gt;CoordCallbacks-&gt;len; i++)
-        {
-            lfCoordCallbackData *cd =
-                (lfCoordCallbackData *)g_ptr_array_index (This-&gt;CoordCallbacks, i);
-            cd-&gt;callback (cd-&gt;data, res, width * 3);
-        }
-
         // Convert normalized coordinates back into natural coordiates
         for (i = width * 3; i &gt; 0; i--)
         {
</code>
        <close_date>1367752098</close_date>
        <history id='14072'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1367752098</date>
        </history>
        <history id='14073'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1367752098</date>
        </history>
        <history id='14074'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1367752098</date>
        </history>
    </patch>
    <patch id='3435'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1362824345</open_date>
        <summary>Make tibs install libraries with version (bug no. 018901).</summary>
        <code>Index: build/tibs/rules.mak
===================================================================
--- build/tibs/rules.mak	(revision 219)
+++ build/tibs/rules.mak	(working copy)
@@ -68,8 +68,8 @@
 CP = cp $1 $2
 # How to set the last modification date on a file to current
 TOUCH = touch $1
-# Check if version is valid (e.g. matches NUMBER.NUMBER(.NUMBER)?) on Unices, not valid on others
-VALID_VERSION = $(if $1,$(if $(findstring /$(TARGET)/,/posix/mac/),$(if $(shell echo $1 | sed -e 's/[0-9 ]\+\.[0-9 ]\+\(\.[0-9 ]\+\)\?//'),,T)))
+# Check if version is valid (e.g. matches NUMBER.NUMBER(.NUMBER(.NUMBER)?)?) on Unices, not valid on others
+VALID_VERSION = $(if $1,$(if $(findstring /$(TARGET)/,/posix/mac/),$(if $(shell echo $1 | sed -e 's/[0-9 ]\+\.[0-9 ]\+\(\.[0-9 ]\+\(\.[0-9 ]\+\)\?\+\)\?//'),,T)))
 # How to install one or several files
 INSTALL = $(foreach _,$1,$(call SINGLE.INSTALL,$_,$2,$3)$(NL))
 # How to install one or several directories
Index: build/tibs/compiler/gcc.mak
===================================================================
--- build/tibs/compiler/gcc.mak	(revision 219)
+++ build/tibs/compiler/gcc.mak	(working copy)
@@ -30,7 +30,6 @@
 GCC.LDFLAGS = $(GCC.LDFLAGS.$(MODE))
 GCC.LDFLAGS.LIBS = $(LDLIBS) -lm
 
-GCC.LDFLAGS.release = -s
 GCC.LDFLAGS.debug = -gdwarf-2 -g3
 
 GCC.LINKLIB = $(if $(findstring $L,$1),,$(if $(findstring /,$1),$1,-l$1))
@@ -77,15 +76,15 @@
 LINK.GCC.AR = $(GCC.AR) $(GCC.ARFLAGS) $@ $^
 LINK.GCC.EXEC = $(GCC.LD) -o $@ $(GCC.LDFLAGS) $(LDFLAGS) $1 $^ $(GCC.LDFLAGS.LIBS) $(LDFLAGS.LIBS) $2
 define LINK.GCC.SO.VER
-	$(GCC.LD) -o $@.$(SHARED.$3) $(call GCC.LDFLAGS.SHARED,$(notdir $@).$(basename $(basename $(SHARED.$3))),$(dir $@)) $(GCC.LDFLAGS) $(LDFLAGS) $1 $^ $(GCC.LDFLAGS.LIBS) $(LDFLAGS.LIBS) $2
-	ln -fs $(notdir $@.$(SHARED.$3)) $@.$(basename $(basename $(SHARED.$3)))
-	ln -fs $(notdir $@.$(basename $(basename $(SHARED.$3)))) $@
+	$(GCC.LD) -o $@.$(SHARED.$3) $(call GCC.LDFLAGS.SHARED,$(notdir $@).$(basename $(basename $(basename $(SHARED.$3)))),$(dir $@)) $(GCC.LDFLAGS) $(LDFLAGS) $1 $^ $(GCC.LDFLAGS.LIBS) $(LDFLAGS.LIBS) $2
+	ln -fs $(notdir $@.$(SHARED.$3)) $@.$(basename $(basename $(basename $(SHARED.$3))))
+	ln -fs $(notdir $@.$(basename $(basename $(basename $(SHARED.$3))))) $@
 endef
 define LINK.GCC.SO.NOVER
 	$(GCC.LD) -o $@ $(call GCC.LDFLAGS.SHARED,$(notdir $@),$(dir $@)) $(GCC.LDFLAGS) $(LDFLAGS) $1 $^ $(GCC.LDFLAGS.LIBS) $(LDFLAGS.LIBS) $2
 endef
 # If SHARED.$3 is a valid version number and target platform supports versioned
-# shared libraries, invokde LINK.GCC.SO.VER.
+# shared libraries, invoke LINK.GCC.SO.VER.
 # Otherwise create a non-versioned variant of the shared library
 define LINK.GCC.SO
 $(call LINK.GCC.SO.$(if $(call VALID_VERSION,$(SHARED.$3)),,NO)VER,$1,$2,$3)
@@ -108,7 +107,7 @@
 # $3 = full target file name)
 define MKIRULES.GCC
 $(if $(findstring $L,$2),\
-$(foreach _,$3 $(if $(call VALID_VERSION,$(SHARED.$2)),$3.$(basename $(basename $(SHARED.$2))) $3.$(SHARED.$2)),
+$(foreach _,$3 $(if $(call VALID_VERSION,$(SHARED.$2)),$3.$(basename $(basename $(basename $(SHARED.$2)))) $3.$(SHARED.$2)),
 	$(if $V,,@echo INSTALL $_ to $(call .INSTDIR,$1,$2,LIB,$(CONF_LIBDIR)) &amp;&amp;)\
 	$$(call INSTALL,$_,$(call .INSTDIR,$1,$2,LIB,$(CONF_LIBDIR)),$(call .INSTMODE,$1,$2,$(if $(SHARED.$2),0755,0644)))))\
 $(if $(findstring $E,$2),
Index: configure
===================================================================
--- configure	(revision 219)
+++ configure	(working copy)
@@ -7,7 +7,7 @@
 
 # Define project name
 tibs.PROJ = &quot;lensfun&quot;
-# Define version number (major.minor.release)
+# Define version number (major.minor.release.bugfix)
 tibs.VERSION = &quot;0.2.7.0&quot;
 # Project home page
 tibs.HOMEPAGE = &quot;http://lensfun.berlios.de&quot;
Index: tibs.py
===================================================================
--- tibs.py	(revision 219)
+++ tibs.py	(working copy)
@@ -35,8 +35,8 @@
 
 # Project name
 PROJ = &quot;Unknown&quot;
-# Version number (major.minor.release)
-VERSION = &quot;0.0.0&quot;
+# Version number (major.minor.release.bugfix)
+VERSION = &quot;0.0.0.0&quot;
 
 PREFIX = &quot;/usr/local&quot;
 BINDIR = None
</code>
        <close_date>1363640117</close_date>
        <history id='13962'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61570</mod_by>
            <date>1362911917</date>
        </history>
        <history id='13984'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61570</mod_by>
            <date>1362922844</date>
        </history>
        <history id='14006'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1363640117</date>
        </history>
        <history id='14007'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1363640117</date>
        </history>
        <history id='14008'>
            <field_name>details</field_name>
            <old_value>Thanks for the patch. It's now in SVN.</old_value>
            <mod_by>36447</mod_by>
            <date>1363640117</date>
        </history>
        <history id='14009'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1363640117</date>
        </history>
    </patch>
    <patch id='3420'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='63610' name='pers'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1360663960</open_date>
        <summary>Installation directories cannot be overriden using CMake</summary>
        <code>$OpenBSD$
Do not force those values but use cache for them, allowing
to override from command line.
--- CMakeLists.txt.orig	Tue Feb 12 13:52:21 2013
+++ CMakeLists.txt	Tue Feb 12 13:55:05 2013
@@ -73,11 +73,14 @@ IF(BUILD_STATIC)
 ENDIF()
  
 # define destination dirs (relative to prefix)
-SET(BINDIR bin)
-SET(LIBDIR lib${LIB_SUFFIX})
-SET(INCLUDEDIR include)
-SET(DATADIR share/lensfun)
-SET(DOCDIR share/doc/lensfun-${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_MICRO}.${VERSION_BUGFIX})
+SET(BINDIR bin CACHE PATH &quot;Directory for library example programs&quot;)
+SET(LIBDIR lib${LIB_SUFFIX} CACHE PATH &quot;Directory for library itself&quot;)
+SET(INCLUDEDIR include CACHE PATH &quot;Directory for library header files&quot;)
+SET(DATADIR share/lensfun CACHE PATH &quot;Directory for library data files&quot;)
+
+IF(BUILD_DOC)
+  SET(DOCDIR share/doc/lensfun-${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_MICRO}.${VERSION_BUGFIX} CACHE PATH &quot;Directory to put library documentation in&quot;)
+ENDIF(BUILD_DOC)
 
 IF(WIN32)
   # install into place in build-dir  
</code>
        <close_date>1362912296</close_date>
        <history id='13963'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1362912296</date>
        </history>
        <history id='13964'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362912296</date>
        </history>
        <history id='13965'>
            <field_name>details</field_name>
            <old_value>Thanks for the patch. </old_value>
            <mod_by>36447</mod_by>
            <date>1362912296</date>
        </history>
        <history id='13966'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1362912296</date>
        </history>
    </patch>
    <patch id='3421'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='63610' name='pers'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1360664146</open_date>
        <summary>Small improvements to docs/CMakeLists.txt</summary>
        <code>$OpenBSD$
1. This directory is already covered by BUILD_DOC option, so
   no reason to not to add &quot;doc&quot; target in build-by-default list;
2. Actually depend on configured file, CMake already takes care on
   depending on source file;
3. No need for GLOB, we can simply use &quot;INSTALL(DIRECTORY foo/&quot;
   syntax here.
--- docs/CMakeLists.txt.orig	Sun Feb 12 15:19:39 2012
+++ docs/CMakeLists.txt	Tue Feb 12 13:51:13 2013
@@ -12,12 +12,12 @@ CONFIGURE_FILE(doxyfile.in.cmake ${DOXYFILE} @ONLY)
 
 # now build documentation
 ADD_CUSTOM_TARGET(doc
+  ALL
   COMMAND &quot;${DOXYGEN_EXECUTABLE}&quot;
-  DEPENDS doxyfile.in.cmake manual-main.txt ../include/lensfun/lensfun.h.in
+  DEPENDS &quot;${DOXYFILE}&quot; manual-main.txt ../include/lensfun/lensfun.h.in
   WORKING_DIRECTORY &quot;${CMAKE_CURRENT_BINARY_DIR}&quot;
   COMMENT &quot;Building documentation with doxygen&quot;
 )
 
 # install documentation  
-FILE(GLOB doc_files &quot;${CMAKE_DOC_OUT}/*.*&quot;)
-INSTALL(FILES ${doc_files} DESTINATION ${DOCDIR})
+INSTALL(DIRECTORY ${CMAKE_DOC_OUT}/ DESTINATION ${DOCDIR})
</code>
        <close_date>1362912314</close_date>
        <history id='13967'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1362912314</date>
        </history>
        <history id='13968'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362912314</date>
        </history>
        <history id='13969'>
            <field_name>details</field_name>
            <old_value>Thx, applied to SVN.</old_value>
            <mod_by>36447</mod_by>
            <date>1362912314</date>
        </history>
        <history id='13970'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1362912314</date>
        </history>
    </patch>
    <patch id='3437'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1362852209</open_date>
        <summary>Update &quot;BUILDING WITH CMAKE&quot; for Ubuntu 12.04.</summary>
        <code>Index: README
===================================================================
--- README	(revision 216)
+++ README	(working copy)
@@ -241,26 +241,25 @@
     cd lensfun
     mkdir cmake_build
 
-Then run CMake to configure your sources and create the build files
+Enter the build directory and run CMake to configure your sources and create the build files
 
-    cmake cmake_build .
-    
-Enter the build directory and run make/make install as usual
-
     cd cmake_build
+    cmake ..
     
+Run make/make install as usual
+    
     make
     make install
 
 The following CMake options can be set (defaults are upper case):
 
-    - DLENSFUN_INSTALL_PREFIX=/USR/LOCAL install prefix 
-    - DBUILD_STATIC=OFF|on build static or shared lib
-    - DBUILD_TESTS=off|ON build also the test programs
-    - DBUILD_AUXFUN=OFF|on build also the auxfun lib and the tmod test program
-    - DBUILD_FOR_SSE=OFF|on build with SSE optimisation
-    - DBUILD_FOR_SSE2=OFF|on build with SSE2 optimisaiton
-    - DBUILD_DOC=OFF|on build documentation
+    -DLENSFUN_INSTALL_PREFIX=/USR/LOCAL install prefix 
+    -DBUILD_STATIC=OFF|on build static or shared lib
+    -DBUILD_TESTS=off|ON build also the test programs
+    -DBUILD_AUXFUN=OFF|on build also the auxfun lib and the tmod test program
+    -DBUILD_FOR_SSE=OFF|on build with SSE optimisation
+    -DBUILD_FOR_SSE2=OFF|on build with SSE2 optimisaiton
+    -DBUILD_DOC=OFF|on build documentation
 
 You can also build packages with cmake:
 
</code>
        <close_date>1362912352</close_date>
        <history id='13961'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>61570</mod_by>
            <date>1362895460</date>
        </history>
        <history id='13974'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1362912352</date>
        </history>
        <history id='13975'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1362912352</date>
        </history>
        <history id='13976'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1362912352</date>
        </history>
    </patch>
    <patch id='3433'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='63739' name='bluefightingcat'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1362598711</open_date>
        <summary>Distortion Profile for Sony 16-50mm</summary>
        <code>&lt;lens&gt;
    &lt;maker&gt;Sony&lt;/maker&gt;
    &lt;model&gt;Sony DT 16-50mm F2.8 SSM&lt;/model&gt;
    &lt;mount&gt;Sony Alpha&lt;/mount&gt;
    &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
    &lt;calibration&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;16&quot; a=&quot;0.0313950&quot; b=&quot;-0.0812810&quot; c=&quot;0.0164699&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;17&quot; a=&quot;0.0264456&quot; b=&quot;-0.0659419&quot; c=&quot;0.0065271&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;18&quot; a=&quot;0.0269712&quot; b=&quot;-0.0687339&quot; c=&quot;0.0198162&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;20&quot; a=&quot;0.0226641&quot; b=&quot;-0.0556216&quot; c=&quot;0.0106769&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;22&quot; a=&quot;0.0132067&quot; b=&quot;-0.0314146&quot; c=&quot;0.0071973&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.0056959&quot; b=&quot;-0.0077006&quot; c=&quot;0.0122191&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;26&quot; a=&quot;0.0055174&quot; b=&quot;-0.0074034&quot; c=&quot;-0.0107297&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;28&quot; a=&quot;0.0058777&quot; b=&quot;-0.0106156&quot; c=&quot;-0.0023575&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;30&quot; a=&quot;0.0021962&quot; b=&quot;0.0003911&quot; c=&quot;-0.0113694&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;-0.0029164&quot; b=&quot;0.0102165&quot; c=&quot;-0.0138367&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;40&quot; a=&quot;-0.0022428&quot; b=&quot;-0.0097886&quot; c=&quot;-0.0112101&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;45&quot; a=&quot;-0.0042728&quot; b=&quot;0.0196205&quot; c=&quot;-0.0251080&quot; /&gt;
      &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;-0.0036411&quot; b=&quot;0.0132272&quot; c=&quot;-0.0130181&quot; /&gt;
&lt;/lens&gt;
</code>
        <close_date>1363637926</close_date>
        <history id='13994'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1363637926</date>
        </history>
        <history id='13995'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1363637926</date>
        </history>
        <history id='13996'>
            <field_name>details</field_name>
            <old_value>Thanks you very much for your help!</old_value>
            <mod_by>36447</mod_by>
            <date>1363637926</date>
        </history>
        <history id='13997'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1363637926</date>
        </history>
    </patch>
    <patch id='3436'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1362844108</open_date>
        <summary>Fix use of &lt;focal&gt; and &lt;aperture&gt; tags (bug no. 018903).</summary>
        <code>Index: data/db/slr-nikon.xml
===================================================================
--- data/db/slr-nikon.xml	(revision 216)
+++ data/db/slr-nikon.xml	(working copy)
@@ -567,8 +567,8 @@
         &lt;maker&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;Nikon AF-S DX VR Zoom-Nikkor 18-105mm f/3.5-5.6G ED&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
-        &lt;focal&gt;18-105&lt;/focal&gt;
-        &lt;aperture&gt;3.5-22&lt;/aperture&gt;
+        &lt;focal min=&quot;18&quot; max=&quot;105&quot; /&gt;
+        &lt;aperture min=&quot;3.5&quot; max=&quot;22&quot; /&gt;
         &lt;type&gt;rectilinear&lt;/type&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
@@ -1035,8 +1035,8 @@
         &lt;maker&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;Nikon AF Nikkor 50mm f/1.8D&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
-        &lt;focal&gt;50&lt;/focal&gt;
-        &lt;aperture&gt;1.8-22&lt;/aperture&gt;
+        &lt;focal value=&quot;50&quot; /&gt;
+        &lt;aperture min=&quot;1.8&quot; max=&quot;22&quot; /&gt;
         &lt;type&gt;rectilinear&lt;/type&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
         &lt;calibration&gt;
</code>
        <close_date>1363638061</close_date>
        <history id='13998'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1363638061</date>
        </history>
        <history id='13999'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1363638061</date>
        </history>
        <history id='14000'>
            <field_name>details</field_name>
            <old_value>Thx!</old_value>
            <mod_by>36447</mod_by>
            <date>1363638061</date>
        </history>
        <history id='14001'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1363638061</date>
        </history>
    </patch>
    <patch id='3450'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='63896' name='aevseev'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1365486301</open_date>
        <summary>Add Sony SLR cameras, correct cropfactor for A850 and A900</summary>
        <code>--- a/data/db/slr-sony.xml	2013-01-27 20:44:14.000000000 +0400
+++ b/data/db/slr-sony.xml	2013-04-09 09:52:56.320663501 +0400
@@ -28,6 +28,15 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;SLT-A37&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 37&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
         &lt;model&gt;SLT-A55V&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;Alpha 55&lt;/model&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
@@ -37,6 +46,24 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;SLT-A57&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 57&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;SLT-A58&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 58&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
         &lt;model&gt;SLT-A65V&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;Alpha 65&lt;/model&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
@@ -55,6 +82,15 @@
     &lt;camera&gt;
         &lt;maker&gt;SONY&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
+        &lt;model&gt;SLT-A99&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;Alpha 99&lt;/model&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SONY&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Sony&lt;/maker&gt;
         &lt;model&gt;DSLR-A100&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;Alpha 100&lt;/model&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
@@ -193,7 +229,7 @@
         &lt;model&gt;DSLR-A850&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;Alpha 850&lt;/model&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
-        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
@@ -202,7 +238,7 @@
         &lt;model&gt;DSLR-A900&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;Alpha 900&lt;/model&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
-        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;lens&gt;
@@ -471,7 +507,7 @@
         &lt;maker&gt;Sony&lt;/maker&gt;
         &lt;model&gt;Sony 50 mm F1.4 SAL 50F14&lt;/model&gt;
         &lt;mount&gt;Sony Alpha&lt;/mount&gt;
-        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;poly5&quot; focal=&quot;50&quot; k1=&quot;-0.003782&quot;  k2=&quot;-0.000003&quot; /&gt;
 
</code>
        <close_date>1366534834</close_date>
        <history id='14022'>
            <field_name>details</field_name>
            <old_value>Sony SAL-50F14 is full frame lens</old_value>
            <mod_by>63896</mod_by>
            <date>1365487071</date>
        </history>
        <history id='14023'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>63896</mod_by>
            <date>1365487071</date>
        </history>
        <history id='14036'>
            <field_name>details</field_name>
            <old_value>Thanks for the fix!
It is applied except the changed lens crop factor. See my comment to your other patch.</old_value>
            <mod_by>36447</mod_by>
            <date>1366534637</date>
        </history>
        <history id='14041'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1366534834</date>
        </history>
        <history id='14042'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1366534834</date>
        </history>
        <history id='14043'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1366534834</date>
        </history>
    </patch>
    <patch id='3452'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1365612523</open_date>
        <summary>Add new camera: Panasonic DMC-GF6</summary>
        <code>Index: data/db/mil-panasonic.xml
===================================================================
--- data/db/mil-panasonic.xml	(revision 223)
+++ data/db/mil-panasonic.xml	(working copy)
@@ -86,6 +86,13 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Panasonic&lt;/maker&gt;
+        &lt;model&gt;DMC-GF6&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Panasonic&lt;/maker&gt;
         &lt;model&gt;DMC-G10&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
</code>
        <close_date>1366536865</close_date>
        <history id='14052'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1366536865</date>
        </history>
        <history id='14053'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1366536865</date>
        </history>
        <history id='14054'>
            <field_name>details</field_name>
            <old_value>applied to SVN.</old_value>
            <mod_by>36447</mod_by>
            <date>1366536865</date>
        </history>
        <history id='14055'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1366536865</date>
        </history>
    </patch>
    <patch id='3442'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1363698238</open_date>
        <summary>Make tibs install shared libraries with 3-part version no.</summary>
        <code>Index: tibs.py
===================================================================
--- tibs.py	(revision 223)
+++ tibs.py	(working copy)
@@ -392,6 +392,7 @@
     if len (v) &gt; 3:
         VERSION_BUGFIX = v [3]
 
+    add_config_mak (&quot;CONF_LIB_VERSION&quot;, VERSION_MAJOR + '.' + VERSION_MINOR + '.' + VERSION_MICRO)
 
 # Autodetect platform and architecture
 def detect_platform ():
Index: libs/lensfun/lensfun.mak
===================================================================
--- libs/lensfun/lensfun.mak	(revision 223)
+++ libs/lensfun/lensfun.mak	(working copy)
@@ -3,7 +3,7 @@
 DIR.INCLUDE.C += :include/lensfun
 TARGETS.lensfun = lensfun$L
 SRC.lensfun$L := $(wildcard libs/lensfun/*.cpp libs/lensfun/$(TARGET)/*.cpp)
-SHARED.lensfun$L = $(if $(SHAREDLIBS),$(CONF_VERSION))
+SHARED.lensfun$L = $(if $(SHAREDLIBS),$(CONF_LIB_VERSION))
 LIBS.lensfun = $(TARGETS.regex)
 SYSLIBS.lensfun = GLIB_20
 INSTALL.TARGETS += lensfun
</code>
        <close_date>1366536769</close_date>
        <history id='14044'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1366536769</date>
        </history>
        <history id='14045'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1366536769</date>
        </history>
        <history id='14046'>
            <field_name>details</field_name>
            <old_value>It's applied to SVN, thanks for the patch.</old_value>
            <mod_by>36447</mod_by>
            <date>1366536769</date>
        </history>
        <history id='14047'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1366536769</date>
        </history>
    </patch>
    <patch id='3443'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1363709027</open_date>
        <summary>Install and link in libregex if regex.h is not found.</summary>
        <code>Index: tests/example/example.mak
===================================================================
--- tests/example/example.mak	(revision 223)
+++ tests/example/example.mak	(working copy)
@@ -13,5 +13,8 @@
 CXXFLAGS.example = -DTEST
 # The libraries this application depends on
 LIBS.example = lensfun$L
+ifdef NEED_REGEX
+LIBS.example += regex$L
+endif
 # Link this example against these system libraries (detected by configure)
 SYSLIBS.example = GLIB_20
Index: tests/tfun/tfun.mak
===================================================================
--- tests/tfun/tfun.mak	(revision 223)
+++ tests/tfun/tfun.mak	(working copy)
@@ -4,4 +4,7 @@
 SRC.tfun$E = $(wildcard tests/tfun/*.cpp)
 
 LIBS.tfun = lensfun$L
+ifdef NEED_REGEX
+LIBS.tfun += regex$L
+endif
 SYSLIBS.tfun = GLIB_20
Index: tests/trwxml/trwxml.mak
===================================================================
--- tests/trwxml/trwxml.mak	(revision 223)
+++ tests/trwxml/trwxml.mak	(working copy)
@@ -4,4 +4,7 @@
 SRC.trwxml$E = $(wildcard tests/trwxml/*.cpp)
 
 LIBS.trwxml = lensfun$L
+ifdef NEED_REGEX
+LIBS.trwxml += regex$L
+endif
 SYSLIBS.trwxml = GLIB_20
Index: tests/tmod/tmod.mak
===================================================================
--- tests/tmod/tmod.mak	(revision 223)
+++ tests/tmod/tmod.mak	(working copy)
@@ -4,4 +4,7 @@
 SRC.tmod$E = $(wildcard tests/tmod/*.cpp)
 
 LIBS.tmod = lensfun$L auxfun$L
+ifdef NEED_REGEX
+LIBS.tmod += regex$L
+endif
 SYSLIBS.tmod = GLIB_20 LIBPNG
Index: libs/lensfun/lensfun.pc.in
===================================================================
--- libs/lensfun/lensfun.pc.in	(revision 223)
+++ libs/lensfun/lensfun.pc.in	(working copy)
@@ -2,5 +2,5 @@
 Description: A photographic lens database and access library
 Version: @CONF_VERSION@
 Requires: glib-2.0
-Libs: -L@CONF_LIBDIR@ -llensfun
+Libs: -L@CONF_LIBDIR@ -llensfun @NEED_REGEX@
 Cflags: -I@CONF_INCLUDEDIR@ @CONF_LENSFUN_STATIC@
Index: libs/lensfun/lensfun.mak
===================================================================
--- libs/lensfun/lensfun.mak	(revision 223)
+++ libs/lensfun/lensfun.mak	(working copy)
@@ -22,4 +22,4 @@
 TARGETS.lensfun-pc = lensfun.pc
 SRC.lensfun.pc := $(wildcard libs/lensfun/*.pc.in) config.mak
 INSTALL.TARGETS += lensfun-pc
-PKGCONFIG.SED.lensfun-pc = -e &quot;s,@CONF_LENSFUN_STATIC@,$(if $(SHAREDLIBS),,-DCONF_LENSFUN_STATIC),g&quot;
+PKGCONFIG.SED.lensfun-pc = -e &quot;s,@NEED_REGEX@,$(if $(NEED_REGEX),-lregex,),g&quot; -e &quot;s,@CONF_LENSFUN_STATIC@,$(if $(SHAREDLIBS),,-DCONF_LENSFUN_STATIC),g&quot;
Index: libs/regex/regex.mak
===================================================================
--- libs/regex/regex.mak	(revision 223)
+++ libs/regex/regex.mak	(working copy)
@@ -7,6 +7,7 @@
 SRC.regex$L := $(wildcard libs/regex/*.c)
 CFLAGS.regex$L = -DHAVE_SYS_TYPES_H -DTRE_REGEX_T_FIELD=value \
     -DTRE_VERSION=&quot;0&quot; -Dinline=
+INSTALL.TARGETS += regex
 
 ifeq ($(TOOLKIT),GCC)
 CFLAGS.regex$L += -Wno-unused-function
</code>
        <close_date>1366536779</close_date>
        <history id='14048'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1366536779</date>
        </history>
        <history id='14049'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1366536779</date>
        </history>
        <history id='14050'>
            <field_name>details</field_name>
            <old_value>It's applied to SVN, thanks for the patch.</old_value>
            <mod_by>36447</mod_by>
            <date>1366536779</date>
        </history>
        <history id='14051'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1366536779</date>
        </history>
    </patch>
    <patch id='3520'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1384382980</open_date>
        <summary>Superfluous code?</summary>
        <code>=== modified file 'libs/lensfun/windows/auxfun.cpp'
*** libs/lensfun/windows/auxfun.cpp	2009-11-08 14:38:41 +0000
--- libs/lensfun/windows/auxfun.cpp	2013-11-13 22:19:18 +0000
***************
*** 13,24 ****
  {
      static gchar *dir = NULL;
  
-     if (dir)
-     {
-         g_free (dir);
-         dir = NULL;
-     }
- 
      HMODULE h = GetModuleHandle (&quot;lensfun.dll&quot;);
      if (!h)
          return g_strdup (&quot;&quot;);
--- 13,18 ----
</code>
        <close_date>1384704896</close_date>
        <history id='14413'>
            <field_name>details</field_name>
            <old_value>Maybe I am really ignorant here, but the deleted code can *never* be executed, can it?</old_value>
            <mod_by>2378</mod_by>
            <date>1384383021</date>
        </history>
        <history id='14445'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1384704896</date>
        </history>
        <history id='14446'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1384704896</date>
        </history>
        <history id='14447'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1384704896</date>
        </history>
    </patch>
    <patch id='3539'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='65071' name='lebedevri'/>
        <assigned_to id='2378' name='bronger'/>
        <open_date>1387925101</open_date>
        <summary>Vignetting data for 1 lens</summary>
        <code>&lt;lensdatabase&gt;

    &lt;lens&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Canon EF 70-200mm f/2.8L IS II USM&lt;/model&gt;
        &lt;mount&gt;Canon EF&lt;/mount&gt;
        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;2.8&quot; distance=&quot;1.1&quot; k1=&quot;-0.6903&quot; k2=&quot;0.4915&quot; k3=&quot;-0.4215&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;2.8&quot; distance=&quot;2.2&quot; k1=&quot;-0.7032&quot; k2=&quot;0.5010&quot; k3=&quot;-0.3688&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;2.8&quot; distance=&quot;6.6&quot; k1=&quot;-0.7044&quot; k2=&quot;0.5140&quot; k3=&quot;-0.3822&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.6992&quot; k2=&quot;0.4928&quot; k3=&quot;-0.3584&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;1.1&quot; k1=&quot;-0.1523&quot; k2=&quot;0.0629&quot; k3=&quot;-0.3971&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;2.2&quot; k1=&quot;-0.1805&quot; k2=&quot;0.1006&quot; k3=&quot;-0.3310&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;6.6&quot; k1=&quot;-0.1908&quot; k2=&quot;0.1437&quot; k3=&quot;-0.3707&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.1751&quot; k2=&quot;0.0818&quot; k3=&quot;-0.3094&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;1.1&quot; k1=&quot;-0.3493&quot; k2=&quot;0.7191&quot; k3=&quot;-0.7897&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;2.2&quot; k1=&quot;-0.3213&quot; k2=&quot;0.5350&quot; k3=&quot;-0.5394&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;6.6&quot; k1=&quot;-0.3404&quot; k2=&quot;0.6019&quot; k3=&quot;-0.5957&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.3198&quot; k2=&quot;0.5243&quot; k3=&quot;-0.5184&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;1.1&quot; k1=&quot;-0.3772&quot; k2=&quot;0.7410&quot; k3=&quot;-0.7060&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;2.2&quot; k1=&quot;-0.2877&quot; k2=&quot;0.3610&quot; k3=&quot;-0.3299&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;6.6&quot; k1=&quot;-0.2978&quot; k2=&quot;0.3942&quot; k3=&quot;-0.3545&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2864&quot; k2=&quot;0.3514&quot; k3=&quot;-0.3141&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1.1&quot; k1=&quot;-0.3134&quot; k2=&quot;0.4626&quot; k3=&quot;-0.4231&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;2.2&quot; k1=&quot;-0.2799&quot; k2=&quot;0.3009&quot; k3=&quot;-0.2530&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;6.6&quot; k1=&quot;-0.2883&quot; k2=&quot;0.3303&quot; k3=&quot;-0.2752&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2804&quot; k2=&quot;0.3049&quot; k3=&quot;-0.2529&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;1.1&quot; k1=&quot;-0.2986&quot; k2=&quot;0.3882&quot; k3=&quot;-0.3436&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;2.2&quot; k1=&quot;-0.2800&quot; k2=&quot;0.2825&quot; k3=&quot;-0.2246&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;6.6&quot; k1=&quot;-0.2911&quot; k2=&quot;0.3217&quot; k3=&quot;-0.2563&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.2819&quot; k2=&quot;0.2923&quot; k3=&quot;-0.2304&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;1.1&quot; k1=&quot;-0.2983&quot; k2=&quot;0.3751&quot; k3=&quot;-0.3249&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;2.2&quot; k1=&quot;-0.2796&quot; k2=&quot;0.2666&quot; k3=&quot;-0.2031&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;6.6&quot; k1=&quot;-0.2941&quot; k2=&quot;0.3210&quot; k3=&quot;-0.2496&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2864&quot; k2=&quot;0.2932&quot; k3=&quot;-0.2235&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;32&quot; distance=&quot;1.1&quot; k1=&quot;-0.3010&quot; k2=&quot;0.3744&quot; k3=&quot;-0.3195&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;32&quot; distance=&quot;2.2&quot; k1=&quot;-0.2808&quot; k2=&quot;0.2589&quot; k3=&quot;-0.1912&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;32&quot; distance=&quot;6.6&quot; k1=&quot;-0.2999&quot; k2=&quot;0.3276&quot; k3=&quot;-0.2489&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.2917&quot; k2=&quot;0.2960&quot; k3=&quot;-0.2192&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;1.1&quot; k1=&quot;-0.4127&quot; k2=&quot;-0.8186&quot; k3=&quot;0.5474&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;2.2&quot; k1=&quot;-0.3584&quot; k2=&quot;-0.5409&quot; k3=&quot;0.2464&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;6.6&quot; k1=&quot;-0.3842&quot; k2=&quot;-0.3887&quot; k3=&quot;0.1295&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.3807&quot; k2=&quot;-0.3923&quot; k3=&quot;0.1283&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;1.1&quot; k1=&quot;0.1766&quot; k2=&quot;-1.3863&quot; k3=&quot;0.6308&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;2.2&quot; k1=&quot;0.0256&quot; k2=&quot;-0.6318&quot; k3=&quot;0.0693&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;6.6&quot; k1=&quot;-0.0139&quot; k2=&quot;-0.4667&quot; k3=&quot;-0.0410&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.0140&quot; k2=&quot;-0.4695&quot; k3=&quot;-0.0407&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;1.1&quot; k1=&quot;-0.0564&quot; k2=&quot;-0.2502&quot; k3=&quot;-0.2590&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;2.2&quot; k1=&quot;-0.2328&quot; k2=&quot;0.3530&quot; k3=&quot;-0.6180&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;6.6&quot; k1=&quot;-0.2563&quot; k2=&quot;0.4342&quot; k3=&quot;-0.6531&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2521&quot; k2=&quot;0.4154&quot; k3=&quot;-0.6411&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;1.1&quot; k1=&quot;-0.3159&quot; k2=&quot;0.6907&quot; k3=&quot;-0.9083&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;2.2&quot; k1=&quot;-0.3821&quot; k2=&quot;0.8224&quot; k3=&quot;-0.8810&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;6.6&quot; k1=&quot;-0.3718&quot; k2=&quot;0.7842&quot; k3=&quot;-0.8262&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.3669&quot; k2=&quot;0.7595&quot; k3=&quot;-0.8071&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1.1&quot; k1=&quot;-0.4569&quot; k2=&quot;1.1204&quot; k3=&quot;-1.1430&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;2.2&quot; k1=&quot;-0.4052&quot; k2=&quot;0.8352&quot; k3=&quot;-0.8031&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;6.6&quot; k1=&quot;-0.3698&quot; k2=&quot;0.7073&quot; k3=&quot;-0.6829&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.3644&quot; k2=&quot;0.6871&quot; k3=&quot;-0.6710&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;1.1&quot; k1=&quot;-0.4712&quot; k2=&quot;1.1108&quot; k3=&quot;-1.0630&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;2.2&quot; k1=&quot;-0.3781&quot; k2=&quot;0.6930&quot; k3=&quot;-0.6437&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;6.6&quot; k1=&quot;-0.3465&quot; k2=&quot;0.5848&quot; k3=&quot;-0.5439&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.3417&quot; k2=&quot;0.5641&quot; k3=&quot;-0.5299&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;1.1&quot; k1=&quot;-0.4159&quot; k2=&quot;0.8655&quot; k3=&quot;-0.8143&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;2.2&quot; k1=&quot;-0.3567&quot; k2=&quot;0.5901&quot; k3=&quot;-0.5326&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;6.6&quot; k1=&quot;-0.3424&quot; k2=&quot;0.5596&quot; k3=&quot;-0.5155&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.3323&quot; k2=&quot;0.5078&quot; k3=&quot;-0.4635&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;1.1&quot; k1=&quot;-0.3706&quot; k2=&quot;0.6724&quot; k3=&quot;-0.6293&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;2.2&quot; k1=&quot;-0.3552&quot; k2=&quot;0.5638&quot; k3=&quot;-0.4961&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;6.6&quot; k1=&quot;-0.3401&quot; k2=&quot;0.5322&quot; k3=&quot;-0.4787&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.3321&quot; k2=&quot;0.4860&quot; k3=&quot;-0.4315&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;2.8&quot; distance=&quot;1.1&quot; k1=&quot;-0.9114&quot; k2=&quot;0.1148&quot; k3=&quot;0.1331&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;2.8&quot; distance=&quot;2.2&quot; k1=&quot;-0.5217&quot; k2=&quot;-0.6324&quot; k3=&quot;0.5138&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;2.8&quot; distance=&quot;6.6&quot; k1=&quot;-0.5075&quot; k2=&quot;-0.6224&quot; k3=&quot;0.4935&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.4616&quot; k2=&quot;-0.7000&quot; k3=&quot;0.5298&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;4&quot; distance=&quot;1.1&quot; k1=&quot;0.0836&quot; k2=&quot;-1.4986&quot; k3=&quot;0.8879&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;4&quot; distance=&quot;2.2&quot; k1=&quot;0.1548&quot; k2=&quot;-1.3879&quot; k3=&quot;0.7263&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;4&quot; distance=&quot;6.6&quot; k1=&quot;0.1360&quot; k2=&quot;-1.2941&quot; k3=&quot;0.6588&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;0.1264&quot; k2=&quot;-1.2471&quot; k3=&quot;0.6209&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;1.1&quot; k1=&quot;0.0393&quot; k2=&quot;-0.6959&quot; k3=&quot;0.1619&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;2.2&quot; k1=&quot;-0.0399&quot; k2=&quot;-0.3418&quot; k3=&quot;-0.0873&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;6.6&quot; k1=&quot;-0.0671&quot; k2=&quot;-0.2549&quot; k3=&quot;-0.1339&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.0846&quot; k2=&quot;-0.1894&quot; k3=&quot;-0.1807&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;8&quot; distance=&quot;1.1&quot; k1=&quot;-0.2401&quot; k2=&quot;0.3734&quot; k3=&quot;-0.5770&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;8&quot; distance=&quot;2.2&quot; k1=&quot;-0.2865&quot; k2=&quot;0.5155&quot; k3=&quot;-0.6318&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;8&quot; distance=&quot;6.6&quot; k1=&quot;-0.2847&quot; k2=&quot;0.4939&quot; k3=&quot;-0.5961&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2942&quot; k2=&quot;0.5236&quot; k3=&quot;-0.6136&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;1.1&quot; k1=&quot;-0.3775&quot; k2=&quot;0.7654&quot; k3=&quot;-0.7480&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;2.2&quot; k1=&quot;-0.3560&quot; k2=&quot;0.6547&quot; k3=&quot;-0.6132&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;6.6&quot; k1=&quot;-0.3248&quot; k2=&quot;0.5429&quot; k3=&quot;-0.5166&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.3200&quot; k2=&quot;0.5307&quot; k3=&quot;-0.5093&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;16&quot; distance=&quot;1.1&quot; k1=&quot;-0.3505&quot; k2=&quot;0.5924&quot; k3=&quot;-0.5254&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;16&quot; distance=&quot;2.2&quot; k1=&quot;-0.3037&quot; k2=&quot;0.4038&quot; k3=&quot;-0.3422&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;16&quot; distance=&quot;6.6&quot; k1=&quot;-0.2771&quot; k2=&quot;0.3288&quot; k3=&quot;-0.2919&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.2794&quot; k2=&quot;0.3395&quot; k3=&quot;-0.3011&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;1.1&quot; k1=&quot;-0.2934&quot; k2=&quot;0.3457&quot; k3=&quot;-0.2829&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;2.2&quot; k1=&quot;-0.2917&quot; k2=&quot;0.3279&quot; k3=&quot;-0.2543&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;6.6&quot; k1=&quot;-0.2686&quot; k2=&quot;0.2746&quot; k3=&quot;-0.2265&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2745&quot; k2=&quot;0.2974&quot; k3=&quot;-0.2460&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;32&quot; distance=&quot;1.1&quot; k1=&quot;-0.2895&quot; k2=&quot;0.3111&quot; k3=&quot;-0.2395&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;32&quot; distance=&quot;2.2&quot; k1=&quot;-0.2948&quot; k2=&quot;0.3140&quot; k3=&quot;-0.2270&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;32&quot; distance=&quot;6.6&quot; k1=&quot;-0.2624&quot; k2=&quot;0.2556&quot; k3=&quot;-0.2102&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.2744&quot; k2=&quot;0.2780&quot; k3=&quot;-0.2174&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;2.8&quot; distance=&quot;1.1&quot; k1=&quot;-1.0106&quot; k2=&quot;0.6461&quot; k3=&quot;-0.2061&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;2.8&quot; distance=&quot;2.2&quot; k1=&quot;-1.2689&quot; k2=&quot;1.1306&quot; k3=&quot;-0.4702&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;2.8&quot; distance=&quot;6.6&quot; k1=&quot;-1.4187&quot; k2=&quot;1.4460&quot; k3=&quot;-0.6515&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-1.3763&quot; k2=&quot;1.3539&quot; k3=&quot;-0.5966&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;4&quot; distance=&quot;1.1&quot; k1=&quot;-0.4700&quot; k2=&quot;-0.4018&quot; k3=&quot;0.3900&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;4&quot; distance=&quot;2.2&quot; k1=&quot;-0.2008&quot; k2=&quot;-0.9436&quot; k3=&quot;0.6831&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;4&quot; distance=&quot;6.6&quot; k1=&quot;-0.1684&quot; k2=&quot;-0.9831&quot; k3=&quot;0.6955&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.1467&quot; k2=&quot;-1.0150&quot; k3=&quot;0.7087&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5.6&quot; distance=&quot;1.1&quot; k1=&quot;0.0799&quot; k2=&quot;-1.0113&quot; k3=&quot;0.5261&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5.6&quot; distance=&quot;2.2&quot; k1=&quot;0.0745&quot; k2=&quot;-0.8751&quot; k3=&quot;0.4136&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5.6&quot; distance=&quot;6.6&quot; k1=&quot;0.0578&quot; k2=&quot;-0.8091&quot; k3=&quot;0.3684&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;0.0523&quot; k2=&quot;-0.7662&quot; k3=&quot;0.3361&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;1.1&quot; k1=&quot;-0.1596&quot; k2=&quot;0.0923&quot; k3=&quot;-0.2576&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;2.2&quot; k1=&quot;-0.1845&quot; k2=&quot;0.1739&quot; k3=&quot;-0.2892&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;6.6&quot; k1=&quot;-0.1901&quot; k2=&quot;0.1756&quot; k3=&quot;-0.2789&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.1936&quot; k2=&quot;0.1920&quot; k3=&quot;-0.2842&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;11&quot; distance=&quot;1.1&quot; k1=&quot;-0.2535&quot; k2=&quot;0.3075&quot; k3=&quot;-0.2632&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;11&quot; distance=&quot;2.2&quot; k1=&quot;-0.2348&quot; k2=&quot;0.2272&quot; k3=&quot;-0.1771&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;11&quot; distance=&quot;6.6&quot; k1=&quot;-0.2227&quot; k2=&quot;0.1756&quot; k3=&quot;-0.1347&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2164&quot; k2=&quot;0.1547&quot; k3=&quot;-0.1135&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;16&quot; distance=&quot;1.1&quot; k1=&quot;-0.1965&quot; k2=&quot;0.0573&quot; k3=&quot;-0.0079&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;16&quot; distance=&quot;2.2&quot; k1=&quot;-0.2088&quot; k2=&quot;0.0847&quot; k3=&quot;-0.0200&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;16&quot; distance=&quot;6.6&quot; k1=&quot;-0.2046&quot; k2=&quot;0.0693&quot; k3=&quot;-0.0136&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.2059&quot; k2=&quot;0.0741&quot; k3=&quot;-0.0143&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;22&quot; distance=&quot;1.1&quot; k1=&quot;-0.2089&quot; k2=&quot;0.0698&quot; k3=&quot;-0.0029&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;22&quot; distance=&quot;2.2&quot; k1=&quot;-0.2144&quot; k2=&quot;0.0843&quot; k3=&quot;-0.0087&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;22&quot; distance=&quot;6.6&quot; k1=&quot;-0.2084&quot; k2=&quot;0.0650&quot; k3=&quot;-0.0001&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2118&quot; k2=&quot;0.0734&quot; k3=&quot;-0.0019&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;32&quot; distance=&quot;1.1&quot; k1=&quot;-0.2151&quot; k2=&quot;0.0762&quot; k3=&quot;-0.0006&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;32&quot; distance=&quot;2.2&quot; k1=&quot;-0.2250&quot; k2=&quot;0.1005&quot; k3=&quot;-0.0129&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;32&quot; distance=&quot;6.6&quot; k1=&quot;-0.2227&quot; k2=&quot;0.0901&quot; k3=&quot;-0.0095&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.2221&quot; k2=&quot;0.0892&quot; k3=&quot;-0.0062&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;

&lt;/lensdatabase&gt;
</code>
        <close_date>1387953432</close_date>
        <history id='14520'>
            <field_name>details</field_name>
            <old_value>Taken with Canon EOS 5D Mark III</old_value>
            <mod_by>65071</mod_by>
            <date>1387925121</date>
        </history>
        <history id='14521'>
            <field_name>details</field_name>
            <old_value>Thank you, the data is included.</old_value>
            <mod_by>2378</mod_by>
            <date>1387953404</date>
        </history>
        <history id='14522'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1387953432</date>
        </history>
        <history id='14523'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1387953432</date>
        </history>
        <history id='14524'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1387953432</date>
        </history>
    </patch>
    <patch id='3533'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1386858906</open_date>
        <summary>Remove support for CCI</summary>
        <code>=== modified file 'build/lensfun.spec.in'
*** build/lensfun.spec.in	2008-06-27 13:25:30 +0000
--- build/lensfun.spec.in	2013-12-30 09:07:39 +0000
***************
*** 25,32 ****
  search for specific things in it, but also provides a set of algorithms
  for correcting images based on detailed knowledge of lens properties
  and calibration data. Right now lensfun is designed to correct distortion,
! transversal (also known as lateral) chromatic aberrations, vignetting
! and colour contribution index of the lens.
  
  
  %package devel
--- 25,32 ----
  search for specific things in it, but also provides a set of algorithms
  for correcting images based on detailed knowledge of lens properties
  and calibration data. Right now lensfun is designed to correct distortion,
! transversal (also known as lateral) chromatic aberrations, and vignetting
! of the lens.
  
  
  %package devel

=== modified file 'data/db/rf-leica.xml'
*** data/db/rf-leica.xml	2013-12-25 21:15:16 +0000
--- data/db/rf-leica.xml	2013-12-30 09:03:58 +0000
***************
*** 16,22 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Elmarit-M 2.8/21 ASPH&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;6&quot; blue=&quot;5&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 16,21 ----
***************
*** 24,30 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Elmarit-M 2.8/21&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;5&quot; blue=&quot;2&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 23,28 ----
***************
*** 32,38 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Elmarit-M 24mm f/2.8 ASPH&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;5&quot; blue=&quot;5&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 30,35 ----
***************
*** 40,46 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Elmarit-M 2.8/28&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;5&quot; blue=&quot;4&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 37,42 ----
***************
*** 48,54 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Elmarit-M 2.8/28&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;4&quot; blue=&quot;2&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 44,49 ----
***************
*** 56,62 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Summilux-M 1.4/35 ASPH&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;6&quot; blue=&quot;6&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 51,56 ----
***************
*** 64,70 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Summilux-M 1.4/35 ASPH&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;5&quot; blue=&quot;5&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 58,63 ----
***************
*** 72,78 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Summilux-M 1.4/35&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;4&quot; blue=&quot;1&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 65,70 ----
***************
*** 80,86 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Summicron-M 2/35 ASPH&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;4&quot; blue=&quot;3&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 72,77 ----
***************
*** 88,94 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Noctilux-M 1/50&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;8&quot; blue=&quot;6&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 79,84 ----
***************
*** 96,102 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Sumilux-M 1.4/50&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;5&quot; blue=&quot;2&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 86,91 ----
***************
*** 104,110 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Summicron-M 2/50&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;5&quot; blue=&quot;4&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 93,98 ----
***************
*** 112,118 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Elmar-M 2.8/50&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;6&quot; blue=&quot;5&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 100,105 ----
***************
*** 120,126 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Summilux-M 1.4/75&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;6&quot; blue=&quot;3&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 107,112 ----
***************
*** 128,134 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;APO-Summicron-M 2/90 ASPH&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;6&quot; blue=&quot;4&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 114,119 ----
***************
*** 136,142 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Apo-Telyt-M 3.4/135&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;5&quot; blue=&quot;4&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 121,126 ----
***************
*** 144,150 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Elmarit-M 2.8/135&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;6&quot; blue=&quot;4&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 128,133 ----
***************
*** 152,158 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Tri-Elmar 4/28&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;5&quot; blue=&quot;3&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 135,140 ----
***************
*** 160,166 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Tri-Elmar 4/35&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;5&quot; blue=&quot;3&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 142,147 ----
***************
*** 168,174 ****
      &lt;lens&gt;
          &lt;maker&gt;Leica&lt;/maker&gt;
          &lt;model&gt;Tri-Elmar 4/50&lt;/model&gt;
-         &lt;cci red=&quot;0&quot; green=&quot;5&quot; blue=&quot;3&quot; /&gt;
          &lt;mount&gt;Leica M&lt;/mount&gt;
          &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
      &lt;/lens&gt;
--- 149,154 ----

=== modified file 'docs/manual-main.txt'
*** docs/manual-main.txt	2013-12-22 11:01:05 +0000
--- docs/manual-main.txt	2013-12-30 09:06:02 +0000
***************
*** 390,399 ****
      shorter edge.  lensfun needs the aspect ratio internally for correct
      application of the distortion parameters.  You may give is as a real number
      or as a ratio with a colon like 4:3.  It defaults to 1.5 or 3:2.
- &lt;dt&gt;\&lt;cci r=&quot;number&quot; g=&quot;number&quot; b=&quot;number&quot; /\&gt;
- &lt;dd&gt;The Colour Contribution Index of the lens, as defined by ISO 6728-83.
-     Unfortunately, for now this data is unused as I couldn't find the respective
-     standard (they are sold for 30 euros or more).
  &lt;dt&gt;\&lt;center x=&quot;number&quot; y=&quot;number&quot; /\&gt;
  &lt;dd&gt;The decentering of the lens, i.e. the offset of its optical axis
      from the center of the viewframe. x denotes the offset in
--- 390,395 ----

=== modified file 'include/lensfun/lensfun.h.in'
*** include/lensfun/lensfun.h.in	2013-12-27 08:16:54 +0000
--- include/lensfun/lensfun.h.in	2013-12-30 09:08:18 +0000
***************
*** 763,774 ****
      float CenterX;
      /** The vertical shift of all lens distortions. (0,0) for geometric center */
      float CenterY;
-     /** Lens colour contribution index (ISO/CCI, ISO 6728:1983). Default 0/5/4 */
-     float RedCCI;
-     /** Green component of lens CCI */
-     float GreenCCI;
-     /** Blue component of lens CCI */
-     float BlueCCI;
      /** Crop factor at which calibration measurements were taken.  Must be defined. */
      float CropFactor;
      /** Aspect ratio of the images used for calibration measurements. */
--- 763,768 ----
***************
*** 1600,1607 ****
      LF_MODIFY_TCA        = 0x00000001,
      /** Correct (or apply) lens vignetting */
      LF_MODIFY_VIGNETTING = 0x00000002,
!     /** Correct (or apply) lens color contribution index */
!     LF_MODIFY_CCI        = 0x00000004,
      /** Correct (or apply) lens distortion */
      LF_MODIFY_DISTORTION = 0x00000008,
      /** Convert image geometry */
--- 1594,1600 ----
      LF_MODIFY_TCA        = 0x00000001,
      /** Correct (or apply) lens vignetting */
      LF_MODIFY_VIGNETTING = 0x00000002,
!     /* Value 0x00000004 is deprecated. */
      /** Correct (or apply) lens distortion */
      LF_MODIFY_DISTORTION = 0x00000008,
      /** Convert image geometry */
***************
*** 1766,1772 ****
   * The normal order of applying a lens correction on a image is:
   * &lt;ol&gt;
   * &lt;li&gt;Fix lens vignetting
-  * &lt;li&gt;Fix lens colour contribution
   * &lt;li&gt;Fix chromatic aberrations (TCA)
   * &lt;li&gt;Fix lens distortion
   * &lt;li&gt;Fix lens geometry
--- 1759,1764 ----
***************
*** 1778,1784 ****
   *
   * &lt;ol&gt;
   * &lt;li&gt;Color&lt;ol&gt;
-  * &lt;li&gt;Fix lens colour contribution
   * &lt;li&gt;Fix lens vignetting
   * &lt;/ol&gt;
   * &lt;li&gt;Coordinates&lt;ol&gt;
--- 1770,1775 ----
***************
*** 1793,1801 ****
   *
   * This process is divided into three stages.
   *
!  * In the first stage, the colors of the image pixels are fixed (vignetting and
!  * colour contribution). You pass a pointer to your pixel data, and it will be
!  * modified in place.
   *
   * Then, the distortions introduced by the lens are removed (distortion and
   * geometry), and an additional scaling factor is applied if required.  This
--- 1784,1792 ----
   *
   * This process is divided into three stages.
   *
!  * In the first stage, the colors of the image pixels are fixed
!  * (vignetting). You pass a pointer to your pixel data, and it will be modified
!  * in place.
   *
   * Then, the distortions introduced by the lens are removed (distortion and
   * geometry), and an additional scaling factor is applied if required.  This
***************
*** 2001,2024 ****
                                       bool reverse = false);
  
      /**
-      * @brief Add the stock CCI correcting callback into the chain.
-      *
-      * The CCI correction callback always has a fixed priority of 750 when
-      * rectifying a image and 250 on reverse transform.
-      * @param lens
-      *     The lens for which CCI is to be corrected.
-      * @param format
-      *     The pixel format of the image to be corrected.
-      * @param reverse
-      *     If true, the reverse model will be applied, e.g. simulate
-      *     a lens' CCI on a clean image.
-      * @return
-      *     True if CCI model is valid and the callback was added to chain.
-      */
-     bool AddColorCallbackCCI (const lfLens *lens, lfPixelFormat format,
-                               bool reverse = false);
- 
-     /**
       * @brief Add the stock lens distortion correcting callback into the chain.
       *
       * The distortion correction callback always has a fixed priority of 750
--- 1992,1997 ----
***************
*** 2085,2092 ****
      /**
       * @brief Image correction step 1: fix image colors.
       *
!      * This includes vignetting transform and CCI transform
!      * (e.g. rectification of image colors).
       * @param pixels
       *     This points to image pixels. The actual pixel format depends on both
       *     pixel_format and comp_role arguments.
--- 2058,2064 ----
      /**
       * @brief Image correction step 1: fix image colors.
       *
!      * This currently is only vignetting transform.
       * @param pixels
       *     This points to image pixels. The actual pixel format depends on both
       *     pixel_format and comp_role arguments.
***************
*** 2260,2270 ****
      lfModifier *modifier, lfLensCalibVignetting *model,
      lfPixelFormat format, cbool reverse);
  
- /** @sa lfModifier::AddColorCallbackCCI */
- LF_EXPORT cbool lf_modifier_add_color_callback_CCI (
-     lfModifier *modifier, const lfLens *lens,
-     lfPixelFormat format, cbool reverse);
- 
  /** @sa lfModifier::AddCoordCallbackDistortion */
  LF_EXPORT cbool lf_modifier_add_coord_callback_distortion (
      lfModifier *modifier, lfLensCalibDistortion *model, cbool reverse);
--- 2232,2237 ----

=== modified file 'libs/lensfun/database.cpp'
*** libs/lensfun/database.cpp	2013-12-28 09:50:01 +0000
--- libs/lensfun/database.cpp	2013-12-30 09:06:02 +0000
***************
*** 270,290 ****
              else
                  goto bad_attr;
      }
-     else if (!strcmp (element_name, &quot;cci&quot;))
-     {
-         if (!ctx || strcmp (ctx, &quot;lens&quot;) || !pd-&gt;lens)
-             goto bad_ctx;
- 
-         for (i = 0; attribute_names [i]; i++)
-             if (!strcmp (attribute_names [i], &quot;red&quot;))
-                 pd-&gt;lens-&gt;RedCCI = atof (attribute_values [i]);
-             else if (!strcmp (attribute_names [i], &quot;green&quot;))
-                 pd-&gt;lens-&gt;GreenCCI = atof (attribute_values [i]);
-             else if (!strcmp (attribute_names [i], &quot;blue&quot;))
-                 pd-&gt;lens-&gt;BlueCCI = atof (attribute_values [i]);
-             else
-                 goto bad_attr;
-     }
      else if (!strcmp (element_name, &quot;type&quot;))
      {
          if (!ctx || strcmp (ctx, &quot;lens&quot;) || !pd-&gt;lens)
--- 270,275 ----
***************
*** 880,893 ****
                  _lf_xml_printf (output, &quot;\t\t&lt;center x=\&quot;%g\&quot; y=\&quot;%g\&quot; /&gt;\n&quot;,
                                  lenses [i]-&gt;CenterX, lenses [i]-&gt;CenterY);
  
-             if (lenses [i]-&gt;RedCCI != 0 ||
-                 lenses [i]-&gt;GreenCCI != 5 ||
-                 lenses [i]-&gt;BlueCCI != 4)
-                 _lf_xml_printf (output, &quot;\t\t&lt;cci red=\&quot;%g\&quot; green=\&quot;%g\&quot; blue=\&quot;%g\&quot; /&gt;\n&quot;,
-                                 lenses [i]-&gt;RedCCI,
-                                 lenses [i]-&gt;GreenCCI,
-                                 lenses [i]-&gt;BlueCCI);
- 
              _lf_xml_printf (output, &quot;\t\t&lt;cropfactor&gt;%g&lt;/cropfactor&gt;\n&quot;,
                              lenses [i]-&gt;CropFactor);
              _lf_xml_printf (output, &quot;\t\t&lt;aspect-ratio&gt;%g&lt;/aspect-ratio&gt;\n&quot;,
--- 865,870 ----

=== modified file 'libs/lensfun/lens.cpp'
*** libs/lensfun/lens.cpp	2013-12-28 09:50:01 +0000
--- libs/lensfun/lens.cpp	2013-12-30 07:44:16 +0000
***************
*** 112,120 ****
      // lenses easily.  If you need defaults for database tags, set them when
      // reading the database.
      memset (this, 0, sizeof (*this));
-     //RedCCI = 0;
-     GreenCCI = 5;
-     BlueCCI = 4;
      Type = LF_UNKNOWN;
      _lf_lens_regex_refs++;
  }
--- 112,117 ----
***************
*** 151,159 ****
  
      CenterX = other.CenterX;
      CenterY = other.CenterY;
-     RedCCI = other.RedCCI;
-     GreenCCI = other.GreenCCI;
-     BlueCCI = other.BlueCCI;
      CropFactor = other.CropFactor;
      AspectRatio = other.AspectRatio;
      Type = other.Type;
--- 148,153 ----

=== modified file 'libs/lensfun/mod-color.cpp'
*** libs/lensfun/mod-color.cpp	2013-12-27 08:13:56 +0000
--- libs/lensfun/mod-color.cpp	2013-12-30 09:06:02 +0000
***************
*** 118,138 ****
      return true;
  }
  
- /**
-  * Uh-oh... I was not able to find the standard describing how exactly
-  * CCI is computed or even what exactly it means. This is ISO 6728-83
-  * or alternatively GOST R 50678-94 (Russian equivalent standard).
-  * Perhaps even CCI might be removed from lensfun at one point in future
-  * if there won't be enough interest in it and the standards information
-  * couldn't be gathered.
-  */
- bool lfModifier::AddColorCallbackCCI (
-     const lfLens *lens, lfPixelFormat format, bool reverse)
- {
-     (void)lens; (void)format; (void)reverse;
-     return false;
- }
- 
  bool lfModifier::ApplyColorModification (
      void *pixels, float x, float y, int width, int height, int comp_role, int row_stride) const
  {
--- 118,123 ----
***************
*** 354,366 ****
      return modifier-&gt;AddColorCallbackVignetting (*model, format, reverse);
  }
  
- cbool lf_modifier_add_color_callback_CCI (
-     lfModifier *modifier, const lfLens *lens,
-     lfPixelFormat format, cbool reverse)
- {
-     return modifier-&gt;AddColorCallbackCCI (lens, format, reverse);
- }
- 
  cbool lf_modifier_apply_color_modification (
      lfModifier *modifier, void *pixels, float x, float y, int width, int height,
      int comp_role, int row_stride)
--- 339,344 ----

=== modified file 'libs/lensfun/modifier.cpp'
*** libs/lensfun/modifier.cpp	2013-12-30 07:37:04 +0000
--- libs/lensfun/modifier.cpp	2013-12-30 09:06:02 +0000
***************
*** 35,44 ****
                  oflags |= LF_MODIFY_VIGNETTING;
      }
  
-     if (flags &amp; LF_MODIFY_CCI)
-         if (AddColorCallbackCCI (lens, format, reverse))
-             oflags |= LF_MODIFY_CCI;
- 
      if (flags &amp; LF_MODIFY_DISTORTION)
      {
          lfLensCalibDistortion lcd;
--- 35,40 ----

=== modified file 'tests/example/example.c'
*** tests/example/example.c	2013-11-28 20:36:35 +0000
--- tests/example/example.c	2013-12-30 09:06:01 +0000
***************
*** 66,72 ****
          g_print (&quot;\tFocal: %g-%g\n&quot;, lenses [i]-&gt;MinFocal, lenses [i]-&gt;MaxFocal);
          g_print (&quot;\tAperture: %g-%g\n&quot;, lenses [i]-&gt;MinAperture, lenses [i]-&gt;MaxAperture);
          g_print (&quot;\tCenter: %g,%g\n&quot;, lenses [i]-&gt;CenterX, lenses [i]-&gt;CenterY);
-         g_print (&quot;\tCCI: %g/%g/%g\n&quot;, lenses [i]-&gt;RedCCI, lenses [i]-&gt;GreenCCI, lenses [i]-&gt;BlueCCI);
          if (lenses [i]-&gt;Mounts)
              for (j = 0; lenses [i]-&gt;Mounts [j]; j++)
                  g_print (&quot;\tMount: %s\n&quot;, lf_db_mount_name (ldb, lenses [i]-&gt;Mounts [j]));
--- 66,71 ----

=== modified file 'tests/tfun/tfun.cpp'
*** tests/tfun/tfun.cpp	2013-11-28 20:36:35 +0000
--- tests/tfun/tfun.cpp	2013-12-30 09:06:01 +0000
***************
*** 60,66 ****
      g_print (&quot;\tFocal: %g-%g\n&quot;, lens-&gt;MinFocal, lens-&gt;MaxFocal);
      g_print (&quot;\tAperture: %g-%g\n&quot;, lens-&gt;MinAperture, lens-&gt;MaxAperture);
      g_print (&quot;\tCenter: %g,%g\n&quot;, lens-&gt;CenterX, lens-&gt;CenterY);
-     g_print (&quot;\tCCI: %g/%g/%g\n&quot;, lens-&gt;RedCCI, lens-&gt;GreenCCI, lens-&gt;BlueCCI);
      if (lens-&gt;Mounts)
          for (int j = 0; lens-&gt;Mounts [j]; j++)
              g_print (&quot;\tMount: %s\n&quot;, lf_db_mount_name (ldb, lens-&gt;Mounts [j]));
--- 60,65 ----

=== modified file 'tests/tmod/tmod.cpp'
*** tests/tmod/tmod.cpp	2012-06-10 14:18:47 +0000
--- tests/tmod/tmod.cpp	2013-12-30 09:06:01 +0000
***************
*** 72,78 ****
      g_print (&quot;                     orthographic, stereographic, equisolid, thoby)\n&quot;);
      g_print (&quot;  -t    --tca        Apply lens chromatic aberrations\n&quot;);
      g_print (&quot;  -v    --vignetting Apply lens vignetting\n&quot;);
-     g_print (&quot;  -c    --cci        Apply lens Color Correction Index\n&quot;);
      g_print (&quot;  -i    --inverse    Inverse correction of the image (e.g. simulate\n&quot;);
      g_print (&quot;                     lens distortions instead of correcting them)\n&quot;);
      g_print (&quot;  -s#   --scale=#    Apply additional scale on the image\n&quot;);
--- 72,77 ----
***************
*** 163,169 ****
                      break;
  
                  case 1:
!                     /* Colour correction: vignetting and CCI */
                      ok = mod-&gt;ApplyColorModification (imgdata, 0.0, y, img-&gt;width, 1,
                          LF_CR_4 (RED, GREEN, BLUE, UNKNOWN), 0);
                      imgdata += img-&gt;width * 4;
--- 162,168 ----
                      break;
  
                  case 1:
!                     /* Colour correction: vignetting */
                      ok = mod-&gt;ApplyColorModification (imgdata, 0.0, y, img-&gt;width, 1,
                          LF_CR_4 (RED, GREEN, BLUE, UNKNOWN), 0);
                      imgdata += img-&gt;width * 4;
***************
*** 228,234 ****
          {&quot;geometry&quot;, optional_argument, NULL, 'g'},
          {&quot;tca&quot;, no_argument, NULL, 't'},
          {&quot;vignetting&quot;, no_argument, NULL, 'v'},
-         {&quot;cci&quot;, no_argument, NULL, 'c'},
          {&quot;inverse&quot;, no_argument, NULL, 'i'},
          {&quot;scale&quot;, required_argument, NULL, 's'},
          {&quot;autoscale&quot;, no_argument, NULL, 'S'},
--- 227,232 ----
***************
*** 291,299 ****
              case 'v':
                  opts.ModifyFlags |= LF_MODIFY_VIGNETTING;
                  break;
-             case 'c':
-                 opts.ModifyFlags |= LF_MODIFY_CCI;
-                 break;
              case 'i':
                  opts.Inverse = true;
                  break;
--- 289,294 ----
***************
*** 412,419 ****
              g_print (&quot;[tca]&quot;);
          if (modflags &amp; LF_MODIFY_VIGNETTING)
              g_print (&quot;[vign]&quot;);
-         if (modflags &amp; LF_MODIFY_CCI)
-             g_print (&quot;[cci]&quot;);
          if (modflags &amp; LF_MODIFY_DISTORTION)
              g_print (&quot;[dist]&quot;);
          if (modflags &amp; LF_MODIFY_GEOMETRY)
--- 407,412 ----

</code>
        <close_date>1391364155</close_date>
        <history id='14532'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1388394842</date>
        </history>
        <history id='14533'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1388394842</date>
        </history>
        <history id='14534'>
            <field_name>details</field_name>
            <old_value>Adjusted to current HEAD.</old_value>
            <mod_by>2378</mod_by>
            <date>1388394842</date>
        </history>
        <history id='14552'>
            <field_name>details</field_name>
            <old_value>I see the point that the CCI thing is incomplete and has never been used. It also lacks standards for calibration. So I also vote for removal but will keep this open for another few weeks to wait for further feedback or critics.</old_value>
            <mod_by>36447</mod_by>
            <date>1388604102</date>
        </history>
        <history id='14595'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1391364155</date>
        </history>
        <history id='14596'>
            <field_name>details</field_name>
            <old_value>Ok, CCI cupport is removed now. </old_value>
            <mod_by>36447</mod_by>
            <date>1391364155</date>
        </history>
        <history id='14597'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1391364155</date>
        </history>
    </patch>
    <patch id='3464'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='15649' name='gebner'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1369053462</open_date>
        <summary>Add Panasonic 14-42 X lens</summary>
        <code>Index: data/db/mil-panasonic.xml
===================================================================
--- data/db/mil-panasonic.xml	(revision 232)
+++ data/db/mil-panasonic.xml	(working copy)
@@ -150,6 +150,23 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Panasonic&lt;/maker&gt;
+        &lt;model&gt;LUMIX G VARIO PZ 14-42/F3.5-5.6&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;14&quot; a=&quot;0.029&quot; b=&quot;-0.090&quot; c=&quot;0.009&quot;/&gt;
+	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;22&quot; a=&quot;0.00773&quot; b=&quot;-0.02285&quot; c=&quot;-0.00512&quot;/&gt;
+	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;33&quot; a=&quot;0.01409&quot; b=&quot;-0.02428&quot; c=&quot;0.01135&quot;/&gt;
+	    &lt;distortion model=&quot;ptlens&quot; focal=&quot;42&quot; a=&quot;0.01033&quot; b=&quot;-0.00922&quot; c=&quot;0.00605&quot;/&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;14&quot; br=&quot;0.0000883&quot; vr=&quot;1.0000526&quot; bb=&quot;-0.0000208&quot; vb=&quot;1.0006958&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;22&quot; br=&quot;-0.0000003&quot; vr=&quot;1.0001134&quot; bb=&quot;0.0000620&quot; vb=&quot;1.0004512&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;33&quot; br=&quot;-0.0000237&quot; vr=&quot;1.0000485&quot; bb=&quot;-0.0000741&quot; vb=&quot;1.0002921&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;42&quot; br=&quot;-0.0000182&quot; vr=&quot;1.0000362&quot; bb=&quot;0.0000222&quot; vb=&quot;1.0000623&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+    &lt;lens&gt;
+        &lt;maker&gt;Panasonic&lt;/maker&gt;
         &lt;model&gt;LUMIX G VARIO 45-200mm F4.0-5.6&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
</code>
        <close_date>1373197681</close_date>
        <history id='14175'>
            <field_name>details</field_name>
            <old_value>Unfortunately we already have an entry for this lens in SVN. Could you please compare which one yields better results for you?

    &lt;lens&gt;
	    &lt;maker&gt;Panasonic&lt;/maker&gt;
	    &lt;model&gt;LUMIX G VARIO PZ 14-42/F3.5-5.6&lt;/model&gt;
	    &lt;focal min=&quot;14&quot; max=&quot;42&quot; /&gt;
	    &lt;aperture min=&quot;3.5&quot; max=&quot;22&quot; /&gt;
	    &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
	    &lt;cropfactor&gt;2&lt;/cropfactor&gt;
	    &lt;calibration&gt;
	        &lt;distortion focal=&quot;14&quot; model=&quot;ptlens&quot; a=&quot;0.0143556&quot; b=&quot;-0.0749276&quot; c=&quot;0.00791831&quot; /&gt;
	        &lt;distortion focal=&quot;18&quot; model=&quot;ptlens&quot; a=&quot;0.0178423&quot; b=&quot;-0.0489859&quot; c=&quot;-0.00250207&quot; /&gt;
	        &lt;distortion focal=&quot;25&quot; model=&quot;ptlens&quot; a=&quot;0.0304634&quot; b=&quot;-0.0790615&quot; c=&quot;0.0446911&quot; /&gt;
	        &lt;distortion focal=&quot;35&quot; model=&quot;ptlens&quot; a=&quot;0.0197351&quot; b=&quot;-0.0412857&quot; c=&quot;0.0264783&quot; /&gt;
	        &lt;distortion focal=&quot;42&quot; model=&quot;ptlens&quot; a=&quot;0.00785081&quot; b=&quot;-0.002968&quot; c=&quot;-0.00395351&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;14&quot; br=&quot;0.0000399&quot; vr=&quot;0.9999729&quot; bb=&quot;-0.0002503&quot; vb=&quot;1.0005586&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;-0.0000110&quot; vr=&quot;1.0000205&quot; bb=&quot;-0.0002269&quot; vb=&quot;1.0005124&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;25&quot; br=&quot;-0.0000027&quot; vr=&quot;1.0000210&quot; bb=&quot;-0.0001025&quot; vb=&quot;1.0003060&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;0.0000478&quot; vr=&quot;0.9999745&quot; bb=&quot;-0.0000213&quot; vb=&quot;1.0001376&quot; /&gt;
            &lt;tca model=&quot;poly3&quot; focal=&quot;42&quot; br=&quot;0.0000292&quot; vr=&quot;1.0000187&quot; bb=&quot;-0.0000197&quot; vb=&quot;1.0000910&quot; /&gt;
	        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;3.5&quot; distance=&quot;0.2&quot; k1=&quot;-0.2279&quot; k2=&quot;-1.0763&quot; k3=&quot;0.5610&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;3.5&quot; distance=&quot;0.4&quot; k1=&quot;-0.0951&quot; k2=&quot;-1.4326&quot; k3=&quot;0.7789&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;3.5&quot; distance=&quot;1.2&quot; k1=&quot;-0.1003&quot; k2=&quot;-1.4651&quot; k3=&quot;0.8091&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1869&quot; k2=&quot;-1.3638&quot; k3=&quot;0.7806&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;4&quot; distance=&quot;0.2&quot; k1=&quot;-0.1277&quot; k2=&quot;-1.1307&quot; k3=&quot;0.5303&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;4&quot; distance=&quot;0.4&quot; k1=&quot;-0.0276&quot; k2=&quot;-1.4155&quot; k3=&quot;0.7092&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;4&quot; distance=&quot;1.2&quot; k1=&quot;-0.0139&quot; k2=&quot;-1.4755&quot; k3=&quot;0.7488&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;0.0192&quot; k2=&quot;-1.5936&quot; k3=&quot;0.8259&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;5.6&quot; distance=&quot;0.2&quot; k1=&quot;-0.4561&quot; k2=&quot;0.2525&quot; k3=&quot;-0.3794&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;5.6&quot; distance=&quot;0.4&quot; k1=&quot;-0.3727&quot; k2=&quot;0.0534&quot; k3=&quot;-0.2734&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;5.6&quot; distance=&quot;1.2&quot; k1=&quot;-0.3652&quot; k2=&quot;0.0196&quot; k3=&quot;-0.2584&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.3374&quot; k2=&quot;-0.0445&quot; k3=&quot;-0.2307&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;8&quot; distance=&quot;0.2&quot; k1=&quot;-0.5018&quot; k2=&quot;0.3342&quot; k3=&quot;-0.3287&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;8&quot; distance=&quot;0.4&quot; k1=&quot;-0.4670&quot; k2=&quot;0.3186&quot; k3=&quot;-0.3714&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;8&quot; distance=&quot;1.2&quot; k1=&quot;-0.4802&quot; k2=&quot;0.3599&quot; k3=&quot;-0.4137&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.4707&quot; k2=&quot;0.3739&quot; k3=&quot;-0.4528&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;22&quot; distance=&quot;0.2&quot; k1=&quot;-0.3935&quot; k2=&quot;-0.1258&quot; k3=&quot;0.1192&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;22&quot; distance=&quot;0.4&quot; k1=&quot;-0.3528&quot; k2=&quot;-0.1992&quot; k3=&quot;0.1628&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;22&quot; distance=&quot;1.2&quot; k1=&quot;-0.3651&quot; k2=&quot;-0.1759&quot; k3=&quot;0.1497&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.3661&quot; k2=&quot;-0.1512&quot; k3=&quot;0.1276&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4.2&quot; distance=&quot;0.2&quot; k1=&quot;-0.2710&quot; k2=&quot;-0.5110&quot; k3=&quot;0.3156&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4.2&quot; distance=&quot;0.4&quot; k1=&quot;-0.2277&quot; k2=&quot;-0.5777&quot; k3=&quot;0.3643&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4.2&quot; distance=&quot;1.2&quot; k1=&quot;-0.1821&quot; k2=&quot;-0.6504&quot; k3=&quot;0.4028&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4.2&quot; distance=&quot;1000&quot; k1=&quot;-0.1901&quot; k2=&quot;-0.6330&quot; k3=&quot;0.3902&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;0.2&quot; k1=&quot;-0.3609&quot; k2=&quot;0.0967&quot; k3=&quot;-0.1190&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;0.4&quot; k1=&quot;-0.3238&quot; k2=&quot;0.0388&quot; k3=&quot;-0.0589&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;1.2&quot; k1=&quot;-0.2791&quot; k2=&quot;-0.0683&quot; k3=&quot;0.0156&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2899&quot; k2=&quot;-0.0393&quot; k3=&quot;0.0034&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;8&quot; distance=&quot;0.2&quot; k1=&quot;-0.3094&quot; k2=&quot;-0.1260&quot; k3=&quot;0.1036&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;8&quot; distance=&quot;0.4&quot; k1=&quot;-0.2916&quot; k2=&quot;-0.1022&quot; k3=&quot;0.0803&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;8&quot; distance=&quot;1.2&quot; k1=&quot;-0.2559&quot; k2=&quot;-0.1747&quot; k3=&quot;0.1230&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2722&quot; k2=&quot;-0.1282&quot; k3=&quot;0.0971&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;0.2&quot; k1=&quot;-0.3059&quot; k2=&quot;-0.1359&quot; k3=&quot;0.1104&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;0.4&quot; k1=&quot;-0.2871&quot; k2=&quot;-0.1148&quot; k3=&quot;0.0889&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;1.2&quot; k1=&quot;-0.2537&quot; k2=&quot;-0.1814&quot; k3=&quot;0.1275&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2689&quot; k2=&quot;-0.1383&quot; k3=&quot;0.1038&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;22&quot; distance=&quot;0.2&quot; k1=&quot;-0.3051&quot; k2=&quot;-0.1358&quot; k3=&quot;0.1094&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;22&quot; distance=&quot;0.4&quot; k1=&quot;-0.2893&quot; k2=&quot;-0.1096&quot; k3=&quot;0.0852&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;22&quot; distance=&quot;1.2&quot; k1=&quot;-0.2522&quot; k2=&quot;-0.1853&quot; k3=&quot;0.1297&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2729&quot; k2=&quot;-0.1348&quot; k3=&quot;0.1038&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;4.9&quot; distance=&quot;0.2&quot; k1=&quot;-0.2018&quot; k2=&quot;-0.2665&quot; k3=&quot;0.0571&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;4.9&quot; distance=&quot;0.4&quot; k1=&quot;-0.1634&quot; k2=&quot;-0.3260&quot; k3=&quot;0.1101&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;4.9&quot; distance=&quot;1.2&quot; k1=&quot;-0.1295&quot; k2=&quot;-0.3605&quot; k3=&quot;0.1401&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;4.9&quot; distance=&quot;1000&quot; k1=&quot;-0.1274&quot; k2=&quot;-0.3864&quot; k3=&quot;0.1779&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;5.6&quot; distance=&quot;0.2&quot; k1=&quot;-0.2652&quot; k2=&quot;0.0671&quot; k3=&quot;-0.1896&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;5.6&quot; distance=&quot;0.4&quot; k1=&quot;-0.2339&quot; k2=&quot;0.0302&quot; k3=&quot;-0.1498&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;5.6&quot; distance=&quot;1.2&quot; k1=&quot;-0.2080&quot; k2=&quot;0.0006&quot; k3=&quot;-0.1150&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2153&quot; k2=&quot;0.0212&quot; k3=&quot;-0.1103&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;8&quot; distance=&quot;0.2&quot; k1=&quot;-0.2666&quot; k2=&quot;-0.0122&quot; k3=&quot;-0.0206&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;8&quot; distance=&quot;0.4&quot; k1=&quot;-0.2140&quot; k2=&quot;-0.1137&quot; k3=&quot;0.0599&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;8&quot; distance=&quot;1.2&quot; k1=&quot;-0.1904&quot; k2=&quot;-0.1296&quot; k3=&quot;0.0710&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.1931&quot; k2=&quot;-0.1198&quot; k3=&quot;0.0741&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;11&quot; distance=&quot;0.2&quot; k1=&quot;-0.2358&quot; k2=&quot;-0.1359&quot; k3=&quot;0.0920&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;11&quot; distance=&quot;0.4&quot; k1=&quot;-0.2054&quot; k2=&quot;-0.1526&quot; k3=&quot;0.0963&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;11&quot; distance=&quot;1.2&quot; k1=&quot;-0.1861&quot; k2=&quot;-0.1549&quot; k3=&quot;0.0960&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.1965&quot; k2=&quot;-0.1139&quot; k3=&quot;0.0709&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;22&quot; distance=&quot;0.2&quot; k1=&quot;-0.2396&quot; k2=&quot;-0.1284&quot; k3=&quot;0.0860&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;22&quot; distance=&quot;0.4&quot; k1=&quot;-0.2120&quot; k2=&quot;-0.1410&quot; k3=&quot;0.0905&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;22&quot; distance=&quot;1.2&quot; k1=&quot;-0.1954&quot; k2=&quot;-0.1379&quot; k3=&quot;0.0869&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2096&quot; k2=&quot;-0.0868&quot; k3=&quot;0.0544&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;0.2&quot; k1=&quot;-0.2235&quot; k2=&quot;-0.3007&quot; k3=&quot;-0.0196&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;0.4&quot; k1=&quot;-0.2062&quot; k2=&quot;-0.2405&quot; k3=&quot;-0.0356&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;1.2&quot; k1=&quot;-0.1712&quot; k2=&quot;-0.2289&quot; k3=&quot;-0.0202&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1712&quot; k2=&quot;-0.1977&quot; k3=&quot;-0.0219&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;0.2&quot; k1=&quot;-0.2818&quot; k2=&quot;0.1776&quot; k3=&quot;-0.4047&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;0.4&quot; k1=&quot;-0.2793&quot; k2=&quot;0.2553&quot; k3=&quot;-0.4072&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;1.2&quot; k1=&quot;-0.2411&quot; k2=&quot;0.2293&quot; k3=&quot;-0.3509&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2508&quot; k2=&quot;0.2657&quot; k3=&quot;-0.3438&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;0.2&quot; k1=&quot;-0.3641&quot; k2=&quot;0.3814&quot; k3=&quot;-0.4506&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;0.4&quot; k1=&quot;-0.2902&quot; k2=&quot;0.2031&quot; k3=&quot;-0.2584&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1.2&quot; k1=&quot;-0.2063&quot; k2=&quot;0.0154&quot; k3=&quot;-0.0779&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.1979&quot; k2=&quot;-0.0102&quot; k3=&quot;-0.0349&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;0.2&quot; k1=&quot;-0.3081&quot; k2=&quot;0.1018&quot; k3=&quot;-0.1440&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;0.4&quot; k1=&quot;-0.2148&quot; k2=&quot;-0.1207&quot; k3=&quot;0.0548&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;1.2&quot; k1=&quot;-0.1585&quot; k2=&quot;-0.1816&quot; k3=&quot;0.1045&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1745&quot; k2=&quot;-0.1179&quot; k3=&quot;0.0672&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;0.2&quot; k1=&quot;-0.2606&quot; k2=&quot;-0.0934&quot; k3=&quot;0.0377&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;0.4&quot; k1=&quot;-0.1987&quot; k2=&quot;-0.1873&quot; k3=&quot;0.1151&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;1.2&quot; k1=&quot;-0.1601&quot; k2=&quot;-0.1793&quot; k3=&quot;0.1029&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1784&quot; k2=&quot;-0.1122&quot; k3=&quot;0.0644&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;5.6&quot; distance=&quot;0.2&quot; k1=&quot;-0.4664&quot; k2=&quot;0.0127&quot; k3=&quot;-0.1991&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;5.6&quot; distance=&quot;0.4&quot; k1=&quot;-0.4457&quot; k2=&quot;0.1016&quot; k3=&quot;-0.2303&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;5.6&quot; distance=&quot;1.2&quot; k1=&quot;-0.4050&quot; k2=&quot;0.1096&quot; k3=&quot;-0.2063&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.3811&quot; k2=&quot;0.1152&quot; k3=&quot;-0.1942&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;8&quot; distance=&quot;0.2&quot; k1=&quot;-0.1980&quot; k2=&quot;-0.1116&quot; k3=&quot;-0.3206&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;8&quot; distance=&quot;0.4&quot; k1=&quot;-0.2305&quot; k2=&quot;0.1212&quot; k3=&quot;-0.4205&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;8&quot; distance=&quot;1.2&quot; k1=&quot;-0.2346&quot; k2=&quot;0.2463&quot; k3=&quot;-0.4460&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2272&quot; k2=&quot;0.2861&quot; k3=&quot;-0.4421&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;11&quot; distance=&quot;0.2&quot; k1=&quot;-0.3693&quot; k2=&quot;0.4737&quot; k3=&quot;-0.7079&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;11&quot; distance=&quot;0.4&quot; k1=&quot;-0.3520&quot; k2=&quot;0.4838&quot; k3=&quot;-0.6046&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;11&quot; distance=&quot;1.2&quot; k1=&quot;-0.2870&quot; k2=&quot;0.3452&quot; k3=&quot;-0.4173&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2533&quot; k2=&quot;0.2921&quot; k3=&quot;-0.3460&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;16&quot; distance=&quot;0.2&quot; k1=&quot;-0.4894&quot; k2=&quot;0.8105&quot; k3=&quot;-0.8723&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;16&quot; distance=&quot;0.4&quot; k1=&quot;-0.3556&quot; k2=&quot;0.4065&quot; k3=&quot;-0.4457&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;16&quot; distance=&quot;1.2&quot; k1=&quot;-0.2216&quot; k2=&quot;0.0330&quot; k3=&quot;-0.0885&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1691&quot; k2=&quot;-0.0698&quot; k3=&quot;0.0102&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;22&quot; distance=&quot;0.2&quot; k1=&quot;-0.4963&quot; k2=&quot;0.7611&quot; k3=&quot;-0.7603&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;22&quot; distance=&quot;0.4&quot; k1=&quot;-0.2736&quot; k2=&quot;0.0560&quot; k3=&quot;-0.1053&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;22&quot; distance=&quot;1.2&quot; k1=&quot;-0.1758&quot; k2=&quot;-0.1633&quot; k3=&quot;0.0950&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1522&quot; k2=&quot;-0.1439&quot; k3=&quot;0.0785&quot; /&gt;
	    &lt;/calibration&gt;
    &lt;/lens&gt;</old_value>
            <mod_by>36447</mod_by>
            <date>1371983672</date>
        </history>
        <history id='14176'>
            <field_name>details</field_name>
            <old_value>The profile in SVN seems to be much better than mine.  Feel free to close the patch request.</old_value>
            <mod_by>15649</mod_by>
            <date>1372005299</date>
        </history>
        <history id='14179'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1373197681</date>
        </history>
        <history id='14180'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1373197681</date>
        </history>
        <history id='14181'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1373197681</date>
        </history>
    </patch>
    <patch id='3483'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1372859324</open_date>
        <summary>Update list of Canon DSLRs.</summary>
        <code>Index: data/db/slr-canon.xml
===================================================================
--- data/db/slr-canon.xml	(revision 243)
+++ data/db/slr-canon.xml	(working copy)
@@ -248,14 +248,6 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS DIGITAL REBEL T3&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel T3&lt;/model&gt;
-        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
-        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
-    &lt;/camera&gt;
-
-    &lt;camera&gt;
-        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS DIGITAL REBEL XSi&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS Digital Rebel XSi&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
@@ -368,6 +360,54 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS 700D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 700D&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS REBEL T5i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Rebel T5i&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss X7i&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss X7i&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS 100D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 100D&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS REBEL SL1&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Rebel SL1&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EOS Kiss X7&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS Kiss X7&lt;/model&gt;
+        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
+        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EOS 7D&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;EOS 7D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
@@ -376,8 +416,8 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Canon&lt;/maker&gt;
-        &lt;model&gt;Canon EOS 60D&lt;/model&gt;
-        &lt;model lang=&quot;en&quot;&gt;EOS 60D&lt;/model&gt;
+        &lt;model&gt;Canon EOS 70D&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;EOS 70D&lt;/model&gt;
         &lt;mount&gt;Canon EF-S&lt;/mount&gt;
         &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
     &lt;/camera&gt;
</code>
        <close_date>1373197725</close_date>
        <history id='14182'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1373197725</date>
        </history>
        <history id='14183'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1373197725</date>
        </history>
        <history id='14184'>
            <field_name>details</field_name>
            <old_value>Thanks!</old_value>
            <mod_by>36447</mod_by>
            <date>1373197725</date>
        </history>
        <history id='14185'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1373197725</date>
        </history>
    </patch>
    <patch id='3484'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1372863796</open_date>
        <summary>Add the PENTAX K-50 and K-500 cameras.</summary>
        <code>Index: data/db/slr-pentax.xml
===================================================================
--- data/db/slr-pentax.xml	(revision 243)
+++ data/db/slr-pentax.xml	(working copy)
@@ -166,6 +166,24 @@
     &lt;camera&gt;
         &lt;maker&gt;PENTAX&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Pentax&lt;/maker&gt;
+        &lt;model&gt;PENTAX K-50&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;K-50&lt;/model&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;PENTAX&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Pentax&lt;/maker&gt;
+        &lt;model&gt;PENTAX K-500&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;K-500&lt;/model&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;PENTAX&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Pentax&lt;/maker&gt;
         &lt;model&gt;PENTAX K-7&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;K-7&lt;/model&gt;
         &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
</code>
        <close_date>1373197783</close_date>
        <history id='14186'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1373197783</date>
        </history>
        <history id='14187'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1373197783</date>
        </history>
        <history id='14188'>
            <field_name>details</field_name>
            <old_value>Thanks!</old_value>
            <mod_by>36447</mod_by>
            <date>1373197783</date>
        </history>
        <history id='14189'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1373197783</date>
        </history>
    </patch>
    <patch id='3511'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='100' name='none'/>
        <open_date>1382021629</open_date>
        <summary>Another couple of cameras: Panasonic DMC-GM1 and NIKON D5300</summary>
        <code>Index: data/db/mil-panasonic.xml
===================================================================
--- data/db/mil-panasonic.xml	(revision 277)
+++ data/db/mil-panasonic.xml	(working copy)
@@ -23,6 +23,13 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Panasonic&lt;/maker&gt;
+        &lt;model&gt;DMC-GM1&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;Panasonic&lt;/maker&gt;
         &lt;model&gt;DMC-GX1&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
@@ -100,14 +107,14 @@
 
     &lt;camera&gt;
         &lt;maker&gt;Panasonic&lt;/maker&gt;
-        &lt;model&gt;DMC-G10&lt;/model&gt;
+        &lt;model&gt;DMC-GX7&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
     &lt;camera&gt;
         &lt;maker&gt;Panasonic&lt;/maker&gt;
-        &lt;model&gt;DMC-GX7&lt;/model&gt;
+        &lt;model&gt;DMC-G10&lt;/model&gt;
         &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;
Index: data/db/slr-nikon.xml
===================================================================
--- data/db/slr-nikon.xml	(revision 277)
+++ data/db/slr-nikon.xml	(working copy)
@@ -241,6 +241,15 @@
     &lt;camera&gt;
         &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;NIKON D5300&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;D5300&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;NIKON CORPORATION&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;NIKON D7000&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;D7000&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
</code>
        <close_date>1384349306</close_date>
        <history id='14402'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1384349306</date>
        </history>
        <history id='14403'>
            <field_name>details</field_name>
            <old_value>Thank you, your patch in included.</old_value>
            <mod_by>2378</mod_by>
            <date>1384349306</date>
        </history>
        <history id='14404'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1384349306</date>
        </history>
    </patch>
    <patch id='3506'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1381032222</open_date>
        <summary>Add new camera: Samsung EK-GN120 (Samsung Galaxy NX).</summary>
        <code>Index: data/db/mil-samsung.xml
===================================================================
--- data/db/mil-samsung.xml	(revision 265)
+++ data/db/mil-samsung.xml	(working copy)
@@ -10,9 +10,19 @@
         &lt;compat&gt;Pentax K&lt;/compat&gt;
     &lt;/mount&gt;
 
+    &lt;!-- Samsung EK-GN120 = Samsung Galaxy NX --&gt;
     &lt;camera&gt;
         &lt;maker&gt;SAMSUNG&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Samsung&lt;/maker&gt;
+        &lt;model&gt;EK-GN120&lt;/model&gt;
+         &lt;model lang=&quot;en&quot;&gt;EK-GN120&lt;/model&gt;
+        &lt;mount&gt;Samsung NX&lt;/mount&gt;
+        &lt;cropfactor&gt;1.54&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;SAMSUNG&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Samsung&lt;/maker&gt;
         &lt;model&gt;NX10&lt;/model&gt;
          &lt;model lang=&quot;en&quot;&gt;NX10&lt;/model&gt;
         &lt;mount&gt;Samsung NX&lt;/mount&gt;
</code>
        <close_date>1381671717</close_date>
        <history id='14332'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1381671717</date>
        </history>
        <history id='14333'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1381671717</date>
        </history>
        <history id='14334'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1381671717</date>
        </history>
    </patch>
    <patch id='3492'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='64524' name='turbolf'/>
        <assigned_to id='2378' name='bronger'/>
        <open_date>1376934227</open_date>
        <summary>Nikkon 24-70mm distortion data (tested on D800)</summary>
        <code>From 887054bbb491f108ef1b8e48be120e2f581aa775 Mon Sep 17 00:00:00 2001
From: Pascal Obry &lt;pascal@obry.net&gt;
Date: Mon, 19 Aug 2013 19:41:53 +0200
Subject: [PATCH] Add Nikkor 24-70 f2.8 distortion data.

---
 data/db/slr-nikon.xml | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git data/db/slr-nikon.xml data/db/slr-nikon.xml
index bf36f58..918b394 100644
--- data/db/slr-nikon.xml
+++ data/db/slr-nikon.xml
@@ -760,6 +760,20 @@
 
     &lt;lens&gt;
         &lt;maker&gt;Nikon&lt;/maker&gt;
+        &lt;model&gt;Nikkor 24-70mm f/2.8G ED&lt;/model&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;24&quot; a=&quot;0.01436&quot; b=&quot;-0.06611&quot; c=&quot;0.06436&quot;/&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;28&quot; a=&quot;0.00718&quot; b=&quot;-0.03471&quot; c=&quot;0.03911&quot;/&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;35&quot; a=&quot;0.01046&quot; b=&quot;-0.03445&quot; c=&quot;0.04427&quot;/&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;0.00843&quot; b=&quot;-0.02693&quot; c=&quot;0.04576&quot;/&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;70&quot; a=&quot;0.00933&quot; b=&quot;-0.03902&quot; c=&quot;0.05818&quot;/&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+    &lt;lens&gt;
+        &lt;maker&gt;Nikon&lt;/maker&gt;
         &lt;model&gt;Nikkor 24-85mm f/2.8-4.0D AF&lt;/model&gt;
         &lt;mount&gt;Nikon F AF&lt;/mount&gt;
         &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
-- 
1.8.4.rc3

</code>
        <close_date>1377435089</close_date>
        <history id='14206'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1377435089</date>
        </history>
        <history id='14207'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1377435089</date>
        </history>
        <history id='14208'>
            <field_name>details</field_name>
            <old_value>I included your upload into the source tree.  Thank you for contributing!</old_value>
            <mod_by>2378</mod_by>
            <date>1377435089</date>
        </history>
        <history id='14209'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1377435089</date>
        </history>
    </patch>
    <patch id='3528'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1384886670</open_date>
        <summary>Fix aspect ratio bug</summary>
        <code>=== modified file 'docs/manual-main.txt'
*** docs/manual-main.txt	2013-11-10 17:29:18 +0000
--- docs/manual-main.txt	2013-11-19 18:43:32 +0000
***************
*** 288,293 ****
--- 288,299 ----
      on another camera with a different crop factor. Generally it is advised to use
      a camera with maximal crop factor for this lens, because the models may become
      imprecise for crop factors smaller than the one used for models.
+ &lt;dt&gt;\&lt;aspect-ratio\&gt;number\&lt;/aspect-ratio\&gt;
+ &lt;dd&gt;This is the aspect ratio of the camera with which all shots for computing
+     distortion models were made.  It is the ratio of the longer edge to the
+     shorter edge.  LensFun needs the aspect ratio internally for correct
+     application of the distortion parameters.  You may give is as a real number
+     or as a ratio with a colon like &quot;4:3&quot;.  It defaults to 1.5 or 3:2.
  &lt;dt&gt;\&lt;cci r=&quot;number&quot; g=&quot;number&quot; b=&quot;number&quot; /\&gt;
  &lt;dd&gt;The Colour Contribution Index of the lens, as defined by ISO 6728-83.
      Unfortunately, for now this data is unused as I couldn't find the respective

=== modified file 'include/lensfun/lensfun.h.in'
*** include/lensfun/lensfun.h.in	2013-11-11 10:22:09 +0000
--- include/lensfun/lensfun.h.in	2013-11-19 18:43:32 +0000
***************
*** 702,707 ****
--- 702,709 ----
      float BlueCCI;
      /** Crop factor at which calibration measurements were taken. */
      float CropFactor;
+     /** Aspect ratio of the images used for calibration measurements. */
+     float AspectRatio;
      /** Lens type */
      lfLensType Type;
      /** Lens distortion calibration data, NULL-terminated (unsorted) */

=== modified file 'libs/lensfun/database.cpp'
*** libs/lensfun/database.cpp	2013-11-17 15:40:21 +0000
--- libs/lensfun/database.cpp	2013-11-19 18:43:32 +0000
***************
*** 215,220 ****
--- 215,221 ----
              goto bad_ctx;
          pd-&gt;lens = new lfLens ();
          pd-&gt;lens-&gt;Type = LF_RECTILINEAR;
+         pd-&gt;lens-&gt;AspectRatio = 1.5;
          goto chk_no_attrs;
      }
      else if (!strcmp (element_name, &quot;focal&quot;))
***************
*** 483,489 ****
                  goto unk_attr;
      }
      else if (!strcmp (element_name, &quot;compat&quot;) ||
!              !strcmp (element_name, &quot;cropfactor&quot;))
          goto chk_no_attrs;
      else
          g_set_error (error, G_MARKUP_ERROR, G_MARKUP_ERROR_INVALID_CONTENT,
--- 484,491 ----
                  goto unk_attr;
      }
      else if (!strcmp (element_name, &quot;compat&quot;) ||
!              !strcmp (element_name, &quot;cropfactor&quot;) ||
!              !strcmp (element_name, &quot;aspect-ratio&quot;))
          goto chk_no_attrs;
      else
          g_set_error (error, G_MARKUP_ERROR, G_MARKUP_ERROR_INVALID_CONTENT,
***************
*** 630,635 ****
--- 632,650 ----
          else
              goto bad_ctx;
      }
+     else if (!strcmp (ctx, &quot;aspect-ratio&quot;))
+     {
+         if (pd-&gt;lens)
+         {
+             const char *colon = strpbrk (text, &quot;:&quot;);
+             if (colon)
+                 pd-&gt;lens-&gt;AspectRatio = atof (text) / atof (colon + 1);
+             else
+                 pd-&gt;lens-&gt;AspectRatio = atof (text);
+         }
+         else
+             goto bad_ctx;
+     }
      else if (!strcmp (ctx, &quot;type&quot;))
      {
          if (pd-&gt;lens)
***************
*** 866,871 ****
--- 881,888 ----
  
              _lf_xml_printf (output, &quot;\t\t&lt;cropfactor&gt;%g&lt;/cropfactor&gt;\n&quot;,
                              lenses [i]-&gt;CropFactor);
+             _lf_xml_printf (output, &quot;\t\t&lt;aspect-ratio&gt;%g&lt;/aspect-ratio&gt;\n&quot;,
+                             lenses [i]-&gt;AspectRatio);
  
              if (lenses [i]-&gt;CalibDistortion || lenses [i]-&gt;CalibTCA ||
                  lenses [i]-&gt;CalibVignetting || lenses [i]-&gt;CalibCrop || 

=== modified file 'libs/lensfun/lens.cpp'
*** libs/lensfun/lens.cpp	2013-03-10 11:01:20 +0000
--- libs/lensfun/lens.cpp	2013-11-19 18:43:32 +0000
***************
*** 152,157 ****
--- 152,158 ----
      GreenCCI = other.GreenCCI;
      BlueCCI = other.BlueCCI;
      CropFactor = other.CropFactor;
+     AspectRatio = other.AspectRatio;
      Type = other.Type;
  
      lf_free (CalibDistortion); CalibDistortion = NULL;
***************
*** 285,291 ****
      GuessParameters ();
  
      if (!Model || !Mounts ||
!         MinFocal &gt; MaxFocal || MinAperture &gt; MaxAperture)
          return false;
  
      return true;
--- 286,293 ----
      GuessParameters ();
  
      if (!Model || !Mounts ||
!         MinFocal &gt; MaxFocal || MinAperture &gt; MaxAperture ||
!         !isfinite(AspectRatio) || AspectRatio &lt; 1)
          return false;
  
      return true;
***************
*** 1141,1147 ****
      //if (cmp != 0)
      //    return cmp;
  
!     return int ((i1-&gt;CropFactor - i2-&gt;CropFactor) * 100);
  }
  
  static int _lf_compare_num (float a, float b)
--- 1143,1153 ----
      //if (cmp != 0)
      //    return cmp;
  
!     cmp = int ((i1-&gt;CropFactor - i2-&gt;CropFactor) * 100);
!     if (cmp != 0)
!         return cmp;
! 
!     return int ((i1-&gt;AspectRatio - i2-&gt;AspectRatio) * 100);
  }
  
  static int _lf_compare_num (float a, float b)
***************
*** 1219,1224 ****
--- 1225,1240 ----
  
          case +1:
              score += 10;
+             break;
+     }
+ 
+     switch (_lf_compare_num (pattern-&gt;AspectRatio, match-&gt;AspectRatio))
+     {
+         case -1:
+             return 0;
+ 
+         case +1:
+             score += 10;
              break;
      }
  

=== modified file 'libs/lensfun/modifier.cpp'
*** libs/lensfun/modifier.cpp	2013-01-27 16:32:37 +0000
--- libs/lensfun/modifier.cpp	2013-11-19 18:43:32 +0000
***************
*** 87,97 ****
--- 87,104 ----
  
      // Image &quot;size&quot;
      float size = float ((width &lt; height) ? width : height);
+     float image_aspect_ratio = (width &lt; height) ? float (height) / float (width) :
+         float (width) / float (height);
  
      // Take crop factor into account
      if (lens &amp;&amp; lens-&gt;CropFactor)
          size *= crop / lens-&gt;CropFactor;
  
+     // Take aspect ratio into account
+     if (lens &amp;&amp; lens-&gt;AspectRatio)
+         size *= sqrt ((image_aspect_ratio * image_aspect_ratio + 1) /
+                       (lens-&gt;AspectRatio * lens-&gt;AspectRatio + 1));
+ 
      // The scale to transform {-size/2 .. 0 .. size/2-1} to {-1 .. 0 .. +1}
      NormScale = 2.0 / (size - 1);
  

=== modified file 'tests/example/example.c'
*** tests/example/example.c	2008-10-25 20:51:12 +0000
--- tests/example/example.c	2013-11-19 18:43:32 +0000
***************
*** 62,67 ****
--- 62,68 ----
              lf_mlstr_get (lenses [i]-&gt;Maker),
              lf_mlstr_get (lenses [i]-&gt;Model));
          g_print (&quot;\tCrop factor: %g\n&quot;, lenses [i]-&gt;CropFactor);
+         g_print (&quot;\tAspect ratio: %g\n&quot;, lenses [i]-&gt;AspectRatio);
          g_print (&quot;\tFocal: %g-%g\n&quot;, lenses [i]-&gt;MinFocal, lenses [i]-&gt;MaxFocal);
          g_print (&quot;\tAperture: %g-%g\n&quot;, lenses [i]-&gt;MinAperture, lenses [i]-&gt;MaxAperture);
          g_print (&quot;\tCenter: %g,%g\n&quot;, lenses [i]-&gt;CenterX, lenses [i]-&gt;CenterY);

=== modified file 'tests/tfun/tfun.cpp'
*** tests/tfun/tfun.cpp	2012-12-08 19:42:32 +0000
--- tests/tfun/tfun.cpp	2013-11-19 18:43:32 +0000
***************
*** 56,61 ****
--- 56,62 ----
               lf_mlstr_get (lens-&gt;Maker),
               lf_mlstr_get (lens-&gt;Model));
      g_print (&quot;\tCrop factor: %g\n&quot;, lens-&gt;CropFactor);
+     g_print (&quot;\tAspect ratio: %g\n&quot;, lens-&gt;AspectRatio);
      g_print (&quot;\tFocal: %g-%g\n&quot;, lens-&gt;MinFocal, lens-&gt;MaxFocal);
      g_print (&quot;\tAperture: %g-%g\n&quot;, lens-&gt;MinAperture, lens-&gt;MaxAperture);
      g_print (&quot;\tCenter: %g,%g\n&quot;, lens-&gt;CenterX, lens-&gt;CenterY);

</code>
        <close_date>1385671004</close_date>
        <history id='14480'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1385671004</date>
        </history>
        <history id='14481'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1385671004</date>
        </history>
        <history id='14482'>
            <field_name>details</field_name>
            <old_value>Thx!</old_value>
            <mod_by>36447</mod_by>
            <date>1385671004</date>
        </history>
        <history id='14483'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1385671004</date>
        </history>
    </patch>
    <patch id='3530'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='64979' name='karlstevens'/>
        <assigned_to id='2378' name='bronger'/>
        <open_date>1385763792</open_date>
        <summary>Lens DB updates (Pentax 18-55, Pentax FA-50, Pentax FA-28)</summary>
        <code>diff -burN trunk/data/db/slr-pentax.xml karl/data/db/slr-pentax.xml
--- trunk/data/db/slr-pentax.xml	2013-11-28 10:53:38.000000000 -0700
+++ karl/data/db/slr-pentax.xml	2013-11-29 15:26:05.000000000 -0700
@@ -225,6 +225,15 @@
     &lt;camera&gt;
         &lt;maker&gt;PENTAX&lt;/maker&gt;
         &lt;maker lang=&quot;en&quot;&gt;Pentax&lt;/maker&gt;
+        &lt;model&gt;PENTAX K3&lt;/model&gt;
+        &lt;model lang=&quot;en&quot;&gt;K3&lt;/model&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
+    &lt;camera&gt;
+        &lt;maker&gt;PENTAX&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Pentax&lt;/maker&gt;
         &lt;model&gt;PENTAX K2000&lt;/model&gt;
         &lt;model lang=&quot;en&quot;&gt;K2000&lt;/model&gt;
         &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
@@ -352,9 +361,19 @@
 	        &lt;distortion focal=&quot;45&quot; model=&quot;ptlens&quot; a=&quot;0.00340219&quot; b=&quot;-0.0072762&quot; c=&quot;0.00763624&quot; /&gt;
 	        &lt;distortion focal=&quot;55&quot; model=&quot;ptlens&quot; a=&quot;-0.000442312&quot; b=&quot;0.00460551&quot; c=&quot;-0.00158524&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;18&quot; br=&quot;-0.0000871&quot; vr=&quot;1.0004828&quot; bb=&quot;-0.0000263&quot; vb=&quot;1.0001433&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;20&quot; br=&quot;-0.0006746&quot; cr=&quot;0.0017899&quot; vr=&quot;0.9997634&quot; bb=&quot;0.0007446&quot; cb=&quot;-0.0011695&quot; vb=&quot;1.0005314&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;21&quot; br=&quot;-0.0012575&quot; cr=&quot;0.0022420&quot; vr=&quot;1.0000624&quot; bb=&quot;-0.0004657&quot; cb=&quot;0.0009917&quot; vb=&quot;0.9995849&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;23&quot; br=&quot;0.0008593&quot; cr=&quot;-0.0018130&quot; vr=&quot;1.0014264&quot; bb=&quot;-0.0004830&quot; cb=&quot;0.0011743&quot; vb=&quot;0.9995325&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;24&quot; br=&quot;-0.0000122&quot; vr=&quot;1.0002181&quot; bb=&quot;0.0000383&quot; vb=&quot;1.0002671&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;26&quot; br=&quot;-0.0000261&quot; cr=&quot;0.0001475&quot; vr=&quot;1.0003238&quot; bb=&quot;0.0002433&quot; cb=&quot;-0.0002405&quot; vb=&quot;1.0002520&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;28&quot; br=&quot;-0.0000056&quot; cr=&quot;-0.0000342&quot; vr=&quot;1.0004965&quot; bb=&quot;0.0001311&quot; cb=&quot;-0.0001193&quot; vb=&quot;1.0003247&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;31&quot; br=&quot;-0.0000110&quot; cr=&quot;0.0001737&quot; vr=&quot;1.0001522&quot; bb=&quot;-0.0004369&quot; cb=&quot;0.0009840&quot; vb=&quot;0.9997737&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;33&quot; br=&quot;-0.0004712&quot; cr=&quot;0.0008834&quot; vr=&quot;0.9998863&quot; bb=&quot;-0.0000441&quot; cb=&quot;0.0002601&quot; vb=&quot;1.0007441&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;35&quot; br=&quot;-0.0000093&quot; vr=&quot;1.0001056&quot; bb=&quot;-0.0000299&quot; vb=&quot;1.0001859&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;38&quot; br=&quot;-0.0002914&quot; cr=&quot;0.0006529&quot; vr=&quot;0.9998320&quot; bb=&quot;0.0002885&quot; cb=&quot;-0.0004075&quot; vb=&quot;1.0007491&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;40&quot; br=&quot;0.0000435&quot; cr=&quot;0.0000393&quot; vr=&quot;1.0000392&quot; bb=&quot;0.0000098&quot; cb=&quot;-0.0001665&quot; vb=&quot;1.0002437&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;43&quot; br=&quot;-0.0000113&quot; vr=&quot;1.0001417&quot; bb=&quot;0.0000241&quot; vb=&quot;1.0000489&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;-0.0001694&quot; cr=&quot;0.0004921&quot; vr=&quot;0.9997155&quot; bb=&quot;0.0000873&quot; cb=&quot;-0.0000946&quot; vb=&quot;1.0002636&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;55&quot; br=&quot;-0.0000059&quot; vr=&quot;1.0000907&quot; bb=&quot;0.0000077&quot; vb=&quot;0.9999907&quot; /&gt;
             &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;3.5&quot; distance=&quot;0.25&quot; k1=&quot;-0.1755&quot; k2=&quot;-1.3129&quot; k3=&quot;0.8855&quot; /&gt;
             &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;3.5&quot; distance=&quot;0.6&quot; k1=&quot;-0.1680&quot; k2=&quot;-1.2909&quot; k3=&quot;0.8623&quot; /&gt;
@@ -841,7 +860,14 @@
         &lt;calibration&gt;
             &lt;!-- Taken with Pentax K-30 --&gt;
             &lt;distortion model=&quot;poly3&quot; focal=&quot;50&quot; k1=&quot;-0.00203&quot; /&gt;
-            &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; vr=&quot;1.0002324&quot; vb=&quot;0.9997591&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;50&quot; br=&quot;-0.0000488&quot; cr=&quot;0.0001144&quot; vr=&quot;1.0005239&quot; bb=&quot;0.0001427&quot; cb=&quot;-0.0002953&quot; vb=&quot;0.9994200&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;1.4&quot; k1=&quot;-0.75531&quot; k2=&quot;0.64285&quot; k3=&quot;-0.26061&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;2.0&quot; k1=&quot;-0.06676&quot; k2=&quot;-0.04799&quot; k3=&quot;0.02031&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; k1=&quot;-0.15783&quot; k2=&quot;0.15089&quot; k3=&quot;-0.01524&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;8&quot; k1=&quot;-0.1018&quot; k2=&quot;-0.00066&quot; k3=&quot;0.06612&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; k1=&quot;-0.00027&quot; k2=&quot;-0.25301&quot; k3=&quot;0.20985&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; k1=&quot;-0.13985&quot; k2=&quot;0.13367&quot; k3=&quot;-0.03586&quot; /&gt;
+            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;22&quot; k1=&quot;-0.05391&quot; k2=&quot;-0.06313&quot; k3=&quot;0.11027&quot; /&gt;
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
@@ -857,4 +883,19 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
+    &lt;lens&gt;
+        &lt;maker&gt;Pentax&lt;/maker&gt;
+        &lt;model&gt;SMC Pentax FA 28mm f/2.8 AL&lt;/model&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+              &lt;tca model=&quot;poly3&quot; focal=&quot;28.0&quot; br=&quot;0.0000578&quot; cr=&quot;-0.0001581&quot; vr=&quot;1.0005750&quot; bb=&quot;-0.0000046&quot; cb=&quot;0.0001367&quot; vb=&quot;0.9996466&quot; /&gt;
+              &lt;distortion model=&quot;poly3&quot; focal=&quot;28&quot; k1=&quot;-0.00843&quot; /&gt;
+              &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;11&quot; distance=&quot;100&quot; k1=&quot;-0.38602&quot; k2=&quot;1.0657&quot; k3=&quot;-0.86036&quot; /&gt;
+              &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;8&quot; distance=&quot;100&quot; k1=&quot;-0.41027&quot; k2=&quot;0.96832&quot; k3=&quot;-0.79405&quot; /&gt;
+              &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;5.6&quot; distance=&quot;100&quot; k1=&quot;-0.38055&quot; k2=&quot;1.06408&quot; k3=&quot;-0.92936&quot; /&gt;
+              &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;2.8&quot; distance=&quot;100&quot; k1=&quot;-0.87866&quot; k2=&quot;1.00009&quot; k3=&quot;-0.5801&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
 &lt;/lensdatabase&gt;
diff -burN trunk/data/db/slr-samyang.xml karl/data/db/slr-samyang.xml
--- trunk/data/db/slr-samyang.xml	2013-11-28 10:53:38.000000000 -0700
+++ karl/data/db/slr-samyang.xml	2013-11-29 15:26:05.000000000 -0700
@@ -1,4 +1,13 @@
 &lt;lensdatabase&gt;
+    &lt;lens&gt;
+        &lt;maker&gt;Samyang&lt;/maker&gt;
+        &lt;model&gt;Samyang 8mm Fish-Eye CS f/3.5&lt;/model&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;8&quot; br=&quot;-0.0007764&quot; cr=&quot;0.0013798&quot; vr=&quot;1.0000228&quot; bb=&quot;-0.0002711&quot; cb=&quot;0.0008531&quot; vb=&quot;0.9998496&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
 
     &lt;lens&gt;
         &lt;maker&gt;Samyang&lt;/maker&gt;
@@ -30,3 +39,5 @@
     &lt;/lens&gt;
 
 &lt;/lensdatabase&gt;
+&lt;lensdatabase&gt;
+&lt;/lensdatabase&gt;
diff -burN trunk/data/db/slr-tokina.xml karl/data/db/slr-tokina.xml
--- trunk/data/db/slr-tokina.xml	2013-11-28 10:53:38.000000000 -0700
+++ karl/data/db/slr-tokina.xml	2013-11-29 15:26:05.000000000 -0700
@@ -194,4 +194,14 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
+    &lt;lens&gt;
+        &lt;maker&gt;Tokina&lt;/maker&gt;
+        &lt;model&gt;K or M Lens (500mm)&lt;/model&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+          &lt;tca model=&quot;poly3&quot; focal=&quot;500&quot; br=&quot;0.0000917&quot; cr=&quot;-0.0001426&quot; vr=&quot;0.9998064&quot; bb=&quot;0.0002514&quot; cb=&quot;-0.0004149&quot; vb=&quot;0.9997489&quot; /&gt;
+        &lt;/calibration&gt;
+      &lt;/lens&gt;
+
 &lt;/lensdatabase&gt;
</code>
        <close_date>1386587849</close_date>
        <history id='14484'>
            <field_name>details</field_name>
            <old_value>This contains TCA updates for Tokina 500mm (Pentax K mount), Samyang 8mm f/3.5 (Pentax K mount), Pentax 18-55, Pentax FA-50 f/1.4 and FA-28 f/2.8 lenses, as well as the new Pentax K3 camera.   TCA calibration was done using the documentation at http://lensfun.berlios.de/calibration-tutorial/lens-tca.html</old_value>
            <mod_by>64979</mod_by>
            <date>1385764100</date>
        </history>
        <history id='14485'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>64979</mod_by>
            <date>1385764100</date>
        </history>
        <history id='14490'>
            <field_name>details</field_name>
            <old_value>Thank you for your upload!  Was the Pentax K3 also used for the pictures?</old_value>
            <mod_by>2378</mod_by>
            <date>1386051039</date>
        </history>
        <history id='14491'>
            <field_name>details</field_name>
            <old_value>What is the model name for the Tokina 500mm?  Maybe &quot;Tokina 500mm f/8 RMC Mirror Lens&quot;?</old_value>
            <mod_by>2378</mod_by>
            <date>1386051601</date>
        </history>
        <history id='14499'>
            <field_name>details</field_name>
            <old_value>The Pentax K3 wasn't used to take the pictures - I just added it because it wasn't in the database.

The actual model of the lens is &quot;RMC Tokina 500mm 1:8&quot;   (see the camerapedia entry at http://camerapedia.wikia.com/wiki/RMC_Tokina_500mm_1:8 )
It is a mirror lens, so your suggestion would probably be good (if there is a non-mirror version out there.)   I just used the output from exiftool as the name.</old_value>
            <mod_by>64979</mod_by>
            <date>1386209463</date>
        </history>
        <history id='14500'>
            <field_name>details</field_name>
            <old_value>And which camera model was used for the calibration pictures?</old_value>
            <mod_by>2378</mod_by>
            <date>1386230141</date>
        </history>
        <history id='14504'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1386583540</date>
        </history>
        <history id='14505'>
            <field_name>details</field_name>
            <old_value>I included the patch.  But if possible please submit the name of the camera the data was measured with.  Thank you!</old_value>
            <mod_by>2378</mod_by>
            <date>1386583540</date>
        </history>
        <history id='14506'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1386583540</date>
        </history>
        <history id='14507'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1386587849</date>
        </history>
        <history id='14508'>
            <field_name>close_date</field_name>
            <old_value>1386583540</old_value>
            <mod_by>2378</mod_by>
            <date>1386587849</date>
        </history>
    </patch>
    <patch id='3512'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='64837' name='mazhe'/>
        <assigned_to id='100' name='none'/>
        <open_date>1382947308</open_date>
        <summary>&quot;New&quot; lense : Sigma 70-200 f/2.8 EX DG HSM Macro II (APS-C)</summary>
        <code>Index: data/db/slr-sigma.xml
===================================================================
--- data/db/slr-sigma.xml	(revision 305)
+++ data/db/slr-sigma.xml	(working copy)
@@ -1361,4 +1361,23 @@
         &lt;/calibration&gt;
     &lt;/lens&gt;
 
+    &lt;lens&gt;
+        &lt;maker&gt;Sigma&lt;/maker&gt;
+        &lt;model&gt;Sigma 70-200mm f/2.8 EX DG Macro HSM II&lt;/model&gt;
+        &lt;mount&gt;Sigma SA&lt;/mount&gt;
+        &lt;mount&gt;Nikon F AF&lt;/mount&gt;
+        &lt;mount&gt;Sony Alpha&lt;/mount&gt;
+        &lt;mount&gt;Pentax KAF2&lt;/mount&gt;
+        &lt;cropfactor&gt;1.5&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;70&quot;  br=&quot;-0.0000832&quot; vr=&quot;0.9997100&quot; bb=&quot;0.0000141&quot;  vb=&quot;1.0006182&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;83&quot;  br=&quot;0.0000026&quot;  vr=&quot;0.9994386&quot; bb=&quot;-0.0000353&quot; vb=&quot;1.0010066&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;98&quot;  br=&quot;-0.0000087&quot; vr=&quot;0.9993624&quot; bb=&quot;-0.0000411&quot; vb=&quot;1.0009973&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;110&quot; br=&quot;-0.0000002&quot; vr=&quot;0.9993278&quot; bb=&quot;-0.0000172&quot; vb=&quot;1.0008935&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;135&quot; br=&quot;0.0000194&quot;  vr=&quot;0.9986927&quot; bb=&quot;0.0000294&quot;  vb=&quot;1.0008344&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;155&quot; br=&quot;-0.0000206&quot; vr=&quot;0.9991794&quot; bb=&quot;0.0000447&quot;  vb=&quot;1.0007796&quot; /&gt;
+            &lt;tca model=&quot;poly3&quot; focal=&quot;200&quot; br=&quot;.0000687&quot;   vr=&quot;0.9987294&quot; bb=&quot;-0.0000727&quot; vb=&quot;1.0005835&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
 &lt;/lensdatabase&gt;
</code>
        <close_date>1384349152</close_date>
        <history id='14365'>
            <field_name>details</field_name>
            <old_value>Resubmit as actual patch.</old_value>
            <mod_by>64837</mod_by>
            <date>1383845732</date>
        </history>
        <history id='14366'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>64837</mod_by>
            <date>1383845732</date>
        </history>
        <history id='14367'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>64837</mod_by>
            <date>1383845967</date>
        </history>
        <history id='14399'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1384349152</date>
        </history>
        <history id='14400'>
            <field_name>details</field_name>
            <old_value>Thank you, I included your data. Distortion data would be nice to have, too.  You may use http://wilson.bronger.org/calibration for this.</old_value>
            <mod_by>2378</mod_by>
            <date>1384349152</date>
        </history>
        <history id='14401'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1384349152</date>
        </history>
    </patch>
    <patch id='3517'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1383948748</open_date>
        <summary>Fix multi-language strings</summary>
        <code>=== modified file 'libs/lensfun/auxfun.cpp'
*** libs/lensfun/auxfun.cpp	2010-03-14 18:48:00 +0000
--- libs/lensfun/auxfun.cpp	2013-11-08 22:11:30 +0000
***************
*** 90,96 ****
      {
          str_len = strlen (str) + 1;
          while (str [str_len])
!             str_len += 1 + strlen (str + str_len + 1);
      }
  
      if (!lang)
--- 90,96 ----
      {
          str_len = strlen (str) + 1;
          while (str [str_len])
!             str_len += 1 + strlen (str + str_len);
      }
  
      if (!lang)
</code>
        <close_date>1385670033</close_date>
        <history id='14472'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1385670033</date>
        </history>
        <history id='14473'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1385670033</date>
        </history>
        <history id='14474'>
            <field_name>details</field_name>
            <old_value>Patch is applied. Thx!</old_value>
            <mod_by>36447</mod_by>
            <date>1385670033</date>
        </history>
        <history id='14475'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1385670033</date>
        </history>
    </patch>
    <patch id='3540'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='65071' name='lebedevri'/>
        <assigned_to id='2378' name='bronger'/>
        <open_date>1388001523</open_date>
        <summary>Vignetting data for 2 lenses</summary>
        <code>&lt;lensdatabase&gt;

    &lt;lens&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Canon EF 24-105mm f/4L IS USM&lt;/model&gt;
        &lt;mount&gt;Canon EF&lt;/mount&gt;
        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot; distance=&quot;0.45&quot; k1=&quot;-0.4795&quot; k2=&quot;-0.5164&quot; k3=&quot;0.1168&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot; distance=&quot;0.9&quot; k1=&quot;-0.5099&quot; k2=&quot;-0.3593&quot; k3=&quot;0.0100&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot; distance=&quot;2.7&quot; k1=&quot;-0.5210&quot; k2=&quot;-0.3005&quot; k3=&quot;-0.0331&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.5460&quot; k2=&quot;-0.2245&quot; k3=&quot;-0.0825&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;0.45&quot; k1=&quot;-0.5434&quot; k2=&quot;-0.0220&quot; k3=&quot;-0.2734&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;0.9&quot; k1=&quot;-0.5925&quot; k2=&quot;0.1920&quot; k3=&quot;-0.4102&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;2.7&quot; k1=&quot;-0.6105&quot; k2=&quot;0.2702&quot; k3=&quot;-0.4657&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.6251&quot; k2=&quot;0.3124&quot; k3=&quot;-0.4911&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;8&quot; distance=&quot;0.45&quot; k1=&quot;-0.7341&quot; k2=&quot;0.6702&quot; k3=&quot;-0.7376&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;8&quot; distance=&quot;0.9&quot; k1=&quot;-0.7582&quot; k2=&quot;0.7674&quot; k3=&quot;-0.7682&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;8&quot; distance=&quot;2.7&quot; k1=&quot;-0.7783&quot; k2=&quot;0.8378&quot; k3=&quot;-0.8121&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.7823&quot; k2=&quot;0.8454&quot; k3=&quot;-0.8131&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;0.45&quot; k1=&quot;-0.8706&quot; k2=&quot;1.1062&quot; k3=&quot;-1.0123&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;0.9&quot; k1=&quot;-0.8371&quot; k2=&quot;0.9860&quot; k3=&quot;-0.8679&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;2.7&quot; k1=&quot;-0.8344&quot; k2=&quot;0.9810&quot; k3=&quot;-0.8608&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.8340&quot; k2=&quot;0.9778&quot; k3=&quot;-0.8568&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;16&quot; distance=&quot;0.45&quot; k1=&quot;-0.9126&quot; k2=&quot;1.2016&quot; k3=&quot;-1.0358&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;16&quot; distance=&quot;0.9&quot; k1=&quot;-0.8199&quot; k2=&quot;0.8728&quot; k3=&quot;-0.7322&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;16&quot; distance=&quot;2.7&quot; k1=&quot;-0.8124&quot; k2=&quot;0.8533&quot; k3=&quot;-0.7189&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.8099&quot; k2=&quot;0.8471&quot; k3=&quot;-0.7154&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;22&quot; distance=&quot;0.45&quot; k1=&quot;-0.8999&quot; k2=&quot;1.1258&quot; k3=&quot;-0.9507&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;22&quot; distance=&quot;0.9&quot; k1=&quot;-0.7940&quot; k2=&quot;0.7596&quot; k3=&quot;-0.6258&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;22&quot; distance=&quot;2.7&quot; k1=&quot;-0.8030&quot; k2=&quot;0.8024&quot; k3=&quot;-0.6672&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.8041&quot; k2=&quot;0.8095&quot; k3=&quot;-0.6743&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;4&quot; distance=&quot;0.45&quot; k1=&quot;-0.5671&quot; k2=&quot;-0.1074&quot; k3=&quot;0.0934&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;4&quot; distance=&quot;0.9&quot; k1=&quot;-0.5570&quot; k2=&quot;-0.0974&quot; k3=&quot;0.0827&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;4&quot; distance=&quot;2.7&quot; k1=&quot;-0.5699&quot; k2=&quot;-0.0408&quot; k3=&quot;0.0282&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.6054&quot; k2=&quot;0.0282&quot; k3=&quot;-0.0163&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;0.45&quot; k1=&quot;-0.6116&quot; k2=&quot;0.3685&quot; k3=&quot;-0.2226&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;0.9&quot; k1=&quot;-0.6017&quot; k2=&quot;0.3878&quot; k3=&quot;-0.2407&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;2.7&quot; k1=&quot;-0.6215&quot; k2=&quot;0.4488&quot; k3=&quot;-0.2954&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.6418&quot; k2=&quot;0.5034&quot; k3=&quot;-0.3355&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;0.45&quot; k1=&quot;-0.5971&quot; k2=&quot;0.3002&quot; k3=&quot;-0.1550&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;0.9&quot; k1=&quot;-0.5770&quot; k2=&quot;0.2770&quot; k3=&quot;-0.1328&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;2.7&quot; k1=&quot;-0.5849&quot; k2=&quot;0.2941&quot; k3=&quot;-0.1483&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.6029&quot; k2=&quot;0.3432&quot; k3=&quot;-0.1836&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;0.45&quot; k1=&quot;-0.5999&quot; k2=&quot;0.2956&quot; k3=&quot;-0.1444&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;0.9&quot; k1=&quot;-0.5764&quot; k2=&quot;0.2640&quot; k3=&quot;-0.1160&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;2.7&quot; k1=&quot;-0.5843&quot; k2=&quot;0.2767&quot; k3=&quot;-0.1257&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.6005&quot; k2=&quot;0.3196&quot; k3=&quot;-0.1558&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;0.45&quot; k1=&quot;-0.6063&quot; k2=&quot;0.2984&quot; k3=&quot;-0.1399&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;0.9&quot; k1=&quot;-0.5833&quot; k2=&quot;0.2700&quot; k3=&quot;-0.1142&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;2.7&quot; k1=&quot;-0.5913&quot; k2=&quot;0.2812&quot; k3=&quot;-0.1221&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.6041&quot; k2=&quot;0.3158&quot; k3=&quot;-0.1462&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;0.45&quot; k1=&quot;-0.6122&quot; k2=&quot;0.3065&quot; k3=&quot;-0.1424&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;0.9&quot; k1=&quot;-0.5894&quot; k2=&quot;0.2778&quot; k3=&quot;-0.1160&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;2.7&quot; k1=&quot;-0.5972&quot; k2=&quot;0.2887&quot; k3=&quot;-0.1240&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.6070&quot; k2=&quot;0.3145&quot; k3=&quot;-0.1413&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;4&quot; distance=&quot;0.45&quot; k1=&quot;-0.5274&quot; k2=&quot;-0.2110&quot; k3=&quot;0.2123&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;4&quot; distance=&quot;0.9&quot; k1=&quot;-0.5559&quot; k2=&quot;-0.0930&quot; k3=&quot;0.1107&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;4&quot; distance=&quot;2.7&quot; k1=&quot;-0.5569&quot; k2=&quot;-0.0746&quot; k3=&quot;0.0868&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.5818&quot; k2=&quot;-0.0162&quot; k3=&quot;0.0425&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; distance=&quot;0.45&quot; k1=&quot;-0.3835&quot; k2=&quot;0.0297&quot; k3=&quot;-0.0329&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; distance=&quot;0.9&quot; k1=&quot;-0.5182&quot; k2=&quot;0.3503&quot; k3=&quot;-0.2346&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; distance=&quot;2.7&quot; k1=&quot;-0.5279&quot; k2=&quot;0.3888&quot; k3=&quot;-0.2717&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.5500&quot; k2=&quot;0.4475&quot; k3=&quot;-0.3184&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;8&quot; distance=&quot;0.45&quot; k1=&quot;-0.4861&quot; k2=&quot;0.1556&quot; k3=&quot;-0.0270&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;8&quot; distance=&quot;0.9&quot; k1=&quot;-0.4743&quot; k2=&quot;0.1487&quot; k3=&quot;-0.0198&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;8&quot; distance=&quot;2.7&quot; k1=&quot;-0.4674&quot; k2=&quot;0.1258&quot; k3=&quot;-0.0020&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.4889&quot; k2=&quot;0.1737&quot; k3=&quot;-0.0356&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;0.45&quot; k1=&quot;-0.4856&quot; k2=&quot;0.1481&quot; k3=&quot;-0.0178&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;0.9&quot; k1=&quot;-0.4750&quot; k2=&quot;0.1425&quot; k3=&quot;-0.0101&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;2.7&quot; k1=&quot;-0.4685&quot; k2=&quot;0.1214&quot; k3=&quot;0.0057&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.4893&quot; k2=&quot;0.1670&quot; k3=&quot;-0.0255&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; distance=&quot;0.45&quot; k1=&quot;-0.4905&quot; k2=&quot;0.1537&quot; k3=&quot;-0.0187&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; distance=&quot;0.9&quot; k1=&quot;-0.4771&quot; k2=&quot;0.1396&quot; k3=&quot;-0.0042&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; distance=&quot;2.7&quot; k1=&quot;-0.4751&quot; k2=&quot;0.1298&quot; k3=&quot;0.0038&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.4944&quot; k2=&quot;0.1721&quot; k3=&quot;-0.0253&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;22&quot; distance=&quot;0.45&quot; k1=&quot;-0.5000&quot; k2=&quot;0.1707&quot; k3=&quot;-0.0276&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;22&quot; distance=&quot;0.9&quot; k1=&quot;-0.4836&quot; k2=&quot;0.1490&quot; k3=&quot;-0.0077&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;22&quot; distance=&quot;2.7&quot; k1=&quot;-0.4846&quot; k2=&quot;0.1454&quot; k3=&quot;-0.0035&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.5030&quot; k2=&quot;0.1854&quot; k3=&quot;-0.0309&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;0.45&quot; k1=&quot;-0.7049&quot; k2=&quot;0.2950&quot; k3=&quot;-0.1500&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;0.9&quot; k1=&quot;-0.7163&quot; k2=&quot;0.3620&quot; k3=&quot;-0.2250&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;2.7&quot; k1=&quot;-0.6962&quot; k2=&quot;0.3204&quot; k3=&quot;-0.2129&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.7079&quot; k2=&quot;0.3344&quot; k3=&quot;-0.2278&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;0.45&quot; k1=&quot;-0.4799&quot; k2=&quot;0.3668&quot; k3=&quot;-0.2925&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;0.9&quot; k1=&quot;-0.4831&quot; k2=&quot;0.4338&quot; k3=&quot;-0.3717&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;2.7&quot; k1=&quot;-0.4805&quot; k2=&quot;0.4500&quot; k3=&quot;-0.3919&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.5016&quot; k2=&quot;0.4991&quot; k3=&quot;-0.4414&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;0.45&quot; k1=&quot;-0.4273&quot; k2=&quot;0.1139&quot; k3=&quot;0.0043&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;0.9&quot; k1=&quot;-0.4138&quot; k2=&quot;0.1045&quot; k3=&quot;0.0093&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;2.7&quot; k1=&quot;-0.4064&quot; k2=&quot;0.0883&quot; k3=&quot;0.0218&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.4297&quot; k2=&quot;0.1397&quot; k3=&quot;-0.0142&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;0.45&quot; k1=&quot;-0.4280&quot; k2=&quot;0.1093&quot; k3=&quot;0.0114&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;0.9&quot; k1=&quot;-0.4061&quot; k2=&quot;0.0772&quot; k3=&quot;0.0344&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;2.7&quot; k1=&quot;-0.3995&quot; k2=&quot;0.0578&quot; k3=&quot;0.0519&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.4207&quot; k2=&quot;0.1038&quot; k3=&quot;0.0199&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;0.45&quot; k1=&quot;-0.4290&quot; k2=&quot;0.1066&quot; k3=&quot;0.0159&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;0.9&quot; k1=&quot;-0.4079&quot; k2=&quot;0.0761&quot; k3=&quot;0.0380&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;2.7&quot; k1=&quot;-0.4021&quot; k2=&quot;0.0578&quot; k3=&quot;0.0551&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.4222&quot; k2=&quot;0.1029&quot; k3=&quot;0.0231&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;0.45&quot; k1=&quot;-0.4335&quot; k2=&quot;0.1101&quot; k3=&quot;0.0166&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;0.9&quot; k1=&quot;-0.4124&quot; k2=&quot;0.0813&quot; k3=&quot;0.0370&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;2.7&quot; k1=&quot;-0.4081&quot; k2=&quot;0.0661&quot; k3=&quot;0.0521&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.4296&quot; k2=&quot;0.1152&quot; k3=&quot;0.0173&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;4&quot; distance=&quot;0.45&quot; k1=&quot;-1.0812&quot; k2=&quot;1.1713&quot; k3=&quot;-0.6459&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;4&quot; distance=&quot;0.9&quot; k1=&quot;-1.0310&quot; k2=&quot;1.0659&quot; k3=&quot;-0.6301&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;4&quot; distance=&quot;2.7&quot; k1=&quot;-0.9948&quot; k2=&quot;0.9010&quot; k3=&quot;-0.5254&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-1.0176&quot; k2=&quot;0.8667&quot; k3=&quot;-0.4856&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;5.6&quot; distance=&quot;0.45&quot; k1=&quot;-0.3223&quot; k2=&quot;-0.0995&quot; k3=&quot;0.0451&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;5.6&quot; distance=&quot;0.9&quot; k1=&quot;-0.3340&quot; k2=&quot;-0.0051&quot; k3=&quot;-0.0805&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;5.6&quot; distance=&quot;2.7&quot; k1=&quot;-0.3113&quot; k2=&quot;-0.0072&quot; k3=&quot;-0.1158&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.3111&quot; k2=&quot;-0.0112&quot; k3=&quot;-0.1305&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;8&quot; distance=&quot;0.45&quot; k1=&quot;-0.3740&quot; k2=&quot;0.0834&quot; k3=&quot;0.0276&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;8&quot; distance=&quot;0.9&quot; k1=&quot;-0.3449&quot; k2=&quot;0.0346&quot; k3=&quot;0.0606&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;8&quot; distance=&quot;2.7&quot; k1=&quot;-0.3473&quot; k2=&quot;0.0666&quot; k3=&quot;0.0265&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.3824&quot; k2=&quot;0.1623&quot; k3=&quot;-0.0510&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;11&quot; distance=&quot;0.45&quot; k1=&quot;-0.3703&quot; k2=&quot;0.0630&quot; k3=&quot;0.0486&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;11&quot; distance=&quot;0.9&quot; k1=&quot;-0.3403&quot; k2=&quot;0.0180&quot; k3=&quot;0.0758&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;11&quot; distance=&quot;2.7&quot; k1=&quot;-0.3352&quot; k2=&quot;0.0101&quot; k3=&quot;0.0818&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.3508&quot; k2=&quot;0.0342&quot; k3=&quot;0.0673&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;16&quot; distance=&quot;0.45&quot; k1=&quot;-0.3726&quot; k2=&quot;0.0649&quot; k3=&quot;0.0487&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;16&quot; distance=&quot;0.9&quot; k1=&quot;-0.3408&quot; k2=&quot;0.0156&quot; k3=&quot;0.0789&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;16&quot; distance=&quot;2.7&quot; k1=&quot;-0.3371&quot; k2=&quot;0.0090&quot; k3=&quot;0.0856&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.3511&quot; k2=&quot;0.0307&quot; k3=&quot;0.0728&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;22&quot; distance=&quot;0.45&quot; k1=&quot;-0.3752&quot; k2=&quot;0.0669&quot; k3=&quot;0.0488&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;22&quot; distance=&quot;0.9&quot; k1=&quot;-0.3442&quot; k2=&quot;0.0175&quot; k3=&quot;0.0798&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;22&quot; distance=&quot;2.7&quot; k1=&quot;-0.3422&quot; k2=&quot;0.0150&quot; k3=&quot;0.0838&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;105&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.3540&quot; k2=&quot;0.0313&quot; k3=&quot;0.0746&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;

    &lt;lens&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Canon EF 70-200mm f/4L IS USM&lt;/model&gt;
        &lt;mount&gt;Canon EF&lt;/mount&gt;
        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;1.2&quot; k1=&quot;-0.5200&quot; k2=&quot;0.1223&quot; k3=&quot;-0.0882&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;2.4&quot; k1=&quot;-0.5088&quot; k2=&quot;0.0999&quot; k3=&quot;-0.0725&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;7.2&quot; k1=&quot;-0.5123&quot; k2=&quot;0.1057&quot; k3=&quot;-0.0755&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.5228&quot; k2=&quot;0.1280&quot; k3=&quot;-0.0927&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;1.2&quot; k1=&quot;-0.1859&quot; k2=&quot;0.0559&quot; k3=&quot;-0.1686&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;2.4&quot; k1=&quot;-0.1773&quot; k2=&quot;0.0381&quot; k3=&quot;-0.1561&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;7.2&quot; k1=&quot;-0.1891&quot; k2=&quot;0.0626&quot; k3=&quot;-0.1714&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1839&quot; k2=&quot;0.0595&quot; k3=&quot;-0.1739&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;1.2&quot; k1=&quot;-0.2517&quot; k2=&quot;0.1818&quot; k3=&quot;-0.1150&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;2.4&quot; k1=&quot;-0.2462&quot; k2=&quot;0.1726&quot; k3=&quot;-0.1067&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;7.2&quot; k1=&quot;-0.2393&quot; k2=&quot;0.1445&quot; k3=&quot;-0.0808&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2390&quot; k2=&quot;0.1525&quot; k3=&quot;-0.0951&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1.2&quot; k1=&quot;-0.2019&quot; k2=&quot;-0.0232&quot; k3=&quot;0.0783&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;2.4&quot; k1=&quot;-0.1959&quot; k2=&quot;-0.0342&quot; k3=&quot;0.0885&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;7.2&quot; k1=&quot;-0.1947&quot; k2=&quot;-0.0403&quot; k3=&quot;0.0939&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.1873&quot; k2=&quot;-0.0534&quot; k3=&quot;0.0967&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;1.2&quot; k1=&quot;-0.2015&quot; k2=&quot;-0.0272&quot; k3=&quot;0.0820&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;2.4&quot; k1=&quot;-0.1983&quot; k2=&quot;-0.0311&quot; k3=&quot;0.0873&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;7.2&quot; k1=&quot;-0.1973&quot; k2=&quot;-0.0362&quot; k3=&quot;0.0919&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1876&quot; k2=&quot;-0.0553&quot; k3=&quot;0.0986&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;1.2&quot; k1=&quot;-0.2052&quot; k2=&quot;-0.0230&quot; k3=&quot;0.0809&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;2.4&quot; k1=&quot;-0.2016&quot; k2=&quot;-0.0263&quot; k3=&quot;0.0855&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;7.2&quot; k1=&quot;-0.2019&quot; k2=&quot;-0.0269&quot; k3=&quot;0.0864&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1913&quot; k2=&quot;-0.0489&quot; k3=&quot;0.0954&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;32&quot; distance=&quot;1.2&quot; k1=&quot;-0.2129&quot; k2=&quot;-0.0085&quot; k3=&quot;0.0730&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;32&quot; distance=&quot;2.4&quot; k1=&quot;-0.2077&quot; k2=&quot;-0.0147&quot; k3=&quot;0.0794&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;32&quot; distance=&quot;7.2&quot; k1=&quot;-0.2110&quot; k2=&quot;-0.0064&quot; k3=&quot;0.0733&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.1961&quot; k2=&quot;-0.0393&quot; k3=&quot;0.0896&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;1.2&quot; k1=&quot;-0.2161&quot; k2=&quot;-0.9770&quot; k3=&quot;0.5708&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;2.4&quot; k1=&quot;-0.2959&quot; k2=&quot;-0.2855&quot; k3=&quot;0.0499&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;7.2&quot; k1=&quot;-0.3594&quot; k2=&quot;-0.0599&quot; k3=&quot;-0.0874&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.3967&quot; k2=&quot;0.0764&quot; k3=&quot;-0.1680&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;1.2&quot; k1=&quot;0.0697&quot; k2=&quot;-0.8185&quot; k3=&quot;0.2449&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;2.4&quot; k1=&quot;-0.1880&quot; k2=&quot;0.1425&quot; k3=&quot;-0.3280&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;7.2&quot; k1=&quot;-0.2320&quot; k2=&quot;0.2708&quot; k3=&quot;-0.3750&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2572&quot; k2=&quot;0.3403&quot; k3=&quot;-0.3979&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;1.2&quot; k1=&quot;-0.2376&quot; k2=&quot;0.3575&quot; k3=&quot;-0.5703&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;2.4&quot; k1=&quot;-0.3169&quot; k2=&quot;0.4956&quot; k3=&quot;-0.4426&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;7.2&quot; k1=&quot;-0.2981&quot; k2=&quot;0.3958&quot; k3=&quot;-0.3251&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2702&quot; k2=&quot;0.2787&quot; k3=&quot;-0.2090&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1.2&quot; k1=&quot;-0.3996&quot; k2=&quot;0.8377&quot; k3=&quot;-0.8039&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;2.4&quot; k1=&quot;-0.2305&quot; k2=&quot;0.1100&quot; k3=&quot;-0.0437&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;7.2&quot; k1=&quot;-0.2041&quot; k2=&quot;0.0018&quot; k3=&quot;0.0561&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.1907&quot; k2=&quot;-0.0409&quot; k3=&quot;0.0881&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;1.2&quot; k1=&quot;-0.3768&quot; k2=&quot;0.6594&quot; k3=&quot;-0.5536&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;2.4&quot; k1=&quot;-0.1958&quot; k2=&quot;-0.0341&quot; k3=&quot;0.0890&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;7.2&quot; k1=&quot;-0.1956&quot; k2=&quot;-0.0369&quot; k3=&quot;0.0920&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1880&quot; k2=&quot;-0.0529&quot; k3=&quot;0.0985&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;1.2&quot; k1=&quot;-0.2728&quot; k2=&quot;0.2260&quot; k3=&quot;-0.1400&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;2.4&quot; k1=&quot;-0.1993&quot; k2=&quot;-0.0315&quot; k3=&quot;0.0897&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;7.2&quot; k1=&quot;-0.1989&quot; k2=&quot;-0.0327&quot; k3=&quot;0.0909&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1897&quot; k2=&quot;-0.0531&quot; k3=&quot;0.1004&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;1.2&quot; k1=&quot;-0.2296&quot; k2=&quot;0.0458&quot; k3=&quot;0.0264&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;2.4&quot; k1=&quot;-0.2059&quot; k2=&quot;-0.0190&quot; k3=&quot;0.0830&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;7.2&quot; k1=&quot;-0.2061&quot; k2=&quot;-0.0198&quot; k3=&quot;0.0842&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.1960&quot; k2=&quot;-0.0421&quot; k3=&quot;0.0946&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;4&quot; distance=&quot;1.2&quot; k1=&quot;-0.7218&quot; k2=&quot;-0.3407&quot; k3=&quot;0.4060&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;4&quot; distance=&quot;2.4&quot; k1=&quot;-0.4301&quot; k2=&quot;-0.6250&quot; k3=&quot;0.4812&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;4&quot; distance=&quot;7.2&quot; k1=&quot;-0.2731&quot; k2=&quot;-0.8010&quot; k3=&quot;0.5210&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.2639&quot; k2=&quot;-0.7526&quot; k3=&quot;0.4748&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;1.2&quot; k1=&quot;0.1366&quot; k2=&quot;-1.6201&quot; k3=&quot;0.9500&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;2.4&quot; k1=&quot;0.0676&quot; k2=&quot;-0.9085&quot; k3=&quot;0.4165&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;7.2&quot; k1=&quot;0.0087&quot; k2=&quot;-0.6074&quot; k3=&quot;0.1965&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.0265&quot; k2=&quot;-0.4691&quot; k3=&quot;0.1092&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;8&quot; distance=&quot;1.2&quot; k1=&quot;0.0379&quot; k2=&quot;-0.6698&quot; k3=&quot;0.1309&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;8&quot; distance=&quot;2.4&quot; k1=&quot;-0.2227&quot; k2=&quot;0.2627&quot; k3=&quot;-0.3791&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;8&quot; distance=&quot;7.2&quot; k1=&quot;-0.2602&quot; k2=&quot;0.3627&quot; k3=&quot;-0.4059&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2729&quot; k2=&quot;0.3859&quot; k3=&quot;-0.3989&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;1.2&quot; k1=&quot;-0.2595&quot; k2=&quot;0.4383&quot; k3=&quot;-0.6210&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;2.4&quot; k1=&quot;-0.2937&quot; k2=&quot;0.3982&quot; k3=&quot;-0.3308&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;7.2&quot; k1=&quot;-0.2662&quot; k2=&quot;0.2701&quot; k3=&quot;-0.1967&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2353&quot; k2=&quot;0.1478&quot; k3=&quot;-0.0838&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;16&quot; distance=&quot;1.2&quot; k1=&quot;-0.3953&quot; k2=&quot;0.8210&quot; k3=&quot;-0.7791&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;16&quot; distance=&quot;2.4&quot; k1=&quot;-0.2066&quot; k2=&quot;0.0250&quot; k3=&quot;0.0354&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;16&quot; distance=&quot;7.2&quot; k1=&quot;-0.1909&quot; k2=&quot;-0.0354&quot; k3=&quot;0.0890&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1841&quot; k2=&quot;-0.0515&quot; k3=&quot;0.0965&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;1.2&quot; k1=&quot;-0.3597&quot; k2=&quot;0.5933&quot; k3=&quot;-0.4867&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;2.4&quot; k1=&quot;-0.1950&quot; k2=&quot;-0.0297&quot; k3=&quot;0.0872&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;7.2&quot; k1=&quot;-0.1936&quot; k2=&quot;-0.0349&quot; k3=&quot;0.0914&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1836&quot; k2=&quot;-0.0570&quot; k3=&quot;0.1018&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;32&quot; distance=&quot;1.2&quot; k1=&quot;-0.2665&quot; k2=&quot;0.2087&quot; k3=&quot;-0.1236&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;32&quot; distance=&quot;2.4&quot; k1=&quot;-0.2008&quot; k2=&quot;-0.0207&quot; k3=&quot;0.0835&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;32&quot; distance=&quot;7.2&quot; k1=&quot;-0.1996&quot; k2=&quot;-0.0257&quot; k3=&quot;0.0874&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.1869&quot; k2=&quot;-0.0541&quot; k3=&quot;0.1019&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;4&quot; distance=&quot;1.2&quot; k1=&quot;-1.3869&quot; k2=&quot;1.3645&quot; k3=&quot;-0.5975&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;4&quot; distance=&quot;2.4&quot; k1=&quot;-1.4572&quot; k2=&quot;1.6038&quot; k3=&quot;-0.7493&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;4&quot; distance=&quot;7.2&quot; k1=&quot;-1.3355&quot; k2=&quot;1.3855&quot; k3=&quot;-0.6326&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-1.2097&quot; k2=&quot;1.1495&quot; k3=&quot;-0.5099&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5.6&quot; distance=&quot;1.2&quot; k1=&quot;-0.5875&quot; k2=&quot;-0.3199&quot; k3=&quot;0.3901&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5.6&quot; distance=&quot;2.4&quot; k1=&quot;-0.1979&quot; k2=&quot;-0.8929&quot; k3=&quot;0.6569&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5.6&quot; distance=&quot;7.2&quot; k1=&quot;-0.0766&quot; k2=&quot;-0.9730&quot; k3=&quot;0.6522&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;0.0028&quot; k2=&quot;-1.0499&quot; k3=&quot;0.6600&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;1.2&quot; k1=&quot;0.0953&quot; k2=&quot;-1.2513&quot; k3=&quot;0.7154&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;2.4&quot; k1=&quot;0.0023&quot; k2=&quot;-0.5947&quot; k3=&quot;0.2501&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;7.2&quot; k1=&quot;-0.0974&quot; k2=&quot;-0.1938&quot; k3=&quot;-0.0108&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.1281&quot; k2=&quot;-0.0890&quot; k3=&quot;-0.0716&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;11&quot; distance=&quot;1.2&quot; k1=&quot;-0.1134&quot; k2=&quot;-0.1124&quot; k3=&quot;-0.1389&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;11&quot; distance=&quot;2.4&quot; k1=&quot;-0.2417&quot; k2=&quot;0.2666&quot; k3=&quot;-0.2525&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;11&quot; distance=&quot;7.2&quot; k1=&quot;-0.2329&quot; k2=&quot;0.1868&quot; k3=&quot;-0.1324&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2273&quot; k2=&quot;0.1592&quot; k3=&quot;-0.1016&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;16&quot; distance=&quot;1.2&quot; k1=&quot;-0.2923&quot; k2=&quot;0.4301&quot; k3=&quot;-0.3911&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;16&quot; distance=&quot;2.4&quot; k1=&quot;-0.1960&quot; k2=&quot;0.0129&quot; k3=&quot;0.0467&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;16&quot; distance=&quot;7.2&quot; k1=&quot;-0.1856&quot; k2=&quot;-0.0280&quot; k3=&quot;0.0830&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1819&quot; k2=&quot;-0.0335&quot; k3=&quot;0.0817&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;22&quot; distance=&quot;1.2&quot; k1=&quot;-0.2181&quot; k2=&quot;0.0813&quot; k3=&quot;-0.0163&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;22&quot; distance=&quot;2.4&quot; k1=&quot;-0.1916&quot; k2=&quot;-0.0145&quot; k3=&quot;0.0747&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;22&quot; distance=&quot;7.2&quot; k1=&quot;-0.1888&quot; k2=&quot;-0.0245&quot; k3=&quot;0.0824&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1803&quot; k2=&quot;-0.0404&quot; k3=&quot;0.0870&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;32&quot; distance=&quot;1.2&quot; k1=&quot;-0.1975&quot; k2=&quot;-0.0084&quot; k3=&quot;0.0673&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;32&quot; distance=&quot;2.4&quot; k1=&quot;-0.1957&quot; k2=&quot;-0.0061&quot; k3=&quot;0.0694&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;32&quot; distance=&quot;7.2&quot; k1=&quot;-0.1944&quot; k2=&quot;-0.0139&quot; k3=&quot;0.0757&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.1823&quot; k2=&quot;-0.0364&quot; k3=&quot;0.0843&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;

&lt;/lensdatabase&gt;
</code>
        <close_date>1388149611</close_date>
        <history id='14525'>
            <field_name>details</field_name>
            <old_value>Taken with Canon EOS 5D Mark III.</old_value>
            <mod_by>65071</mod_by>
            <date>1388001588</date>
        </history>
        <history id='14526'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1388149611</date>
        </history>
        <history id='14527'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1388149611</date>
        </history>
        <history id='14528'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1388149611</date>
        </history>
    </patch>
    <patch id='3519'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1384044282</open_date>
        <summary>Less fussy crop factor check</summary>
        <code>=== modified file 'libs/lensfun/lens.cpp'
*** libs/lensfun/lens.cpp	2013-03-10 11:01:20 +0000
--- libs/lensfun/lens.cpp	2013-11-10 00:48:00 +0000
***************
*** 1166,1172 ****
          if (pattern-&gt;Type != match-&gt;Type)
              return 0;
  
!     if (pattern-&gt;CropFactor &gt; 0.01 &amp;&amp; pattern-&gt;CropFactor &lt; match-&gt;CropFactor - 0.01)
          return 0;
  
      if (pattern-&gt;CropFactor &gt;= match-&gt;CropFactor * 1.41)
--- 1166,1172 ----
          if (pattern-&gt;Type != match-&gt;Type)
              return 0;
  
!     if (pattern-&gt;CropFactor &gt; 0.01 &amp;&amp; pattern-&gt;CropFactor &lt; match-&gt;CropFactor * 0.96)
          return 0;
  
      if (pattern-&gt;CropFactor &gt;= match-&gt;CropFactor * 1.41)
***************
*** 1179,1184 ****
--- 1179,1186 ----
          score += 8;
      else if (pattern-&gt;CropFactor &gt;= match-&gt;CropFactor * 1.01)
          score += 10;
+     else if (pattern-&gt;CropFactor &gt;= match-&gt;CropFactor)
+         score += 2;
  
      switch (_lf_compare_num (pattern-&gt;MinFocal, match-&gt;MinFocal))
      {

</code>
        <close_date>1388602193</close_date>
        <history id='14370'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1384044813</date>
        </history>
        <history id='14371'>
            <field_name>details</field_name>
            <old_value>We have already talked about this.  I think we should implement this now in the code so that someday (maybe in a year) this code is so widespread that we can enforce this in the database, too.

It is about having the *exact* cropfactor of APS-C cameras and calibrations in the database. 1.5 is too inaccurate for some operations.

The last two new lines are for giving an exact crop factor match a better score than a slightly too big calibration crop factor.

When we realise the correct crop factors in the database, we can bump the database version to &quot;2&quot;.  I submitted another patch for that program logic.</old_value>
            <mod_by>2378</mod_by>
            <date>1384045072</date>
        </history>
        <history id='14493'>
            <field_name>details</field_name>
            <old_value>Shouldn't the last line be score += 12? Otherwise the exact match has a worse score than the other matches...</old_value>
            <mod_by>36447</mod_by>
            <date>1386097879</date>
        </history>
        <history id='14498'>
            <field_name>details</field_name>
            <old_value>Before the patch, an exact match even had only score +0.  I speculated that Andrew thought that a slightly bigger calibration sensor is the best option, which I found logical.  Giving no bonus at all to an exact match may be a bit drastic, but it fits with the strategy that an even only slightly too small calibration sensor is rejected.

Now, we soften the rejection somewhat, so I thought to also soften the score for exact match somewhat to +2.  But you may well rise that value.  There is no definite answer to this anyway.</old_value>
            <mod_by>2378</mod_by>
            <date>1386105969</date>
        </history>
        <history id='14540'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388602193</date>
        </history>
        <history id='14541'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388602193</date>
        </history>
        <history id='14542'>
            <field_name>details</field_name>
            <old_value>Ok, now I understand. I agree that it's a good idea to soften this a bit by setting +2 for exact matches.</old_value>
            <mod_by>36447</mod_by>
            <date>1388602193</date>
        </history>
        <history id='14543'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1388602193</date>
        </history>
    </patch>
    <patch id='3532'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1386267802</open_date>
        <summary>Fix vignetting in case of non-matching crop factors</summary>
        <code>=== modified file 'libs/lensfun/lensfunprv.h'
*** libs/lensfun/lensfunprv.h	2013-12-28 10:50:00 +0000
--- libs/lensfun/lensfunprv.h	2013-12-29 13:41:11 +0000
***************
*** 543,548 ****
--- 543,551 ----
      /// Factor to transform from normalized into absolute coords (mm).  Needed
      /// for geometry transformation.
      double NormalizedInMillimeters;
+     /// Used for conversion from distortion to vignetting coordinate system of
+     /// the calibration sensor
+     double AspectRatioCorrection;
  
      /// A list of subpixel coordinate modifier callbacks.
      GPtrArray *SubpixelCallbacks;

=== modified file 'libs/lensfun/mod-color.cpp'
*** libs/lensfun/mod-color.cpp	2013-12-27 08:13:56 +0000
--- libs/lensfun/mod-color.cpp	2013-12-29 13:41:11 +0000
***************
*** 35,43 ****
      // for vignetting it uses 1.0 = half diagonal length. We have
      // to compute a transition coefficient as lfModifier works in
      // the first coordinate system.
!     double ns = 2.0 / sqrt (float (square (This-&gt;Width) + square (This-&gt;Height)));
!     tmp [3] = ns;
!     tmp [4] = ns / This-&gt;NormScale;
  
      if (reverse)
          switch (model.Model)
--- 35,42 ----
      // for vignetting it uses 1.0 = half diagonal length. We have
      // to compute a transition coefficient as lfModifier works in
      // the first coordinate system.
!     tmp [3] = This-&gt;NormScale / This-&gt;AspectRatioCorrection;
!     tmp [4] = 1.0 / This-&gt;AspectRatioCorrection;
  
      if (reverse)
          switch (model.Model)

=== modified file 'libs/lensfun/modifier.cpp'
*** libs/lensfun/modifier.cpp	2013-12-29 13:34:11 +0000
--- libs/lensfun/modifier.cpp	2013-12-29 13:42:51 +0000
***************
*** 81,121 ****
  
      // Image &quot;size&quot;
      float size = float ((Width &lt; Height) ? Width : Height);
  
!     // In NormalizedInMillimeters, we un-do all factors of
!     // coordinate_correction that refer to the calibration sensor because
!     // NormalizedInMillimeters refers only to the image sensor.
!     NormalizedInMillimeters = sqrt(36.0*36.0 + 24.0*24.0) / 2.0;
!     float coordinate_correction = 1;
!     // Take crop factor into account
!     if (lens &amp;&amp; lens-&gt;CropFactor) {
!         coordinate_correction *= crop / lens-&gt;CropFactor;
!         NormalizedInMillimeters /= lens-&gt;CropFactor;
!     }
! 
!     // Take aspect ratio into account
!     if (lens &amp;&amp; lens-&gt;AspectRatio)
      {
!         float image_aspect_ratio = (Width &lt; Height) ?
!             float (Height) / float (Width) : float (Width) / float (Height);
!         float image_aspect_ratio_correction =
!             sqrt (image_aspect_ratio * image_aspect_ratio + 1);
!         float calibration_aspect_ratio_correction =
!             sqrt (lens-&gt;AspectRatio * lens-&gt;AspectRatio + 1);
!         coordinate_correction *=
!             image_aspect_ratio_correction / calibration_aspect_ratio_correction;
!         NormalizedInMillimeters /= calibration_aspect_ratio_correction;
      }
  
      // The scale to transform {-size/2 .. 0 .. size/2-1} to {-1 .. 0 .. +1}
!     NormScale = 2.0 / (size - 1) / coordinate_correction;
  
      // The scale to transform {-1 .. 0 .. +1} to {-size/2 .. 0 .. size/2-1}
!     NormUnScale = (size - 1) * 0.5 * coordinate_correction;
  
      // Geometric lens center in normalized coordinates
!     CenterX = (Width / size + (lens ? lens-&gt;CenterX : 0.0)) / coordinate_correction;
!     CenterY = (Height / size + (lens ? lens-&gt;CenterY : 0.0)) / coordinate_correction;
  }
  
  static void free_callback_list (GPtrArray *arr)
--- 81,118 ----
  
      // Image &quot;size&quot;
      float size = float ((Width &lt; Height) ? Width : Height);
+     float image_aspect_ratio = (Width &lt; Height) ?
+         float (Height) / float (Width) : float (Width) / float (Height);
  
!     float calibration_cropfactor;
!     if (lens)
      {
!         calibration_cropfactor = lens-&gt;CropFactor;
!         AspectRatioCorrection = sqrt (lens-&gt;AspectRatio * lens-&gt;AspectRatio + 1);
      }
+     else
+         AspectRatioCorrection = calibration_cropfactor = NAN;
+ 
+     float coordinate_correction =
+         1.0 / sqrt (image_aspect_ratio * image_aspect_ratio + 1) *
+         calibration_cropfactor / crop *
+         AspectRatioCorrection;
+ 
+     // In NormalizedInMillimeters, we un-do all factors of
+     // coordinate_correction that refer to the calibration sensor because
+     // NormalizedInMillimeters is supposed to transform to image coordinates.
+     NormalizedInMillimeters = sqrt(36.0*36.0 + 24.0*24.0) / 2.0 /
+         AspectRatioCorrection / calibration_cropfactor;
  
      // The scale to transform {-size/2 .. 0 .. size/2-1} to {-1 .. 0 .. +1}
!     NormScale = 2.0 / (size - 1) * coordinate_correction;
  
      // The scale to transform {-1 .. 0 .. +1} to {-size/2 .. 0 .. size/2-1}
!     NormUnScale = (size - 1) * 0.5 / coordinate_correction;
  
      // Geometric lens center in normalized coordinates
!     CenterX = (Width / size + (lens ? lens-&gt;CenterX : 0.0)) * coordinate_correction;
!     CenterY = (Height / size + (lens ? lens-&gt;CenterY : 0.0)) * coordinate_correction;
  }
  
  static void free_callback_list (GPtrArray *arr)

</code>
        <close_date>1388602932</close_date>
        <history id='14501'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1386270316</date>
        </history>
        <history id='14502'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1386280126</date>
        </history>
        <history id='14529'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1388264472</date>
        </history>
        <history id='14530'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1388324505</date>
        </history>
        <history id='14531'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1388324639</date>
        </history>
        <history id='14544'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388602932</date>
        </history>
        <history id='14545'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388602932</date>
        </history>
        <history id='14546'>
            <field_name>details</field_name>
            <old_value>Patch is applied now.</old_value>
            <mod_by>36447</mod_by>
            <date>1388602932</date>
        </history>
        <history id='14547'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1388602932</date>
        </history>
    </patch>
    <patch id='3525'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='64929' name='rwh86'/>
        <assigned_to id='100' name='none'/>
        <open_date>1384600539</open_date>
        <summary>Add full frame version of Canon EF 50mm f/1.8 MkII</summary>
        <code>--- data/db/slr-canon.xml	2013-10-18 17:41:38.000000000 +0100
+++ data/db/slr-canon-with50mm.xml	2013-11-16 11:12:41.695920416 +0000
@@ -1392,6 +1392,16 @@
         &lt;maker&gt;Canon&lt;/maker&gt;
         &lt;model&gt;Canon EF 50mm f/1.8 MkII&lt;/model&gt;
         &lt;mount&gt;Canon EF&lt;/mount&gt;
+        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
+        &lt;calibration&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;0.00163&quot; b=&quot;-0.01449&quot; c=&quot;0.01568&quot; /&gt;
+        &lt;/calibration&gt;
+    &lt;/lens&gt;
+
+    &lt;lens&gt;
+        &lt;maker&gt;Canon&lt;/maker&gt;
+        &lt;model&gt;Canon EF 50mm f/1.8 MkII&lt;/model&gt;
+        &lt;mount&gt;Canon EF&lt;/mount&gt;
         &lt;cropfactor&gt;1.3&lt;/cropfactor&gt;
         &lt;calibration&gt;
             &lt;distortion model=&quot;ptlens&quot; focal=&quot;50&quot; a=&quot;-0.00016&quot; b=&quot;-0.003951&quot; c=&quot;0&quot; /&gt;
</code>
        <close_date>1384614615</close_date>
        <history id='14425'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1384614615</date>
        </history>
        <history id='14426'>
            <field_name>details</field_name>
            <old_value>Thank you, I included the addition.  BTW, it was correct to leave the other entry with crop 1.3.</old_value>
            <mod_by>2378</mod_by>
            <date>1384614615</date>
        </history>
        <history id='14427'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1384614615</date>
        </history>
        <history id='14424'>
            <field_name>details</field_name>
            <old_value>Wasn't sure whether to remove the 1.3 crop version so left it in place.</old_value>
            <mod_by>64929</mod_by>
            <date>1384600663</date>
        </history>
    </patch>
    <patch id='3516'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1383825586</open_date>
        <summary>Return list of lenses sorted by focal length</summary>
        <code>=== modified file 'include/lensfun/lensfun.h.in'
*** include/lensfun/lensfun.h.in	2013-01-27 16:32:37 +0000
--- include/lensfun/lensfun.h.in	2013-11-07 11:57:49 +0000
***************
*** 1126,1132 ****
       * results (still sorted by score). If it is not present, all results
       * where at least one of the input words is missing will be discarded.
       */
!     LF_SEARCH_LOOSE = 1
  };
  
  /**
--- 1126,1138 ----
       * results (still sorted by score). If it is not present, all results
       * where at least one of the input words is missing will be discarded.
       */
!     LF_SEARCH_LOOSE = 1,
!     /**
!      * This flag makes LensFun to sort the results by focal length, and
!      * remove all double lens names.  This is meant to be used to create a
!      * list presented to the user to pick a lens.
!      */
!     LF_SEARCH_SORT_AND_UNIQUIFY = 2
  };
  
  /**

=== modified file 'libs/lensfun/database.cpp'
*** libs/lensfun/database.cpp	2012-05-22 09:55:37 +0000
--- libs/lensfun/database.cpp	2013-11-07 11:02:59 +0000
***************
*** 1103,1108 ****
--- 1103,1116 ----
      return i2-&gt;Score - i1-&gt;Score;
  }
  
+ static gint _lf_compare_lens (gconstpointer a, gconstpointer b)
+ {
+     lfLens *i1 = (lfLens *)a;
+     lfLens *i2 = (lfLens *)b;
+ 
+     return i1-&gt;MinFocal - i2-&gt;MinFocal;
+ }
+ 
  static void _lf_add_compat_mounts (
      const lfDatabase *This, const lfLens *lens, GPtrArray *mounts, char *mount)
  {
***************
*** 1144,1149 ****
--- 1152,1158 ----
      g_ptr_array_add (mounts, NULL);
  
      int score;
+     const bool sort_and_uniquify = (sflags &amp; LF_SEARCH_SORT_AND_UNIQUIFY) != 0;
      for (size_t i = 0; i &lt; lenses-&gt;len - 1; i++)
      {
          lfLens *dblens = static_cast&lt;lfLens *&gt; (g_ptr_array_index (lenses, i));
***************
*** 1151,1157 ****
              lens, dblens, &amp;fc, (const char **)mounts-&gt;pdata)) &gt; 0)
          {
              dblens-&gt;Score = score;
!             _lf_ptr_array_insert_sorted (ret, dblens, _lf_compare_lens_score);
          }
      }
  
--- 1160,1181 ----
              lens, dblens, &amp;fc, (const char **)mounts-&gt;pdata)) &gt; 0)
          {
              dblens-&gt;Score = score;
!             if (sort_and_uniquify) {
!                 bool already = false;
!                 for (size_t i = 0; i &lt; ret-&gt;len; i++)
!                 {
!                     const lfLens *previous_lens = static_cast&lt;lfLens *&gt; (g_ptr_array_index (ret, i));
!                     if (!_lf_strcmp (previous_lens-&gt;Model, dblens-&gt;Model))
!                     {
!                         already = true;
!                         break;
!                     }
!                 }
!                 if (!already)
!                     _lf_ptr_array_insert_sorted (ret, dblens, _lf_compare_lens);
!             }
!             else
!                 _lf_ptr_array_insert_sorted (ret, dblens, _lf_compare_lens_score);
          }
      }
</code>
        <close_date>1385670538</close_date>
        <history id='14476'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1385670538</date>
        </history>
        <history id='14477'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1385670538</date>
        </history>
        <history id='14478'>
            <field_name>details</field_name>
            <old_value>I changed the name of the compare function to _lf_compare_lens_focal(). The rest ist applied as in the patch.</old_value>
            <mod_by>36447</mod_by>
            <date>1385670538</date>
        </history>
        <history id='14479'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1385670538</date>
        </history>
    </patch>
    <patch id='3543'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='64738' name='cchiappa'/>
        <assigned_to id='2378' name='bronger'/>
        <open_date>1389573054</open_date>
        <summary>Vignetting information for LUMIX G VARIO 14-42/F3.5-5.6 II</summary>
        <code>This lens already has distortion correction from October.  I only calibrated at infinity, but the script generates the two entries, so I've left them.

                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;3.5&quot; distance=&quot;10&quot; k1=&quot;-0.1926&quot; k2=&quot;-0.5161&quot; k3=&quot;0.1650&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-0.1926&quot; k2=&quot;-0.5161&quot; k3=&quot;0.1650&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;4&quot; distance=&quot;10&quot; k1=&quot;-0.1634&quot; k2=&quot;-0.3651&quot; k3=&quot;-0.0056&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.1634&quot; k2=&quot;-0.3651&quot; k3=&quot;-0.0056&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.3835&quot; k2=&quot;0.5740&quot; k3=&quot;-0.6269&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.3835&quot; k2=&quot;0.5740&quot; k3=&quot;-0.6269&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.3886&quot; k2=&quot;0.7040&quot; k3=&quot;-0.7046&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.3886&quot; k2=&quot;0.7040&quot; k3=&quot;-0.7046&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.5057&quot; k2=&quot;0.9068&quot; k3=&quot;-0.7483&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.5057&quot; k2=&quot;0.9068&quot; k3=&quot;-0.7483&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.4771&quot; k2=&quot;0.7660&quot; k3=&quot;-0.5941&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.4771&quot; k2=&quot;0.7660&quot; k3=&quot;-0.5941&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.4521&quot; k2=&quot;0.6309&quot; k3=&quot;-0.4670&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;14&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.4521&quot; k2=&quot;0.6309&quot; k3=&quot;-0.4670&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4&quot; distance=&quot;10&quot; k1=&quot;-0.2778&quot; k2=&quot;-0.0052&quot; k3=&quot;0.0050&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.2778&quot; k2=&quot;-0.0052&quot; k3=&quot;0.0050&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.3188&quot; k2=&quot;0.2849&quot; k3=&quot;-0.1858&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.3188&quot; k2=&quot;0.2849&quot; k3=&quot;-0.1858&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.3045&quot; k2=&quot;0.1705&quot; k3=&quot;-0.0602&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.3045&quot; k2=&quot;0.1705&quot; k3=&quot;-0.0602&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.1960&quot; k2=&quot;-0.0043&quot; k3=&quot;0.0167&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.1960&quot; k2=&quot;-0.0043&quot; k3=&quot;0.0167&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.2516&quot; k2=&quot;0.0986&quot; k3=&quot;-0.0354&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.2516&quot; k2=&quot;0.0986&quot; k3=&quot;-0.0354&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.2881&quot; k2=&quot;0.1190&quot; k3=&quot;-0.0304&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2881&quot; k2=&quot;0.1190&quot; k3=&quot;-0.0304&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;5.3&quot; distance=&quot;10&quot; k1=&quot;-0.1805&quot; k2=&quot;-0.0073&quot; k3=&quot;-0.0255&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;5.3&quot; distance=&quot;1000&quot; k1=&quot;-0.1805&quot; k2=&quot;-0.0073&quot; k3=&quot;-0.0255&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.1652&quot; k2=&quot;-0.0049&quot; k3=&quot;-0.0368&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1652&quot; k2=&quot;-0.0049&quot; k3=&quot;-0.0368&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.2012&quot; k2=&quot;0.0253&quot; k3=&quot;0.0170&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2012&quot; k2=&quot;0.0253&quot; k3=&quot;0.0170&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.1830&quot; k2=&quot;0.0134&quot; k3=&quot;0.0173&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.1830&quot; k2=&quot;0.0134&quot; k3=&quot;0.0173&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.1745&quot; k2=&quot;0.0148&quot; k3=&quot;0.0132&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1745&quot; k2=&quot;0.0148&quot; k3=&quot;0.0132&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.1907&quot; k2=&quot;0.0381&quot; k3=&quot;-0.0017&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;25&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1907&quot; k2=&quot;0.0381&quot; k3=&quot;-0.0017&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.5&quot; distance=&quot;10&quot; k1=&quot;-0.2088&quot; k2=&quot;-0.0157&quot; k3=&quot;0.0163&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.5&quot; distance=&quot;1000&quot; k1=&quot;-0.2088&quot; k2=&quot;-0.0157&quot; k3=&quot;0.0163&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.2191&quot; k2=&quot;0.0021&quot; k3=&quot;0.0065&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2191&quot; k2=&quot;0.0021&quot; k3=&quot;0.0065&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.1610&quot; k2=&quot;0.0325&quot; k3=&quot;-0.0149&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.1610&quot; k2=&quot;0.0325&quot; k3=&quot;-0.0149&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.1274&quot; k2=&quot;-0.0357&quot; k3=&quot;0.0273&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.1274&quot; k2=&quot;-0.0357&quot; k3=&quot;0.0273&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.1525&quot; k2=&quot;0.0034&quot; k3=&quot;0.0065&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1525&quot; k2=&quot;0.0034&quot; k3=&quot;0.0065&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.1682&quot; k2=&quot;0.0437&quot; k3=&quot;-0.0230&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1682&quot; k2=&quot;0.0437&quot; k3=&quot;-0.0230&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.5059&quot; k2=&quot;0.6085&quot; k3=&quot;-0.3705&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.5059&quot; k2=&quot;0.6085&quot; k3=&quot;-0.3705&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.2117&quot; k2=&quot;0.2821&quot; k3=&quot;-0.2506&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2117&quot; k2=&quot;0.2821&quot; k3=&quot;-0.2506&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.1682&quot; k2=&quot;0.1370&quot; k3=&quot;-0.1155&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.1682&quot; k2=&quot;0.1370&quot; k3=&quot;-0.1155&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.1471&quot; k2=&quot;0.0159&quot; k3=&quot;-0.0079&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1471&quot; k2=&quot;0.0159&quot; k3=&quot;-0.0079&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.1486&quot; k2=&quot;0.0136&quot; k3=&quot;-0.0007&quot; /&gt;
                        &lt;vignetting model=&quot;pa&quot; focal=&quot;42&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1486&quot; k2=&quot;0.0136&quot; k3=&quot;-0.0007&quot; /&gt;</code>
        <close_date>1389688277</close_date>
        <history id='14587'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1389688277</date>
        </history>
        <history id='14588'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1389688277</date>
        </history>
        <history id='14589'>
            <field_name>details</field_name>
            <old_value>Thank you, I included the data.</old_value>
            <mod_by>2378</mod_by>
            <date>1389688277</date>
        </history>
        <history id='14590'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1389688277</date>
        </history>
    </patch>
    <patch id='3515'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='64738' name='cchiappa'/>
        <assigned_to id='100' name='none'/>
        <open_date>1383798612</open_date>
        <summary>LUMIX G VARIO 14-42/F3.5-5.6 II</summary>
        <code>Not sure about the field_of_view bits, this is all hugin output:

	&lt;lens&gt;
		&lt;maker&gt;Panasonic&lt;/maker&gt;
		&lt;model&gt;LUMIX G VARIO 14-42/F3.5-5.6 II&lt;/model&gt;
		&lt;focal min=&quot;14&quot; max=&quot;42&quot; /&gt;
		&lt;aperture min=&quot;3.5&quot; max=&quot;5.6&quot; /&gt;
		&lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
		&lt;cropfactor&gt;2&lt;/cropfactor&gt;
		&lt;calibration&gt;
			&lt;distortion focal=&quot;14&quot; model=&quot;ptlens&quot; a=&quot;0.0225278&quot; b=&quot;-0.0802366&quot; c=&quot;0.00964907&quot; /&gt;
			&lt;distortion focal=&quot;18&quot; model=&quot;ptlens&quot; a=&quot;0.0429574&quot; b=&quot;-0.140955&quot; c=&quot;0.102005&quot; /&gt;
			&lt;distortion focal=&quot;25&quot; model=&quot;ptlens&quot; a=&quot;0.0136782&quot; b=&quot;-0.0405175&quot; c=&quot;0.0293264&quot; /&gt;
			&lt;distortion focal=&quot;35&quot; model=&quot;ptlens&quot; a=&quot;0.00177402&quot; b=&quot;0.00379145&quot; c=&quot;-0.000383617&quot; /&gt;
			&lt;distortion focal=&quot;42&quot; model=&quot;ptlens&quot; a=&quot;-0.00198101&quot; b=&quot;0.0153511&quot; c=&quot;-0.00974301&quot; /&gt;
			&lt;field_of_view focal=&quot;14&quot; fov=&quot;63.3973&quot; /&gt;
			&lt;field_of_view focal=&quot;18&quot; fov=&quot;50&quot; /&gt;
			&lt;field_of_view focal=&quot;25&quot; fov=&quot;38.1553&quot; /&gt;
			&lt;field_of_view focal=&quot;35&quot; fov=&quot;50&quot; /&gt;
			&lt;field_of_view focal=&quot;42&quot; fov=&quot;50&quot; /&gt;
		&lt;/calibration&gt;
	&lt;/lens&gt;
</code>
        <close_date>1384371191</close_date>
        <history id='14398'>
            <field_name>details</field_name>
            <old_value>Thank you for your upload.  Is &quot;LUMIX G VARIO 14-42/F3.5-5.6 II&quot; what &quot;exiv2 -pt&quot; yields?  Can you find your lens here and send a link to it: http://www.photozone.de/m43</old_value>
            <mod_by>2378</mod_by>
            <date>1384348935</date>
        </history>
        <history id='14408'>
            <field_name>details</field_name>
            <old_value>Yes, that's the name as reported by exiv2:
Exif.Panasonic.LensType                      Ascii      34  LUMIX G VARIO 14-42/F3.5-5.6 II 

Here's the photozone review:
http://www.photozone.de/m43/844-panasonic1442f3556ii</old_value>
            <mod_by>64738</mod_by>
            <date>1384351333</date>
        </history>
        <history id='14410'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1384371191</date>
        </history>
        <history id='14411'>
            <field_name>details</field_name>
            <old_value>I added it to the database, thank you.</old_value>
            <mod_by>2378</mod_by>
            <date>1384371191</date>
        </history>
        <history id='14412'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1384371191</date>
        </history>
    </patch>
    <patch id='3521'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1384383492</open_date>
        <summary>Fixes and enhancements for directory discovery</summary>
        <code>=== modified file 'libs/lensfun/database.cpp'
*** libs/lensfun/database.cpp	2012-05-22 09:55:37 +0000
--- libs/lensfun/database.cpp	2013-11-13 22:56:12 +0000
***************
*** 35,49 ****
      int ndirs = 0;
  
      dirs [ndirs++] = HomeDataDir;
  #ifdef CONF_DATADIR
!     dirs [ndirs++] = (char *)CONF_DATADIR;
  #else
      extern gchar *_lf_get_database_dir ();
      dirs [ndirs++] = _lf_get_database_dir ();
  #endif
-     int static_ndirs = ndirs;
      for (tmp = g_get_system_data_dirs (); ndirs &lt; 10 &amp;&amp; *tmp; tmp++)
!         dirs [ndirs++] = g_build_filename (*tmp, CONF_PACKAGE, NULL);
  
      while (ndirs &gt; 0)
      {
--- 35,79 ----
      int ndirs = 0;
  
      dirs [ndirs++] = HomeDataDir;
+     int static_ndirs = ndirs;
  #ifdef CONF_DATADIR
!     gchar *var_dirname = g_build_filename (&quot;/var/lib&quot;, CONF_PACKAGE, NULL);
!     GDir *var_dir = g_dir_open (var_dirname, 0, NULL);
!     if (var_dir &amp;&amp; g_dir_read_name (var_dir))
!         dirs [ndirs++] = var_dirname;
!     else
!     {
!         g_free (var_dirname);
!         dirs [ndirs++] = (char *)CONF_DATADIR;
!         static_ndirs = ndirs;
!     }
!     if (var_dir)
!         g_dir_close (var_dir);
  #else
      extern gchar *_lf_get_database_dir ();
      dirs [ndirs++] = _lf_get_database_dir ();
  #endif
      for (tmp = g_get_system_data_dirs (); ndirs &lt; 10 &amp;&amp; *tmp; tmp++)
!     {
!         char *current_dir = g_build_filename (*tmp, CONF_PACKAGE, NULL);
!         if (strcmp(current_dir, CONF_DATADIR))
!             for (int i = 0; i &lt; ndirs; i++)
!             {
!                 if (!strcmp(dirs [i], current_dir))
!                 {
!                     g_free (current_dir);
!                     current_dir = NULL;
!                     break;
!                 }
!             }
!         else
!         {
!             g_free (current_dir);
!             current_dir = NULL;
!         }
!         if (current_dir)
!             dirs [ndirs++] = current_dir;
!     }
  
      while (ndirs &gt; 0)
      {
***************
*** 72,78 ****
              g_dir_close (dir);
          }
  
!         /* Free all paths except the first one which is held in db struct */
          if (ndirs &gt;= static_ndirs)
              g_free (dirs [ndirs]);
      }
--- 102,108 ----
              g_dir_close (dir);
          }
  
!         /* Free all paths that we allocated */
          if (ndirs &gt;= static_ndirs)
              g_free (dirs [ndirs]);
      }

</code>
        <close_date>1384805573</close_date>
        <history id='14442'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1384703171</date>
        </history>
        <history id='14414'>
            <field_name>details</field_name>
            <old_value>This patch does three things:

1. It removes a mild memory leak caused on Windows:  The string returned by _lf_get_database_dir () is never freed because &quot;static_ndirs = ndirs&quot; is called after that.  Now, it is called before.

2. Double paths are avoided.  Well, I hope that all paths are normalised.  Otherwise (e.g. there is &quot;/a/b/&quot; and &quot;/a/b&quot; in the list) this doesn't work.  Anyway, on my installation, it even read the database twice! Due to uniqueness of the entries I never noticed.  And this is true for most Ubuntu installation I suspect.

3. If there is a /var/lib/lensfun with at least one file in it, it is used instead of CONF_DATADIR.  Other paths (those returned by g_get_system_data_dirs and that are not CONF_DATADIR) are still included.  This is for backwards compatibility, though I doubt that anybody has made use of it so far.  This /var/lib/lensfun thing paves way for a database update script.</old_value>
            <mod_by>2378</mod_by>
            <date>1384384041</date>
        </history>
        <history id='14441'>
            <field_name>details</field_name>
            <old_value>1. ok

2. also fine

3. the homedir location is still read, also if there is /var/lib/lensfun*.xml. Does the homedir xml always overwrite a lens from system directories? In my opinion it is a good idea to have only one system wide database and one in the home directory, whereas the latter always overwrites system wide entries. </old_value>
            <mod_by>36447</mod_by>
            <date>1384703145</date>
        </history>
        <history id='14443'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1384703171</date>
        </history>
        <history id='14444'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1384703171</date>
        </history>
        <history id='14449'>
            <field_name>details</field_name>
            <old_value>I don't change the old behaviour, I only replace /usr/share/lensfun with /var/lib/lensfun.  Was this your question?

Or do you want to discuss LensFun's current behaviour?  Well, I personally find it odd that g_get_system_data_dirs() is called because it returns a lot of garbage.  Many many directories you've never heard of.  They cannot even be used for local but system-wide databases because they are overridden by /usr/share/lensfun.  But it doesn't hurt really, so I don't want to touch that.

As far as overriding is concerned: Yes, homedir still overrides /usr/share/lensfun, as long as all metadata is the same.  So effectively, you cannot override *lenses* locally, but only *calibration data*.  See _lf_lens_compare in lens.cpp for all data that must match so that LensFun lets one &lt;lens&gt; entry override another one.

Maybe we should reduce that to &lt;maker&gt;, &lt;model&gt;, and &lt;cropfactor&gt;?  So that, if you define a lens that shares these three values with another lens, it substitutes it.  But this would be another change and therefore, another patch.
</old_value>
            <mod_by>2378</mod_by>
            <date>1384722067</date>
        </history>
        <history id='14450'>
            <field_name>close_date</field_name>
            <old_value>1384703171</old_value>
            <mod_by>2378</mod_by>
            <date>1384722067</date>
        </history>
        <history id='14456'>
            <field_name>details</field_name>
            <old_value>Your right, I wonder why lensfun reads so many directories and if there is any reason to keep this behaviour. I don't think so. There is only one system wide database and that location is depending on the configuration during build. So I can't imagine any scenario where it is necessary to support more than one system wide directory.

Regarding the overriding of lenses...
OK, so homedir still overrides system data. What about an new function _lf_lens_compare_basic() which only compares maker and name? This function is then used while looking for duplicate entries during database loading. </old_value>
            <mod_by>36447</mod_by>
            <date>1384801591</date>
        </history>
        <history id='14457'>
            <field_name>close_date</field_name>
            <old_value>1384722067</old_value>
            <mod_by>36447</mod_by>
            <date>1384801591</date>
        </history>
        <history id='14458'>
            <field_name>details</field_name>
            <old_value>It should at least include &lt;cropfactor&gt;, too.  Otherwise, you cannot add a measurement at another cropfactor.

However, I'm not really sure whether this is helpful.  You could correct min/max focal length/aperture, but that's boring.  You could correct mount, but then, you can also simply add the &lt;lens&gt; entry for the mount you miss instead of overriding.

The most interesting thing is to correct/extend calibration data.  And this is possibly already now.

Regarding the &quot;many directories&quot;: I will invastigate further ... maybe a good reason to try to poke Andrew again?  Should be easy to answer for him.</old_value>
            <mod_by>2378</mod_by>
            <date>1384805573</date>
        </history>
        <history id='14459'>
            <field_name>close_date</field_name>
            <old_value>1384801591</old_value>
            <mod_by>2378</mod_by>
            <date>1384805573</date>
        </history>
    </patch>
    <patch id='3531'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1385971124</open_date>
        <summary>Fix coordinate scaling for extremely small images</summary>
        <code>=== modified file 'libs/lensfun/modifier.cpp'
*** libs/lensfun/modifier.cpp	2013-12-02 13:44:09 +0000
--- libs/lensfun/modifier.cpp	2013-12-03 07:02:24 +0000
***************
*** 86,117 ****
      Height = (height &gt;= 2 ? height : 2);
  
      // Image &quot;size&quot;
!     float size = float ((width &lt; height) ? width : height);
  
      // Take crop factor into account
      if (lens &amp;&amp; lens-&gt;CropFactor)
!         size *= crop / lens-&gt;CropFactor;
! 
      // Take aspect ratio into account
      // FixMe: Checking for &quot;Standard&quot; here is provisional as long as we haven't
      // set the aspect ratio for all &quot;Standard&quot; lenses properly in the database.
      if (lens &amp;&amp; strcmp(lens-&gt;Model, &quot;Standard&quot;) &amp;&amp; lens-&gt;AspectRatio)
      {
!         float image_aspect_ratio = (width &lt; height) ?
!             float (height) / float (width) : float (width) / float (height);
!         size *= sqrt ((image_aspect_ratio * image_aspect_ratio + 1) /
!                       (lens-&gt;AspectRatio * lens-&gt;AspectRatio + 1));
      }
  
      // The scale to transform {-size/2 .. 0 .. size/2-1} to {-1 .. 0 .. +1}
!     NormScale = 2.0 / (size - 1);
  
      // The scale to transform {-1 .. 0 .. +1} to {-size/2 .. 0 .. size/2-1}
!     NormUnScale = (size - 1) * 0.5;
  
      // Geometric lens center in normalized coordinates
!     CenterX = width / size + (lens ? lens-&gt;CenterX : 0.0);
!     CenterY = height / size + (lens ? lens-&gt;CenterY : 0.0);
  }
  
  static void free_callback_list (GPtrArray *arr)
--- 86,118 ----
      Height = (height &gt;= 2 ? height : 2);
  
      // Image &quot;size&quot;
!     float size = float ((Width &lt; Height) ? Width : Height);
  
+     float coordinate_correction = 1;
      // Take crop factor into account
      if (lens &amp;&amp; lens-&gt;CropFactor)
!         coordinate_correction *= crop / lens-&gt;CropFactor;
      // Take aspect ratio into account
      // FixMe: Checking for &quot;Standard&quot; here is provisional as long as we haven't
      // set the aspect ratio for all &quot;Standard&quot; lenses properly in the database.
      if (lens &amp;&amp; strcmp(lens-&gt;Model, &quot;Standard&quot;) &amp;&amp; lens-&gt;AspectRatio)
      {
!         float image_aspect_ratio = (Width &lt; Height) ?
!             float (Height) / float (Width) : float (Width) / float (Height);
!         coordinate_correction *=
!             sqrt ((image_aspect_ratio * image_aspect_ratio + 1) /
!                   (lens-&gt;AspectRatio * lens-&gt;AspectRatio + 1));
      }
  
      // The scale to transform {-size/2 .. 0 .. size/2-1} to {-1 .. 0 .. +1}
!     NormScale = 2.0 / (size - 1) / coordinate_correction;
  
      // The scale to transform {-1 .. 0 .. +1} to {-size/2 .. 0 .. size/2-1}
!     NormUnScale = (size - 1) * 0.5 * coordinate_correction;
  
      // Geometric lens center in normalized coordinates
!     CenterX = Width / size / coordinate_correction + (lens ? lens-&gt;CenterX : 0.0);
!     CenterY = Height / size / coordinate_correction + (lens ? lens-&gt;CenterY : 0.0);
  }
  
  static void free_callback_list (GPtrArray *arr)

</code>
        <close_date>1386098440</close_date>
        <history id='14492'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1386054282</date>
        </history>
        <history id='14494'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1386098440</date>
        </history>
        <history id='14495'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1386098440</date>
        </history>
        <history id='14496'>
            <field_name>details</field_name>
            <old_value>Thanks, patch is  applied.</old_value>
            <mod_by>36447</mod_by>
            <date>1386098440</date>
        </history>
        <history id='14497'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1386098440</date>
        </history>
    </patch>
    <patch id='3518'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1384036845</open_date>
        <summary>Add versioning of database</summary>
        <code>=== modified file 'libs/lensfun/database.cpp'
*** libs/lensfun/database.cpp	2013-12-02 13:39:31 +0000
--- libs/lensfun/database.cpp	2013-12-06 13:06:19 +0000
***************
*** 148,153 ****
--- 148,165 ----
      size_t stack_depth;
  } lfParserData;
  
+ static bool __chk_no_attrs(const gchar *element_name, const gchar **attribute_names,
+                            GError **error)
+ {
+     if (attribute_names [0])
+     {
+         g_set_error (error, G_MARKUP_ERROR, G_MARKUP_ERROR_UNKNOWN_ATTRIBUTE,
+                      &quot;The &lt;%s&gt; element cannot have any attributes!\n&quot;, element_name);
+         return false;
+     }
+     return true;
+ }
+ 
  static void _xml_start_element (GMarkupParseContext *context,
                                  const gchar         *element_name,
                                  const gchar        **attribute_names,
***************
*** 180,191 ****
              return;
          }
  
!     chk_no_attrs:
!         if (attribute_names [0])
          {
!             g_set_error (error, G_MARKUP_ERROR, G_MARKUP_ERROR_UNKNOWN_ATTRIBUTE,
!                          &quot;The &lt;%s&gt; element cannot have any attributes!\n&quot;,
!                          element_name);
              return;
          }
      }
--- 192,209 ----
              return;
          }
  
!         int version = 1;
!         const int max_supported_version = 1;
!         for (i = 0; attribute_names [i]; i++)
!             if (!strcmp (attribute_names [i], &quot;version&quot;))
!                 version = atoi (attribute_values [i]);
!             else
!                 goto bad_attr;
!         if (version &gt; max_supported_version)
          {
!             g_set_error (error, G_MARKUP_ERROR, G_MARKUP_ERROR_INVALID_CONTENT,
!                          &quot;Database version is %d, but supported is only %d!\n&quot;,
!                          version, max_supported_version);
              return;
          }
      }
***************
*** 194,205 ****
          if (ctx &amp;&amp; !strcmp (ctx, &quot;lensdatabase&quot;))
          {
              pd-&gt;mount = new lfMount ();
!             goto chk_no_attrs;
          }
          else if (ctx &amp;&amp;
                   (!strcmp (ctx, &quot;camera&quot;) ||
                    !strcmp (ctx, &quot;lens&quot;)))
!             goto chk_no_attrs;
          else
              goto bad_ctx;
      }
--- 212,225 ----
          if (ctx &amp;&amp; !strcmp (ctx, &quot;lensdatabase&quot;))
          {
              pd-&gt;mount = new lfMount ();
!             if (!__chk_no_attrs(element_name, attribute_names, error)) return;
          }
          else if (ctx &amp;&amp;
                   (!strcmp (ctx, &quot;camera&quot;) ||
                    !strcmp (ctx, &quot;lens&quot;)))
!         {
!             if (!__chk_no_attrs(element_name, attribute_names, error)) return;
!         }
          else
              goto bad_ctx;
      }
***************
*** 208,214 ****
          if (!ctx || strcmp (ctx, &quot;lensdatabase&quot;))
              goto bad_ctx;
          pd-&gt;camera = new lfCamera ();
!         goto chk_no_attrs;
      }
      else if (!strcmp (element_name, &quot;lens&quot;))
      {
--- 228,234 ----
          if (!ctx || strcmp (ctx, &quot;lensdatabase&quot;))
              goto bad_ctx;
          pd-&gt;camera = new lfCamera ();
!         if (!__chk_no_attrs(element_name, attribute_names, error)) return;
      }
      else if (!strcmp (element_name, &quot;lens&quot;))
      {
***************
*** 217,223 ****
          pd-&gt;lens = new lfLens ();
          pd-&gt;lens-&gt;Type = LF_RECTILINEAR;
          pd-&gt;lens-&gt;AspectRatio = 1.5;
!         goto chk_no_attrs;
      }
      else if (!strcmp (element_name, &quot;focal&quot;))
      {
--- 237,243 ----
          pd-&gt;lens = new lfLens ();
          pd-&gt;lens-&gt;Type = LF_RECTILINEAR;
          pd-&gt;lens-&gt;AspectRatio = 1.5;
!         if (!__chk_no_attrs(element_name, attribute_names, error)) return;
      }
      else if (!strcmp (element_name, &quot;focal&quot;))
      {
***************
*** 281,293 ****
      {
          if (!ctx || strcmp (ctx, &quot;lens&quot;) || !pd-&gt;lens)
              goto bad_ctx;
!         goto chk_no_attrs;
      }
      else if (!strcmp (element_name, &quot;calibration&quot;))
      {
          if (!ctx || strcmp (ctx, &quot;lens&quot;))
              goto bad_ctx;
!         goto chk_no_attrs;
      }
      else if (!strcmp (element_name, &quot;distortion&quot;))
      {
--- 301,313 ----
      {
          if (!ctx || strcmp (ctx, &quot;lens&quot;) || !pd-&gt;lens)
              goto bad_ctx;
!         if (!__chk_no_attrs(element_name, attribute_names, error)) return;
      }
      else if (!strcmp (element_name, &quot;calibration&quot;))
      {
          if (!ctx || strcmp (ctx, &quot;lens&quot;))
              goto bad_ctx;
!         if (!__chk_no_attrs(element_name, attribute_names, error)) return;
      }
      else if (!strcmp (element_name, &quot;distortion&quot;))
      {
***************
*** 487,493 ****
      else if (!strcmp (element_name, &quot;compat&quot;) ||
               !strcmp (element_name, &quot;cropfactor&quot;) ||
               !strcmp (element_name, &quot;aspect-ratio&quot;))
!         goto chk_no_attrs;
      else
          g_set_error (error, G_MARKUP_ERROR, G_MARKUP_ERROR_INVALID_CONTENT,
                       &quot;Unknown element &lt;%s&gt;!\n&quot;, element_name);
--- 507,515 ----
      else if (!strcmp (element_name, &quot;compat&quot;) ||
               !strcmp (element_name, &quot;cropfactor&quot;) ||
               !strcmp (element_name, &quot;aspect-ratio&quot;))
!     {
!         if (!__chk_no_attrs(element_name, attribute_names, error)) return;
!     }
      else
          g_set_error (error, G_MARKUP_ERROR, G_MARKUP_ERROR_INVALID_CONTENT,
                       &quot;Unknown element &lt;%s&gt;!\n&quot;, element_name);

</code>
        <close_date>1388603696</close_date>
        <history id='14376'>
            <field_name>details</field_name>
            <old_value>Where is the version set? The databse consists of many files. What happens if one file is version1 and another one is version 2?</old_value>
            <mod_by>36447</mod_by>
            <date>1384105215</date>
        </history>
        <history id='14383'>
            <field_name>details</field_name>
            <old_value>The version is set at the &lt;lensdatabase version=&quot;2&quot;&gt; tag.  It may be different for different XML files on the database, though this is untypical.  One particular LensFun release will have the same version number in all XML files, so different version can only happen in patched/extended local installations.  The XML file is rejected entirely if LensFun is too old for this file format.

For example, when we implement the proper crop factors for APS-C sensors, we should do so in a year or so, when most LensFun installations check for &quot;version&quot;.  Then, we bump it up to 2 at the same time.

Furthermore, a download script as suggested in http://developer.berlios.de/feature/?func=detailfeature&amp;feature_id=5629&amp;group_id=9034 may use this attribute to find files which really work with the current LensFun installation.</old_value>
            <mod_by>2378</mod_by>
            <date>1384163762</date>
        </history>
        <history id='14503'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1386335369</date>
        </history>
        <history id='14548'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388603696</date>
        </history>
        <history id='14549'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388603696</date>
        </history>
        <history id='14550'>
            <field_name>details</field_name>
            <old_value>Ok, let's do this :)</old_value>
            <mod_by>36447</mod_by>
            <date>1388603696</date>
        </history>
        <history id='14551'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1388603696</date>
        </history>
    </patch>
    <patch id='3538'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='65071' name='lebedevri'/>
        <assigned_to id='100' name='none'/>
        <open_date>1387700267</open_date>
        <summary>Vignetting data for 4 lenses</summary>
        <code>&lt;lensdatabase&gt;

    &lt;lens&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Canon EF-S 18-55mm f/3.5-5.6 IS&lt;/model&gt;
        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;3.5&quot; distance=&quot;10&quot; k1=&quot;-1.0505&quot; k2=&quot;0.9425&quot; k3=&quot;-0.4433&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;3.5&quot; distance=&quot;1000&quot; k1=&quot;-1.0505&quot; k2=&quot;0.9425&quot; k3=&quot;-0.4433&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4&quot; distance=&quot;10&quot; k1=&quot;-0.3271&quot; k2=&quot;-0.3518&quot; k3=&quot;0.2513&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.3271&quot; k2=&quot;-0.3518&quot; k3=&quot;0.2513&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.3159&quot; k2=&quot;0.0175&quot; k3=&quot;0.0074&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.3159&quot; k2=&quot;0.0175&quot; k3=&quot;0.0074&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.2855&quot; k2=&quot;-0.0799&quot; k3=&quot;0.0948&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2855&quot; k2=&quot;-0.0799&quot; k3=&quot;0.0948&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.2723&quot; k2=&quot;-0.1029&quot; k3=&quot;0.1071&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2723&quot; k2=&quot;-0.1029&quot; k3=&quot;0.1071&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.2918&quot; k2=&quot;-0.0721&quot; k3=&quot;0.0931&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.2918&quot; k2=&quot;-0.0721&quot; k3=&quot;0.0931&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.2909&quot; k2=&quot;-0.0728&quot; k3=&quot;0.0940&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;18&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2909&quot; k2=&quot;-0.0728&quot; k3=&quot;0.0940&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot; distance=&quot;10&quot; k1=&quot;-0.9648&quot; k2=&quot;0.8380&quot; k3=&quot;-0.3522&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.9648&quot; k2=&quot;0.8380&quot; k3=&quot;-0.3522&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.2372&quot; k2=&quot;-0.0310&quot; k3=&quot;0.0141&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.2372&quot; k2=&quot;-0.0310&quot; k3=&quot;0.0141&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.2212&quot; k2=&quot;-0.0943&quot; k3=&quot;0.0906&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.2212&quot; k2=&quot;-0.0943&quot; k3=&quot;0.0906&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.2174&quot; k2=&quot;-0.1025&quot; k3=&quot;0.0963&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.2174&quot; k2=&quot;-0.1025&quot; k3=&quot;0.0963&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.2134&quot; k2=&quot;-0.1124&quot; k3=&quot;0.1036&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.2134&quot; k2=&quot;-0.1124&quot; k3=&quot;0.1036&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.2090&quot; k2=&quot;-0.1197&quot; k3=&quot;0.1072&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.2090&quot; k2=&quot;-0.1197&quot; k3=&quot;0.1072&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;25&quot; distance=&quot;10&quot; k1=&quot;-0.2066&quot; k2=&quot;-0.1294&quot; k3=&quot;0.1140&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;25&quot; distance=&quot;1000&quot; k1=&quot;-0.2066&quot; k2=&quot;-0.1294&quot; k3=&quot;0.1140&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;4.5&quot; distance=&quot;10&quot; k1=&quot;-0.8151&quot; k2=&quot;0.6782&quot; k3=&quot;-0.2757&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;4.5&quot; distance=&quot;1000&quot; k1=&quot;-0.8151&quot; k2=&quot;0.6782&quot; k3=&quot;-0.2757&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.1285&quot; k2=&quot;-0.1113&quot; k3=&quot;0.0388&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1285&quot; k2=&quot;-0.1113&quot; k3=&quot;0.0388&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.1474&quot; k2=&quot;-0.0722&quot; k3=&quot;0.0602&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.1474&quot; k2=&quot;-0.0722&quot; k3=&quot;0.0602&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.1412&quot; k2=&quot;-0.0856&quot; k3=&quot;0.0680&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.1412&quot; k2=&quot;-0.0856&quot; k3=&quot;0.0680&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.1365&quot; k2=&quot;-0.0935&quot; k3=&quot;0.0715&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.1365&quot; k2=&quot;-0.0935&quot; k3=&quot;0.0715&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.1504&quot; k2=&quot;-0.0671&quot; k3=&quot;0.0578&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.1504&quot; k2=&quot;-0.0671&quot; k3=&quot;0.0578&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;29&quot; distance=&quot;10&quot; k1=&quot;-0.1610&quot; k2=&quot;-0.0620&quot; k3=&quot;0.0626&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;29&quot; distance=&quot;1000&quot; k1=&quot;-0.1610&quot; k2=&quot;-0.0620&quot; k3=&quot;0.0626&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.6219&quot; k2=&quot;0.5060&quot; k3=&quot;-0.2165&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.6219&quot; k2=&quot;0.5060&quot; k3=&quot;-0.2165&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.0769&quot; k2=&quot;-0.0718&quot; k3=&quot;0.0485&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.0769&quot; k2=&quot;-0.0718&quot; k3=&quot;0.0485&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.0775&quot; k2=&quot;-0.0813&quot; k3=&quot;0.0605&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.0775&quot; k2=&quot;-0.0813&quot; k3=&quot;0.0605&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.0815&quot; k2=&quot;-0.0779&quot; k3=&quot;0.0594&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.0815&quot; k2=&quot;-0.0779&quot; k3=&quot;0.0594&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.0913&quot; k2=&quot;-0.0626&quot; k3=&quot;0.0522&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.0913&quot; k2=&quot;-0.0626&quot; k3=&quot;0.0522&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;32&quot; distance=&quot;10&quot; k1=&quot;-0.1028&quot; k2=&quot;-0.0492&quot; k3=&quot;0.0465&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.1028&quot; k2=&quot;-0.0492&quot; k3=&quot;0.0465&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;36&quot; distance=&quot;10&quot; k1=&quot;-0.0968&quot; k2=&quot;-0.0651&quot; k3=&quot;0.0572&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;36&quot; distance=&quot;1000&quot; k1=&quot;-0.0968&quot; k2=&quot;-0.0651&quot; k3=&quot;0.0572&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;

    &lt;lens&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Canon EF-S 55-250mm f/4-5.6 IS&lt;/model&gt;
        &lt;mount&gt;Canon EF-S&lt;/mount&gt;
        &lt;cropfactor&gt;1.6&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;4&quot; distance=&quot;10&quot; k1=&quot;-0.6290&quot; k2=&quot;0.4091&quot; k3=&quot;-0.2801&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.6290&quot; k2=&quot;0.4091&quot; k3=&quot;-0.2801&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.0462&quot; k2=&quot;0.0472&quot; k3=&quot;-0.2275&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.0462&quot; k2=&quot;0.0472&quot; k3=&quot;-0.2275&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.0096&quot; k2=&quot;-0.1638&quot; k3=&quot;0.1113&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.0096&quot; k2=&quot;-0.1638&quot; k3=&quot;0.1113&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;0.0034&quot; k2=&quot;-0.1932&quot; k3=&quot;0.1293&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;0.0034&quot; k2=&quot;-0.1932&quot; k3=&quot;0.1293&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;0.0109&quot; k2=&quot;-0.2130&quot; k3=&quot;0.1418&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;0.0109&quot; k2=&quot;-0.2130&quot; k3=&quot;0.1418&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;0.0156&quot; k2=&quot;-0.2249&quot; k3=&quot;0.1494&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;55&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;0.0156&quot; k2=&quot;-0.2249&quot; k3=&quot;0.1494&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;10&quot; k1=&quot;-0.6730&quot; k2=&quot;0.6146&quot; k3=&quot;-0.3810&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.6730&quot; k2=&quot;0.6146&quot; k3=&quot;-0.3810&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.0447&quot; k2=&quot;0.0246&quot; k3=&quot;-0.1055&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.0447&quot; k2=&quot;0.0246&quot; k3=&quot;-0.1055&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.0120&quot; k2=&quot;-0.1427&quot; k3=&quot;0.1033&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.0120&quot; k2=&quot;-0.1427&quot; k3=&quot;0.1033&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;0.0056&quot; k2=&quot;-0.1861&quot; k3=&quot;0.1315&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;0.0056&quot; k2=&quot;-0.1861&quot; k3=&quot;0.1315&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;0.0131&quot; k2=&quot;-0.2045&quot; k3=&quot;0.1438&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;0.0131&quot; k2=&quot;-0.2045&quot; k3=&quot;0.1438&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;0.0279&quot; k2=&quot;-0.2334&quot; k3=&quot;0.1579&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;0.0279&quot; k2=&quot;-0.2334&quot; k3=&quot;0.1579&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5&quot; distance=&quot;10&quot; k1=&quot;-0.5671&quot; k2=&quot;0.5259&quot; k3=&quot;-0.3298&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5&quot; distance=&quot;1000&quot; k1=&quot;-0.5671&quot; k2=&quot;0.5259&quot; k3=&quot;-0.3298&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.1714&quot; k2=&quot;-0.0770&quot; k3=&quot;-0.0088&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1714&quot; k2=&quot;-0.0770&quot; k3=&quot;-0.0088&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.0284&quot; k2=&quot;-0.0551&quot; k3=&quot;0.0354&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.0284&quot; k2=&quot;-0.0551&quot; k3=&quot;0.0354&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.0119&quot; k2=&quot;-0.1113&quot; k3=&quot;0.0816&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.0119&quot; k2=&quot;-0.1113&quot; k3=&quot;0.0816&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.0009&quot; k2=&quot;-0.1424&quot; k3=&quot;0.1032&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.0009&quot; k2=&quot;-0.1424&quot; k3=&quot;0.1032&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;0.0148&quot; k2=&quot;-0.1704&quot; k3=&quot;0.1192&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;0.0148&quot; k2=&quot;-0.1704&quot; k3=&quot;0.1192&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;29&quot; distance=&quot;10&quot; k1=&quot;0.0196&quot; k2=&quot;-0.1853&quot; k3=&quot;0.1298&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;29&quot; distance=&quot;1000&quot; k1=&quot;0.0196&quot; k2=&quot;-0.1853&quot; k3=&quot;0.1298&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5&quot; distance=&quot;10&quot; k1=&quot;-0.3279&quot; k2=&quot;-0.1954&quot; k3=&quot;0.0941&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5&quot; distance=&quot;1000&quot; k1=&quot;-0.3279&quot; k2=&quot;-0.1954&quot; k3=&quot;0.0941&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.1084&quot; k2=&quot;-0.3475&quot; k3=&quot;0.1150&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1084&quot; k2=&quot;-0.3475&quot; k3=&quot;0.1150&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;-0.0477&quot; k2=&quot;0.0345&quot; k3=&quot;-0.0424&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.0477&quot; k2=&quot;0.0345&quot; k3=&quot;-0.0424&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.0121&quot; k2=&quot;-0.0845&quot; k3=&quot;0.0589&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.0121&quot; k2=&quot;-0.0845&quot; k3=&quot;0.0589&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;0.0076&quot; k2=&quot;-0.1332&quot; k3=&quot;0.0907&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;0.0076&quot; k2=&quot;-0.1332&quot; k3=&quot;0.0907&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;0.0241&quot; k2=&quot;-0.1711&quot; k3=&quot;0.1140&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;0.0241&quot; k2=&quot;-0.1711&quot; k3=&quot;0.1140&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;29&quot; distance=&quot;10&quot; k1=&quot;0.0310&quot; k2=&quot;-0.1849&quot; k3=&quot;0.1219&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;135&quot; aperture=&quot;29&quot; distance=&quot;1000&quot; k1=&quot;0.0310&quot; k2=&quot;-0.1849&quot; k3=&quot;0.1219&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-0.8137&quot; k2=&quot;0.3985&quot; k3=&quot;-0.0714&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.8137&quot; k2=&quot;0.3985&quot; k3=&quot;-0.0714&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;0.0019&quot; k2=&quot;-0.0252&quot; k3=&quot;-0.1253&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;0.0019&quot; k2=&quot;-0.0252&quot; k3=&quot;-0.1253&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.0151&quot; k2=&quot;-0.0661&quot; k3=&quot;0.0452&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.0151&quot; k2=&quot;-0.0661&quot; k3=&quot;0.0452&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.0191&quot; k2=&quot;-0.0666&quot; k3=&quot;0.0480&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.0191&quot; k2=&quot;-0.0666&quot; k3=&quot;0.0480&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.0161&quot; k2=&quot;-0.0789&quot; k3=&quot;0.0570&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.0161&quot; k2=&quot;-0.0789&quot; k3=&quot;0.0570&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;32&quot; distance=&quot;10&quot; k1=&quot;-0.0118&quot; k2=&quot;-0.0902&quot; k3=&quot;0.0630&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;200&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.0118&quot; k2=&quot;-0.0902&quot; k3=&quot;0.0630&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;5.6&quot; distance=&quot;10&quot; k1=&quot;-1.1623&quot; k2=&quot;1.2351&quot; k3=&quot;-0.5658&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-1.1623&quot; k2=&quot;1.2351&quot; k3=&quot;-0.5658&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;8&quot; distance=&quot;10&quot; k1=&quot;0.0520&quot; k2=&quot;-0.2446&quot; k3=&quot;0.0316&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;0.0520&quot; k2=&quot;-0.2446&quot; k3=&quot;0.0316&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;11&quot; distance=&quot;10&quot; k1=&quot;-0.0198&quot; k2=&quot;-0.0546&quot; k3=&quot;0.0369&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.0198&quot; k2=&quot;-0.0546&quot; k3=&quot;0.0369&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;16&quot; distance=&quot;10&quot; k1=&quot;-0.0268&quot; k2=&quot;-0.0486&quot; k3=&quot;0.0355&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.0268&quot; k2=&quot;-0.0486&quot; k3=&quot;0.0355&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;22&quot; distance=&quot;10&quot; k1=&quot;-0.0268&quot; k2=&quot;-0.0573&quot; k3=&quot;0.0423&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.0268&quot; k2=&quot;-0.0573&quot; k3=&quot;0.0423&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;32&quot; distance=&quot;10&quot; k1=&quot;-0.0125&quot; k2=&quot;-0.0836&quot; k3=&quot;0.0552&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;250&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.0125&quot; k2=&quot;-0.0836&quot; k3=&quot;0.0552&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;

    &lt;lens&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Canon EF 24-70mm f/2.8L II USM&lt;/model&gt;
        &lt;mount&gt;Canon EF&lt;/mount&gt;
        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;2.8&quot; distance=&quot;0.38&quot; k1=&quot;-0.5324&quot; k2=&quot;-0.9169&quot; k3=&quot;0.6118&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;2.8&quot; distance=&quot;0.76&quot; k1=&quot;-0.5380&quot; k2=&quot;-0.8584&quot; k3=&quot;0.5817&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;2.8&quot; distance=&quot;2.28&quot; k1=&quot;-0.5445&quot; k2=&quot;-0.8127&quot; k3=&quot;0.5488&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.5334&quot; k2=&quot;-0.7926&quot; k3=&quot;0.5243&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot; distance=&quot;0.38&quot; k1=&quot;-0.6598&quot; k2=&quot;0.4100&quot; k3=&quot;-0.4916&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot; distance=&quot;0.76&quot; k1=&quot;-0.6732&quot; k2=&quot;0.4436&quot; k3=&quot;-0.4767&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot; distance=&quot;2.28&quot; k1=&quot;-0.6785&quot; k2=&quot;0.4576&quot; k3=&quot;-0.4765&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.6889&quot; k2=&quot;0.5049&quot; k3=&quot;-0.5073&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;0.38&quot; k1=&quot;-0.7625&quot; k2=&quot;0.6284&quot; k3=&quot;-0.4894&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;0.76&quot; k1=&quot;-0.7068&quot; k2=&quot;0.4429&quot; k3=&quot;-0.3190&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;2.28&quot; k1=&quot;-0.6955&quot; k2=&quot;0.4015&quot; k3=&quot;-0.2828&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.7003&quot; k2=&quot;0.4412&quot; k3=&quot;-0.3183&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;8&quot; distance=&quot;0.38&quot; k1=&quot;-0.6918&quot; k2=&quot;0.3336&quot; k3=&quot;-0.2064&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;8&quot; distance=&quot;0.76&quot; k1=&quot;-0.6577&quot; k2=&quot;0.2275&quot; k3=&quot;-0.1131&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;8&quot; distance=&quot;2.28&quot; k1=&quot;-0.6665&quot; k2=&quot;0.2617&quot; k3=&quot;-0.1438&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.6826&quot; k2=&quot;0.3334&quot; k3=&quot;-0.2021&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;0.38&quot; k1=&quot;-0.6565&quot; k2=&quot;0.1720&quot; k3=&quot;-0.0526&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;0.76&quot; k1=&quot;-0.6611&quot; k2=&quot;0.2171&quot; k3=&quot;-0.0941&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;2.28&quot; k1=&quot;-0.6695&quot; k2=&quot;0.2517&quot; k3=&quot;-0.1252&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.6862&quot; k2=&quot;0.3218&quot; k3=&quot;-0.1805&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;16&quot; distance=&quot;0.38&quot; k1=&quot;-0.6570&quot; k2=&quot;0.1579&quot; k3=&quot;-0.0344&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;16&quot; distance=&quot;0.76&quot; k1=&quot;-0.6665&quot; k2=&quot;0.2198&quot; k3=&quot;-0.0898&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;16&quot; distance=&quot;2.28&quot; k1=&quot;-0.6734&quot; k2=&quot;0.2498&quot; k3=&quot;-0.1171&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.6920&quot; k2=&quot;0.3238&quot; k3=&quot;-0.1744&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;22&quot; distance=&quot;0.38&quot; k1=&quot;-0.6640&quot; k2=&quot;0.1655&quot; k3=&quot;-0.0356&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;22&quot; distance=&quot;0.76&quot; k1=&quot;-0.6717&quot; k2=&quot;0.2228&quot; k3=&quot;-0.0871&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;22&quot; distance=&quot;2.28&quot; k1=&quot;-0.6788&quot; k2=&quot;0.2532&quot; k3=&quot;-0.1145&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;24&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.6981&quot; k2=&quot;0.3271&quot; k3=&quot;-0.1710&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;2.8&quot; distance=&quot;0.38&quot; k1=&quot;-0.5314&quot; k2=&quot;-0.6102&quot; k3=&quot;0.4052&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;2.8&quot; distance=&quot;0.76&quot; k1=&quot;-0.5656&quot; k2=&quot;-0.4577&quot; k3=&quot;0.2963&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;2.8&quot; distance=&quot;2.28&quot; k1=&quot;-0.5847&quot; k2=&quot;-0.3989&quot; k3=&quot;0.2529&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.5796&quot; k2=&quot;-0.3367&quot; k3=&quot;0.1881&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;4&quot; distance=&quot;0.38&quot; k1=&quot;-0.6341&quot; k2=&quot;0.4189&quot; k3=&quot;-0.3761&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;4&quot; distance=&quot;0.76&quot; k1=&quot;-0.6373&quot; k2=&quot;0.4549&quot; k3=&quot;-0.3973&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;4&quot; distance=&quot;2.28&quot; k1=&quot;-0.6428&quot; k2=&quot;0.4833&quot; k3=&quot;-0.4249&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.6651&quot; k2=&quot;0.5708&quot; k3=&quot;-0.4970&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;5.6&quot; distance=&quot;0.38&quot; k1=&quot;-0.5964&quot; k2=&quot;0.2054&quot; k3=&quot;-0.1109&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;5.6&quot; distance=&quot;0.76&quot; k1=&quot;-0.5978&quot; k2=&quot;0.2487&quot; k3=&quot;-0.1525&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;5.6&quot; distance=&quot;2.28&quot; k1=&quot;-0.6065&quot; k2=&quot;0.2762&quot; k3=&quot;-0.1756&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.6168&quot; k2=&quot;0.3284&quot; k3=&quot;-0.2172&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;8&quot; distance=&quot;0.38&quot; k1=&quot;-0.5948&quot; k2=&quot;0.1812&quot; k3=&quot;-0.0814&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;8&quot; distance=&quot;0.76&quot; k1=&quot;-0.5948&quot; k2=&quot;0.2158&quot; k3=&quot;-0.1128&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;8&quot; distance=&quot;2.28&quot; k1=&quot;-0.5977&quot; k2=&quot;0.2299&quot; k3=&quot;-0.1259&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.6069&quot; k2=&quot;0.2753&quot; k3=&quot;-0.1594&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;11&quot; distance=&quot;0.38&quot; k1=&quot;-0.6015&quot; k2=&quot;0.1822&quot; k3=&quot;-0.0739&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;11&quot; distance=&quot;0.76&quot; k1=&quot;-0.5979&quot; k2=&quot;0.2073&quot; k3=&quot;-0.0974&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;11&quot; distance=&quot;2.28&quot; k1=&quot;-0.6015&quot; k2=&quot;0.2218&quot; k3=&quot;-0.1097&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.6116&quot; k2=&quot;0.2675&quot; k3=&quot;-0.1422&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;16&quot; distance=&quot;0.38&quot; k1=&quot;-0.6060&quot; k2=&quot;0.1834&quot; k3=&quot;-0.0692&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;16&quot; distance=&quot;0.76&quot; k1=&quot;-0.6041&quot; k2=&quot;0.2106&quot; k3=&quot;-0.0929&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;16&quot; distance=&quot;2.28&quot; k1=&quot;-0.6044&quot; k2=&quot;0.2171&quot; k3=&quot;-0.0995&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.6176&quot; k2=&quot;0.2691&quot; k3=&quot;-0.1354&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;22&quot; distance=&quot;0.38&quot; k1=&quot;-0.6089&quot; k2=&quot;0.1793&quot; k3=&quot;-0.0616&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;22&quot; distance=&quot;0.76&quot; k1=&quot;-0.6062&quot; k2=&quot;0.2036&quot; k3=&quot;-0.0829&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;22&quot; distance=&quot;2.28&quot; k1=&quot;-0.6079&quot; k2=&quot;0.2130&quot; k3=&quot;-0.0908&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;28&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.6214&quot; k2=&quot;0.2649&quot; k3=&quot;-0.1264&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;2.8&quot; distance=&quot;0.38&quot; k1=&quot;-0.6219&quot; k2=&quot;0.0305&quot; k3=&quot;-0.0893&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;2.8&quot; distance=&quot;0.76&quot; k1=&quot;-0.6559&quot; k2=&quot;0.1407&quot; k3=&quot;-0.1797&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;2.8&quot; distance=&quot;2.28&quot; k1=&quot;-0.6505&quot; k2=&quot;0.1384&quot; k3=&quot;-0.1870&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.6559&quot; k2=&quot;0.1689&quot; k3=&quot;-0.2166&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;4&quot; distance=&quot;0.38&quot; k1=&quot;-0.6016&quot; k2=&quot;0.5514&quot; k3=&quot;-0.4750&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;4&quot; distance=&quot;0.76&quot; k1=&quot;-0.6080&quot; k2=&quot;0.6087&quot; k3=&quot;-0.5348&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;4&quot; distance=&quot;2.28&quot; k1=&quot;-0.6108&quot; k2=&quot;0.6189&quot; k3=&quot;-0.5478&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.6307&quot; k2=&quot;0.6882&quot; k3=&quot;-0.6013&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;0.38&quot; k1=&quot;-0.5466&quot; k2=&quot;0.3128&quot; k3=&quot;-0.2374&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;0.76&quot; k1=&quot;-0.5423&quot; k2=&quot;0.3160&quot; k3=&quot;-0.2391&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;2.28&quot; k1=&quot;-0.5420&quot; k2=&quot;0.3131&quot; k3=&quot;-0.2357&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.5577&quot; k2=&quot;0.3719&quot; k3=&quot;-0.2787&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;0.38&quot; k1=&quot;-0.5414&quot; k2=&quot;0.2781&quot; k3=&quot;-0.1982&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;0.76&quot; k1=&quot;-0.5279&quot; k2=&quot;0.2506&quot; k3=&quot;-0.1725&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;2.28&quot; k1=&quot;-0.5276&quot; k2=&quot;0.2399&quot; k3=&quot;-0.1590&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.5323&quot; k2=&quot;0.2683&quot; k3=&quot;-0.1774&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;0.38&quot; k1=&quot;-0.5453&quot; k2=&quot;0.2737&quot; k3=&quot;-0.1863&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;0.76&quot; k1=&quot;-0.5313&quot; k2=&quot;0.2413&quot; k3=&quot;-0.1548&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;2.28&quot; k1=&quot;-0.5310&quot; k2=&quot;0.2303&quot; k3=&quot;-0.1408&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.5407&quot; k2=&quot;0.2680&quot; k3=&quot;-0.1643&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;0.38&quot; k1=&quot;-0.5498&quot; k2=&quot;0.2744&quot; k3=&quot;-0.1818&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;0.76&quot; k1=&quot;-0.5395&quot; k2=&quot;0.2492&quot; k3=&quot;-0.1535&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;2.28&quot; k1=&quot;-0.5361&quot; k2=&quot;0.2309&quot; k3=&quot;-0.1344&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.5469&quot; k2=&quot;0.2706&quot; k3=&quot;-0.1586&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;0.38&quot; k1=&quot;-0.5541&quot; k2=&quot;0.2792&quot; k3=&quot;-0.1832&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;0.76&quot; k1=&quot;-0.5433&quot; k2=&quot;0.2519&quot; k3=&quot;-0.1532&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;2.28&quot; k1=&quot;-0.5389&quot; k2=&quot;0.2307&quot; k3=&quot;-0.1312&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;35&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.5510&quot; k2=&quot;0.2723&quot; k3=&quot;-0.1562&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;2.8&quot; distance=&quot;0.38&quot; k1=&quot;-0.8412&quot; k2=&quot;0.8591&quot; k3=&quot;-0.7751&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;2.8&quot; distance=&quot;0.76&quot; k1=&quot;-0.7442&quot; k2=&quot;0.5381&quot; k3=&quot;-0.5339&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;2.8&quot; distance=&quot;2.28&quot; k1=&quot;-0.7013&quot; k2=&quot;0.3674&quot; k3=&quot;-0.4003&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.6708&quot; k2=&quot;0.2618&quot; k3=&quot;-0.3191&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;4&quot; distance=&quot;0.38&quot; k1=&quot;-0.6288&quot; k2=&quot;1.0150&quot; k3=&quot;-0.9942&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;4&quot; distance=&quot;0.76&quot; k1=&quot;-0.5665&quot; k2=&quot;0.8090&quot; k3=&quot;-0.8244&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;4&quot; distance=&quot;2.28&quot; k1=&quot;-0.5370&quot; k2=&quot;0.7039&quot; k3=&quot;-0.7391&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.5376&quot; k2=&quot;0.6855&quot; k3=&quot;-0.7145&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; distance=&quot;0.38&quot; k1=&quot;-0.6064&quot; k2=&quot;0.8725&quot; k3=&quot;-0.8081&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; distance=&quot;0.76&quot; k1=&quot;-0.5597&quot; k2=&quot;0.7110&quot; k3=&quot;-0.6529&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; distance=&quot;2.28&quot; k1=&quot;-0.5430&quot; k2=&quot;0.6455&quot; k3=&quot;-0.5898&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.5565&quot; k2=&quot;0.6666&quot; k3=&quot;-0.5880&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;8&quot; distance=&quot;0.38&quot; k1=&quot;-0.5483&quot; k2=&quot;0.6334&quot; k3=&quot;-0.5772&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;8&quot; distance=&quot;0.76&quot; k1=&quot;-0.4992&quot; k2=&quot;0.4522&quot; k3=&quot;-0.3960&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;8&quot; distance=&quot;2.28&quot; k1=&quot;-0.4805&quot; k2=&quot;0.3744&quot; k3=&quot;-0.3178&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.4891&quot; k2=&quot;0.3846&quot; k3=&quot;-0.3060&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;0.38&quot; k1=&quot;-0.5144&quot; k2=&quot;0.4766&quot; k3=&quot;-0.4242&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;0.76&quot; k1=&quot;-0.4688&quot; k2=&quot;0.3098&quot; k3=&quot;-0.2545&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;2.28&quot; k1=&quot;-0.4509&quot; k2=&quot;0.2381&quot; k3=&quot;-0.1817&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.4631&quot; k2=&quot;0.2604&quot; k3=&quot;-0.1804&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; distance=&quot;0.38&quot; k1=&quot;-0.5109&quot; k2=&quot;0.4418&quot; k3=&quot;-0.3831&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; distance=&quot;0.76&quot; k1=&quot;-0.4731&quot; k2=&quot;0.3028&quot; k3=&quot;-0.2373&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; distance=&quot;2.28&quot; k1=&quot;-0.4576&quot; k2=&quot;0.2410&quot; k3=&quot;-0.1735&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.4685&quot; k2=&quot;0.2607&quot; k3=&quot;-0.1704&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;22&quot; distance=&quot;0.38&quot; k1=&quot;-0.5117&quot; k2=&quot;0.4357&quot; k3=&quot;-0.3738&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;22&quot; distance=&quot;0.76&quot; k1=&quot;-0.4785&quot; k2=&quot;0.3085&quot; k3=&quot;-0.2364&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;22&quot; distance=&quot;2.28&quot; k1=&quot;-0.4622&quot; k2=&quot;0.2449&quot; k3=&quot;-0.1714&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;50&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.4742&quot; k2=&quot;0.2654&quot; k3=&quot;-0.1679&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;2.8&quot; distance=&quot;0.38&quot; k1=&quot;-0.7965&quot; k2=&quot;0.7982&quot; k3=&quot;-0.6515&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;2.8&quot; distance=&quot;0.76&quot; k1=&quot;-0.8490&quot; k2=&quot;0.7522&quot; k3=&quot;-0.5625&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;2.8&quot; distance=&quot;2.28&quot; k1=&quot;-0.9092&quot; k2=&quot;0.7947&quot; k3=&quot;-0.5491&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-0.9113&quot; k2=&quot;0.7501&quot; k3=&quot;-0.5041&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;0.38&quot; k1=&quot;-0.5124&quot; k2=&quot;0.7389&quot; k3=&quot;-0.7073&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;0.76&quot; k1=&quot;-0.4602&quot; k2=&quot;0.5934&quot; k3=&quot;-0.6096&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;2.28&quot; k1=&quot;-0.4122&quot; k2=&quot;0.4348&quot; k3=&quot;-0.5087&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;-0.3981&quot; k2=&quot;0.3671&quot; k3=&quot;-0.4525&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;0.38&quot; k1=&quot;-0.4313&quot; k2=&quot;0.3788&quot; k3=&quot;-0.3296&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;0.76&quot; k1=&quot;-0.4253&quot; k2=&quot;0.3796&quot; k3=&quot;-0.3240&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;2.28&quot; k1=&quot;-0.4202&quot; k2=&quot;0.3627&quot; k3=&quot;-0.3077&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.4463&quot; k2=&quot;0.4183&quot; k3=&quot;-0.3371&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;0.38&quot; k1=&quot;-0.3725&quot; k2=&quot;0.1437&quot; k3=&quot;-0.1122&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;0.76&quot; k1=&quot;-0.3534&quot; k2=&quot;0.0885&quot; k3=&quot;-0.0499&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;2.28&quot; k1=&quot;-0.3469&quot; k2=&quot;0.0622&quot; k3=&quot;-0.0204&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.3693&quot; k2=&quot;0.1071&quot; k3=&quot;-0.0375&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;0.38&quot; k1=&quot;-0.3763&quot; k2=&quot;0.1389&quot; k3=&quot;-0.0989&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;0.76&quot; k1=&quot;-0.3520&quot; k2=&quot;0.0708&quot; k3=&quot;-0.0269&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;2.28&quot; k1=&quot;-0.3454&quot; k2=&quot;0.0449&quot; k3=&quot;0.0024&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.3739&quot; k2=&quot;0.1023&quot; k3=&quot;-0.0228&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;0.38&quot; k1=&quot;-0.3844&quot; k2=&quot;0.1522&quot; k3=&quot;-0.1022&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;0.76&quot; k1=&quot;-0.3650&quot; k2=&quot;0.0943&quot; k3=&quot;-0.0365&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;2.28&quot; k1=&quot;-0.3567&quot; k2=&quot;0.0652&quot; k3=&quot;-0.0051&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.3848&quot; k2=&quot;0.1222&quot; k3=&quot;-0.0306&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;0.38&quot; k1=&quot;-0.3922&quot; k2=&quot;0.1655&quot; k3=&quot;-0.1072&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;0.76&quot; k1=&quot;-0.3759&quot; k2=&quot;0.1168&quot; k3=&quot;-0.0484&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;2.28&quot; k1=&quot;-0.3697&quot; k2=&quot;0.0921&quot; k3=&quot;-0.0199&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;70&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.3970&quot; k2=&quot;0.1468&quot; k3=&quot;-0.0434&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;

    &lt;lens&gt;
        &lt;maker&gt;Canon&lt;/maker&gt;
        &lt;model&gt;Canon EF 100mm f/2.8L Macro IS USM&lt;/model&gt;
        &lt;mount&gt;Canon EF&lt;/mount&gt;
        &lt;cropfactor&gt;1.0&lt;/cropfactor&gt;
        &lt;calibration&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;0.3&quot; k1=&quot;-0.0002&quot; k2=&quot;-0.4508&quot; k3=&quot;0.2333&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;0.34&quot; k1=&quot;0.0795&quot; k2=&quot;-0.8174&quot; k3=&quot;0.4748&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;0.39&quot; k1=&quot;0.0625&quot; k2=&quot;-0.8874&quot; k3=&quot;0.5263&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;0.48&quot; k1=&quot;0.0225&quot; k2=&quot;-1.1231&quot; k3=&quot;0.6901&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;0.6&quot; k1=&quot;-0.3172&quot; k2=&quot;-0.7844&quot; k3=&quot;0.5853&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;0.67&quot; k1=&quot;-0.5205&quot; k2=&quot;-0.4687&quot; k3=&quot;0.4329&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;1&quot; k1=&quot;-1.0262&quot; k2=&quot;0.4648&quot; k3=&quot;-0.0604&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;1.8&quot; k1=&quot;-1.0413&quot; k2=&quot;0.5233&quot; k3=&quot;-0.1089&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;3&quot; k1=&quot;-1.0667&quot; k2=&quot;0.5973&quot; k3=&quot;-0.1587&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;2.8&quot; distance=&quot;1000&quot; k1=&quot;-1.1275&quot; k2=&quot;0.7246&quot; k3=&quot;-0.2352&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;0.3&quot; k1=&quot;-0.1452&quot; k2=&quot;0.0476&quot; k3=&quot;-0.0319&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;0.34&quot; k1=&quot;-0.1060&quot; k2=&quot;0.0458&quot; k3=&quot;-0.1091&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;0.39&quot; k1=&quot;-0.0834&quot; k2=&quot;0.0032&quot; k3=&quot;-0.1104&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;0.48&quot; k1=&quot;0.0244&quot; k2=&quot;-0.3419&quot; k3=&quot;0.0847&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;0.6&quot; k1=&quot;0.0676&quot; k2=&quot;-0.5887&quot; k3=&quot;0.2536&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;0.67&quot; k1=&quot;0.0954&quot; k2=&quot;-0.7417&quot; k3=&quot;0.3603&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;1&quot; k1=&quot;0.0793&quot; k2=&quot;-0.8583&quot; k3=&quot;0.4247&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;1.8&quot; k1=&quot;0.1010&quot; k2=&quot;-0.8757&quot; k3=&quot;0.4206&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;3&quot; k1=&quot;0.1152&quot; k2=&quot;-0.8881&quot; k3=&quot;0.4203&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;4&quot; distance=&quot;1000&quot; k1=&quot;0.0673&quot; k2=&quot;-0.7994&quot; k3=&quot;0.3554&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;0.3&quot; k1=&quot;-0.1110&quot; k2=&quot;-0.0940&quot; k3=&quot;0.1128&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;0.34&quot; k1=&quot;-0.0898&quot; k2=&quot;-0.0923&quot; k3=&quot;0.1076&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;0.39&quot; k1=&quot;-0.0969&quot; k2=&quot;-0.0525&quot; k3=&quot;0.0724&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;0.48&quot; k1=&quot;-0.1200&quot; k2=&quot;0.0858&quot; k3=&quot;-0.0692&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;0.6&quot; k1=&quot;-0.1298&quot; k2=&quot;0.1438&quot; k3=&quot;-0.1464&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;0.67&quot; k1=&quot;-0.1189&quot; k2=&quot;0.1370&quot; k3=&quot;-0.1654&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;1&quot; k1=&quot;-0.0890&quot; k2=&quot;0.0591&quot; k3=&quot;-0.1504&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;1.8&quot; k1=&quot;-0.1159&quot; k2=&quot;0.1066&quot; k3=&quot;-0.1696&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;3&quot; k1=&quot;-0.1064&quot; k2=&quot;0.0935&quot; k3=&quot;-0.1578&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;5.6&quot; distance=&quot;1000&quot; k1=&quot;-0.1185&quot; k2=&quot;0.1091&quot; k3=&quot;-0.1672&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;0.3&quot; k1=&quot;-0.0940&quot; k2=&quot;-0.1372&quot; k3=&quot;0.1407&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;0.34&quot; k1=&quot;-0.0836&quot; k2=&quot;-0.1148&quot; k3=&quot;0.1271&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;0.39&quot; k1=&quot;-0.0781&quot; k2=&quot;-0.1110&quot; k3=&quot;0.1222&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;0.48&quot; k1=&quot;-0.0763&quot; k2=&quot;-0.0917&quot; k3=&quot;0.1068&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;0.6&quot; k1=&quot;-0.0697&quot; k2=&quot;-0.1049&quot; k3=&quot;0.1099&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;0.67&quot; k1=&quot;-0.0734&quot; k2=&quot;-0.0865&quot; k3=&quot;0.0988&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;1&quot; k1=&quot;-0.0829&quot; k2=&quot;-0.0550&quot; k3=&quot;0.0671&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;1.8&quot; k1=&quot;-0.0760&quot; k2=&quot;-0.0870&quot; k3=&quot;0.0920&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;3&quot; k1=&quot;-0.0716&quot; k2=&quot;-0.0875&quot; k3=&quot;0.0913&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;8&quot; distance=&quot;1000&quot; k1=&quot;-0.0873&quot; k2=&quot;-0.0683&quot; k3=&quot;0.0772&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;0.3&quot; k1=&quot;-0.0761&quot; k2=&quot;-0.1815&quot; k3=&quot;0.1691&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;0.34&quot; k1=&quot;-0.0802&quot; k2=&quot;-0.1254&quot; k3=&quot;0.1345&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;0.39&quot; k1=&quot;-0.0734&quot; k2=&quot;-0.1237&quot; k3=&quot;0.1320&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;0.48&quot; k1=&quot;-0.0753&quot; k2=&quot;-0.0946&quot; k3=&quot;0.1106&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;0.6&quot; k1=&quot;-0.0608&quot; k2=&quot;-0.1280&quot; k3=&quot;0.1278&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;0.67&quot; k1=&quot;-0.0778&quot; k2=&quot;-0.0796&quot; k3=&quot;0.0988&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1&quot; k1=&quot;-0.0699&quot; k2=&quot;-0.0925&quot; k3=&quot;0.1015&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1.8&quot; k1=&quot;-0.0620&quot; k2=&quot;-0.1220&quot; k3=&quot;0.1203&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;3&quot; k1=&quot;-0.0730&quot; k2=&quot;-0.0867&quot; k3=&quot;0.0956&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;11&quot; distance=&quot;1000&quot; k1=&quot;-0.0653&quot; k2=&quot;-0.1231&quot; k3=&quot;0.1199&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;0.3&quot; k1=&quot;-0.0634&quot; k2=&quot;-0.2145&quot; k3=&quot;0.1908&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;0.34&quot; k1=&quot;-0.0756&quot; k2=&quot;-0.1394&quot; k3=&quot;0.1439&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;0.39&quot; k1=&quot;-0.0723&quot; k2=&quot;-0.1244&quot; k3=&quot;0.1318&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;0.48&quot; k1=&quot;-0.0770&quot; k2=&quot;-0.0940&quot; k3=&quot;0.1114&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;0.6&quot; k1=&quot;-0.0569&quot; k2=&quot;-0.1368&quot; k3=&quot;0.1344&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;0.67&quot; k1=&quot;-0.0792&quot; k2=&quot;-0.0790&quot; k3=&quot;0.1008&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;1&quot; k1=&quot;-0.0695&quot; k2=&quot;-0.0939&quot; k3=&quot;0.1051&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;1.8&quot; k1=&quot;-0.0583&quot; k2=&quot;-0.1318&quot; k3=&quot;0.1280&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;3&quot; k1=&quot;-0.0720&quot; k2=&quot;-0.0909&quot; k3=&quot;0.1017&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;16&quot; distance=&quot;1000&quot; k1=&quot;-0.0616&quot; k2=&quot;-0.1313&quot; k3=&quot;0.1265&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;0.3&quot; k1=&quot;-0.0595&quot; k2=&quot;-0.2260&quot; k3=&quot;0.1986&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;0.34&quot; k1=&quot;-0.0769&quot; k2=&quot;-0.1386&quot; k3=&quot;0.1428&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;0.39&quot; k1=&quot;-0.0744&quot; k2=&quot;-0.1265&quot; k3=&quot;0.1359&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;0.48&quot; k1=&quot;-0.0777&quot; k2=&quot;-0.0953&quot; k3=&quot;0.1128&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;0.6&quot; k1=&quot;-0.0592&quot; k2=&quot;-0.1325&quot; k3=&quot;0.1321&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;0.67&quot; k1=&quot;-0.0834&quot; k2=&quot;-0.0716&quot; k3=&quot;0.0960&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;1&quot; k1=&quot;-0.0738&quot; k2=&quot;-0.0843&quot; k3=&quot;0.0994&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;1.8&quot; k1=&quot;-0.0566&quot; k2=&quot;-0.1367&quot; k3=&quot;0.1318&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;3&quot; k1=&quot;-0.0764&quot; k2=&quot;-0.0819&quot; k3=&quot;0.0970&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;22&quot; distance=&quot;1000&quot; k1=&quot;-0.0608&quot; k2=&quot;-0.1331&quot; k3=&quot;0.1287&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;0.3&quot; k1=&quot;-0.0592&quot; k2=&quot;-0.2309&quot; k3=&quot;0.2022&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;0.34&quot; k1=&quot;-0.0796&quot; k2=&quot;-0.1385&quot; k3=&quot;0.1436&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;0.39&quot; k1=&quot;-0.0793&quot; k2=&quot;-0.1215&quot; k3=&quot;0.1346&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;0.48&quot; k1=&quot;-0.0832&quot; k2=&quot;-0.0849&quot; k3=&quot;0.1060&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;0.6&quot; k1=&quot;-0.0612&quot; k2=&quot;-0.1322&quot; k3=&quot;0.1327&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;0.67&quot; k1=&quot;-0.0872&quot; k2=&quot;-0.0689&quot; k3=&quot;0.0967&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;1&quot; k1=&quot;-0.0783&quot; k2=&quot;-0.0774&quot; k3=&quot;0.0958&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;1.8&quot; k1=&quot;-0.0613&quot; k2=&quot;-0.1310&quot; k3=&quot;0.1301&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;3&quot; k1=&quot;-0.0837&quot; k2=&quot;-0.0681&quot; k3=&quot;0.0892&quot; /&gt;
            &lt;vignetting model=&quot;pa&quot; focal=&quot;100&quot; aperture=&quot;32&quot; distance=&quot;1000&quot; k1=&quot;-0.0687&quot; k2=&quot;-0.1199&quot; k3=&quot;0.1222&quot; /&gt;
        &lt;/calibration&gt;
    &lt;/lens&gt;
&lt;/lensdatabase&gt;
</code>
        <close_date>1387731617</close_date>
        <history id='14514'>
            <field_name>details</field_name>
            <old_value>Which camera model was used for the vignetting measurements?</old_value>
            <mod_by>2378</mod_by>
            <date>1387729571</date>
        </history>
        <history id='14515'>
            <field_name>details</field_name>
            <old_value>Canon EOS 5D Mark III</old_value>
            <mod_by>65071</mod_by>
            <date>1387730484</date>
        </history>
        <history id='14516'>
            <field_name>details</field_name>
            <old_value>And Canon EOS 550D for EF-S lens</old_value>
            <mod_by>65071</mod_by>
            <date>1387731480</date>
        </history>
        <history id='14517'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1387731617</date>
        </history>
        <history id='14518'>
            <field_name>details</field_name>
            <old_value>Alright.  Included now.</old_value>
            <mod_by>2378</mod_by>
            <date>1387731617</date>
        </history>
        <history id='14519'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1387731617</date>
        </history>
    </patch>
    <patch id='3536'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1387087468</open_date>
        <summary>Untested patch for bug #019078.</summary>
        <code>Index: libs/lensfun/cpuid.cpp
===================================================================
--- libs/lensfun/cpuid.cpp	(revision 380)
+++ libs/lensfun/cpuid.cpp	(working copy)
@@ -65,16 +65,16 @@
 #else
 #if defined (__i386__) || defined (__x86_64__)
 
-#if defined (__i386__)
+#ifdef __x86_64__
+#  define R_AX	&quot;rax&quot;
+#  define R_BX	&quot;rbx&quot;
+#  define R_CX	&quot;rcx&quot;
+#  define R_DX	&quot;rdx&quot;
+#else
 #  define R_AX	&quot;eax&quot;
 #  define R_BX	&quot;ebx&quot;
 #  define R_CX	&quot;ecx&quot;
 #  define R_DX	&quot;edx&quot;
-#elif defined (__x86_64__)
-#  define R_AX	&quot;rax&quot;
-#  define R_BX	&quot;rbx&quot;
-#  define R_CX	&quot;rcx&quot;
-#  define R_DX	&quot;rdx&quot;
 #endif
 
 // Borrowed from RawStudio
@@ -88,7 +88,11 @@
        : &quot;=a&quot; (ax), &quot;=c&quot; (cx),  &quot;=d&quot; (dx) \
        : &quot;0&quot; (cmd))
 
-    __SIZE_TYPE__ ax, cx, dx, tmp;
+#ifdef __x86_64__
+    guint64 ax, cx, dx, tmp;
+#else
+    guint32 ax, cx, dx, tmp;
+#endif
     static GStaticMutex lock = G_STATIC_MUTEX_INIT;
     static guint cpuflags = -1;
 
</code>
        <close_date>1388604819</close_date>
        <history id='14564'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388604819</date>
        </history>
        <history id='14565'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388604819</date>
        </history>
        <history id='14566'>
            <field_name>details</field_name>
            <old_value>Applied</old_value>
            <mod_by>36447</mod_by>
            <date>1388604819</date>
        </history>
        <history id='14567'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1388604819</date>
        </history>
    </patch>
    <patch id='3537'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1387393198</open_date>
        <summary>Fix handling of punctuation in fuzzy name matching</summary>
        <code>=== modified file 'libs/lensfun/auxfun.cpp'
*** libs/lensfun/auxfun.cpp	2013-11-28 20:19:44 +0000
--- libs/lensfun/auxfun.cpp	2013-12-18 18:57:56 +0000
***************
*** 509,518 ****
              while (*str &amp;&amp; !isspace (*str) &amp;&amp; !isdigit (*str) &amp;&amp; !ispunct (*str))
                  str++;
  
!         // Skip solitary symbols
!         if ((str - word == 1) &amp;&amp;
!             (*word == '/' || *word == '-' || *word == '(' || *word == ')' ||
!              tolower (*word) == 'f'))
              continue;
  
          gchar *item = g_utf8_casefold (word, str - word);
--- 509,519 ----
              while (*str &amp;&amp; !isspace (*str) &amp;&amp; !isdigit (*str) &amp;&amp; !ispunct (*str))
                  str++;
  
!         // Skip solitary symbols, including a single letter &quot;f&quot;, except for &quot;+&quot;
!         // and &quot;*&quot;, which sometimes occur in lens model names as important
!         // characters
!         if (str - word == 1 &amp;&amp; (ispunct (*word) || tolower (*word) == 'f')
!             &amp;&amp; *word != '*' &amp;&amp; *word != '+')
              continue;
  
          gchar *item = g_utf8_casefold (word, str - word);
</code>
        <close_date>1388844930</close_date>
        <history id='14513'>
            <field_name>details</field_name>
            <old_value>In particular, []:, should be discarded, too.  http://lensfun.berlios.de/calibration-tutorial/lens-calibration.html even claims that Lensfun does it.  But it doesn't currently.

* and + sometimes occur in Zeiss/Pentax names and may matter.  I skimmed through exiv2's lens names, and I think it is safe to discard the rest,</old_value>
            <mod_by>2378</mod_by>
            <date>1387394028</date>
        </history>
        <history id='14568'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388605322</date>
        </history>
        <history id='14569'>
            <field_name>details</field_name>
            <old_value>At least for pentax names discarding the * can lead to problems.  This sign is used for a certain series of high end lenses (DA* vs. DA series). Usually there should be no ambiguities as the lenses from the non DA* series also have other focal lengths and apertures. But anyway it is really part of the name and not just a formatting issue.

I am no expert for the Zeiss naming scheme regarding the usage of +.

But removing [] is fine, I agree. </old_value>
            <mod_by>36447</mod_by>
            <date>1388605322</date>
        </history>
        <history id='14570'>
            <field_name>details</field_name>
            <old_value>But the patch leaves &quot;*&quot; and &quot;+&quot; for the matching.</old_value>
            <mod_by>2378</mod_by>
            <date>1388614685</date>
        </history>
        <history id='14572'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388844930</date>
        </history>
        <history id='14573'>
            <field_name>details</field_name>
            <old_value>Ups sorry... I misunderstood your description of the patch. From the code it's obvious...</old_value>
            <mod_by>36447</mod_by>
            <date>1388844930</date>
        </history>
        <history id='14574'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1388844930</date>
        </history>
    </patch>
    <patch id='3535'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1386939952</open_date>
        <summary>Fix use of GTK mutexes</summary>
        <code>=== modified file 'libs/lensfun/cpuid.cpp'
*** libs/lensfun/cpuid.cpp	2012-05-22 09:55:37 +0000
--- libs/lensfun/cpuid.cpp	2013-12-13 13:03:57 +0000
***************
*** 11,20 ****
  #include &lt;intrin.h&gt;
  guint _lf_detect_cpu_features ()
  {
!     static GStaticMutex lock = G_STATIC_MUTEX_INIT;
      static guint cpuflags = -1;
  
!     g_static_mutex_lock (&amp;lock);
      if (cpuflags == (guint)-1)
      {
          cpuflags = 0;
--- 11,20 ----
  #include &lt;intrin.h&gt;
  guint _lf_detect_cpu_features ()
  {
!     static GMutex lock;
      static guint cpuflags = -1;
  
!     g_mutex_lock (&amp;lock);
      if (cpuflags == (guint)-1)
      {
          cpuflags = 0;
***************
*** 58,64 ****
              };
          };
      };
!     g_static_mutex_unlock (&amp;lock);
  
      return cpuflags;
  };
--- 58,64 ----
              };
          };
      };
!     g_mutex_unlock (&amp;lock);
  
      return cpuflags;
  };
***************
*** 89,98 ****
         : &quot;0&quot; (cmd))
  
      __SIZE_TYPE__ ax, cx, dx, tmp;
!     static GStaticMutex lock = G_STATIC_MUTEX_INIT;
      static guint cpuflags = -1;
  
!     g_static_mutex_lock (&amp;lock);
      if (cpuflags == (guint)-1)
      {
          cpuflags = 0;
--- 89,98 ----
         : &quot;0&quot; (cmd))
  
      __SIZE_TYPE__ ax, cx, dx, tmp;
!     static GMutex lock;
      static guint cpuflags = -1;
  
!     g_mutex_lock (&amp;lock);
      if (cpuflags == (guint)-1)
      {
          cpuflags = 0;
***************
*** 158,164 ****
              }
          }
      }
!     g_static_mutex_unlock (&amp;lock);
  
      return cpuflags;
  
--- 158,164 ----
              }
          }
      }
!     g_mutex_unlock (&amp;lock);
  
      return cpuflags;
  

</code>
        <close_date>1388604635</close_date>
        <history id='14511'>
            <field_name>details</field_name>
            <old_value>Please review this carefully.  I understand this mutex thing not fully.</old_value>
            <mod_by>2378</mod_by>
            <date>1386940216</date>
        </history>
        <history id='14512'>
            <field_name>details</field_name>
            <old_value>By the way, the motivation for this patch is that I get warnings on my system:

libs/lensfun/cpuid.cpp: In Funktion guint _lf_detect_cpu_features():
libs/lensfun/cpuid.cpp:95:5: Warnung: GMutex* g_static_mutex_get_mutex_impl(GStaticMutex*) ist veraltet (deklariert bei /usr/include/glib-2.0/glib/deprecated/gthread.h:149): Use 'GMutex' instead [-Wdeprecated-declarations]
libs/lensfun/cpuid.cpp:95:5: Warnung: GMutex* g_static_mutex_get_mutex_impl(GStaticMutex*) ist veraltet (deklariert bei /usr/include/glib-2.0/glib/deprecated/gthread.h:149): Use 'GMutex' instead [-Wdeprecated-declarations]
libs/lensfun/cpuid.cpp:161:5: Warnung: GMutex* g_static_mutex_get_mutex_impl(GStaticMutex*) ist veraltet (deklariert bei /usr/include/glib-2.0/glib/deprecated/gthread.h:149): Use 'GMutex' instead [-Wdeprecated-declarations]
libs/lensfun/cpuid.cpp:161:5: Warnung: GMutex* g_static_mutex_get_mutex_impl(GStaticMutex*) ist veraltet (deklariert bei /usr/include/glib-2.0/glib/deprecated/gthread.h:149): Use 'GMutex' instead [-Wdeprecated-declarations]
</old_value>
            <mod_by>2378</mod_by>
            <date>1386940282</date>
        </history>
        <history id='14539'>
            <field_name>details</field_name>
            <old_value>This patch seems correct to me.
</old_value>
            <mod_by>61570</mod_by>
            <date>1388590918</date>
        </history>
        <history id='14553'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388604300</date>
        </history>
        <history id='14554'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1388604300</date>
        </history>
        <history id='14555'>
            <field_name>details</field_name>
            <old_value>Thanks for your check nkbj, patch is applied now.</old_value>
            <mod_by>36447</mod_by>
            <date>1388604300</date>
        </history>
        <history id='14556'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1388604300</date>
        </history>
        <history id='14557'>
            <field_name>details</field_name>
            <old_value>Oh wait... shouldn't the same changes be made to the #ifdef MSC_VER section above?</old_value>
            <mod_by>36447</mod_by>
            <date>1388604520</date>
        </history>
        <history id='14558'>
            <field_name>close_date</field_name>
            <old_value>1388604300</old_value>
            <mod_by>36447</mod_by>
            <date>1388604520</date>
        </history>
        <history id='14559'>
            <field_name>patch_status_id</field_name>
            <old_value>102</old_value>
            <mod_by>36447</mod_by>
            <date>1388604525</date>
        </history>
        <history id='14560'>
            <field_name>details</field_name>
            <old_value>Oh wait... shouldn't the same changes be made to the #ifdef MSC_VER section above?</old_value>
            <mod_by>36447</mod_by>
            <date>1388604525</date>
        </history>
        <history id='14561'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1388604635</date>
        </history>
        <history id='14562'>
            <field_name>details</field_name>
            <old_value>Sorry... forget about it :) I confused the SVN revisions...</old_value>
            <mod_by>36447</mod_by>
            <date>1388604635</date>
        </history>
        <history id='14563'>
            <field_name>close_date</field_name>
            <old_value>1388604520</old_value>
            <mod_by>36447</mod_by>
            <date>1388604635</date>
        </history>
    </patch>
    <patch id='3544'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1389804586</open_date>
        <summary>Patch for bug #19254 (g_mutex).</summary>
        <code>Index: libs/lensfun/cpuid.cpp
===================================================================
--- libs/lensfun/cpuid.cpp	(revision 470)
+++ libs/lensfun/cpuid.cpp	(working copy)
@@ -11,10 +11,16 @@
 #include &lt;intrin.h&gt;
 guint _lf_detect_cpu_features ()
 {
+    static guint cpuflags = -1;
+#if defined(GLIB_CHECK_VERSION) &amp;&amp; GLIB_CHECK_VERSION(2,32,0)
     static GMutex lock;
-    static guint cpuflags = -1;
 
     g_mutex_lock (&amp;lock);
+#else
+    static GStaticMutex lock = G_STATIC_MUTEX_INIT;
+
+    g_static_mutex_lock (&amp;lock);
+#endif
     if (cpuflags == (guint)-1)
     {
         cpuflags = 0;
@@ -58,7 +64,11 @@
             };
         };
     };
+#if defined(GLIB_CHECK_VERSION) &amp;&amp; GLIB_CHECK_VERSION(2,32,0)
     g_mutex_unlock (&amp;lock);
+#else
+    g_static_mutex_unlock (&amp;lock);
+#endif
 
     return cpuflags;
 };
@@ -94,10 +104,16 @@
     guint32 ax, cx, dx, tmp;
 #endif
 
+    static guint cpuflags = -1;
+#if defined(GLIB_CHECK_VERSION) &amp;&amp; GLIB_CHECK_VERSION(2,32,0)
     static GMutex lock;
-    static guint cpuflags = -1;
 
     g_mutex_lock (&amp;lock);
+#else
+    static GStaticMutex lock = G_STATIC_MUTEX_INIT; 
+
+    g_static_mutex_lock (&amp;lock);
+#endif
     if (cpuflags == (guint)-1)
     {
         cpuflags = 0;
@@ -163,7 +179,11 @@
             }
         }
     }
+#if defined(GLIB_CHECK_VERSION) &amp;&amp; GLIB_CHECK_VERSION(2,32,0)
     g_mutex_unlock (&amp;lock);
+#else
+    g_static_mutex_unlock (&amp;lock);
+#endif
 
     return cpuflags;
 
</code>
        <close_date>1391363467</close_date>
        <history id='14591'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1391363467</date>
        </history>
        <history id='14592'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>36447</mod_by>
            <date>1391363467</date>
        </history>
        <history id='14593'>
            <field_name>details</field_name>
            <old_value>Thanks for the patch!</old_value>
            <mod_by>36447</mod_by>
            <date>1391363467</date>
        </history>
        <history id='14594'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1391363467</date>
        </history>
    </patch>
    <patch id='3545'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='61570' name='nkbj'/>
        <assigned_to id='2378' name='bronger'/>
        <open_date>1391259850</open_date>
        <summary>Add the new Olympus OM-D E-M10.</summary>
        <code>Index: data/db/mil-olympus.xml
===================================================================
--- data/db/mil-olympus.xml	(revision 476)
+++ data/db/mil-olympus.xml	(working copy)
@@ -119,6 +119,14 @@
         &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
     &lt;/camera&gt;
 
+    &lt;camera&gt;
+        &lt;maker&gt;Olympus Imaging Corp.&lt;/maker&gt;
+        &lt;maker lang=&quot;en&quot;&gt;Olympus&lt;/maker&gt;
+        &lt;model&gt;E-M10&lt;/model&gt;
+        &lt;mount&gt;Micro 4/3 System&lt;/mount&gt;
+        &lt;cropfactor&gt;2.0&lt;/cropfactor&gt;
+    &lt;/camera&gt;
+
     &lt;lens&gt;
         &lt;maker&gt;Olympus&lt;/maker&gt;
         &lt;model&gt;Olympus M.Zuiko Digital ED 12mm f/2.0&lt;/model&gt;
</code>
        <close_date>1391411889</close_date>
        <history id='14598'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1391411889</date>
        </history>
        <history id='14599'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1391411889</date>
        </history>
        <history id='14600'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1391411889</date>
        </history>
    </patch>
    <patch id='3542'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='2378' name='bronger'/>
        <assigned_to id='36447' name='da_seeb'/>
        <open_date>1389001632</open_date>
        <summary>Enforce new primary key for lenses</summary>
        <code>diff --git a/libs/lensfun/database.cpp b/libs/lensfun/database.cpp
index 5296774..82e1109 100644
--- a/libs/lensfun/database.cpp
+++ b/libs/lensfun/database.cpp
@@ -1263,8 +1263,7 @@ const lfLens **lfDatabase::FindLenses (const lfLens *lens, int sflags) const
                 for (size_t i = 0; i &lt; ret-&gt;len; i++)
                 {
                     const lfLens *previous_lens = static_cast&lt;lfLens *&gt; (g_ptr_array_index (ret, i));
-                    if (!_lf_strcmp (previous_lens-&gt;Maker, dblens-&gt;Maker) &amp;&amp;
-                        !_lf_strcmp (previous_lens-&gt;Model, dblens-&gt;Model))
+                    if (!_lf_lens_name_compare (previous_lens, dblens))
                     {
                         if (dblens-&gt;Score &gt; previous_lens-&gt;Score)
                             ret-&gt;pdata[i] = dblens;
diff --git a/libs/lensfun/lens.cpp b/libs/lensfun/lens.cpp
index 92898d3..871d45d 100644
--- a/libs/lensfun/lens.cpp
+++ b/libs/lensfun/lens.cpp
@@ -1146,15 +1146,7 @@ gint _lf_lens_compare (gconstpointer a, gconstpointer b)
             return cmp;
     }
 
-    cmp = _lf_lens_parameters_compare (i1, i2);
-    if (cmp != 0)
-        return cmp;
-
-    cmp = int ((i1-&gt;CropFactor - i2-&gt;CropFactor) * 100);
-    if (cmp != 0)
-        return cmp;
-
-    return int ((i1-&gt;AspectRatio - i2-&gt;AspectRatio) * 100);
+    return int ((i1-&gt;CropFactor - i2-&gt;CropFactor) * 100);
 }
 
 static int _lf_compare_num (float a, float b)
diff --git a/libs/lensfun/lensfunprv.h b/libs/lensfun/lensfunprv.h
index 4cb3136..54cd034 100644
--- a/libs/lensfun/lensfunprv.h
+++ b/libs/lensfun/lensfunprv.h
@@ -305,8 +305,7 @@ extern gint _lf_lens_name_compare (const lfLens *i1, const lfLens *i2);
  *
  * Since this function is used when reading the database, it effectively
  * enforces the primary key for lenses, which is the combination of the
- * attributes Maker, Model, all mounts, MinFocal, MaxFocal, MinAperture,
- * CropFactor and AspectRatio.
+ * attributes Maker, Model, all mounts, and CropFactor.
  * @param a
  *     A pointer to first lfLens object.
  * @param b
</code>
        <close_date>1392563524</close_date>
        <history id='14580'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1389020161</date>
        </history>
        <history id='14578'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1389001698</date>
        </history>
        <history id='14579'>
            <field_name>details</field_name>
            <old_value>This limits the primary key for lenses to maker, model, crop factor, and aspect ratio.  Removed are MinMax Focal/Aperature and the mounts.</old_value>
            <mod_by>2378</mod_by>
            <date>1389001698</date>
        </history>
        <history id='14581'>
            <field_name>details</field_name>
            <old_value>I had to remove also aspect ratio from the primary key because two calibration that only differ in the aspect ratio are equal for lensfun.  One should keep only the entry with the aspect ratio closer to one.</old_value>
            <mod_by>2378</mod_by>
            <date>1389020161</date>
        </history>
        <history id='14582'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1389434024</date>
        </history>
        <history id='14583'>
            <field_name>details</field_name>
            <old_value>I had to revise the patch because the mounts have to be taken into account due to the compact cameras.

So, the primary key for lenses is the combination of maker, model, all mounts, and cropfactor.</old_value>
            <mod_by>2378</mod_by>
            <date>1389434024</date>
        </history>
        <history id='14584'>
            <field_name>Patch Code</field_name>
            <old_value>Modified - New Version</old_value>
            <mod_by>2378</mod_by>
            <date>1389434946</date>
        </history>
        <history id='14602'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>36447</mod_by>
            <date>1392563524</date>
        </history>
        <history id='14603'>
            <field_name>details</field_name>
            <old_value>Patch is finally applied.</old_value>
            <mod_by>36447</mod_by>
            <date>1392563524</date>
        </history>
        <history id='14604'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>36447</mod_by>
            <date>1392563524</date>
        </history>
    </patch>
    <patch id='3562'>
        <group_id>9034</group_id>
        <status_id></status_id>
        <category_id></category_id>
        <submitted_by id='64837' name='mazhe'/>
        <assigned_to id='2378' name='bronger'/>
        <open_date>1395091055</open_date>
        <summary>Pentax D-FA 100mm F/2.8 Macro WR distortion parameters wrong</summary>
        <code>Index: data/db/slr-pentax.xml
===================================================================
--- data/db/slr-pentax.xml	(revision 505)
+++ data/db/slr-pentax.xml	(working copy)
@@ -785,7 +785,7 @@
         &lt;!-- Average crop factor of Pentax APS-C cameras --&gt;
         &lt;cropfactor&gt;1.53&lt;/cropfactor&gt;
         &lt;calibration&gt;
-            &lt;distortion model=&quot;ptlens&quot; focal=&quot;100&quot; a=&quot;0&quot; b=&quot;00484&quot; c=&quot;-0.01993&quot; /&gt;
+            &lt;distortion model=&quot;ptlens&quot; focal=&quot;100&quot; a=&quot;0.00355&quot; b=&quot;-0.01675&quot; c=&quot;0.02729&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;100&quot; br=&quot;0.0000044&quot; vr=&quot;0.9999354&quot; bb=&quot;-0.0000404&quot; vb=&quot;0.9997796&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;100&quot; br=&quot;0.0000051&quot; vr=&quot;0.9999355&quot; bb=&quot;-0.0000111&quot; vb=&quot;0.9997510&quot; /&gt;
             &lt;tca model=&quot;poly3&quot; focal=&quot;100&quot; br=&quot;0.0000135&quot; vr=&quot;0.9999237&quot; bb=&quot;0.0000050&quot; vb=&quot;0.9997609&quot; /&gt;

</code>
        <close_date>1395307923</close_date>
        <history id='14609'>
            <field_name>details</field_name>
            <old_value>The current profile was tested in darktable and produce obviously wrong results, here's an attempt of right distortion measurement from my copy. If needed, I can send the raw to the online resource site for future references.</old_value>
            <mod_by>64837</mod_by>
            <date>1395091158</date>
        </history>
        <history id='14610'>
            <field_name>patch_status_id</field_name>
            <old_value>1</old_value>
            <mod_by>2378</mod_by>
            <date>1395307923</date>
        </history>
        <history id='14611'>
            <field_name>assigned_to</field_name>
            <old_value>100</old_value>
            <mod_by>2378</mod_by>
            <date>1395307923</date>
        </history>
        <history id='14612'>
            <field_name>details</field_name>
            <old_value>Thank you for the correction.  The old data was obviously wrong, even without having looked at a picture.  I included your patch.  Please upload your RAW anyway when you have time.  Thank you!</old_value>
            <mod_by>2378</mod_by>
            <date>1395307923</date>
        </history>
        <history id='14613'>
            <field_name>close_date</field_name>
            <old_value>0</old_value>
            <mod_by>2378</mod_by>
            <date>1395307923</date>
        </history>
    </patch>
</patches>
